!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/irir-client/",t(t.s=202)}([function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}e.exports=n},function(e,t,n){"use strict";e.exports=n(209)},function(e,t,n){e.exports=n(267)()},function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=n(218);e.exports=r},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t,n){"use strict";function r(){return A||(A=(0,w.default)())}var i=n(133),o=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.sheetsManager=void 0;var a=o(n(4)),s=o(n(8)),l=o(n(9)),u=o(n(10)),c=o(n(11)),h=o(n(12)),d=o(n(3)),f=o(n(1)),p=o(n(2)),m=(o(n(13)),o(n(134))),v=(o(n(84)),o(n(58)),o(n(271))),g=n(127),y=i(n(135)),_=o(n(126)),b=o(n(136)),w=o(n(78)),x=o(n(82)),E=o(n(124)),S=o(n(273)),T=o(n(274)),M=(0,g.create)((0,_.default)()),k=(0,E.default)(),P=-1e11,C=new Map;t.sheetsManager=C;var A,O={},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var i=t.withTheme,o=void 0!==i&&i,g=t.flip,_=void 0===g?null:g,w=t.name,E=(0,d.default)(t,["withTheme","flip","name"]),A=(0,S.default)(e),I=A.themingEnabled||o||"string"===typeof w;P+=1,A.options.index=P;var R=function(e){function t(e,n){var i;(0,l.default)(this,t),i=(0,c.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i.disableStylesGeneration=!1,i.jss=null,i.sheetOptions=null,i.sheetsManager=C,i.stylesCreatorSaved=null,i.theme=null,i.unsubscribeId=null,i.state={},i.jss=i.context[y.jss]||M;var o=i.context.muiThemeProviderOptions;return o&&(o.sheetsManager&&(i.sheetsManager=o.sheetsManager),i.disableStylesGeneration=o.disableStylesGeneration),i.stylesCreatorSaved=A,i.sheetOptions=(0,s.default)({generateClassName:k},i.context[y.sheetOptions]),i.theme=I?x.default.initial(n)||r():O,i.attach(i.theme),i.cacheClasses={value:null,lastProp:null,lastJSS:{}},i}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this;I&&(this.unsubscribeId=x.default.subscribe(this.context,function(t){var n=e.theme;e.theme=t,e.attach(e.theme),e.setState({},function(){e.detach(n)})}))}},{key:"componentDidUpdate",value:function(){this.stylesCreatorSaved,0}},{key:"componentWillUnmount",value:function(){this.detach(this.theme),null!==this.unsubscribeId&&x.default.unsubscribe(this.context,this.unsubscribeId)}},{key:"getClasses",value:function(){var e=!1;if(!this.disableStylesGeneration){var t=this.sheetsManager.get(this.stylesCreatorSaved),r=t.get(this.theme);r.sheet.classes!==this.cacheClasses.lastJSS&&(this.cacheClasses.lastJSS=r.sheet.classes,e=!0)}return this.props.classes!==this.cacheClasses.lastProp&&(this.cacheClasses.lastProp=this.props.classes,e=!0),e&&(this.cacheClasses.value=(0,b.default)({baseClasses:this.cacheClasses.lastJSS,newClasses:this.props.classes,Component:n,noBase:this.disableStylesGeneration})),this.cacheClasses.value}},{key:"attach",value:function(e){if(!this.disableStylesGeneration){var t=this.stylesCreatorSaved,n=this.sheetsManager.get(t);n||(n=new Map,this.sheetsManager.set(t,n));var r=n.get(e);if(r||(r={refs:0,sheet:null},n.set(e,r)),0===r.refs){var i=t.create(e,w),o=w,a=this.jss.createStyleSheet(i,(0,s.default)({meta:o,classNamePrefix:o,flip:"boolean"===typeof _?_:"rtl"===e.direction,link:!1},this.sheetOptions,t.options,{name:w},E));r.sheet=a,a.attach();var l=this.context[y.sheetsRegistry];l&&l.add(a)}r.refs+=1}}},{key:"detach",value:function(e){if(!this.disableStylesGeneration){var t=this.stylesCreatorSaved,n=this.sheetsManager.get(t),r=n.get(e);if(r.refs-=1,0===r.refs){n.delete(e),this.jss.removeStyleSheet(r.sheet);var i=this.context[y.sheetsRegistry];i&&i.remove(r.sheet)}}}},{key:"render",value:function(){var e=this.props,t=(e.classes,e.innerRef),r=(0,d.default)(e,["classes","innerRef"]),i=(0,T.default)({theme:this.theme,name:w});return o&&(i.theme=this.theme),f.default.createElement(n,(0,a.default)({},i,{classes:this.getClasses(),ref:t},r))}}]),t}(f.default.Component);return R.propTypes={},R.contextTypes=(0,s.default)({muiThemeProviderOptions:p.default.object},v.default,I?x.default.contextTypes:{}),(0,m.default)(R,n),R}},R=I;t.default=R},function(e,t,n){var r,i;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)&&r.length){var a=n.apply(null,r);a&&e.push(a)}else if("object"===i)for(var s in r)o.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}var o={}.hasOwnProperty;"undefined"!==typeof e&&e.exports?(n.default=n,e.exports=n):(r=[],void 0!==(i=function(){return n}.apply(t,r))&&(e.exports=i))}()},function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=n},function(e,t,n){function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}var i=n(7);e.exports=r},function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.exports=n},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}e.exports=r},function(e,t,n){function r(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?o(e):t}var i=n(56),o=n(57);e.exports=r},function(e,t,n){function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}var i=n(266);e.exports=r},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e,t){var n=function(t){return o.default.createElement(s.default,t,e)};return n.displayName=t,n=(0,a.default)(n),n.muiName="SvgIcon",n}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(1)),a=i(n(49)),s=i(n(42)),l=r;t.default=l},function(e,t,n){"use strict";function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}function i(e,t){return Object.keys(t).every(function(n){return e.hasOwnProperty(n)&&e[n]===t[n]})}function o(e,t){for(var n=(0,u.default)(t),r=0;r<e.length;r+=1){if("function"===n&&!0===!!t(e[r],r,e))return r;if("object"===n&&i(e[r],t))return r;if(-1!==["string","number","boolean"].indexOf(n))return e.indexOf(t)}return-1}function a(e,t){var n=o(e,t);return n>-1?e[n]:void 0}function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}},function(){})}var l=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.capitalize=r,t.contains=i,t.findIndex=o,t.find=a,t.createChainedFunction=s;var u=l(n(56));l(n(13))},function(e,t,n){"use strict";function r(e){return"[object Array]"===S.call(e)}function i(e){return"[object ArrayBuffer]"===S.call(e)}function o(e){return"undefined"!==typeof FormData&&e instanceof FormData}function a(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function s(e){return"string"===typeof e}function l(e){return"number"===typeof e}function u(e){return"undefined"===typeof e}function c(e){return null!==e&&"object"===typeof e}function h(e){return"[object Date]"===S.call(e)}function d(e){return"[object File]"===S.call(e)}function f(e){return"[object Blob]"===S.call(e)}function p(e){return"[object Function]"===S.call(e)}function m(e){return c(e)&&p(e.pipe)}function v(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams}function g(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function y(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function _(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),r(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function b(){function e(e,n){"object"===typeof t[n]&&"object"===typeof e?t[n]=b(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;n<r;n++)_(arguments[n],e);return t}function w(e,t,n){return _(t,function(t,r){e[r]=n&&"function"===typeof t?x(t,n):t}),e}var x=n(160),E=n(394),S=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:i,isBuffer:E,isFormData:o,isArrayBufferView:a,isString:s,isNumber:l,isObject:c,isUndefined:u,isDate:h,isFile:d,isBlob:f,isFunction:p,isStream:m,isURLSearchParams:v,isStandardBrowserEnv:y,forEach:_,merge:b,extend:w,trim:g}},function(e,t,n){"use strict";function r(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}r(),e.exports=n(210)},function(e,t,n){"use strict";function r(){}function i(e,t){this.x=e||0,this.y=t||0}function o(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function a(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function s(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function l(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function u(e,t,n,r,o,a,s,c,h,d){Object.defineProperty(this,"id",{value:Fs++}),this.uuid=Ns.generateUUID(),this.name="",this.image=void 0!==e?e:u.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:u.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Ma,this.wrapT=void 0!==r?r:Ma,this.magFilter=void 0!==o?o:Oa,this.minFilter=void 0!==a?a:Ra,this.anisotropy=void 0!==h?h:1,this.format=void 0!==s?s:Ya,this.type=void 0!==c?c:La,this.offset=new i(0,0),this.repeat=new i(1,1),this.center=new i(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new l,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==d?d:ks,this.version=0,this.onUpdate=null}function c(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function h(e,t,n){this.width=e,this.height=t,this.scissor=new c(0,0,e,t),this.scissorTest=!1,this.viewport=new c(0,0,e,t),n=n||{},void 0===n.minFilter&&(n.minFilter=Oa),this.texture=new u(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function d(e,t,n){h.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function f(e,t,n,r,i,o,a,s,l,c,h,d){u.call(this,null,o,a,s,l,c,r,i,h,d),this.image={data:e,width:t,height:n},this.magFilter=void 0!==l?l:Pa,this.minFilter=void 0!==c?c:Pa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function p(e,t){this.min=void 0!==e?e:new s(1/0,1/0,1/0),this.max=void 0!==t?t:new s(-1/0,-1/0,-1/0)}function m(e,t){this.center=void 0!==e?e:new s,this.radius=void 0!==t?t:0}function v(e,t){this.normal=void 0!==e?e:new s(1,0,0),this.constant=void 0!==t?t:0}function g(e,t,n,r,i,o){this.planes=[void 0!==e?e:new v,void 0!==t?t:new v,void 0!==n?n:new v,void 0!==r?r:new v,void 0!==i?i:new v,void 0!==o?o:new v]}function y(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function _(e){function t(t,n){var r=t.array,i=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback();var a=e.FLOAT;return r instanceof Float32Array?a=e.FLOAT:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=e.UNSIGNED_SHORT:r instanceof Int16Array?a=e.SHORT:r instanceof Uint32Array?a=e.UNSIGNED_INT:r instanceof Int32Array?a=e.INT:r instanceof Int8Array?a=e.BYTE:r instanceof Uint8Array&&(a=e.UNSIGNED_BYTE),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}function n(t,n,r){var i=n.array,o=n.updateRange;e.bindBuffer(r,t),!1===n.dynamic?e.bufferData(r,i,e.STATIC_DRAW):-1===o.count?e.bufferSubData(r,0,i):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}function r(e){return e.isInterleavedBufferAttribute&&(e=e.data),a.get(e)}function i(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=a.get(t);n&&(e.deleteBuffer(n.buffer),a.delete(t))}function o(e,r){e.isInterleavedBufferAttribute&&(e=e.data);var i=a.get(e);void 0===i?a.set(e,t(e,r)):i.version<e.version&&(n(i.buffer,e,r),i.version=e.version)}var a=new WeakMap;return{get:r,remove:i,update:o}}function b(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||b.DefaultOrder}function w(){this.mask=1}function x(){function e(){i.setFromEuler(r,!1)}function t(){r.setFromQuaternion(i,void 0,!1)}Object.defineProperty(this,"id",{value:Vs++}),this.uuid=Ns.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=x.DefaultUp.clone();var n=new s,r=new b,i=new a,u=new s(1,1,1);r.onChange(e),i.onChange(t),Object.defineProperties(this,{position:{enumerable:!0,value:n},rotation:{enumerable:!0,value:r},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:u},modelViewMatrix:{value:new o},normalMatrix:{value:new l}}),this.matrix=new o,this.matrixWorld=new o,this.matrixAutoUpdate=x.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new w,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function E(){x.call(this),this.type="Camera",this.matrixWorldInverse=new o,this.projectionMatrix=new o}function S(e,t,n,r,i,o){E.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function T(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new s,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new y,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}function M(){Object.defineProperty(this,"id",{value:Gs+=2}),this.uuid=Ns.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function k(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function P(e,t,n){k.call(this,new Int8Array(e),t,n)}function C(e,t,n){k.call(this,new Uint8Array(e),t,n)}function A(e,t,n){k.call(this,new Uint8ClampedArray(e),t,n)}function O(e,t,n){k.call(this,new Int16Array(e),t,n)}function I(e,t,n){k.call(this,new Uint16Array(e),t,n)}function R(e,t,n){k.call(this,new Int32Array(e),t,n)}function L(e,t,n){k.call(this,new Uint32Array(e),t,n)}function D(e,t,n){k.call(this,new Float32Array(e),t,n)}function N(e,t,n){k.call(this,new Float64Array(e),t,n)}function F(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function U(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}function z(){Object.defineProperty(this,"id",{value:Ws+=2}),this.uuid=Ns.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function B(e,t,n,r,i,o){M.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new j(e,t,n,r,i,o)),this.mergeVertices()}function j(e,t,n,r,i,o){function a(e,t,n,r,i,o,a,m,v,g,y){var _,b,w=o/v,x=a/g,E=o/2,S=a/2,T=m/2,M=v+1,k=g+1,P=0,C=0,A=new s;for(b=0;b<k;b++){var O=b*x-S;for(_=0;_<M;_++){var I=_*w-E;A[e]=I*r,A[t]=O*i,A[n]=T,c.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=m>0?1:-1,h.push(A.x,A.y,A.z),d.push(_/v),d.push(1-b/g),P+=1}}for(b=0;b<g;b++)for(_=0;_<v;_++){var R=f+_+M*b,L=f+_+M*(b+1),D=f+(_+1)+M*(b+1),N=f+(_+1)+M*b;u.push(R,L,N),u.push(L,D,N),C+=6}l.addGroup(p,C,y),p+=C,f+=P}z.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var l=this;e=e||1,t=t||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var u=[],c=[],h=[],d=[],f=0,p=0;a("z","y","x",-1,-1,n,t,e,o,i,0),a("z","y","x",1,-1,n,t,-e,o,i,1),a("x","z","y",1,1,e,n,t,r,o,2),a("x","z","y",1,-1,e,n,-t,r,o,3),a("x","y","z",1,-1,e,t,n,r,i,4),a("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(u),this.addAttribute("position",new D(c,3)),this.addAttribute("normal",new D(h,3)),this.addAttribute("uv",new D(d,2))}function H(e,t,n,r){M.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new V(e,t,n,r)),this.mergeVertices()}function V(e,t,n,r){z.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},e=e||1,t=t||1;var i,o,a=e/2,s=t/2,l=Math.floor(n)||1,u=Math.floor(r)||1,c=l+1,h=u+1,d=e/l,f=t/u,p=[],m=[],v=[],g=[];for(o=0;o<h;o++){var y=o*f-s;for(i=0;i<c;i++){var _=i*d-a;m.push(_,-y,0),v.push(0,0,1),g.push(i/l),g.push(1-o/u)}}for(o=0;o<u;o++)for(i=0;i<l;i++){var b=i+c*o,w=i+c*(o+1),x=i+1+c*(o+1),E=i+1+c*o;p.push(b,w,E),p.push(w,x,E)}this.setIndex(p),this.addAttribute("position",new D(m,3)),this.addAttribute("normal",new D(v,3)),this.addAttribute("uv",new D(g,2))}function G(){Object.defineProperty(this,"id",{value:qs++}),this.uuid=Ns.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Do,this.side=Po,this.flatShading=!1,this.vertexColors=Oo,this.opacity=1,this.transparent=!1,this.blendSrc=Zo,this.blendDst=Jo,this.blendEquation=Bo,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=oa,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function W(e){G.call(this),this.type="MeshBasicMaterial",this.color=new y(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ca,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function q(e){G.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function X(e,t){this.origin=void 0!==e?e:new s,this.direction=void 0!==t?t:new s}function Y(e,t){this.start=void 0!==e?e:new s,this.end=void 0!==t?t:new s}function Z(e,t,n){this.a=void 0!==e?e:new s,this.b=void 0!==t?t:new s,this.c=void 0!==n?n:new s}function J(e,t){x.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new z,this.material=void 0!==t?t:new W({color:16777215*Math.random()}),this.drawMode=Ss,this.updateMorphTargets()}function K(e,t,n,r){function i(t,r,i,h){var d=r.background;null===d?o(u,c):d&&d.isColor&&(o(d,1),h=!0),(e.autoClear||h)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),d&&d.isCubeTexture?(void 0===l&&(l=new J(new j(1,1,1),new q({uniforms:Hs.cube.uniforms,vertexShader:Hs.cube.vertexShader,fragmentShader:Hs.cube.fragmentShader,side:Co,depthTest:!0,depthWrite:!1,fog:!1})),l.geometry.removeAttribute("normal"),l.geometry.removeAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(l.geometry)),l.material.uniforms.tCube.value=d,t.push(l,l.geometry,l.material,0,null)):d&&d.isTexture&&(void 0===a&&(a=new S(-1,1,1,-1,0,1),s=new J(new V(2,2),new W({depthTest:!1,depthWrite:!1,fog:!1})),n.update(s.geometry)),s.material.map=d,e.renderBufferDirect(a,null,s.geometry,s.material,s,null))}function o(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}var a,s,l,u=new y(0),c=0;return{getClearColor:function(){return u},setClearColor:function(e,t){u.set(e),c=void 0!==t?t:1,o(u,c)},getClearAlpha:function(){return c},setClearAlpha:function(e){c=e,o(u,c)},render:i}}function Q(e,t,n){function r(e){a=e}function i(t,r){e.drawArrays(a,t,r),n.update(r,a)}function o(e,r,i){var o=t.get("ANGLE_instanced_arrays");if(null===o)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var s=e.attributes.position;s.isInterleavedBufferAttribute?(i=s.data.count,o.drawArraysInstancedANGLE(a,0,i,e.maxInstancedCount)):o.drawArraysInstancedANGLE(a,r,i,e.maxInstancedCount),n.update(i,a,e.maxInstancedCount)}var a;this.setMode=r,this.render=i,this.renderInstances=o}function $(e,t,n){function r(){if(void 0!==o)return o;var n=t.get("EXT_texture_filter_anisotropic");return o=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var l=!0===n.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),c=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),d=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),m=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),g=c>0,y=!!t.get("OES_texture_float");return{getMaxAnisotropy:r,getMaxPrecision:i,precision:a,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y}}function ee(){function e(){c.value!==r&&(c.value=r,c.needsUpdate=i>0),n.numPlanes=i,n.numIntersection=0}function t(e,t,r,i){var o=null!==e?e.length:0,a=null;if(0!==o){if(a=c.value,!0!==i||null===a){var l=r+4*o,h=t.matrixWorldInverse;u.getNormalMatrix(h),(null===a||a.length<l)&&(a=new Float32Array(l));for(var d=0,f=r;d!==o;++d,f+=4)s.copy(e[d]).applyMatrix4(h,u),s.normal.toArray(a,f),a[f+3]=s.constant}c.value=a,c.needsUpdate=!0}return n.numPlanes=o,a}var n=this,r=null,i=0,o=!1,a=!1,s=new v,u=new l,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(e,n,a){var s=0!==e.length||n||0!==i||o;return o=n,r=t(e,a,0),i=e.length,s},this.beginShadows=function(){a=!0,t(null)},this.endShadows=function(){a=!1,e()},this.setState=function(n,s,l,u,h,d){if(!o||null===n||0===n.length||a&&!l)a?t(null):e();else{var f=a?0:i,p=4*f,m=h.clippingState||null;c.value=m,m=t(n,u,p,d);for(var v=0;v!==p;++v)m[v]=r[v];h.clippingState=m,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=f}}}function te(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function ne(e,t,n){function r(e){var i=e.target,o=s[i.id];null!==o.index&&t.remove(o.index);for(var a in o.attributes)t.remove(o.attributes[a]);i.removeEventListener("dispose",r),delete s[i.id];var u=l[i.id];u&&(t.remove(u),delete l[i.id]),u=l[o.id],u&&(t.remove(u),delete l[o.id]),n.memory.geometries--}function i(e,t){var i=s[t.id];return i||(t.addEventListener("dispose",r),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new z).setFromObject(e)),i=t._bufferGeometry),s[t.id]=i,n.memory.geometries++,i)}function o(n){var r=n.index,i=n.attributes;null!==r&&t.update(r,e.ELEMENT_ARRAY_BUFFER);for(var o in i)t.update(i[o],e.ARRAY_BUFFER);var a=n.morphAttributes;for(var o in a)for(var s=a[o],l=0,u=s.length;l<u;l++)t.update(s[l],e.ARRAY_BUFFER)}function a(n){var r=l[n.id];if(r)return r;var i=[],o=n.index,a=n.attributes;if(null!==o)for(var s=o.array,u=0,c=s.length;u<c;u+=3){var h=s[u+0],d=s[u+1],f=s[u+2];i.push(h,d,d,f,f,h)}else for(var s=a.position.array,u=0,c=s.length/3-1;u<c;u+=3){var h=u+0,d=u+1,f=u+2;i.push(h,d,d,f,f,h)}return r=new(U(i)>65535?L:I)(i,1),t.update(r,e.ELEMENT_ARRAY_BUFFER),l[n.id]=r,r}var s={},l={};return{get:i,update:o,getWireframeAttribute:a}}function re(e,t,n){function r(e){s=e}function i(e){l=e.type,u=e.bytesPerElement}function o(t,r){e.drawElements(s,r,l,t*u),n.update(r,s)}function a(e,r,i){var o=t.get("ANGLE_instanced_arrays");if(null===o)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");o.drawElementsInstancedANGLE(s,i,l,r*u,e.maxInstancedCount),n.update(i,s,e.maxInstancedCount)}var s,l,u;this.setMode=r,this.setIndex=i,this.render=o,this.renderInstances=a}function ie(e){function t(t,n,r){switch(r=r||1,i.calls++,n){case e.TRIANGLES:i.triangles+=r*(t/3);break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:i.triangles+=r*(t-2);break;case e.LINES:i.lines+=r*(t/2);break;case e.LINE_STRIP:i.lines+=r*(t-1);break;case e.LINE_LOOP:i.lines+=r*t;break;case e.POINTS:i.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}function n(){i.frame++,i.calls=0,i.triangles=0,i.points=0,i.lines=0}var r={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:r,render:i,programs:null,autoReset:!0,reset:n,update:t}}function oe(e,t){return Math.abs(t[1])-Math.abs(e[1])}function ae(e){function t(t,i,o,a){var s=t.morphTargetInfluences,l=s.length,u=n[i.id];if(void 0===u){u=[];for(var c=0;c<l;c++)u[c]=[c,0];n[i.id]=u}for(var h=o.morphTargets&&i.morphAttributes.position,d=o.morphNormals&&i.morphAttributes.normal,c=0;c<l;c++){var f=u[c];0!==f[1]&&(h&&i.removeAttribute("morphTarget"+c),d&&i.removeAttribute("morphNormal"+c))}for(var c=0;c<l;c++){var f=u[c];f[0]=c,f[1]=s[c]}u.sort(oe);for(var c=0;c<8;c++){var f=u[c];if(f){var p=f[0],m=f[1];if(m){h&&i.addAttribute("morphTarget"+c,h[p]),d&&i.addAttribute("morphNormal"+c,d[p]),r[c]=m;continue}}r[c]=0}a.getUniforms().setValue(e,"morphTargetInfluences",r)}var n={},r=new Float32Array(8);return{update:t}}function se(e,t){function n(n){var r=t.render.frame,o=n.geometry,a=e.get(n,o);return i[a.id]!==r&&(o.isGeometry&&a.updateFromObject(n),e.update(a),i[a.id]=r),a}function r(){i={}}var i={};return{update:n,dispose:r}}function le(e,t,n,r,i,o,a,s,l,c){e=void 0!==e?e:[],t=void 0!==t?t:ya,u.call(this,e,t,n,r,i,o,a,s,l,c),this.flipY=!1}function ue(){this.seq=[],this.map={}}function ce(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=Zs[i];if(void 0===o&&(o=new Float32Array(i),Zs[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function he(e,t){var n=Js[t];void 0===n&&(n=new Int32Array(t),Js[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function de(e,t){e.uniform1f(this.addr,t)}function fe(e,t){e.uniform1i(this.addr,t)}function pe(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function me(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function ve(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function ge(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function ye(e,t){void 0===t.elements?e.uniformMatrix3fv(this.addr,!1,t):(Qs.set(t.elements),e.uniformMatrix3fv(this.addr,!1,Qs))}function _e(e,t){void 0===t.elements?e.uniformMatrix4fv(this.addr,!1,t):(Ks.set(t.elements),e.uniformMatrix4fv(this.addr,!1,Ks))}function be(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTexture2D(t||Xs,r)}function we(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTextureCube(t||Ys,r)}function xe(e,t){e.uniform2iv(this.addr,t)}function Ee(e,t){e.uniform3iv(this.addr,t)}function Se(e,t){e.uniform4iv(this.addr,t)}function Te(e){switch(e){case 5126:return de;case 35664:return pe;case 35665:return me;case 35666:return ve;case 35674:return ge;case 35675:return ye;case 35676:return _e;case 35678:case 36198:return be;case 35680:return we;case 5124:case 35670:return fe;case 35667:case 35671:return xe;case 35668:case 35672:return Ee;case 35669:case 35673:return Se}}function Me(e,t){e.uniform1fv(this.addr,t)}function ke(e,t){e.uniform1iv(this.addr,t)}function Pe(e,t){e.uniform2fv(this.addr,ce(t,this.size,2))}function Ce(e,t){e.uniform3fv(this.addr,ce(t,this.size,3))}function Ae(e,t){e.uniform4fv(this.addr,ce(t,this.size,4))}function Oe(e,t){e.uniformMatrix2fv(this.addr,!1,ce(t,this.size,4))}function Ie(e,t){e.uniformMatrix3fv(this.addr,!1,ce(t,this.size,9))}function Re(e,t){e.uniformMatrix4fv(this.addr,!1,ce(t,this.size,16))}function Le(e,t,n){var r=t.length,i=he(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTexture2D(t[o]||Xs,i[o])}function De(e,t,n){var r=t.length,i=he(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTextureCube(t[o]||Ys,i[o])}function Ne(e){switch(e){case 5126:return Me;case 35664:return Pe;case 35665:return Ce;case 35666:return Ae;case 35674:return Oe;case 35675:return Ie;case 35676:return Re;case 35678:return Le;case 35680:return De;case 5124:case 35670:return ke;case 35667:case 35671:return xe;case 35668:case 35672:return Ee;case 35669:case 35673:return Se}}function Fe(e,t,n){this.id=e,this.addr=n,this.setValue=Te(t.type)}function Ue(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=Ne(t.type)}function ze(e){this.id=e,ue.call(this)}function Be(e,t){e.seq.push(t),e.map[t.id]=t}function je(e,t,n){var r=e.name,i=r.length;for($s.lastIndex=0;;){var o=$s.exec(r),a=$s.lastIndex,s=o[1],l="]"===o[2],u=o[3];if(l&&(s|=0),void 0===u||"["===u&&a+2===i){Be(n,void 0===u?new Fe(s,e,t):new Ue(s,e,t));break}var c=n.map,h=c[s];void 0===h&&(h=new ze(s),Be(n,h)),n=h}}function He(e,t,n){ue.call(this),this.renderer=n;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;++i){var o=e.getActiveUniform(t,i);je(o,e.getUniformLocation(t,o.name),this)}}function Ve(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}function Ge(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),!1===e.getShaderParameter(r,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),Ve(n)),r}function We(e){switch(e){case ks:return["Linear","( value )"];case Ps:return["sRGB","( value )"];case As:return["RGBE","( value )"];case Os:return["RGBM","( value, 7.0 )"];case Is:return["RGBM","( value, 16.0 )"];case Rs:return["RGBD","( value, 256.0 )"];case Cs:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function qe(e,t){var n=We(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Xe(e,t){var n=We(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Ye(e,t){var n;switch(t){case pa:n="Linear";break;case ma:n="Reinhard";break;case va:n="Uncharted2";break;case ga:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Ze(e,t,n){return e=e||{},[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Qe).join("\n")}function Je(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}function Ke(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=e.getActiveAttrib(t,i),a=o.name;n[a]=e.getAttribLocation(t,a)}return n}function Qe(e){return""!==e}function $e(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function et(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function tt(e){function t(e,t){var n=Us[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return tt(n)}var n=/^[ \t]*#include +<([\w\d.]+)>/gm;return e.replace(n,t)}function nt(e){function t(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i}var n=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return e.replace(n,t)}function rt(e,t,n,r,i,o){var a=e.context,s=r.defines,l=i.vertexShader,u=i.fragmentShader,c="SHADOWMAP_TYPE_BASIC";o.shadowMapType===Mo?c="SHADOWMAP_TYPE_PCF":o.shadowMapType===ko&&(c="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case ya:case _a:h="ENVMAP_TYPE_CUBE";break;case Ea:case Sa:h="ENVMAP_TYPE_CUBE_UV";break;case ba:case wa:h="ENVMAP_TYPE_EQUIREC";break;case xa:h="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case _a:case wa:d="ENVMAP_MODE_REFRACTION"}switch(r.combine){case ca:f="ENVMAP_BLENDING_MULTIPLY";break;case ha:f="ENVMAP_BLENDING_MIX";break;case da:f="ENVMAP_BLENDING_ADD"}}var p,m,v=e.gammaFactor>0?e.gammaFactor:1,g=Ze(r.extensions,o,t),y=Je(s),_=a.createProgram();r.isRawShaderMaterial?(p=[y].filter(Qe).join("\n"),p.length>0&&(p+="\n"),m=[g,y].filter(Qe).join("\n"),m.length>0&&(m+="\n")):(p=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,y,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+v,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+c:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Qe).join("\n"),m=[g,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,y,o.alphaTest?"#define ALPHATEST "+o.alphaTest:"","#define GAMMA_FACTOR "+v,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+h:"",o.envMap?"#define "+d:"",o.envMap?"#define "+f:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+c:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==fa?"#define TONE_MAPPING":"",o.toneMapping!==fa?Us.tonemapping_pars_fragment:"",o.toneMapping!==fa?Ye("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?Us.encodings_pars_fragment:"",o.mapEncoding?qe("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?qe("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?qe("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?Xe("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Qe).join("\n")),l=tt(l),l=$e(l,o),l=et(l,o),u=tt(u),u=$e(u,o),u=et(u,o),l=nt(l),u=nt(u);var b=p+l,w=m+u,x=Ge(a,a.VERTEX_SHADER,b),E=Ge(a,a.FRAGMENT_SHADER,w);a.attachShader(_,x),a.attachShader(_,E),void 0!==r.index0AttributeName?a.bindAttribLocation(_,0,r.index0AttributeName):!0===o.morphTargets&&a.bindAttribLocation(_,0,"position"),a.linkProgram(_);var S=a.getProgramInfoLog(_).trim(),T=a.getShaderInfoLog(x).trim(),M=a.getShaderInfoLog(E).trim(),k=!0,P=!0;!1===a.getProgramParameter(_,a.LINK_STATUS)?(k=!1,console.error("THREE.WebGLProgram: shader error: ",a.getError(),"gl.VALIDATE_STATUS",a.getProgramParameter(_,a.VALIDATE_STATUS),"gl.getProgramInfoLog",S,T,M)):""!==S?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",S):""!==T&&""!==M||(P=!1),P&&(this.diagnostics={runnable:k,material:r,programLog:S,vertexShader:{log:T,prefix:p},fragmentShader:{log:M,prefix:m}}),a.deleteShader(x),a.deleteShader(E);var C;this.getUniforms=function(){return void 0===C&&(C=new He(a,_,e)),C};var A;return this.getAttributes=function(){return void 0===A&&(A=Ke(a,_)),A},this.destroy=function(){a.deleteProgram(_),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=i.name,this.id=el++,this.code=n,this.usedTimes=1,this.program=_,this.vertexShader=x,this.fragmentShader=E,this}function it(e,t,n){function r(e){var t=e.skeleton,r=t.bones;if(n.floatVertexTextures)return 1024;var i=n.maxVertexUniforms,o=Math.floor((i-20)/4),a=Math.min(o,r.length);return a<r.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+r.length+" bones. This GPU supports "+a+"."),0):a}function i(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=ks,n===ks&&t&&(n=Cs),n}var o=[],a={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},s=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(t,o,s,l,u,c,h){var d=a[t.type],f=h.isSkinnedMesh?r(h):0,p=n.precision;null!==t.precision&&(p=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",p,"instead.");var m=e.getRenderTarget();return{shaderID:d,precision:p,supportsVertexTextures:n.vertexTextures,outputEncoding:i(m?m.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:i(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:i(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===Ea||t.envMap.mapping===Sa),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:i(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!l,useFog:t.fog,fogExp:l&&l.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&f>0,maxBones:f,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numClippingPlanes:u,numClipIntersection:c,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.receiveShadow&&s.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===Ao,flipSided:t.side===Co,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)r.push(i),r.push(t.defines[i]);for(var o=0;o<s.length;o++)r.push(n[s[o]]);return r.push(t.onBeforeCompile.toString()),r.push(e.gammaOutput),r.join()},this.acquireProgram=function(n,r,i,a){for(var s,l=0,u=o.length;l<u;l++){var c=o[l];if(c.code===a){s=c,++s.usedTimes;break}}return void 0===s&&(s=new rt(e,t,a,n,r,i),o.push(s)),s},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=o.indexOf(e);o[t]=o[o.length-1],o.pop(),e.destroy()}},this.programs=o}function ot(){function e(e){var t=i.get(e);return void 0===t&&(t={},i.set(e,t)),t}function t(e){i.delete(e)}function n(e,t,n){i.get(e)[t]=n}function r(){i=new WeakMap}var i=new WeakMap;return{get:e,remove:t,update:n,dispose:r}}function at(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function st(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function lt(){function e(){i=0,o.length=0,a.length=0}function t(e,t,n,s,l){var u=r[i];void 0===u?(u={id:e.id,object:e,geometry:t,material:n,program:n.program,renderOrder:e.renderOrder,z:s,group:l},r[i]=u):(u.id=e.id,u.object=e,u.geometry=t,u.material=n,u.program=n.program,u.renderOrder=e.renderOrder,u.z=s,u.group=l),(!0===n.transparent?a:o).push(u),i++}function n(){o.length>1&&o.sort(at),a.length>1&&a.sort(st)}var r=[],i=0,o=[],a=[];return{opaque:o,transparent:a,init:e,push:t,sort:n}}function ut(){function e(e,t){var r=e.id+","+t.id,i=n[r];return void 0===i&&(i=new lt,n[r]=i),i}function t(){n={}}var n={};return{get:e,dispose:t}}function ct(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new s,color:new y,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"SpotLight":n={position:new s,direction:new s,color:new y,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"PointLight":n={position:new s,color:new y,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new s,skyColor:new y,groundColor:new y};break;case"RectAreaLight":n={color:new y,position:new s,halfWidth:new s,halfHeight:new s}}return e[t.id]=n,n}}}function ht(){function e(e,o,s){for(var l=0,u=0,c=0,h=0,d=0,f=0,p=0,m=0,v=s.matrixWorldInverse,g=0,y=e.length;g<y;g++){var _=e[g],b=_.color,w=_.intensity,x=_.distance,E=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)l+=b.r*w,u+=b.g*w,c+=b.b*w;else if(_.isDirectionalLight){var S=t.get(_);if(S.color.copy(_.color).multiplyScalar(_.intensity),S.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(v),S.shadow=_.castShadow,_.castShadow){var T=_.shadow;S.shadowBias=T.bias,S.shadowRadius=T.radius,S.shadowMapSize=T.mapSize}n.directionalShadowMap[h]=E,n.directionalShadowMatrix[h]=_.shadow.matrix,n.directional[h]=S,h++}else if(_.isSpotLight){var S=t.get(_);if(S.position.setFromMatrixPosition(_.matrixWorld),S.position.applyMatrix4(v),S.color.copy(b).multiplyScalar(w),S.distance=x,S.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(v),S.coneCos=Math.cos(_.angle),S.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),S.decay=0===_.distance?0:_.decay,S.shadow=_.castShadow,_.castShadow){var T=_.shadow;S.shadowBias=T.bias,S.shadowRadius=T.radius,S.shadowMapSize=T.mapSize}n.spotShadowMap[f]=E,n.spotShadowMatrix[f]=_.shadow.matrix,n.spot[f]=S,f++}else if(_.isRectAreaLight){var S=t.get(_);S.color.copy(b).multiplyScalar(w),S.position.setFromMatrixPosition(_.matrixWorld),S.position.applyMatrix4(v),a.identity(),i.copy(_.matrixWorld),i.premultiply(v),a.extractRotation(i),S.halfWidth.set(.5*_.width,0,0),S.halfHeight.set(0,.5*_.height,0),S.halfWidth.applyMatrix4(a),S.halfHeight.applyMatrix4(a),n.rectArea[p]=S,p++}else if(_.isPointLight){var S=t.get(_);if(S.position.setFromMatrixPosition(_.matrixWorld),S.position.applyMatrix4(v),S.color.copy(_.color).multiplyScalar(_.intensity),S.distance=_.distance,S.decay=0===_.distance?0:_.decay,S.shadow=_.castShadow,_.castShadow){var T=_.shadow;S.shadowBias=T.bias,S.shadowRadius=T.radius,S.shadowMapSize=T.mapSize,S.shadowCameraNear=T.camera.near,S.shadowCameraFar=T.camera.far}n.pointShadowMap[d]=E,n.pointShadowMatrix[d]=_.shadow.matrix,n.point[d]=S,d++}else if(_.isHemisphereLight){var S=t.get(_);S.direction.setFromMatrixPosition(_.matrixWorld),S.direction.transformDirection(v),S.direction.normalize(),S.skyColor.copy(_.color).multiplyScalar(w),S.groundColor.copy(_.groundColor).multiplyScalar(w),n.hemi[m]=S,m++}}n.ambient[0]=l,n.ambient[1]=u,n.ambient[2]=c,n.directional.length=h,n.spot.length=f,n.rectArea.length=p,n.point.length=d,n.hemi.length=m,n.hash=n.id+","+h+","+d+","+f+","+p+","+m+","+o.length}var t=new ct,n={id:tl++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},r=new s,i=new o,a=new o;return{setup:e,state:n}}function dt(){function e(){a.length=0,s.length=0,l.length=0}function t(e){a.push(e)}function n(e){s.push(e)}function r(e){l.push(e)}function i(e){o.setup(a,s,e)}var o=new ht,a=[],s=[],l=[];return{init:e,state:{lightsArray:a,shadowsArray:s,spritesArray:l,lights:o},setupLights:i,pushLight:t,pushShadow:n,pushSprite:r}}function ft(){function e(e,t){var r=e.id+","+t.id,i=n[r];return void 0===i&&(i=new dt,n[r]=i),i}function t(){n={}}var n={};return{get:e,dispose:t}}function pt(e){G.call(this),this.type="MeshDepthMaterial",this.depthPacking=Ls,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function mt(e){G.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new s,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function vt(e,t,n){function r(t,n,r,i,o,a){var s=t.geometry,l=null,u=b,c=t.customDepthMaterial;if(r&&(u=w,c=t.customDistanceMaterial),c)l=c;else{var h=!1;n.morphTargets&&(s&&s.isBufferGeometry?h=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(h=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var d=t.isSkinnedMesh&&n.skinning,f=0;h&&(f|=v),d&&(f|=y),l=u[f]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var p=l.uuid,m=n.uuid,g=x[p];void 0===g&&(g={},x[p]=g);var _=g[m];void 0===_&&(_=l.clone(),g[m]=_),l=_}return l.visible=n.visible,l.wireframe=n.wireframe,l.side=null!=n.shadowSide?n.shadowSide:E[n.side],l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,r&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(i),l.nearDistance=o,l.farDistance=a),l}function a(n,i,o,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||l.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var u=t.update(n),c=n.material;if(Array.isArray(c))for(var h=u.groups,d=0,f=h.length;d<f;d++){var p=h[d],v=c[p.materialIndex];if(v&&v.visible){var g=r(n,v,s,m,o.near,o.far);e.renderBufferDirect(o,null,u,g,n,p)}}else if(c.visible){var g=r(n,c,s,m,o.near,o.far);e.renderBufferDirect(o,null,u,g,n,null)}}for(var y=n.children,_=0,b=y.length;_<b;_++)a(y[_],i,o,s)}}for(var l=new g,u=new o,d=new i,f=new i(n,n),p=new s,m=new s,v=1,y=2,_=1+(v|y),b=new Array(_),w=new Array(_),x={},E={0:Co,1:Po,2:Ao},S=[new s(1,0,0),new s(-1,0,0),new s(0,0,1),new s(0,0,-1),new s(0,1,0),new s(0,-1,0)],T=[new s(0,1,0),new s(0,1,0),new s(0,1,0),new s(0,1,0),new s(0,0,1),new s(0,0,-1)],M=[new c,new c,new c,new c,new c,new c],k=0;k!==_;++k){var P=0!==(k&v),C=0!==(k&y),A=new pt({depthPacking:Ds,morphTargets:P,skinning:C});b[k]=A;var O=new mt({morphTargets:P,skinning:C});w[k]=O}var I=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Mo,this.render=function(t,n,r){if(!1!==I.enabled&&(!1!==I.autoUpdate||!1!==I.needsUpdate)&&0!==t.length){var i=e.context,o=e.state;o.disable(i.BLEND),o.buffers.color.setClear(1,1,1,1),o.buffers.depth.setTest(!0),o.setScissorTest(!1);for(var s,c=0,v=t.length;c<v;c++){var g=t[c],y=g.shadow,_=g&&g.isPointLight;if(void 0!==y){var b=y.camera;if(d.copy(y.mapSize),d.min(f),_){var w=d.x,x=d.y;M[0].set(2*w,x,w,x),M[1].set(0,x,w,x),M[2].set(3*w,x,w,x),M[3].set(w,x,w,x),M[4].set(3*w,0,w,x),M[5].set(w,0,w,x),d.x*=4,d.y*=2}if(null===y.map){var E={minFilter:Pa,magFilter:Pa,format:Ya};y.map=new h(d.x,d.y,E),y.map.texture.name=g.name+".shadowMap",b.updateProjectionMatrix()}y.isSpotLightShadow&&y.update(g);var k=y.map,P=y.matrix;m.setFromMatrixPosition(g.matrixWorld),b.position.copy(m),_?(s=6,P.makeTranslation(-m.x,-m.y,-m.z)):(s=1,p.setFromMatrixPosition(g.target.matrixWorld),b.lookAt(p),b.updateMatrixWorld(),P.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),P.multiply(b.projectionMatrix),P.multiply(b.matrixWorldInverse)),e.setRenderTarget(k),e.clear();for(var C=0;C<s;C++){if(_){p.copy(b.position),p.add(S[C]),b.up.copy(T[C]),b.lookAt(p),b.updateMatrixWorld();var A=M[C];o.viewport(A)}u.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse),l.setFromMatrix(u),a(n,r,b,_)}}else console.warn("THREE.WebGLShadowMap:",g,"has no shadow.")}I.needsUpdate=!1}}}function gt(e,t,n,r,i,o,a,s,l){u.call(this,e,t,n,r,i,o,a,s,l),this.needsUpdate=!0}function yt(e,t,n,r,i){function o(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),n=new Uint16Array([0,1,2,0,2,3]);c=t.createBuffer(),h=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,c),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,h),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW),d=l(),f={position:t.getAttribLocation(d,"position"),uv:t.getAttribLocation(d,"uv")},p={uvOffset:t.getUniformLocation(d,"uvOffset"),uvScale:t.getUniformLocation(d,"uvScale"),rotation:t.getUniformLocation(d,"rotation"),center:t.getUniformLocation(d,"center"),scale:t.getUniformLocation(d,"scale"),color:t.getUniformLocation(d,"color"),map:t.getUniformLocation(d,"map"),opacity:t.getUniformLocation(d,"opacity"),modelViewMatrix:t.getUniformLocation(d,"modelViewMatrix"),projectionMatrix:t.getUniformLocation(d,"projectionMatrix"),fogType:t.getUniformLocation(d,"fogType"),fogDensity:t.getUniformLocation(d,"fogDensity"),fogNear:t.getUniformLocation(d,"fogNear"),fogFar:t.getUniformLocation(d,"fogFar"),fogColor:t.getUniformLocation(d,"fogColor"),fogDepth:t.getUniformLocation(d,"fogDepth"),alphaTest:t.getUniformLocation(d,"alphaTest")};var r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=8,r.height=8;var i=r.getContext("2d");i.fillStyle="white",i.fillRect(0,0,8,8),m=new gt(r)}function l(){var e=t.createProgram(),n=t.createShader(t.VERTEX_SHADER),r=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(n,["precision "+i.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),t.shaderSource(r,["precision "+i.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),t.compileShader(n),t.compileShader(r),t.attachShader(e,n),t.attachShader(e,r),t.linkProgram(e),e}function u(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}var c,h,d,f,p,m,v=new s,g=new a,y=new s;this.render=function(i,a,s){if(0!==i.length){void 0===d&&o(),n.useProgram(d),n.initAttributes(),n.enableAttribute(f.position),n.enableAttribute(f.uv),n.disableUnusedAttributes(),n.disable(t.CULL_FACE),n.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,c),t.vertexAttribPointer(f.position,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(f.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,h),t.uniformMatrix4fv(p.projectionMatrix,!1,s.projectionMatrix.elements),n.activeTexture(t.TEXTURE0),t.uniform1i(p.map,0);var l=0,_=0,b=a.fog;b?(t.uniform3f(p.fogColor,b.color.r,b.color.g,b.color.b),b.isFog?(t.uniform1f(p.fogNear,b.near),t.uniform1f(p.fogFar,b.far),t.uniform1i(p.fogType,1),l=1,_=1):b.isFogExp2&&(t.uniform1f(p.fogDensity,b.density),t.uniform1i(p.fogType,2),l=2,_=2)):(t.uniform1i(p.fogType,0),l=0,_=0);for(var w=0,x=i.length;w<x;w++){var E=i[w];E.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,E.matrixWorld),E.z=-E.modelViewMatrix.elements[14]}i.sort(u);for(var S=[],T=[],w=0,x=i.length;w<x;w++){var E=i[w],M=E.material;if(!1!==M.visible){E.onBeforeRender(e,a,s,void 0,M,void 0),t.uniform1f(p.alphaTest,M.alphaTest),t.uniformMatrix4fv(p.modelViewMatrix,!1,E.modelViewMatrix.elements),E.matrixWorld.decompose(v,g,y),S[0]=y.x,S[1]=y.y,T[0]=E.center.x-.5,T[1]=E.center.y-.5;var k=0;a.fog&&M.fog&&(k=_),l!==k&&(t.uniform1i(p.fogType,k),l=k),null!==M.map?(t.uniform2f(p.uvOffset,M.map.offset.x,M.map.offset.y),t.uniform2f(p.uvScale,M.map.repeat.x,M.map.repeat.y)):(t.uniform2f(p.uvOffset,0,0),t.uniform2f(p.uvScale,1,1)),t.uniform1f(p.opacity,M.opacity),t.uniform3f(p.color,M.color.r,M.color.g,M.color.b),t.uniform1f(p.rotation,M.rotation),t.uniform2fv(p.center,T),t.uniform2fv(p.scale,S),n.setBlending(M.blending,M.blendEquation,M.blendSrc,M.blendDst,M.blendEquationAlpha,M.blendSrcAlpha,M.blendDstAlpha,M.premultipliedAlpha),n.buffers.depth.setTest(M.depthTest),n.buffers.depth.setMask(M.depthWrite),n.buffers.color.setMask(M.colorWrite),r.setTexture2D(M.map||m,0),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),E.onAfterRender(e,a,s,void 0,M,void 0)}}n.enable(t.CULL_FACE),n.reset()}}}function _t(e,t,n){function r(){var t=!1,n=new c,r=null,i=new c(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}}function i(){var t=!1,n=null,r=null,i=null;return{setTest:function(t){t?d(e.DEPTH_TEST):f(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case na:e.depthFunc(e.NEVER);break;case ra:e.depthFunc(e.ALWAYS);break;case ia:e.depthFunc(e.LESS);break;case oa:e.depthFunc(e.LEQUAL);break;case aa:e.depthFunc(e.EQUAL);break;case sa:e.depthFunc(e.GEQUAL);break;case la:e.depthFunc(e.GREATER);break;case ua:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}}function o(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null;return{setTest:function(t){t?d(e.STENCIL_TEST):f(e.STENCIL_TEST)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&l===r||(e.stencilOp(t,n,r),a=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,u=null}}}function a(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var a=0;a<r;a++)e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return o}function s(){for(var e=0,t=L.length;e<t;e++)L[e]=0}function l(n){if(L[n]=1,0===D[n]&&(e.enableVertexAttribArray(n),D[n]=1),0!==N[n]){t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,0),N[n]=0}}function u(n,r){if(L[n]=1,0===D[n]&&(e.enableVertexAttribArray(n),D[n]=1),N[n]!==r){t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,r),N[n]=r}}function h(){for(var t=0,n=D.length;t!==n;++t)D[t]!==L[t]&&(e.disableVertexAttribArray(t),D[t]=0)}function d(t){!0!==F[t]&&(e.enable(t),F[t]=!0)}function f(t){!1!==F[t]&&(e.disable(t),F[t]=!1)}function p(){if(null===U&&(U=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)U.push(n[r]);return U}function m(t){return z!==t&&(e.useProgram(t),z=t,!0)}function v(t,r,i,o,a,s,l,u){if(t!==Lo?d(e.BLEND):f(e.BLEND),t!==zo){if(t!==B||u!==X)switch(t){case No:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case Fo:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case Uo:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}j=null,H=null,V=null,G=null,W=null,q=null}else a=a||r,s=s||i,l=l||o,r===j&&a===G||(e.blendEquationSeparate(n.convert(r),n.convert(a)),j=r,G=a),i===H&&o===V&&s===W&&l===q||(e.blendFuncSeparate(n.convert(i),n.convert(o),n.convert(s),n.convert(l)),H=i,V=o,W=s,q=l);B=t,X=u}function g(t,n){t.side===Ao?f(e.CULL_FACE):d(e.CULL_FACE);var r=t.side===Co;n&&(r=!r),y(r),!0===t.transparent?v(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):v(Lo),O.setFunc(t.depthFunc),O.setTest(t.depthTest),O.setMask(t.depthWrite),A.setMask(t.colorWrite),w(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function y(t){Y!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),Y=t)}function _(t){t!==Eo?(d(e.CULL_FACE),t!==Z&&(t===So?e.cullFace(e.BACK):t===To?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):f(e.CULL_FACE),Z=t}function b(t){t!==J&&(ee&&e.lineWidth(t),J=t)}function w(t,n,r){t?(d(e.POLYGON_OFFSET_FILL),K===n&&Q===r||(e.polygonOffset(n,r),K=n,Q=r)):f(e.POLYGON_OFFSET_FILL)}function x(t){t?d(e.SCISSOR_TEST):f(e.SCISSOR_TEST)}function E(t){void 0===t&&(t=e.TEXTURE0+$-1),re!==t&&(e.activeTexture(t),re=t)}function S(t,n){null===re&&E();var r=ie[re];void 0===r&&(r={type:void 0,texture:void 0},ie[re]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||se[t]),r.type=t,r.texture=n)}function T(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function M(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function k(t){!1===oe.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),oe.copy(t))}function P(t){!1===ae.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),ae.copy(t))}function C(){for(var t=0;t<D.length;t++)1===D[t]&&(e.disableVertexAttribArray(t),D[t]=0);F={},U=null,re=null,ie={},z=null,B=null,Y=null,Z=null,A.reset(),O.reset(),I.reset()}var A=new r,O=new i,I=new o,R=e.getParameter(e.MAX_VERTEX_ATTRIBS),L=new Uint8Array(R),D=new Uint8Array(R),N=new Uint8Array(R),F={},U=null,z=null,B=null,j=null,H=null,V=null,G=null,W=null,q=null,X=!1,Y=null,Z=null,J=null,K=null,Q=null,$=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),ee=!1,te=0,ne=e.getParameter(e.VERSION);-1!==ne.indexOf("WebGL")?(te=parseFloat(/^WebGL\ ([0-9])/.exec(ne)[1]),ee=te>=1):-1!==ne.indexOf("OpenGL ES")&&(te=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(ne)[1]),ee=te>=2);var re=null,ie={},oe=new c,ae=new c,se={};return se[e.TEXTURE_2D]=a(e.TEXTURE_2D,e.TEXTURE_2D,1),se[e.TEXTURE_CUBE_MAP]=a(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),A.setClear(0,0,0,1),O.setClear(1),I.setClear(0),d(e.DEPTH_TEST),O.setFunc(oa),y(!1),_(So),d(e.CULL_FACE),d(e.BLEND),v(Do),{buffers:{color:A,depth:O,stencil:I},initAttributes:s,enableAttribute:l,enableAttributeAndDivisor:u,disableUnusedAttributes:h,enable:d,disable:f,getCompressedTextureFormats:p,useProgram:m,setBlending:v,setMaterial:g,setFlipSided:y,setCullFace:_,setLineWidth:b,setPolygonOffset:w,setScissorTest:x,activeTexture:E,bindTexture:S,compressedTexImage2D:T,texImage2D:M,scissor:k,viewport:P,reset:C}}function bt(e,t,n,r,i,o,a){function s(e,t){if(e.width>t||e.height>t){if("data"in e)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");var n=t/Math.max(e.width,e.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n);return r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e),r}return e}function l(e){return Ns.isPowerOfTwo(e.width)&&Ns.isPowerOfTwo(e.height)}function u(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap){void 0===A&&(A=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),A.width=Ns.floorPowerOfTwo(e.width),A.height=Ns.floorPowerOfTwo(e.height);return A.getContext("2d").drawImage(e,0,0,A.width,A.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+A.width+"x"+A.height,e),A}return e}function c(e){return e.wrapS!==Ma||e.wrapT!==Ma||e.minFilter!==Pa&&e.minFilter!==Oa}function h(e,t){return e.generateMipmaps&&t&&e.minFilter!==Pa&&e.minFilter!==Oa}function d(t,n,i,o){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function f(t){return t===Pa||t===Ca||t===Aa?e.NEAREST:e.LINEAR}function p(e){var t=e.target;t.removeEventListener("dispose",p),v(t),t.isVideoTexture&&delete I[t.id],a.memory.textures--}function m(e){var t=e.target;t.removeEventListener("dispose",m),g(t),a.memory.textures--}function v(t){var n=r.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}r.remove(t)}function g(t){var n=r.get(t),i=r.get(t.texture);if(t){if(void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(t.texture),r.remove(t)}}function y(t,i){var o=r.get(t);if(t.isVideoTexture&&C(t),t.version>0&&o.__version!==t.version){var a=t.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==a.complete)return void x(o,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_2D,o.__webglTexture)}function _(t,u){var c=r.get(t);if(6===t.image.length)if(t.version>0&&c.__version!==t.version){c.__image__webglTextureCube||(t.addEventListener("dispose",p),c.__image__webglTextureCube=e.createTexture(),a.memory.textures++),n.activeTexture(e.TEXTURE0+u),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var f=t&&t.isCompressedTexture,m=t.image[0]&&t.image[0].isDataTexture,v=[],g=0;g<6;g++)v[g]=f||m?m?t.image[g].image:t.image[g]:s(t.image[g],i.maxCubemapSize);var y=v[0],_=l(y),b=o.convert(t.format),x=o.convert(t.type);w(e.TEXTURE_CUBE_MAP,t,_);for(var g=0;g<6;g++)if(f)for(var E,S=v[g].mipmaps,T=0,M=S.length;T<M;T++)E=S[T],t.format!==Ya&&t.format!==Xa?n.getCompressedTextureFormats().indexOf(b)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,T,b,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,T,b,E.width,E.height,0,b,x,E.data);else m?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,b,v[g].width,v[g].height,0,b,x,v[g].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,b,b,x,v[g]);c.__maxMipLevel=f?S.length-1:0,h(t,_)&&d(e.TEXTURE_CUBE_MAP,t,y.width,y.height),c.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+u),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube)}function b(t,i){n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)}function w(n,a,s){var l;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,o.convert(a.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,o.convert(a.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a.wrapS===Ma&&a.wrapT===Ma||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),e.texParameteri(n,e.TEXTURE_MAG_FILTER,f(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,f(a.minFilter)),a.minFilter!==Pa&&a.minFilter!==Oa&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),l=t.get("EXT_texture_filter_anisotropic")){if(a.type===Ba&&null===t.get("OES_texture_float_linear"))return;if(a.type===ja&&null===t.get("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function x(t,r,f){void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",p),t.__webglTexture=e.createTexture(),a.memory.textures++),n.activeTexture(e.TEXTURE0+f),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment);var m=s(r.image,i.maxTextureSize);c(r)&&!1===l(m)&&(m=u(m));var v=l(m),g=o.convert(r.format),y=o.convert(r.type);w(e.TEXTURE_2D,r,v);var _,b=r.mipmaps;if(r.isDepthTexture){var x=e.DEPTH_COMPONENT;if(r.type===Ba){if(!O)throw new Error("Float Depth Texture only supported in WebGL2.0");x=e.DEPTH_COMPONENT32F}else O&&(x=e.DEPTH_COMPONENT16);r.format===Ka&&x===e.DEPTH_COMPONENT&&r.type!==Fa&&r.type!==za&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Fa,y=o.convert(r.type)),r.format===Qa&&(x=e.DEPTH_STENCIL,r.type!==Wa&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Wa,y=o.convert(r.type))),n.texImage2D(e.TEXTURE_2D,0,x,m.width,m.height,0,g,y,null)}else if(r.isDataTexture)if(b.length>0&&v){for(var E=0,S=b.length;E<S;E++)_=b[E],n.texImage2D(e.TEXTURE_2D,E,g,_.width,_.height,0,g,y,_.data);r.generateMipmaps=!1,t.__maxMipLevel=b.length-1}else n.texImage2D(e.TEXTURE_2D,0,g,m.width,m.height,0,g,y,m.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(var E=0,S=b.length;E<S;E++)_=b[E],r.format!==Ya&&r.format!==Xa?n.getCompressedTextureFormats().indexOf(g)>-1?n.compressedTexImage2D(e.TEXTURE_2D,E,g,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,E,g,_.width,_.height,0,g,y,_.data);t.__maxMipLevel=b.length-1}else if(b.length>0&&v){for(var E=0,S=b.length;E<S;E++)_=b[E],n.texImage2D(e.TEXTURE_2D,E,g,g,y,_);r.generateMipmaps=!1,t.__maxMipLevel=b.length-1}else n.texImage2D(e.TEXTURE_2D,0,g,g,y,m),t.__maxMipLevel=0;h(r,v)&&d(e.TEXTURE_2D,r,m.width,m.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function E(t,i,a,s){var l=o.convert(i.texture.format),u=o.convert(i.texture.type);n.texImage2D(s,0,l,i.width,i.height,0,l,u,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function S(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function T(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),y(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Ka)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,i,0);else{if(n.depthTexture.format!==Qa)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0)}}function M(t){var n=r.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");T(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),S(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),S(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}function k(t){var i=r.get(t),o=r.get(t.texture);t.addEventListener("dispose",m),o.__webglTexture=e.createTexture(),a.memory.textures++;var s=!0===t.isWebGLRenderTargetCube,u=l(t);if(s){i.__webglFramebuffer=[];for(var c=0;c<6;c++)i.__webglFramebuffer[c]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(s){n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),w(e.TEXTURE_CUBE_MAP,t.texture,u);for(var c=0;c<6;c++)E(i.__webglFramebuffer[c],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+c);h(t.texture,u)&&d(e.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,o.__webglTexture),w(e.TEXTURE_2D,t.texture,u),E(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),h(t.texture,u)&&d(e.TEXTURE_2D,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&M(t)}function P(t){var i=t.texture;if(h(i,l(t))){var o=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=r.get(i).__webglTexture;n.bindTexture(o,a),d(o,i,t.width,t.height),n.bindTexture(o,null)}}function C(e){var t=e.id,n=a.render.frame;I[t]!==n&&(I[t]=n,e.update())}var A,O="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,I={};this.setTexture2D=y,this.setTextureCube=_,this.setTextureCubeDynamic=b,this.setupRenderTarget=k,this.updateRenderTargetMipmap=P}function wt(e,t){function n(n){var r;if(n===Ta)return e.REPEAT;if(n===Ma)return e.CLAMP_TO_EDGE;if(n===ka)return e.MIRRORED_REPEAT;if(n===Pa)return e.NEAREST;if(n===Ca)return e.NEAREST_MIPMAP_NEAREST;if(n===Aa)return e.NEAREST_MIPMAP_LINEAR;if(n===Oa)return e.LINEAR;if(n===Ia)return e.LINEAR_MIPMAP_NEAREST;if(n===Ra)return e.LINEAR_MIPMAP_LINEAR;if(n===La)return e.UNSIGNED_BYTE;if(n===Ha)return e.UNSIGNED_SHORT_4_4_4_4;if(n===Va)return e.UNSIGNED_SHORT_5_5_5_1;if(n===Ga)return e.UNSIGNED_SHORT_5_6_5;if(n===Da)return e.BYTE;if(n===Na)return e.SHORT;if(n===Fa)return e.UNSIGNED_SHORT;if(n===Ua)return e.INT;if(n===za)return e.UNSIGNED_INT;if(n===Ba)return e.FLOAT;if(n===ja&&null!==(r=t.get("OES_texture_half_float")))return r.HALF_FLOAT_OES;if(n===qa)return e.ALPHA;if(n===Xa)return e.RGB;if(n===Ya)return e.RGBA;if(n===Za)return e.LUMINANCE;if(n===Ja)return e.LUMINANCE_ALPHA;if(n===Ka)return e.DEPTH_COMPONENT;if(n===Qa)return e.DEPTH_STENCIL;if(n===Bo)return e.FUNC_ADD;if(n===jo)return e.FUNC_SUBTRACT;if(n===Ho)return e.FUNC_REVERSE_SUBTRACT;if(n===Wo)return e.ZERO;if(n===qo)return e.ONE;if(n===Xo)return e.SRC_COLOR;if(n===Yo)return e.ONE_MINUS_SRC_COLOR;if(n===Zo)return e.SRC_ALPHA;if(n===Jo)return e.ONE_MINUS_SRC_ALPHA;if(n===Ko)return e.DST_ALPHA;if(n===Qo)return e.ONE_MINUS_DST_ALPHA;if(n===$o)return e.DST_COLOR;if(n===ea)return e.ONE_MINUS_DST_COLOR;if(n===ta)return e.SRC_ALPHA_SATURATE;if((n===$a||n===es||n===ts||n===ns)&&null!==(r=t.get("WEBGL_compressed_texture_s3tc"))){if(n===$a)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===es)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===ts)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===ns)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===rs||n===is||n===os||n===as)&&null!==(r=t.get("WEBGL_compressed_texture_pvrtc"))){if(n===rs)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===is)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===os)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===as)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===ss&&null!==(r=t.get("WEBGL_compressed_texture_etc1")))return r.COMPRESSED_RGB_ETC1_WEBGL;if((n===ls||n===us||n===cs||n===hs||n===ds||n===fs||n===ps||n===ms||n===vs||n===gs||n===ys||n===_s||n===bs||n===ws)&&null!==(r=t.get("WEBGL_compressed_texture_astc")))return n;if((n===Vo||n===Go)&&null!==(r=t.get("EXT_blend_minmax"))){if(n===Vo)return r.MIN_EXT;if(n===Go)return r.MAX_EXT}return n===Wa&&null!==(r=t.get("WEBGL_depth_texture"))?r.UNSIGNED_INT_24_8_WEBGL:0}return{convert:n}}function xt(e,t,n,r){E.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Et(e){xt.call(this),this.cameras=e||[]}function St(e){function t(){return null!==i&&!0===i.isPresenting}function n(){if(t()){var n=i.getEyeParameters("left"),o=n.renderWidth,a=n.renderHeight;b=e.getPixelRatio(),_=e.getSize(),e.setDrawingBufferSize(2*o,a,1)}else r.enabled&&e.setDrawingBufferSize(_.width,_.height,b)}var r=this,i=null,l=null,u=null,h=new o,d=new o;"undefined"!==typeof window&&"VRFrameData"in window&&(l=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",n,!1));var f=new o,p=new a,m=new s,v=new xt;v.bounds=new c(0,0,.5,1),v.layers.enable(1);var g=new xt;g.bounds=new c(.5,0,.5,1),g.layers.enable(2);var y=new Et([v,g]);y.layers.enable(1),y.layers.enable(2);var _,b;this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return i},this.setDevice=function(e){void 0!==e&&(i=e)},this.setPoseTarget=function(e){void 0!==e&&(u=e)},this.getCamera=function(e){if(null===i)return e;i.depthNear=e.near,i.depthFar=e.far,i.getFrameData(l);var t=i.stageParameters;t?h.fromArray(t.sittingToStandingTransform):h.makeTranslation(0,r.userHeight,0);var n=l.pose,o=null!==u?u:e;if(o.matrix.copy(h),o.matrix.decompose(o.position,o.quaternion,o.scale),null!==n.orientation&&(p.fromArray(n.orientation),o.quaternion.multiply(p)),null!==n.position&&(p.setFromRotationMatrix(h),m.fromArray(n.position),m.applyQuaternion(p),o.position.add(m)),o.updateMatrixWorld(),!1===i.isPresenting)return e;v.near=e.near,g.near=e.near,v.far=e.far,g.far=e.far,y.matrixWorld.copy(e.matrixWorld),y.matrixWorldInverse.copy(e.matrixWorldInverse),v.matrixWorldInverse.fromArray(l.leftViewMatrix),g.matrixWorldInverse.fromArray(l.rightViewMatrix),d.getInverse(h),v.matrixWorldInverse.multiply(d),g.matrixWorldInverse.multiply(d);var a=o.parent;null!==a&&(f.getInverse(a.matrixWorld),v.matrixWorldInverse.multiply(f),g.matrixWorldInverse.multiply(f)),v.matrixWorld.getInverse(v.matrixWorldInverse),g.matrixWorld.getInverse(g.matrixWorldInverse),v.projectionMatrix.fromArray(l.leftProjectionMatrix),g.projectionMatrix.fromArray(l.rightProjectionMatrix),y.projectionMatrix.copy(v.projectionMatrix);var s=i.getLayers();if(s.length){var c=s[0];null!==c.leftBounds&&4===c.leftBounds.length&&v.bounds.fromArray(c.leftBounds),null!==c.rightBounds&&4===c.rightBounds.length&&g.bounds.fromArray(c.rightBounds)}return y},this.getStandingMatrix=function(){return h},this.submitFrame=function(){t()&&i.submitFrame()},this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",n)}}function Tt(e){function t(){return null===ce?xe:1}function n(){Re=new te(oe),Re.get("WEBGL_depth_texture"),Re.get("OES_texture_float"),Re.get("OES_texture_float_linear"),Re.get("OES_texture_half_float"),Re.get("OES_texture_half_float_linear"),Re.get("OES_standard_derivatives"),Re.get("OES_element_index_uint"),Re.get("ANGLE_instanced_arrays"),Ke=new wt(oe,Re),Le=new $(oe,Re,e),De=new _t(oe,Re,Ke),De.scissor(ge.copy(Se).multiplyScalar(xe)),De.viewport(ve.copy(Ee).multiplyScalar(xe)),Ne=new ie(oe),Fe=new ot,Ue=new bt(oe,Re,De,Fe,Le,Ke,Ne),ze=new _(oe),Be=new ne(oe,ze,Ne),je=new se(Be,Ne),Xe=new ae(oe),Ve=new it(le,Re,Le),Ge=new ut,We=new ft,qe=new K(le,De,Be,q),Ye=new Q(oe,Re,Ne),Ze=new re(oe,Re,Ne),Je=new yt(le,oe,De,Ue,Le),Ne.programs=Ve.programs,le.context=oe,le.capabilities=Le,le.extensions=Re,le.properties=Fe,le.renderLists=Ge,le.state=De,le.info=Ne}function r(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),ue=!0}function i(){console.log("THREE.WebGLRenderer: Context Restored."),ue=!1,n()}function a(e){var t=e.target;t.removeEventListener("dispose",a),l(t)}function l(e){u(e),Fe.remove(e)}function u(e){var t=Fe.get(e).program;e.program=void 0,void 0!==t&&Ve.releaseProgram(t)}function h(e,t,n){e.render(function(e){le.renderBufferImmediate(e,t,n)})}function d(e,t,n){if(n&&n.isInstancedBufferGeometry&&null===Re.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");De.initAttributes();var r=n.attributes,i=t.getAttributes(),o=e.defaultAttributeValues;for(var a in i){var s=i[a];if(s>=0){var l=r[a];if(void 0!==l){var u=l.normalized,c=l.itemSize,h=ze.get(l);if(void 0===h)continue;var d=h.buffer,f=h.type,p=h.bytesPerElement;if(l.isInterleavedBufferAttribute){var m=l.data,v=m.stride,g=l.offset;m&&m.isInstancedInterleavedBuffer?(De.enableAttributeAndDivisor(s,m.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=m.meshPerAttribute*m.count)):De.enableAttribute(s),oe.bindBuffer(oe.ARRAY_BUFFER,d),oe.vertexAttribPointer(s,c,f,u,v*p,g*p)}else l.isInstancedBufferAttribute?(De.enableAttributeAndDivisor(s,l.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):De.enableAttribute(s),oe.bindBuffer(oe.ARRAY_BUFFER,d),oe.vertexAttribPointer(s,c,f,u,0,0)}else if(void 0!==o){var y=o[a];if(void 0!==y)switch(y.length){case 2:oe.vertexAttrib2fv(s,y);break;case 3:oe.vertexAttrib3fv(s,y);break;case 4:oe.vertexAttrib4fv(s,y);break;default:oe.vertexAttrib1fv(s,y)}}}}De.disableUnusedAttributes()}function p(){et||(v(),et=!0)}function m(){et=!1}function v(){var e=Qe.getDevice();e&&e.isPresenting?e.requestAnimationFrame(y):window.requestAnimationFrame(y)}function y(e){!1!==et&&(tt(e),v())}function b(e,t,n){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isLight)J.pushLight(e),e.castShadow&&J.pushShadow(e);else if(e.isSprite)e.frustumCulled&&!Me.intersectsSprite(e)||J.pushSprite(e);else if(e.isImmediateRenderObject)n&&Oe.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Ae),Z.push(e,null,e.material,Oe.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||Me.intersectsObject(e))){n&&Oe.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Ae);var r=je.update(e),i=e.material;if(Array.isArray(i))for(var o=r.groups,a=0,s=o.length;a<s;a++){var l=o[a],u=i[l.materialIndex];u&&u.visible&&Z.push(e,r,u,Oe.z,l)}else i.visible&&Z.push(e,r,i,Oe.z,null)}for(var c=e.children,a=0,s=c.length;a<s;a++)b(c[a],t,n)}}function w(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,l=a.geometry,u=void 0===r?a.material:r,c=a.group;if(n.isArrayCamera){me=n;for(var h=n.cameras,d=0,f=h.length;d<f;d++){var p=h[d];if(s.layers.test(p.layers)){var m=p.bounds,v=m.x*be,g=m.y*we,y=m.z*be,_=m.w*we;De.viewport(ve.set(v,g,y,_).multiplyScalar(xe)),x(s,t,p,l,u,c)}}}else me=null,x(s,t,n,l,u,c)}}function x(e,t,n,r,i,o){if(e.onBeforeRender(le,t,n,r,i,o),J=We.get(t,me||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var a=e.isMesh&&e.matrixWorld.determinant()<0;De.setMaterial(i,a);var s=S(n,t.fog,i,e);fe="",h(e,s,i)}else le.renderBufferDirect(n,t.fog,r,i,e,o);e.onAfterRender(le,t,n,r,i,o),J=We.get(t,me||n)}function E(e,t,n){var r=Fe.get(e),i=J.state.lights,o=J.state.shadowsArray,s=Ve.getParameters(e,i.state,o,t,ke.numPlanes,ke.numIntersection,n),l=Ve.getProgramCode(e,s),c=r.program,h=!0;if(void 0===c)e.addEventListener("dispose",a);else if(c.code!==l)u(e);else if(r.lightsHash!==i.state.hash)Fe.update(e,"lightsHash",i.state.hash),h=!1;else{if(void 0!==s.shaderID)return;h=!1}if(h){if(s.shaderID){var d=Hs[s.shaderID];r.shader={name:e.type,uniforms:zs.clone(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader,le),c=Ve.acquireProgram(e,r.shader,s,l),r.program=c,e.program=c}var f=c.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var p=0;p<le.maxMorphTargets;p++)f["morphTarget"+p]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var p=0;p<le.maxMorphNormals;p++)f["morphNormal"+p]>=0&&e.numSupportedMorphNormals++}var m=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=ke.numPlanes,r.numIntersection=ke.numIntersection,m.clippingPlanes=ke.uniform),r.fog=t,r.lightsHash=i.state.hash,e.lights&&(m.ambientLightColor.value=i.state.ambient,m.directionalLights.value=i.state.directional,m.spotLights.value=i.state.spot,m.rectAreaLights.value=i.state.rectArea,m.pointLights.value=i.state.point,m.hemisphereLights.value=i.state.hemi,m.directionalShadowMap.value=i.state.directionalShadowMap,m.directionalShadowMatrix.value=i.state.directionalShadowMatrix,m.spotShadowMap.value=i.state.spotShadowMap,m.spotShadowMatrix.value=i.state.spotShadowMatrix,m.pointShadowMap.value=i.state.pointShadowMap,m.pointShadowMatrix.value=i.state.pointShadowMatrix);var v=r.program.getUniforms(),g=He.seqWithValue(v.seq,m);r.uniformsList=g}function S(e,t,n,r){_e=0;var i=Fe.get(n),o=J.state.lights;if(Pe&&(Ce||e!==pe)){var a=e===pe&&n.id===de;ke.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,i,a)}!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==t?n.needsUpdate=!0:n.lights&&i.lightsHash!==o.state.hash?n.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===ke.numPlanes&&i.numIntersection===ke.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(E(n,t,r),n.needsUpdate=!1);var s=!1,l=!1,u=!1,c=i.program,h=c.getUniforms(),d=i.shader.uniforms;if(De.useProgram(c.program)&&(s=!0,l=!0,u=!0),n.id!==de&&(de=n.id,l=!0),s||e!==pe){if(h.setValue(oe,"projectionMatrix",e.projectionMatrix),Le.logarithmicDepthBuffer&&h.setValue(oe,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),pe!==(me||e)&&(pe=me||e,l=!0,u=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var p=h.map.cameraPosition;void 0!==p&&p.setValue(oe,Oe.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&h.setValue(oe,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){h.setOptional(oe,r,"bindMatrix"),h.setOptional(oe,r,"bindMatrixInverse");var m=r.skeleton;if(m){var v=m.bones;if(Le.floatVertexTextures){if(void 0===m.boneTexture){var g=Math.sqrt(4*v.length);g=Ns.ceilPowerOfTwo(g),g=Math.max(g,4);var y=new Float32Array(g*g*4);y.set(m.boneMatrices);var _=new f(y,g,g,Ya,Ba);_.needsUpdate=!0,m.boneMatrices=y,m.boneTexture=_,m.boneTextureSize=g}h.setValue(oe,"boneTexture",m.boneTexture),h.setValue(oe,"boneTextureSize",m.boneTextureSize)}else h.setOptional(oe,m,"boneMatrices")}}return l&&(h.setValue(oe,"toneMappingExposure",le.toneMappingExposure),h.setValue(oe,"toneMappingWhitePoint",le.toneMappingWhitePoint),n.lights&&U(d,u),t&&n.fog&&C(d,t),n.isMeshBasicMaterial?T(d,n):n.isMeshLambertMaterial?(T(d,n),A(d,n)):n.isMeshPhongMaterial?(T(d,n),n.isMeshToonMaterial?I(d,n):O(d,n)):n.isMeshStandardMaterial?(T(d,n),n.isMeshPhysicalMaterial?L(d,n):R(d,n)):n.isMeshDepthMaterial?(T(d,n),D(d,n)):n.isMeshDistanceMaterial?(T(d,n),N(d,n)):n.isMeshNormalMaterial?(T(d,n),F(d,n)):n.isLineBasicMaterial?(M(d,n),n.isLineDashedMaterial&&k(d,n)):n.isPointsMaterial?P(d,n):n.isShadowMaterial&&(d.color.value=n.color,d.opacity.value=n.opacity),void 0!==d.ltc_1&&(d.ltc_1.value=js.LTC_1),void 0!==d.ltc_2&&(d.ltc_2.value=js.LTC_2),He.upload(oe,i.uniformsList,d,le)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(He.upload(oe,i.uniformsList,d,le),n.uniformsNeedUpdate=!1),h.setValue(oe,"modelViewMatrix",r.modelViewMatrix),h.setValue(oe,"normalMatrix",r.normalMatrix),h.setValue(oe,"modelMatrix",r.matrixWorld),c}function T(e,t){e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=Fe.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var n;t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function M(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function k(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function P(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*xe,e.scale.value=.5*we,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}function C(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function A(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function O(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function I(e,t){O(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function R(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function L(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,R(e,t)}function D(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function N(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}function F(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function U(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function z(){var e=_e;return e>=Le.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+Le.maxTextures),_e+=1,e}console.log("THREE.WebGLRenderer",xo),e=e||{};var B=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),j=void 0!==e.context?e.context:null,H=void 0!==e.alpha&&e.alpha,V=void 0===e.depth||e.depth,G=void 0===e.stencil||e.stencil,W=void 0!==e.antialias&&e.antialias,q=void 0===e.premultipliedAlpha||e.premultipliedAlpha,X=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,Y=void 0!==e.powerPreference?e.powerPreference:"default",Z=null,J=null;this.domElement=B,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=pa,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var oe,le=this,ue=!1,ce=null,he=null,de=-1,fe="",pe=null,me=null,ve=new c,ge=new c,ye=null,_e=0,be=B.width,we=B.height,xe=1,Ee=new c(0,0,be,we),Se=new c(0,0,be,we),Te=!1,Me=new g,ke=new ee,Pe=!1,Ce=!1,Ae=new o,Oe=new s;try{var Ie={alpha:H,depth:V,stencil:G,antialias:W,premultipliedAlpha:q,preserveDrawingBuffer:X,powerPreference:Y};if(B.addEventListener("webglcontextlost",r,!1),B.addEventListener("webglcontextrestored",i,!1),null===(oe=j||B.getContext("webgl",Ie)||B.getContext("experimental-webgl",Ie)))throw null!==B.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===oe.getShaderPrecisionFormat&&(oe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}var Re,Le,De,Ne,Fe,Ue,ze,Be,je,Ve,Ge,We,qe,Xe,Ye,Ze,Je,Ke;n();var Qe=new St(le);this.vr=Qe;var $e=new vt(le,je,Le.maxTextureSize);this.shadowMap=$e,this.getContext=function(){return oe},this.getContextAttributes=function(){return oe.getContextAttributes()},this.forceContextLoss=function(){var e=Re.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=Re.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return xe},this.setPixelRatio=function(e){void 0!==e&&(xe=e,this.setSize(be,we,!1))},this.getSize=function(){return{width:be,height:we}},this.setSize=function(e,t,n){var r=Qe.getDevice();if(r&&r.isPresenting)return void console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");be=e,we=t,B.width=e*xe,B.height=t*xe,!1!==n&&(B.style.width=e+"px",B.style.height=t+"px"),this.setViewport(0,0,e,t)},this.getDrawingBufferSize=function(){return{width:be*xe,height:we*xe}},this.setDrawingBufferSize=function(e,t,n){be=e,we=t,xe=n,B.width=e*n,B.height=t*n,this.setViewport(0,0,e,t)},this.getCurrentViewport=function(){return ve},this.setViewport=function(e,t,n,r){Ee.set(e,we-t-r,n,r),De.viewport(ve.copy(Ee).multiplyScalar(xe))},this.setScissor=function(e,t,n,r){Se.set(e,we-t-r,n,r),De.scissor(ge.copy(Se).multiplyScalar(xe))},this.setScissorTest=function(e){De.setScissorTest(Te=e)},this.getClearColor=function(){return qe.getClearColor()},this.setClearColor=function(){qe.setClearColor.apply(qe,arguments)},this.getClearAlpha=function(){return qe.getClearAlpha()},this.setClearAlpha=function(){qe.setClearAlpha.apply(qe,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=oe.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=oe.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=oe.STENCIL_BUFFER_BIT),oe.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.dispose=function(){B.removeEventListener("webglcontextlost",r,!1),B.removeEventListener("webglcontextrestored",i,!1),Ge.dispose(),We.dispose(),Fe.dispose(),je.dispose(),Qe.dispose(),m()},this.renderBufferImmediate=function(e,t,n){De.initAttributes();var r=Fe.get(e);e.hasPositions&&!r.position&&(r.position=oe.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=oe.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=oe.createBuffer()),e.hasColors&&!r.color&&(r.color=oe.createBuffer());var i=t.getAttributes();if(e.hasPositions&&(oe.bindBuffer(oe.ARRAY_BUFFER,r.position),oe.bufferData(oe.ARRAY_BUFFER,e.positionArray,oe.DYNAMIC_DRAW),De.enableAttribute(i.position),oe.vertexAttribPointer(i.position,3,oe.FLOAT,!1,0,0)),e.hasNormals){if(oe.bindBuffer(oe.ARRAY_BUFFER,r.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&!0===n.flatShading)for(var o=0,a=3*e.count;o<a;o+=9){var s=e.normalArray,l=(s[o+0]+s[o+3]+s[o+6])/3,u=(s[o+1]+s[o+4]+s[o+7])/3,c=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=l,s[o+1]=u,s[o+2]=c,s[o+3]=l,s[o+4]=u,s[o+5]=c,s[o+6]=l,s[o+7]=u,s[o+8]=c}oe.bufferData(oe.ARRAY_BUFFER,e.normalArray,oe.DYNAMIC_DRAW),De.enableAttribute(i.normal),oe.vertexAttribPointer(i.normal,3,oe.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(oe.bindBuffer(oe.ARRAY_BUFFER,r.uv),oe.bufferData(oe.ARRAY_BUFFER,e.uvArray,oe.DYNAMIC_DRAW),De.enableAttribute(i.uv),oe.vertexAttribPointer(i.uv,2,oe.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==Oo&&(oe.bindBuffer(oe.ARRAY_BUFFER,r.color),oe.bufferData(oe.ARRAY_BUFFER,e.colorArray,oe.DYNAMIC_DRAW),De.enableAttribute(i.color),oe.vertexAttribPointer(i.color,3,oe.FLOAT,!1,0,0)),De.disableUnusedAttributes(),oe.drawArrays(oe.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,n,r,i,o,a){var s=o.isMesh&&o.matrixWorld.determinant()<0;De.setMaterial(i,s);var l=S(e,n,i,o),u=r.id+"_"+l.id+"_"+(!0===i.wireframe),c=!1;u!==fe&&(fe=u,c=!0),o.morphTargetInfluences&&(Xe.update(o,r,i,l),c=!0);var h=r.index,f=r.attributes.position,p=1;!0===i.wireframe&&(h=Be.getWireframeAttribute(r),p=2);var m,v=Ye;null!==h&&(m=ze.get(h),v=Ze,v.setIndex(m)),c&&(d(i,l,r),null!==h&&oe.bindBuffer(oe.ELEMENT_ARRAY_BUFFER,m.buffer));var g=1/0;null!==h?g=h.count:void 0!==f&&(g=f.count);var y=r.drawRange.start*p,_=r.drawRange.count*p,b=null!==a?a.start*p:0,w=null!==a?a.count*p:1/0,x=Math.max(y,b),E=Math.min(g,y+_,b+w)-1,T=Math.max(0,E-x+1);if(0!==T){if(o.isMesh)if(!0===i.wireframe)De.setLineWidth(i.wireframeLinewidth*t()),v.setMode(oe.LINES);else switch(o.drawMode){case Ss:v.setMode(oe.TRIANGLES);break;case Ts:v.setMode(oe.TRIANGLE_STRIP);break;case Ms:v.setMode(oe.TRIANGLE_FAN)}else if(o.isLine){var M=i.linewidth;void 0===M&&(M=1),De.setLineWidth(M*t()),o.isLineSegments?v.setMode(oe.LINES):o.isLineLoop?v.setMode(oe.LINE_LOOP):v.setMode(oe.LINE_STRIP)}else o.isPoints&&v.setMode(oe.POINTS);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&v.renderInstances(r,x,T):v.render(x,T)}},this.compile=function(e,t){J=We.get(e,t),J.init(),e.traverse(function(e){e.isLight&&(J.pushLight(e),e.castShadow&&J.pushShadow(e))}),J.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)E(t.material[n],e.fog,t);else E(t.material,e.fog,t)})};var et=!1,tt=null;this.animate=function(e){tt=e,null!==tt?p():m()},this.render=function(e,t,n,r){if(!t||!t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!ue){fe="",de=-1,pe=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),Qe.enabled&&(t=Qe.getCamera(t)),J=We.get(e,t),J.init(),e.onBeforeRender(le,e,t,n),Ae.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Me.setFromMatrix(Ae),Ce=this.localClippingEnabled,Pe=ke.init(this.clippingPlanes,Ce,t),Z=Ge.get(e,t),Z.init(),b(e,t,le.sortObjects),!0===le.sortObjects&&Z.sort(),Pe&&ke.beginShadows();var i=J.state.shadowsArray;$e.render(i,e,t),J.setupLights(t),Pe&&ke.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),qe.render(Z,e,t,r);var o=Z.opaque,a=Z.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&w(o,e,t,s),a.length&&w(a,e,t,s)}else o.length&&w(o,e,t),a.length&&w(a,e,t);var l=J.state.spritesArray;Je.render(l,e,t),n&&Ue.updateRenderTargetMipmap(n),De.buffers.depth.setTest(!0),De.buffers.depth.setMask(!0),De.buffers.color.setMask(!0),De.setPolygonOffset(!1),e.onAfterRender(le,e,t),Qe.enabled&&Qe.submitFrame(),Z=null,J=null}},this.allocTextureUnit=z,this.setTexture2D=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),Ue.setTexture2D(t,n)}}(),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),Ue.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?Ue.setTextureCube(t,n):Ue.setTextureCubeDynamic(t,n)}}(),this.getRenderTarget=function(){return ce},this.setRenderTarget=function(e){ce=e,e&&void 0===Fe.get(e).__webglFramebuffer&&Ue.setupRenderTarget(e);var t=null,n=!1;if(e){var r=Fe.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=r[e.activeCubeFace],n=!0):t=r,ve.copy(e.viewport),ge.copy(e.scissor),ye=e.scissorTest}else ve.copy(Ee).multiplyScalar(xe),ge.copy(Se).multiplyScalar(xe),ye=Te;if(he!==t&&(oe.bindFramebuffer(oe.FRAMEBUFFER,t),he=t),De.viewport(ve),De.scissor(ge),De.setScissorTest(ye),n){var i=Fe.get(e.texture);oe.framebufferTexture2D(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,r,i,o){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var a=Fe.get(e).__webglFramebuffer;if(a){var s=!1;a!==he&&(oe.bindFramebuffer(oe.FRAMEBUFFER,a),s=!0);try{var l=e.texture,u=l.format,c=l.type;if(u!==Ya&&Ke.convert(u)!==oe.getParameter(oe.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(c!==La&&Ke.convert(c)!==oe.getParameter(oe.IMPLEMENTATION_COLOR_READ_TYPE)&&(c!==Ba||!Re.get("OES_texture_float")&&!Re.get("WEBGL_color_buffer_float"))&&(c!==ja||!Re.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");oe.checkFramebufferStatus(oe.FRAMEBUFFER)===oe.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&oe.readPixels(t,n,r,i,Ke.convert(u),Ke.convert(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&oe.bindFramebuffer(oe.FRAMEBUFFER,he)}}},this.copyFramebufferToTexture=function(e,t,n){var r=t.image.width,i=t.image.height,o=Ke.convert(t.format);this.setTexture2D(t,0),oe.copyTexImage2D(oe.TEXTURE_2D,n||0,o,e.x,e.y,r,i,0)},this.copyTextureToTexture=function(e,t,n,r){var i=t.image.width,o=t.image.height,a=Ke.convert(n.format),s=Ke.convert(n.type),l=t.isDataTexture?t.image.data:t.image;this.setTexture2D(n,0),oe.texSubImage2D(oe.TEXTURE_2D,r||0,e.x,e.y,i,o,a,s,l)}}function Mt(e,t){this.name="",this.color=new y(e),this.density=void 0!==t?t:25e-5}function kt(e,t,n){this.name="",this.color=new y(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Pt(){x.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Ct(e){G.call(this),this.type="SpriteMaterial",this.color=new y(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function At(e){x.call(this),this.type="Sprite",this.material=void 0!==e?e:new Ct,this.center=new i(.5,.5)}function Ot(){x.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function It(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new o)}}function Rt(){x.call(this),this.type="Bone"}function Lt(e,t){J.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new o,this.bindMatrixInverse=new o;var n=this.initBones(),r=new It(n);this.bind(r,this.matrixWorld),this.normalizeSkinWeights()}function Dt(e){G.call(this),this.type="LineBasicMaterial",this.color=new y(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function Nt(e,t,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Ft(e,t);x.call(this),this.type="Line",this.geometry=void 0!==e?e:new z,this.material=void 0!==t?t:new Dt({color:16777215*Math.random()})}function Ft(e,t){Nt.call(this,e,t),this.type="LineSegments"}function Ut(e,t){Nt.call(this,e,t),this.type="LineLoop"}function zt(e){G.call(this),this.type="PointsMaterial",this.color=new y(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function Bt(e,t){x.call(this),this.type="Points",this.geometry=void 0!==e?e:new z,this.material=void 0!==t?t:new zt({color:16777215*Math.random()})}function jt(){x.call(this),this.type="Group"}function Ht(e,t,n,r,i,o,a,s,l){u.call(this,e,t,n,r,i,o,a,s,l),this.generateMipmaps=!1}function Vt(e,t,n,r,i,o,a,s,l,c,h,d){u.call(this,null,o,a,s,l,c,r,i,h,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Gt(e,t,n,r,i,o,a,s,l,c){if((c=void 0!==c?c:Ka)!==Ka&&c!==Qa)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Ka&&(n=Fa),void 0===n&&c===Qa&&(n=Wa),u.call(this,null,r,i,o,a,s,c,n,l),this.image={width:e,height:t},this.magFilter=void 0!==a?a:Pa,this.minFilter=void 0!==s?s:Pa,this.flipY=!1,this.generateMipmaps=!1}function Wt(e){z.call(this),this.type="WireframeGeometry";var t,n,r,i,o,a,l,u,c,h,d=[],f=[0,0],p={},m=["a","b","c"];if(e&&e.isGeometry){var v=e.faces;for(t=0,r=v.length;t<r;t++){var g=v[t];for(n=0;n<3;n++)l=g[m[n]],u=g[m[(n+1)%3]],f[0]=Math.min(l,u),f[1]=Math.max(l,u),c=f[0]+","+f[1],void 0===p[c]&&(p[c]={index1:f[0],index2:f[1]})}for(c in p)a=p[c],h=e.vertices[a.index1],d.push(h.x,h.y,h.z),h=e.vertices[a.index2],d.push(h.x,h.y,h.z)}else if(e&&e.isBufferGeometry){var y,_,b,w,x,E,S,T;if(h=new s,null!==e.index){for(y=e.attributes.position,_=e.index,b=e.groups,0===b.length&&(b=[{start:0,count:_.count,materialIndex:0}]),i=0,o=b.length;i<o;++i)for(w=b[i],x=w.start,E=w.count,t=x,r=x+E;t<r;t+=3)for(n=0;n<3;n++)l=_.getX(t+n),u=_.getX(t+(n+1)%3),f[0]=Math.min(l,u),f[1]=Math.max(l,u),c=f[0]+","+f[1],void 0===p[c]&&(p[c]={index1:f[0],index2:f[1]});for(c in p)a=p[c],h.fromBufferAttribute(y,a.index1),d.push(h.x,h.y,h.z),h.fromBufferAttribute(y,a.index2),d.push(h.x,h.y,h.z)}else for(y=e.attributes.position,t=0,r=y.count/3;t<r;t++)for(n=0;n<3;n++)S=3*t+n,h.fromBufferAttribute(y,S),d.push(h.x,h.y,h.z),T=3*t+(n+1)%3,h.fromBufferAttribute(y,T),d.push(h.x,h.y,h.z)}this.addAttribute("position",new D(d,3))}function qt(e,t,n){M.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Xt(e,t,n)),this.mergeVertices()}function Xt(e,t,n){z.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o=[],a=[],l=[],u=[],c=new s,h=new s,d=new s,f=new s,p=new s,m=t+1;for(r=0;r<=n;r++){var v=r/n;for(i=0;i<=t;i++){var g=i/t;e(g,v,h),a.push(h.x,h.y,h.z),g-1e-5>=0?(e(g-1e-5,v,d),f.subVectors(h,d)):(e(g+1e-5,v,d),f.subVectors(d,h)),v-1e-5>=0?(e(g,v-1e-5,d),p.subVectors(h,d)):(e(g,v+1e-5,d),p.subVectors(d,h)),c.crossVectors(f,p).normalize(),l.push(c.x,c.y,c.z),u.push(g,v)}}for(r=0;r<n;r++)for(i=0;i<t;i++){var y=r*m+i,_=r*m+i+1,b=(r+1)*m+i+1,w=(r+1)*m+i;o.push(y,_,w),o.push(_,b,w)}this.setIndex(o),this.addAttribute("position",new D(a,3)),this.addAttribute("normal",new D(l,3)),this.addAttribute("uv",new D(u,2))}function Yt(e,t,n,r){M.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new Zt(e,t,n,r)),this.mergeVertices()}function Zt(e,t,n,r){function o(e,t,n,r){var i,o,a=Math.pow(2,r),s=[];for(i=0;i<=a;i++){s[i]=[];var u=e.clone().lerp(n,i/a),c=t.clone().lerp(n,i/a),h=a-i;for(o=0;o<=h;o++)s[i][o]=0===o&&i===a?u:u.clone().lerp(c,o/h)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var d=Math.floor(o/2);o%2===0?(l(s[i][d+1]),l(s[i+1][d]),l(s[i][d])):(l(s[i][d+1]),l(s[i+1][d+1]),l(s[i+1][d]))}}function a(){for(var e=0;e<m.length;e+=6){var t=m[e+0],n=m[e+2],r=m[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(m[e+0]+=1),n<.2&&(m[e+2]+=1),r<.2&&(m[e+4]+=1))}}function l(e){p.push(e.x,e.y,e.z)}function u(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(){for(var e=new s,t=new s,n=new s,r=new s,o=new i,a=new i,l=new i,u=0,c=0;u<p.length;u+=9,c+=6){e.set(p[u+0],p[u+1],p[u+2]),t.set(p[u+3],p[u+4],p[u+5]),n.set(p[u+6],p[u+7],p[u+8]),o.set(m[c+0],m[c+1]),a.set(m[c+2],m[c+3]),l.set(m[c+4],m[c+5]),r.copy(e).add(t).add(n).divideScalar(3);var f=d(r);h(o,c+0,e,f),h(a,c+2,t,f),h(l,c+4,n,f)}}function h(e,t,n,r){r<0&&1===e.x&&(m[t]=e.x-1),0===n.x&&0===n.z&&(m[t]=r/2/Math.PI+.5)}function d(e){return Math.atan2(e.z,-e.x)}function f(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}z.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1,r=r||0;var p=[],m=[];!function(e){for(var n=new s,r=new s,i=new s,a=0;a<t.length;a+=3)u(t[a+0],n),u(t[a+1],r),u(t[a+2],i),o(n,r,i,e)}(r),function(e){for(var t=new s,n=0;n<p.length;n+=3)t.x=p[n+0],t.y=p[n+1],t.z=p[n+2],t.normalize().multiplyScalar(e),p[n+0]=t.x,p[n+1]=t.y,p[n+2]=t.z}(n),function(){for(var e=new s,t=0;t<p.length;t+=3){e.x=p[t+0],e.y=p[t+1],e.z=p[t+2];var n=d(e)/2/Math.PI+.5,r=f(e)/Math.PI+.5;m.push(n,1-r)}c(),a()}(),this.addAttribute("position",new D(p,3)),this.addAttribute("normal",new D(p.slice(),3)),this.addAttribute("uv",new D(m,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function Jt(e,t){M.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Kt(e,t)),this.mergeVertices()}function Kt(e,t){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];Zt.call(this,n,r,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Qt(e,t){M.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new $t(e,t)),this.mergeVertices()}function $t(e,t){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Zt.call(this,n,r,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function en(e,t){M.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new tn(e,t)),this.mergeVertices()}function tn(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Zt.call(this,r,i,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function nn(e,t){M.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new rn(e,t)),this.mergeVertices()}function rn(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Zt.call(this,i,o,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function on(e,t,n,r,i,o){M.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new an(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function an(e,t,n,r,o){function a(i){v=e.getPointAt(i/t,v);var o=c.normals[i],a=c.binormals[i];for(d=0;d<=r;d++){var s=d/r*Math.PI*2,l=Math.sin(s),u=-Math.cos(s);p.x=u*o.x+l*a.x,p.y=u*o.y+l*a.y,p.z=u*o.z+l*a.z,p.normalize(),y.push(p.x,p.y,p.z),f.x=v.x+n*p.x,f.y=v.y+n*p.y,f.z=v.z+n*p.z,g.push(f.x,f.y,f.z)}}function l(){for(d=1;d<=t;d++)for(h=1;h<=r;h++){var e=(r+1)*(d-1)+(h-1),n=(r+1)*d+(h-1),i=(r+1)*d+h,o=(r+1)*(d-1)+h;b.push(e,n,o),b.push(n,i,o)}}function u(){for(h=0;h<=t;h++)for(d=0;d<=r;d++)m.x=h/t,m.y=d/r,_.push(m.x,m.y)}z.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:o},t=t||64,n=n||1,r=r||8,o=o||!1;var c=e.computeFrenetFrames(t,o);this.tangents=c.tangents,this.normals=c.normals,this.binormals=c.binormals;var h,d,f=new s,p=new s,m=new i,v=new s,g=[],y=[],_=[],b=[];!function(){for(h=0;h<t;h++)a(h);a(!1===o?t:0),u(),l()}(),this.setIndex(b),this.addAttribute("position",new D(g,3)),this.addAttribute("normal",new D(y,3)),this.addAttribute("uv",new D(_,2))}function sn(e,t,n,r,i,o,a){M.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new ln(e,t,n,r,i,o)),this.mergeVertices()}function ln(e,t,n,r,i,o){function a(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*o,i.y=r*(2+l)*a*.5,i.z=r*Math.sin(s)*.5}z.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var l,u,c=[],h=[],d=[],f=[],p=new s,m=new s,v=new s,g=new s,y=new s,_=new s,b=new s;for(l=0;l<=n;++l){var w=l/n*i*Math.PI*2;for(a(w,i,o,e,v),a(w+.01,i,o,e,g),_.subVectors(g,v),b.addVectors(g,v),y.crossVectors(_,b),b.crossVectors(y,_),y.normalize(),b.normalize(),u=0;u<=r;++u){var x=u/r*Math.PI*2,E=-t*Math.cos(x),S=t*Math.sin(x);p.x=v.x+(E*b.x+S*y.x),p.y=v.y+(E*b.y+S*y.y),p.z=v.z+(E*b.z+S*y.z),h.push(p.x,p.y,p.z),m.subVectors(p,v).normalize(),d.push(m.x,m.y,m.z),f.push(l/n),f.push(u/r)}}for(u=1;u<=n;u++)for(l=1;l<=r;l++){var T=(r+1)*(u-1)+(l-1),M=(r+1)*u+(l-1),k=(r+1)*u+l,P=(r+1)*(u-1)+l;c.push(T,M,P),c.push(M,k,P)}this.setIndex(c),this.addAttribute("position",new D(h,3)),this.addAttribute("normal",new D(d,3)),this.addAttribute("uv",new D(f,2))}function un(e,t,n,r,i){M.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new cn(e,t,n,r,i)),this.mergeVertices()}function cn(e,t,n,r,i){z.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,l=[],u=[],c=[],h=[],d=new s,f=new s,p=new s;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var m=a/r*i,v=o/n*Math.PI*2;f.x=(e+t*Math.cos(v))*Math.cos(m),f.y=(e+t*Math.cos(v))*Math.sin(m),f.z=t*Math.sin(v),u.push(f.x,f.y,f.z),d.x=e*Math.cos(m),d.y=e*Math.sin(m),p.subVectors(f,d).normalize(),c.push(p.x,p.y,p.z),h.push(a/r),h.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var g=(r+1)*o+a-1,y=(r+1)*(o-1)+a-1,_=(r+1)*(o-1)+a,b=(r+1)*o+a;l.push(g,y,b),l.push(y,_,b)}this.setIndex(l),this.addAttribute("position",new D(u,3)),this.addAttribute("normal",new D(c,3)),this.addAttribute("uv",new D(h,2))}function hn(e,t,n,r,i){var o,a;if(i===Un(e,t,n,r)>0)for(o=t;o<n;o+=r)a=Dn(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=Dn(o,e[o],e[o+1],a);return a&&Cn(a,a.next)&&(Nn(a),a=a.next),a}function dn(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Cn(r,r.next)&&0!==Pn(r.prev,r,r.next))r=r.next;else{if(Nn(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function fn(e,t,n,r,i,o,a){if(e){!a&&o&&xn(e,r,i,o);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?mn(e,r,i,o):pn(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),Nn(e),e=l.next,u=l.next;else if((e=l)===u){a?1===a?(e=vn(e,t,n),fn(e,t,n,r,i,o,2)):2===a&&gn(e,t,n,r,i,o):fn(dn(e),t,n,r,i,o,1);break}}}function pn(e){var t=e.prev,n=e,r=e.next;if(Pn(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Mn(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Pn(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function mn(e,t,n,r){var i=e.prev,o=e,a=e.next;if(Pn(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=Sn(s,l,t,n,r),d=Sn(u,c,t,n,r),f=e.nextZ;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&Mn(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Pn(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=e.prevZ;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&Mn(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Pn(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function vn(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!Cn(i,o)&&An(i,r,r.next,o)&&In(i,o)&&In(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),Nn(r),Nn(r.next),r=e=o),r=r.next}while(r!==e);return r}function gn(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&kn(a,s)){var l=Ln(a,s);return a=dn(a,a.next),l=dn(l,l.next),fn(a,t,n,r,i,o),void fn(l,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function yn(e,t,n,r){var i,o,a,s,l,u=[];for(i=0,o=t.length;i<o;i++)a=t[i]*r,s=i<o-1?t[i+1]*r:e.length,l=hn(e,a,s,r,!1),l===l.next&&(l.steiner=!0),u.push(Tn(l));for(u.sort(_n),i=0;i<u.length;i++)bn(u[i],n),n=dn(n,n.next);return n}function _n(e,t){return e.x-t.x}function bn(e,t){if(t=wn(e,t)){var n=Ln(t,e);dn(n,n.next)}}function wn(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var l,u=n,c=n.x,h=n.y,d=1/0;for(r=n.next;r!==u;)i>=r.x&&r.x>=c&&i!==r.x&&Mn(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((l=Math.abs(o-r.y)/(i-r.x))<d||l===d&&r.x>n.x)&&In(r,e)&&(n=r,d=l),r=r.next;return n}function xn(e,t,n,r){var i=e;do{null===i.z&&(i.z=Sn(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,En(i)}function En(e){var t,n,r,i,o,a,s,l,u=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1);return e}function Sn(e,t,n,r,i){return e=32767*(e-n)*i,t=32767*(t-r)*i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function Tn(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function Mn(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function kn(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!On(e,t)&&In(e,t)&&In(t,e)&&Rn(e,t)}function Pn(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Cn(e,t){return e.x===t.x&&e.y===t.y}function An(e,t,n,r){return!!(Cn(e,t)&&Cn(n,r)||Cn(e,r)&&Cn(n,t))||Pn(e,t,n)>0!==Pn(e,t,r)>0&&Pn(n,r,e)>0!==Pn(n,r,t)>0}function On(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&An(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function In(e,t){return Pn(e.prev,e,e.next)<0?Pn(e,t,e.next)>=0&&Pn(e,e.prev,t)>=0:Pn(e,t,e.prev)<0||Pn(e,e.next,t)<0}function Rn(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}function Ln(e,t){var n=new Fn(e.i,e.x,e.y),r=new Fn(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Dn(e,t,n,r){var i=new Fn(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Nn(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Fn(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Un(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}function zn(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Bn(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function jn(e,t){M.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Hn(e,t)),this.mergeVertices()}function Hn(e,t){z.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,r=[],o=[],a=0,l=e.length;a<l;a++){var u=e[a];!function(e){function a(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}function l(e,t,n){var r,o,a,s=e.x-t.x,l=e.y-t.y,u=n.x-e.x,c=n.y-e.y,h=s*s+l*l,d=s*c-l*u;if(Math.abs(d)>Number.EPSILON){var f=Math.sqrt(h),p=Math.sqrt(u*u+c*c),m=t.x-l/f,v=t.y+s/f,g=n.x-c/p,y=n.y+u/p,_=((g-m)*c-(y-v)*u)/(s*c-l*u);r=m+s*_-e.x,o=v+l*_-e.y;var b=r*r+o*o;if(b<=2)return new i(r,o);a=Math.sqrt(b/2)}else{var w=!1;s>Number.EPSILON?u>Number.EPSILON&&(w=!0):s<-Number.EPSILON?u<-Number.EPSILON&&(w=!0):Math.sign(l)===Math.sign(c)&&(w=!0),w?(r=-l,o=s,a=Math.sqrt(h)):(r=s,o=l,a=Math.sqrt(h/2))}return new i(r/a,o/a)}function u(e,t){var n,r;for(Y=e.length;--Y>=0;){n=Y,(r=Y-1)<0&&(r=e.length-1);var i=0,o=x+2*k;for(i=0;i<o;i++){var a=W*i,s=W*(i+1);d(t+n+a,t+r+a,t+r+s,t+n+s)}}}function c(e,t,n){b.push(e),b.push(t),b.push(n)}function h(e,t,i){f(e),f(t),f(i);var o=r.length/3,a=C.generateTopUV(n,r,o-3,o-2,o-1);p(a[0]),p(a[1]),p(a[2])}function d(e,t,i,o){f(e),f(t),f(o),f(t),f(i),f(o);var a=r.length/3,s=C.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);p(s[0]),p(s[1]),p(s[3]),p(s[1]),p(s[2]),p(s[3])}function f(e){r.push(b[3*e+0]),r.push(b[3*e+1]),r.push(b[3*e+2])}function p(e){o.push(e.x),o.push(e.y)}var m,v,g,y,_,b=[],w=void 0!==t.curveSegments?t.curveSegments:12,x=void 0!==t.steps?t.steps:1,E=void 0!==t.amount?t.amount:100,S=void 0===t.bevelEnabled||t.bevelEnabled,T=void 0!==t.bevelThickness?t.bevelThickness:6,M=void 0!==t.bevelSize?t.bevelSize:T-2,k=void 0!==t.bevelSegments?t.bevelSegments:3,P=t.extrudePath,C=void 0!==t.UVGenerator?t.UVGenerator:il,A=!1;P&&(m=P.getSpacedPoints(x),A=!0,S=!1,v=P.computeFrenetFrames(x,!1),g=new s,y=new s,_=new s),S||(k=0,T=0,M=0);var O,I,R,L=e.extractPoints(w),D=L.shape,N=L.holes;if(!rl.isClockWise(D))for(D=D.reverse(),I=0,R=N.length;I<R;I++)O=N[I],rl.isClockWise(O)&&(N[I]=O.reverse());var F=rl.triangulateShape(D,N),U=D;for(I=0,R=N.length;I<R;I++)O=N[I],D=D.concat(O);for(var z,B,j,H,V,G,W=D.length,q=F.length,X=[],Y=0,Z=U.length,J=Z-1,K=Y+1;Y<Z;Y++,J++,K++)J===Z&&(J=0),K===Z&&(K=0),X[Y]=l(U[Y],U[J],U[K]);var Q,$=[],ee=X.concat();for(I=0,R=N.length;I<R;I++){for(O=N[I],Q=[],Y=0,Z=O.length,J=Z-1,K=Y+1;Y<Z;Y++,J++,K++)J===Z&&(J=0),K===Z&&(K=0),Q[Y]=l(O[Y],O[J],O[K]);$.push(Q),ee=ee.concat(Q)}for(z=0;z<k;z++){for(j=z/k,H=T*Math.cos(j*Math.PI/2),B=M*Math.sin(j*Math.PI/2),Y=0,Z=U.length;Y<Z;Y++)V=a(U[Y],X[Y],B),c(V.x,V.y,-H);for(I=0,R=N.length;I<R;I++)for(O=N[I],Q=$[I],Y=0,Z=O.length;Y<Z;Y++)V=a(O[Y],Q[Y],B),c(V.x,V.y,-H)}for(B=M,Y=0;Y<W;Y++)V=S?a(D[Y],ee[Y],B):D[Y],A?(y.copy(v.normals[0]).multiplyScalar(V.x),g.copy(v.binormals[0]).multiplyScalar(V.y),_.copy(m[0]).add(y).add(g),c(_.x,_.y,_.z)):c(V.x,V.y,0);var te;for(te=1;te<=x;te++)for(Y=0;Y<W;Y++)V=S?a(D[Y],ee[Y],B):D[Y],A?(y.copy(v.normals[te]).multiplyScalar(V.x),g.copy(v.binormals[te]).multiplyScalar(V.y),_.copy(m[te]).add(y).add(g),c(_.x,_.y,_.z)):c(V.x,V.y,E/x*te);for(z=k-1;z>=0;z--){for(j=z/k,H=T*Math.cos(j*Math.PI/2),B=M*Math.sin(j*Math.PI/2),Y=0,Z=U.length;Y<Z;Y++)V=a(U[Y],X[Y],B),c(V.x,V.y,E+H);for(I=0,R=N.length;I<R;I++)for(O=N[I],Q=$[I],Y=0,Z=O.length;Y<Z;Y++)V=a(O[Y],Q[Y],B),A?c(V.x,V.y+m[x-1].y,m[x-1].x+H):c(V.x,V.y,E+H)}!function(){var e=r.length/3;if(S){var t=0,i=W*t;for(Y=0;Y<q;Y++)G=F[Y],h(G[2]+i,G[1]+i,G[0]+i);for(t=x+2*k,i=W*t,Y=0;Y<q;Y++)G=F[Y],h(G[0]+i,G[1]+i,G[2]+i)}else{for(Y=0;Y<q;Y++)G=F[Y],h(G[2],G[1],G[0]);for(Y=0;Y<q;Y++)G=F[Y],h(G[0]+W*x,G[1]+W*x,G[2]+W*x)}n.addGroup(e,r.length/3-e,0)}(),function(){var e=r.length/3,t=0;for(u(U,t),t+=U.length,I=0,R=N.length;I<R;I++)O=N[I],u(O,t),t+=O.length;n.addGroup(e,r.length/3-e,1)}()}(u)}this.addAttribute("position",new D(r,3)),this.addAttribute("uv",new D(o,2)),this.computeVertexNormals()}function Vn(e,t){M.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Gn(e,t)),this.mergeVertices()}function Gn(e,t){t=t||{};var n=t.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new M;var r=n.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Hn.call(this,r,t),this.type="TextBufferGeometry"}function Wn(e,t,n,r,i,o,a){M.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new qn(e,t,n,r,i,o,a)),this.mergeVertices()}function qn(e,t,n,r,i,o,a){z.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var l,u,c=o+a,h=0,d=[],f=new s,p=new s,m=[],v=[],g=[],y=[];for(u=0;u<=n;u++){var _=[],b=u/n;for(l=0;l<=t;l++){var w=l/t;f.x=-e*Math.cos(r+w*i)*Math.sin(o+b*a),f.y=e*Math.cos(o+b*a),f.z=e*Math.sin(r+w*i)*Math.sin(o+b*a),v.push(f.x,f.y,f.z),p.set(f.x,f.y,f.z).normalize(),g.push(p.x,p.y,p.z),y.push(w,1-b),_.push(h++)}d.push(_)}for(u=0;u<n;u++)for(l=0;l<t;l++){var x=d[u][l+1],E=d[u][l],S=d[u+1][l],T=d[u+1][l+1];(0!==u||o>0)&&m.push(x,E,T),(u!==n-1||c<Math.PI)&&m.push(E,S,T)}this.setIndex(m),this.addAttribute("position",new D(v,3)),this.addAttribute("normal",new D(g,3)),this.addAttribute("uv",new D(y,2))}function Xn(e,t,n,r,i,o){M.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new Yn(e,t,n,r,i,o)),this.mergeVertices()}function Yn(e,t,n,r,o,a){z.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:o,thetaLength:a},e=e||.5,t=t||1,o=void 0!==o?o:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8,r=void 0!==r?Math.max(1,r):1;var l,u,c,h=[],d=[],f=[],p=[],m=e,v=(t-e)/r,g=new s,y=new i;for(u=0;u<=r;u++){for(c=0;c<=n;c++)l=o+c/n*a,g.x=m*Math.cos(l),g.y=m*Math.sin(l),d.push(g.x,g.y,g.z),f.push(0,0,1),y.x=(g.x/t+1)/2,y.y=(g.y/t+1)/2,p.push(y.x,y.y);m+=v}for(u=0;u<r;u++){var _=u*(n+1);for(c=0;c<n;c++){l=c+_;var b=l,w=l+n+1,x=l+n+2,E=l+1;h.push(b,w,E),h.push(w,x,E)}}this.setIndex(h),this.addAttribute("position",new D(d,3)),this.addAttribute("normal",new D(f,3)),this.addAttribute("uv",new D(p,2))}function Zn(e,t,n,r){M.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new Jn(e,t,n,r)),this.mergeVertices()}function Jn(e,t,n,r){z.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=Ns.clamp(r,0,2*Math.PI);var o,a,l,u=[],c=[],h=[],d=1/t,f=new s,p=new i;for(a=0;a<=t;a++){var m=n+a*d*r,v=Math.sin(m),g=Math.cos(m);for(l=0;l<=e.length-1;l++)f.x=e[l].x*v,f.y=e[l].y,f.z=e[l].x*g,c.push(f.x,f.y,f.z),p.x=a/t,p.y=l/(e.length-1),h.push(p.x,p.y)}for(a=0;a<t;a++)for(l=0;l<e.length-1;l++){o=l+a*e.length;var y=o,_=o+e.length,b=o+e.length+1,w=o+1;u.push(y,_,w),u.push(_,b,w)}if(this.setIndex(u),this.addAttribute("position",new D(c,3)),this.addAttribute("uv",new D(h,2)),this.computeVertexNormals(),r===2*Math.PI){var x=this.attributes.normal.array,E=new s,S=new s,T=new s;for(o=t*e.length*3,a=0,l=0;a<e.length;a++,l+=3)E.x=x[l+0],E.y=x[l+1],E.z=x[l+2],S.x=x[o+l+0],S.y=x[o+l+1],S.z=x[o+l+2],T.addVectors(E,S).normalize(),x[l+0]=x[o+l+0]=T.x,x[l+1]=x[o+l+1]=T.y,x[l+2]=x[o+l+2]=T.z}}function Kn(e,t){M.call(this),this.type="ShapeGeometry","object"===typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Qn(e,t)),this.mergeVertices()}function Qn(e,t){function n(e){var n,s,u,c=i.length/3,h=e.extractPoints(t),d=h.shape,f=h.holes;if(!1===rl.isClockWise(d))for(d=d.reverse(),n=0,s=f.length;n<s;n++)u=f[n],!0===rl.isClockWise(u)&&(f[n]=u.reverse());var p=rl.triangulateShape(d,f);for(n=0,s=f.length;n<s;n++)u=f[n],d=d.concat(u);for(n=0,s=d.length;n<s;n++){var m=d[n];i.push(m.x,m.y,0),o.push(0,0,1),a.push(m.x,m.y)}for(n=0,s=p.length;n<s;n++){var v=p[n],g=v[0]+c,y=v[1]+c,_=v[2]+c;r.push(g,y,_),l+=3}}z.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var r=[],i=[],o=[],a=[],s=0,l=0;if(!1===Array.isArray(e))n(e);else for(var u=0;u<e.length;u++)n(e[u]),this.addGroup(s,l,u),s+=l,l=0;this.setIndex(r),this.addAttribute("position",new D(i,3)),this.addAttribute("normal",new D(o,3)),this.addAttribute("uv",new D(a,2))}function $n(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function er(e,t){z.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,i,o,a=[],s=Math.cos(Ns.DEG2RAD*t),l=[0,0],u={},c=["a","b","c"];e.isBufferGeometry?(o=new M,o.fromBufferGeometry(e)):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,d=o.faces,f=0,p=d.length;f<p;f++)for(var m=d[f],v=0;v<3;v++)n=m[c[v]],r=m[c[(v+1)%3]],l[0]=Math.min(n,r),l[1]=Math.max(n,r),i=l[0]+","+l[1],void 0===u[i]?u[i]={index1:l[0],index2:l[1],face1:f,face2:void 0}:u[i].face2=f;for(i in u){var g=u[i];if(void 0===g.face2||d[g.face1].normal.dot(d[g.face2].normal)<=s){var y=h[g.index1];a.push(y.x,y.y,y.z),y=h[g.index2],a.push(y.x,y.y,y.z)}}this.addAttribute("position",new D(a,3))}function tr(e,t,n,r,i,o,a,s){M.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new nr(e,t,n,r,i,o,a,s)),this.mergeVertices()}function nr(e,t,n,r,o,a,l,u){function c(n){var o,a,c,g=new i,b=new s,w=0,x=!0===n?e:t,E=!0===n?1:-1;for(a=v,o=1;o<=r;o++)f.push(0,y*E,0),p.push(0,E,0),m.push(.5,.5),v++;for(c=v,o=0;o<=r;o++){var S=o/r,T=S*u+l,M=Math.cos(T),k=Math.sin(T);b.x=x*k,b.y=y*E,b.z=x*M,f.push(b.x,b.y,b.z),p.push(0,E,0),g.x=.5*M+.5,g.y=.5*k*E+.5,m.push(g.x,g.y),v++}for(o=0;o<r;o++){var P=a+o,C=c+o;!0===n?d.push(C,C+1,P):d.push(C+1,C,P),w+=3}h.addGroup(_,w,!0===n?1:2),_+=w}z.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:o,openEnded:a,thetaStart:l,thetaLength:u};var h=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,o=Math.floor(o)||1,a=void 0!==a&&a,l=void 0!==l?l:0,u=void 0!==u?u:2*Math.PI;var d=[],f=[],p=[],m=[],v=0,g=[],y=n/2,_=0;!function(){var i,a,c=new s,b=new s,w=0,x=(t-e)/n;for(a=0;a<=o;a++){var E=[],S=a/o,T=S*(t-e)+e;for(i=0;i<=r;i++){var M=i/r,k=M*u+l,P=Math.sin(k),C=Math.cos(k);b.x=T*P,b.y=-S*n+y,b.z=T*C,f.push(b.x,b.y,b.z),c.set(P,x,C).normalize(),p.push(c.x,c.y,c.z),m.push(M,1-S),E.push(v++)}g.push(E)}for(i=0;i<r;i++)for(a=0;a<o;a++){var A=g[a][i],O=g[a+1][i],I=g[a+1][i+1],R=g[a][i+1];d.push(A,O,R),d.push(O,I,R),w+=6}h.addGroup(_,w,0),_+=w}(),!1===a&&(e>0&&c(!0),t>0&&c(!1)),this.setIndex(d),this.addAttribute("position",new D(f,3)),this.addAttribute("normal",new D(p,3)),this.addAttribute("uv",new D(m,2))}function rr(e,t,n,r,i,o,a){tr.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function ir(e,t,n,r,i,o,a){nr.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function or(e,t,n,r){M.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new ar(e,t,n,r)),this.mergeVertices()}function ar(e,t,n,r){z.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var o,a,l=[],u=[],c=[],h=[],d=new s,f=new i;for(u.push(0,0,0),c.push(0,0,1),h.push(.5,.5),a=0,o=3;a<=t;a++,o+=3){var p=n+a/t*r;d.x=e*Math.cos(p),d.y=e*Math.sin(p),u.push(d.x,d.y,d.z),c.push(0,0,1),f.x=(u[o]/e+1)/2,f.y=(u[o+1]/e+1)/2,h.push(f.x,f.y)}for(o=1;o<=t;o++)l.push(o,o+1,0);this.setIndex(l),this.addAttribute("position",new D(u,3)),this.addAttribute("normal",new D(c,3)),this.addAttribute("uv",new D(h,2))}function sr(e){G.call(this),this.type="ShadowMaterial",this.color=new y(0),this.transparent=!0,this.setValues(e)}function lr(e){q.call(this,e),this.type="RawShaderMaterial"}function ur(e){G.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new y(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function cr(e){ur.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function hr(e){G.call(this),this.type="MeshPhongMaterial",this.color=new y(16777215),this.specular=new y(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ca,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function dr(e){hr.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function fr(e){G.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function pr(e){G.call(this),this.type="MeshLambertMaterial",this.color=new y(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new y(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ca,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function mr(e){Dt.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}function vr(e,t,n){var r=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}function gr(e){this.manager=void 0!==e?e:ll}function yr(e){this.manager=void 0!==e?e:ll,this._parser=null}function _r(e){this.manager=void 0!==e?e:ll,this._parser=null}function br(e){this.manager=void 0!==e?e:ll}function wr(e){this.manager=void 0!==e?e:ll}function xr(e){this.manager=void 0!==e?e:ll}function Er(){this.type="Curve",this.arcLengthDivisions=200}function Sr(e,t,n,r,i,o,a,s){Er.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Tr(e,t,n,r,i,o){Sr.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}function Mr(){function e(e,o,a,s){t=e,n=a,r=-3*e+3*o-2*a-s,i=2*e-2*o+a+s}var t=0,n=0,r=0,i=0;return{initCatmullRom:function(t,n,r,i,o){e(n,r,o*(r-t),o*(i-n))},initNonuniformCatmullRom:function(t,n,r,i,o,a,s){var l=(n-t)/o-(r-t)/(o+a)+(r-n)/a,u=(r-n)/a-(i-n)/(a+s)+(i-r)/s;l*=a,u*=a,e(n,r,l,u)},calc:function(e){var o=e*e;return t+n*e+r*o+i*(o*e)}}}function kr(e,t,n,r){Er.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function Pr(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function Cr(e,t){var n=1-e;return n*n*t}function Ar(e,t){return 2*(1-e)*e*t}function Or(e,t){return e*e*t}function Ir(e,t,n,r){return Cr(e,t)+Ar(e,n)+Or(e,r)}function Rr(e,t){var n=1-e;return n*n*n*t}function Lr(e,t){var n=1-e;return 3*n*n*e*t}function Dr(e,t){return 3*(1-e)*e*e*t}function Nr(e,t){return e*e*e*t}function Fr(e,t,n,r,i){return Rr(e,t)+Lr(e,n)+Dr(e,r)+Nr(e,i)}function Ur(e,t,n,r){Er.call(this),this.type="CubicBezierCurve",this.v0=e||new i,this.v1=t||new i,this.v2=n||new i,this.v3=r||new i}function zr(e,t,n,r){Er.call(this),this.type="CubicBezierCurve3",this.v0=e||new s,this.v1=t||new s,this.v2=n||new s,this.v3=r||new s}function Br(e,t){Er.call(this),this.type="LineCurve",this.v1=e||new i,this.v2=t||new i}function jr(e,t){Er.call(this),this.type="LineCurve3",this.v1=e||new s,this.v2=t||new s}function Hr(e,t,n){Er.call(this),this.type="QuadraticBezierCurve",this.v0=e||new i,this.v1=t||new i,this.v2=n||new i}function Vr(e,t,n){Er.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new s,this.v1=t||new s,this.v2=n||new s}function Gr(e){Er.call(this),this.type="SplineCurve",this.points=e||[]}function Wr(){Er.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function qr(e){Wr.call(this),this.type="Path",this.currentPoint=new i,e&&this.setFromPoints(e)}function Xr(e){qr.call(this,e),this.uuid=Ns.generateUUID(),this.type="Shape",this.holes=[]}function Yr(e,t){x.call(this),this.type="Light",this.color=new y(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Zr(e,t,n){Yr.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(x.DefaultUp),this.updateMatrix(),this.groundColor=new y(t)}function Jr(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new i(512,512),this.map=null,this.matrix=new o}function Kr(){Jr.call(this,new xt(50,1,.5,500))}function Qr(e,t,n,r,i,o){Yr.call(this,e,t),this.type="SpotLight",this.position.copy(x.DefaultUp),this.updateMatrix(),this.target=new x,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new Kr}function $r(e,t,n,r){Yr.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Jr(new xt(90,1,.5,500))}function ei(){Jr.call(this,new S(-5,5,5,-5,.5,500))}function ti(e,t){Yr.call(this,e,t),this.type="DirectionalLight",this.position.copy(x.DefaultUp),this.updateMatrix(),this.target=new x,this.shadow=new ei}function ni(e,t){Yr.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function ri(e,t,n,r){Yr.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function ii(e,t,n,r){pi.call(this,e,t,n,r)}function oi(e,t,n){pi.call(this,e,t,n)}function ai(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function si(e,t,n,r){ai.call(this,e,t,n,r)}function li(e,t,n,r){pi.call(this,e,t,n,r)}function ui(e,t,n,r){pi.call(this,e,t,n,r)}function ci(e,t,n,r){pi.call(this,e,t,n,r)}function hi(e,t,n,r){ai.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function di(e,t,n,r){ai.call(this,e,t,n,r)}function fi(e,t,n,r){ai.call(this,e,t,n,r)}function pi(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ml.convertArray(t,this.TimeBufferType),this.values=ml.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}function mi(e,t,n,r){pi.call(this,e,t,n,r)}function vi(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Ns.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function gi(e){this.manager=void 0!==e?e:ll,this.textures={}}function yi(e){this.manager=void 0!==e?e:ll}function _i(){}function bi(e){"boolean"===typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:ll,this.withCredentials=!1}function wi(e){this.manager=void 0!==e?e:ll,this.texturePath=""}function xi(e){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:ll,this.options=void 0}function Ei(){this.type="ShapePath",this.color=new y,this.subPaths=[],this.currentPath=null}function Si(e){this.type="Font",this.data=e}function Ti(e,t,n,r){for(var i=String(e).split(""),o=t/r.resolution,a=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*o,s=[],l=0,u=0,c=0;c<i.length;c++){var h=i[c];if("\n"===h)l=0,u-=a;else{var d=Mi(h,n,o,l,u,r);l+=d.offsetX,s.push(d.path)}}return s}function Mi(e,t,n,r,i,o){var a=o.glyphs[e]||o.glyphs["?"];if(a){var s,l,u,c,h,d,f,p,m=new Ei;if(a.o)for(var v=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),g=0,y=v.length;g<y;){var _=v[g++];switch(_){case"m":s=v[g++]*n+r,l=v[g++]*n+i,m.moveTo(s,l);break;case"l":s=v[g++]*n+r,l=v[g++]*n+i,m.lineTo(s,l);break;case"q":u=v[g++]*n+r,c=v[g++]*n+i,h=v[g++]*n+r,d=v[g++]*n+i,m.quadraticCurveTo(h,d,u,c);break;case"b":u=v[g++]*n+r,c=v[g++]*n+i,h=v[g++]*n+r,d=v[g++]*n+i,f=v[g++]*n+r,p=v[g++]*n+i,m.bezierCurveTo(h,d,f,p,u,c)}}return{offsetX:a.ha*n,path:m}}}function ki(e){this.manager=void 0!==e?e:ll}function Pi(e){this.manager=void 0!==e?e:ll}function Ci(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new xt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new xt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Ai(e,t,n){x.call(this),this.type="CubeCamera";var r=new xt(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new s(1,0,0)),this.add(r);var i=new xt(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new s(-1,0,0)),this.add(i);var o=new xt(90,1,e,t);o.up.set(0,0,1),o.lookAt(new s(0,1,0)),this.add(o);var a=new xt(90,1,e,t);a.up.set(0,0,-1),a.lookAt(new s(0,-1,0)),this.add(a);var l=new xt(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new s(0,0,1)),this.add(l);var u=new xt(90,1,e,t);u.up.set(0,-1,0),u.lookAt(new s(0,0,-1)),this.add(u);var c={format:Xa,magFilter:Oa,minFilter:Oa};this.renderTarget=new d(n,n,c),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,s=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,r,n),n.activeCubeFace=1,e.render(t,i,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,a,n),n.activeCubeFace=4,e.render(t,l,n),n.texture.generateMipmaps=s,n.activeCubeFace=5,e.render(t,u,n),e.setRenderTarget(null)},this.clear=function(e,t,n,r){for(var i=this.renderTarget,o=0;o<6;o++)i.activeCubeFace=o,e.setRenderTarget(i),e.clear(t,n,r);e.setRenderTarget(null)}}function Oi(){x.call(this),this.type="AudioListener",this.context=xl.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Ii(e){x.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Ri(e){Ii.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Li(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Di(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Ni(e,t,n){var r=n||Fi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function Fi(e,t,n){this.path=t,this.parsedPath=n||Fi.parseTrackName(t),this.node=Fi.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Ui(){this.uuid=Ns.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function zi(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,o=new Array(i),a={endingStart:Es,endingEnd:Es},s=0;s!==i;++s){var l=r[s].createInterpolant(null);o[s]=l,l.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=xs,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Bi(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function ji(e){"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Hi(){z.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Vi(e,t,n,r){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function Gi(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Wi(e,t,n){Gi.call(this,e,t),this.meshPerAttribute=n||1}function qi(e,t,n){k.call(this,e,t),this.meshPerAttribute=n||1}function Xi(e,t,n,r){this.ray=new X(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Yi(e,t){return e.distance-t.distance}function Zi(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var i=e.children,o=0,a=i.length;o<a;o++)Zi(i[o],t,n,!0)}function Ji(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Ki(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function Qi(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function $i(e,t){this.min=void 0!==e?e:new i(1/0,1/0),this.max=void 0!==t?t:new i(-1/0,-1/0)}function eo(e){x.call(this),this.material=e,this.render=function(){}}function to(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var l=new z,u=new D(2*a*3,3);l.addAttribute("position",u),Ft.call(this,l,new Dt({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function no(e,t){x.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new z,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new D(r,3));var l=new Dt({fog:!1});this.cone=new Ft(n,l),this.add(this.cone),this.update()}function ro(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,ro(e.children[n]));return t}function io(e){for(var t=ro(e),n=new z,r=[],i=[],o=new y(0,0,1),a=new y(0,1,0),s=0;s<t.length;s++){var l=t[s];l.parent&&l.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.addAttribute("position",new D(r,3)),n.addAttribute("color",new D(i,3));var u=new Dt({vertexColors:Ro,depthTest:!1,depthWrite:!1,transparent:!0});Ft.call(this,n,u),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function oo(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new qn(t,4,2),i=new W({wireframe:!0,fog:!1});J.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function ao(e,t){x.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new Dt({fog:!1}),r=new z;r.addAttribute("position",new k(new Float32Array(15),3)),this.line=new Nt(r,n),this.add(this.line),this.update()}function so(e,t,n){x.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new $t(t);r.rotateY(.5*Math.PI),this.material=new W({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=Ro);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.addAttribute("color",new k(o,3)),this.add(new J(r,this.material)),this.update()}function lo(e,t,n,r){e=e||10,t=t||10,n=new y(void 0!==n?n:4473924),r=new y(void 0!==r?r:8947848);for(var i=t/2,o=e/t,a=e/2,s=[],l=[],u=0,c=0,h=-a;u<=t;u++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var d=u===i?n:r;d.toArray(l,c),c+=3,d.toArray(l,c),c+=3,d.toArray(l,c),c+=3,d.toArray(l,c),c+=3}var f=new z;f.addAttribute("position",new D(s,3)),f.addAttribute("color",new D(l,3));var p=new Dt({vertexColors:Ro});Ft.call(this,f,p)}function uo(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new y(void 0!==i?i:4473924),o=new y(void 0!==o?o:8947848);var a,s,l,u,c,h,d,f=[],p=[];for(u=0;u<=t;u++)l=u/t*(2*Math.PI),a=Math.sin(l)*e,s=Math.cos(l)*e,f.push(0,0,0),f.push(a,0,s),d=1&u?i:o,p.push(d.r,d.g,d.b),p.push(d.r,d.g,d.b);for(u=0;u<=n;u++)for(d=1&u?i:o,h=e-e/n*u,c=0;c<r;c++)l=c/r*(2*Math.PI),a=Math.sin(l)*h,s=Math.cos(l)*h,f.push(a,0,s),p.push(d.r,d.g,d.b),l=(c+1)/r*(2*Math.PI),a=Math.sin(l)*h,s=Math.cos(l)*h,f.push(a,0,s),p.push(d.r,d.g,d.b);var m=new z;m.addAttribute("position",new D(f,3)),m.addAttribute("color",new D(p,3));var v=new Dt({vertexColors:Ro});Ft.call(this,m,v)}function co(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new z,u=new D(2*a*3,3);l.addAttribute("position",u),Ft.call(this,l,new Dt({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function ho(e,t,n){x.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var r=new z;r.addAttribute("position",new D([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new Dt({fog:!1});this.lightPlane=new Nt(r,i),this.add(this.lightPlane),r=new z,r.addAttribute("position",new D([0,0,0,0,0,1],3)),this.targetLine=new Nt(r,i),this.add(this.targetLine),this.update()}function fo(e){function t(e,t,r){n(e,r),n(t,r)}function n(e,t){o.push(0,0,0),a.push(t.r,t.g,t.b),void 0===s[e]&&(s[e]=[]),s[e].push(o.length/3-1)}var r=new z,i=new Dt({color:16777215,vertexColors:Io}),o=[],a=[],s={},l=new y(16755200),u=new y(16711680),c=new y(43775),h=new y(16777215),d=new y(3355443);t("n1","n2",l),t("n2","n4",l),t("n4","n3",l),t("n3","n1",l),t("f1","f2",l),t("f2","f4",l),t("f4","f3",l),t("f3","f1",l),t("n1","f1",l),t("n2","f2",l),t("n3","f3",l),t("n4","f4",l),t("p","n1",u),t("p","n2",u),t("p","n3",u),t("p","n4",u),t("u1","u2",c),t("u2","u3",c),t("u3","u1",c),t("c","t",h),t("p","c",d),t("cn1","cn2",d),t("cn3","cn4",d),t("cf1","cf2",d),t("cf3","cf4",d),r.addAttribute("position",new D(o,3)),r.addAttribute("color",new D(a,3)),Ft.call(this,r,i),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function po(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new z;i.setIndex(new k(n,1)),i.addAttribute("position",new k(r,3)),Ft.call(this,i,new Dt({color:t})),this.matrixAutoUpdate=!1,this.update()}function mo(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new z;o.setIndex(new k(r,1)),o.addAttribute("position",new D(i,3)),Ft.call(this,o,new Dt({color:n})),this.geometry.computeBoundingSphere()}function vo(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var r=void 0!==n?n:16776960,i=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new z;o.addAttribute("position",new D(i,3)),o.computeBoundingSphere(),Nt.call(this,o,new Dt({color:r}));var a=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],s=new z;s.addAttribute("position",new D(a,3)),s.computeBoundingSphere(),this.add(new J(s,new W({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function go(e,t,n,r,i,o){x.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===Sl&&(Sl=new z,Sl.addAttribute("position",new D([0,0,0,0,1,0],3)),Tl=new nr(0,.5,1,5,1),Tl.translate(0,-.5,0)),this.position.copy(t),this.line=new Nt(Sl,new Dt({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new J(Tl,new W({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function yo(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new z;r.addAttribute("position",new D(t,3)),r.addAttribute("color",new D(n,3));var i=new Dt({vertexColors:Ro});Ft.call(this,r,i)}function _o(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),kr.call(this,e),this.type="catmullrom",this.closed=!0}function bo(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),kr.call(this,e),this.type="catmullrom"}function wo(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),kr.call(this,e),this.type="catmullrom"}n.d(t,"r",function(){return h}),n.d(t,"s",function(){return Tt}),n.d(t,"o",function(){return Pt}),n.d(t,"c",function(){return ti}),n.d(t,"j",function(){return xt}),n.d(t,"f",function(){return M}),n.d(t,"e",function(){return T}),n.d(t,"n",function(){return Xi}),n.d(t,"d",function(){return r}),n.d(t,"p",function(){return Z}),n.d(t,"k",function(){return v}),n.d(t,"h",function(){return o}),n.d(t,"a",function(){return p}),n.d(t,"q",function(){return s}),n.d(t,"b",function(){return y}),n.d(t,"i",function(){return Pa}),n.d(t,"g",function(){return Oa}),n.d(t,"m",function(){return Xa}),n.d(t,"l",function(){return Ya}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}}(),Object.assign(r.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners,r=n[e];if(void 0!==r){var i=r.indexOf(t);-1!==i&&r.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;for(var r=n.slice(0),i=0,o=r.length;i<o;i++)r[i].call(this,e)}}}});var xo="92",Eo=0,So=1,To=2,Mo=1,ko=2,Po=0,Co=1,Ao=2,Oo=0,Io=1,Ro=2,Lo=0,Do=1,No=2,Fo=3,Uo=4,zo=5,Bo=100,jo=101,Ho=102,Vo=103,Go=104,Wo=200,qo=201,Xo=202,Yo=203,Zo=204,Jo=205,Ko=206,Qo=207,$o=208,ea=209,ta=210,na=0,ra=1,ia=2,oa=3,aa=4,sa=5,la=6,ua=7,ca=0,ha=1,da=2,fa=0,pa=1,ma=2,va=3,ga=4,ya=301,_a=302,ba=303,wa=304,xa=305,Ea=306,Sa=307,Ta=1e3,Ma=1001,ka=1002,Pa=1003,Ca=1004,Aa=1005,Oa=1006,Ia=1007,Ra=1008,La=1009,Da=1010,Na=1011,Fa=1012,Ua=1013,za=1014,Ba=1015,ja=1016,Ha=1017,Va=1018,Ga=1019,Wa=1020,qa=1021,Xa=1022,Ya=1023,Za=1024,Ja=1025,Ka=1026,Qa=1027,$a=33776,es=33777,ts=33778,ns=33779,rs=35840,is=35841,os=35842,as=35843,ss=36196,ls=37808,us=37809,cs=37810,hs=37811,ds=37812,fs=37813,ps=37814,ms=37815,vs=37816,gs=37817,ys=37818,_s=37819,bs=37820,ws=37821,xs=2201,Es=2400,Ss=0,Ts=1,Ms=2,ks=3e3,Ps=3001,Cs=3007,As=3002,Os=3004,Is=3005,Rs=3006,Ls=3200,Ds=3201,Ns={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&r|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]).toUpperCase()}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Ns.DEG2RAD},radToDeg:function(e){return e*Ns.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};Object.defineProperties(i.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(i.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new i,t=new i;return function(n,r){return e.set(n,n),t.set(r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}}),Object.assign(o.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,l,u,c,h,d,f,p,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=l,v[6]=u,v[10]=c,v[14]=h,v[3]=d,v[7]=f,v[11]=p,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new o).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new s;return function(t){var n=this.elements,r=t.elements,i=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var h=o*u,d=o*c,f=a*u,p=a*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=d+f*l,t[5]=h-p*l,t[9]=-a*s,t[2]=p-h*l,t[6]=f+d*l,t[10]=o*s}else if("YXZ"===e.order){var m=s*u,v=s*c,g=l*u,y=l*c;t[0]=m+y*a,t[4]=g*a-v,t[8]=o*l,t[1]=o*c,t[5]=o*u,t[9]=-a,t[2]=v*a-g,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order){var m=s*u,v=s*c,g=l*u,y=l*c;t[0]=m-y*a,t[4]=-o*c,t[8]=g+v*a,t[1]=v+g*a,t[5]=o*u,t[9]=y-m*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){var h=o*u,d=o*c,f=a*u,p=a*c;t[0]=s*u,t[4]=f*l-d,t[8]=h*l+p,t[1]=s*c,t[5]=p*l+h,t[9]=d*l-f,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var _=o*s,b=o*l,w=a*s,x=a*l;t[0]=s*u,t[4]=x-_*c,t[8]=w*c+b,t[1]=c,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=b*c+w,t[10]=_-x*c}else if("XZY"===e.order){var _=o*s,b=o*l,w=a*s,x=a*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=_*c+x,t[5]=o*u,t[9]=b*c-w,t[2]=w*c-b,t[6]=a*u,t[10]=x*c+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e._x,r=e._y,i=e._z,o=e._w,a=n+n,s=r+r,l=i+i,u=n*a,c=n*s,h=n*l,d=r*s,f=r*l,p=i*l,m=o*a,v=o*s,g=o*l;return t[0]=1-(d+p),t[4]=c-g,t[8]=h+v,t[1]=c+g,t[5]=1-(u+p),t[9]=f-m,t[2]=h-v,t[6]=f+m,t[10]=1-(u+d),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new s,t=new s,n=new s;return function(r,i,o){var a=this.elements;return n.subVectors(r,i),0===n.lengthSq()&&(n.z=1),n.normalize(),e.crossVectors(o,n),0===e.lengthSq()&&(1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(o,n)),e.normalize(),t.crossVectors(n,e),a[0]=e.x,a[4]=t.x,a[8]=n.x,a[1]=e.y,a[5]=t.y,a[9]=n.y,a[2]=e.z,a[6]=t.z,a[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],u=n[1],c=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],v=n[14],g=n[3],y=n[7],_=n[11],b=n[15],w=r[0],x=r[4],E=r[8],S=r[12],T=r[1],M=r[5],k=r[9],P=r[13],C=r[2],A=r[6],O=r[10],I=r[14],R=r[3],L=r[7],D=r[11],N=r[15];return i[0]=o*w+a*T+s*C+l*R,i[4]=o*x+a*M+s*A+l*L,i[8]=o*E+a*k+s*O+l*D,i[12]=o*S+a*P+s*I+l*N,i[1]=u*w+c*T+h*C+d*R,i[5]=u*x+c*M+h*A+d*L,i[9]=u*E+c*k+h*O+d*D,i[13]=u*S+c*P+h*I+d*N,i[2]=f*w+p*T+m*C+v*R,i[6]=f*x+p*M+m*A+v*L,i[10]=f*E+p*k+m*O+v*D,i[14]=f*S+p*P+m*I+v*N,i[3]=g*w+y*T+_*C+b*R,i[7]=g*x+y*M+_*A+b*L,i[11]=g*E+y*k+_*O+b*D,i[15]=g*S+y*P+_*I+b*N,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new s;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],u=e[2],c=e[6],h=e[10],d=e[14];return e[3]*(+i*s*c-r*l*c-i*a*h+n*l*h+r*a*d-n*s*d)+e[7]*(+t*s*d-t*l*h+i*o*h-r*o*d+r*l*u-i*s*u)+e[11]*(+t*l*c-t*a*d-i*o*c+n*o*d+i*a*u-n*l*u)+e[15]*(-r*a*u-t*s*c+t*a*h+r*o*c-n*o*h+n*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],l=r[4],u=r[5],c=r[6],h=r[7],d=r[8],f=r[9],p=r[10],m=r[11],v=r[12],g=r[13],y=r[14],_=r[15],b=f*y*h-g*p*h+g*c*m-u*y*m-f*c*_+u*p*_,w=v*p*h-d*y*h-v*c*m+l*y*m+d*c*_-l*p*_,x=d*g*h-v*f*h+v*u*m-l*g*m-d*u*_+l*f*_,E=v*f*c-d*g*c-v*u*p+l*g*p+d*u*y-l*f*y,S=i*b+o*w+a*x+s*E;if(0===S){var T="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(T);return console.warn(T),this.identity()}var M=1/S;return n[0]=b*M,n[1]=(g*p*s-f*y*s-g*a*m+o*y*m+f*a*_-o*p*_)*M,n[2]=(u*y*s-g*c*s+g*a*h-o*y*h-u*a*_+o*c*_)*M,n[3]=(f*c*s-u*p*s-f*a*h+o*p*h+u*a*m-o*c*m)*M,n[4]=w*M,n[5]=(d*y*s-v*p*s+v*a*m-i*y*m-d*a*_+i*p*_)*M,n[6]=(v*c*s-l*y*s-v*a*h+i*y*h+l*a*_-i*c*_)*M,n[7]=(l*p*s-d*c*s+d*a*h-i*p*h-l*a*m+i*c*m)*M,n[8]=x*M,n[9]=(v*f*s-d*g*s-v*o*m+i*g*m+d*o*_-i*f*_)*M,n[10]=(l*g*s-v*u*s+v*o*h-i*g*h-l*o*_+i*u*_)*M,n[11]=(d*u*s-l*f*s-d*o*h+i*f*h+l*o*m-i*u*m)*M,n[12]=E*M,n[13]=(d*g*a-v*f*a+v*o*p-i*g*p-d*o*y+i*f*y)*M,n[14]=(v*u*a-l*g*a-v*o*c+i*g*c+l*o*y-i*u*y)*M,n[15]=(l*f*a-d*u*a+d*o*c-i*f*c-l*o*p+i*u*p)*M,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,u=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,u*a+n,u*s-r*o,0,l*s-r*a,u*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e=new s,t=new o;return function(n,r,i){var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),l=e.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],t.copy(this);var u=1/a,c=1/s,h=1/l;return t.elements[0]*=u,t.elements[1]*=u,t.elements[2]*=u,t.elements[4]*=c,t.elements[5]*=c,t.elements[6]*=c,t.elements[8]*=h,t.elements[9]*=h,t.elements[10]*=h,r.setFromRotationMatrix(t),i.x=a,i.y=s,i.z=l,this}}(),makePerspective:function(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(t-e),l=2*i/(n-r),u=(t+e)/(t-e),c=(n+r)/(n-r),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),l=1/(n-r),u=1/(o-i),c=(t+e)*s,h=(n+r)*l,d=(o+i)*u;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),Object.assign(a,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3],h=i[o+0],d=i[o+1],f=i[o+2],p=i[o+3];if(c!==p||s!==h||l!==d||u!==f){var m=1-a,v=s*h+l*d+u*f+c*p,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,v*g);m=Math.sin(m*b)/_,a=Math.sin(a*b)/_}var w=a*g;if(s=s*m+h*w,l=l*m+d*w,u=u*m+f*w,c=c*m+p*w,m===1-a){var x=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=x,l*=x,u*=x,c*=x}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}}),Object.defineProperties(a.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(a.prototype,{set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,o=e.order,a=Math.cos,s=Math.sin,l=a(n/2),u=a(r/2),c=a(i/2),h=s(n/2),d=s(r/2),f=s(i/2);return"XYZ"===o?(this._x=h*u*c+l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c-h*d*f):"YXZ"===o?(this._x=h*u*c+l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c+h*d*f):"ZXY"===o?(this._x=h*u*c-l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c-h*d*f):"ZYX"===o?(this._x=h*u*c-l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c+h*d*f):"YZX"===o?(this._x=h*u*c+l*d*f,this._y=l*d*c+h*u*f,this._z=l*u*f-h*d*c,this._w=l*u*c-h*d*f):"XZY"===o&&(this._x=h*u*c-l*d*f,this._y=l*d*c-h*u*f,this._z=l*u*f+h*d*c,this._w=l*u*c+h*d*f),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],l=n[9],u=n[2],c=n[6],h=n[10],d=r+s+h;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(c-l)*t,this._y=(o-u)*t,this._z=(a-i)*t):r>s&&r>h?(t=2*Math.sqrt(1+r-s-h),this._w=(c-l)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+u)/t):s>h?(t=2*Math.sqrt(1+s-r-h),this._w=(o-u)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(l+c)/t):(t=2*Math.sqrt(1+h-r-s),this._w=(a-i)/t,this._x=(o+u)/t,this._y=(l+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new s;return function(n,r){return void 0===t&&(t=new s),e=n.dot(r)+1,e<1e-6?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,r),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+o*a+r*l-i*s,this._y=r*u+o*s+i*a-n*l,this._z=i*u+o*l+n*s-r*a,this._w=o*u-n*a-r*s-i*l,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var l=Math.atan2(s,a),u=Math.sin((1-t)*l)/s,c=Math.sin(t*l)/s;return this._w=o*u+this._w*c,this._x=n*u+this._x*c,this._y=r*u+this._y*c,this._z=i*u+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(s.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new a;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new a;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*r-a*n,u=s*n+a*t-i*r,c=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=l*s+h*-i+u*-a-c*-o,this.y=u*s+h*-o+c*-i-l*-a,this.z=c*s+h*-a+l*-o-u*-i,this},project:function(){var e=new o;return function(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new o;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new s,t=new s;return function(n,r){return e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new s;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new s;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Ns.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(l.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,l){var u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=o,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new s;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],u=n[4],c=n[7],h=n[2],d=n[5],f=n[8],p=r[0],m=r[3],v=r[6],g=r[1],y=r[4],_=r[7],b=r[2],w=r[5],x=r[8];return i[0]=o*p+a*g+s*b,i[3]=o*m+a*y+s*w,i[6]=o*v+a*_+s*x,i[1]=l*p+u*g+c*b,i[4]=l*m+u*y+c*w,i[7]=l*v+u*_+c*x,i[2]=h*p+d*g+f*b,i[5]=h*m+d*y+f*w,i[8]=h*v+d*_+f*x,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-n*i*u+n*a*s+r*i*l-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],l=n[4],u=n[5],c=n[6],h=n[7],d=n[8],f=d*l-u*h,p=u*c-d*s,m=h*s-l*c,v=i*f+o*p+a*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return r[0]=f*y,r[1]=(a*h-d*o)*y,r[2]=(u*o-a*l)*y,r[3]=p*y,r[4]=(d*i-a*c)*y,r[5]=(a*s-u*i)*y,r[6]=m*y,r[7]=(o*c-h*i)*y,r[8]=(l*i-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,o,a){var s=Math.cos(i),l=Math.sin(i);this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-r*l,r*s,-r*(-l*o+s*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],l=r[4],u=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*l,r[6]=t*a+n*u,r[1]=-n*i+t*s,r[4]=-n*o+t*l,r[7]=-n*a+t*u,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Fs=0;u.DEFAULT_IMAGE=void 0,u.DEFAULT_MAPPING=300,u.prototype=Object.assign(Object.create(r.prototype),{constructor:u,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;void 0===r.uuid&&(r.uuid=Ns.generateUUID()),t||void 0!==e.images[r.uuid]||(e.images[r.uuid]={uuid:r.uuid,url:function(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),t.width=e.width,t.height=e.height;var n=t.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}(r)}),n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ta:e.x=e.x-Math.floor(e.x);break;case Ma:e.x=e.x<0?0:1;break;case ka:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Ta:e.y=e.y-Math.floor(e.y);break;case Ma:e.y=e.y<0?0:1;break;case ka:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.defineProperty(u.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(c.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=e.elements,a=o[0],s=o[4],l=o[8],u=o[1],c=o[5],h=o[9],d=o[2],f=o[6],p=o[10];if(Math.abs(s-u)<.01&&Math.abs(l-d)<.01&&Math.abs(h-f)<.01){if(Math.abs(s+u)<.1&&Math.abs(l+d)<.1&&Math.abs(h+f)<.1&&Math.abs(a+c+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,v=(c+1)/2,g=(p+1)/2,y=(s+u)/4,_=(l+d)/4,b=(h+f)/4;return m>v&&m>g?m<.01?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(m),r=y/n,i=_/n):v>g?v<.01?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(v),n=y/r,i=b/r):g<.01?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(g),n=_/i,r=b/i),this.set(n,r,i,t),this}var w=Math.sqrt((f-h)*(f-h)+(l-d)*(l-d)+(u-s)*(u-s));return Math.abs(w)<.001&&(w=1),this.x=(f-h)/w,this.y=(l-d)/w,this.z=(u-s)/w,this.w=Math.acos((a+c+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new c,t=new c),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),h.prototype=Object.assign(Object.create(r.prototype),{constructor:h,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),d.prototype=Object.create(h.prototype),d.prototype.constructor=d,d.prototype.isWebGLRenderTargetCube=!0,f.prototype=Object.create(u.prototype),f.prototype.constructor=f,f.prototype.isDataTexture=!0,Object.assign(p.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],h=e[s+2];u<t&&(t=u),c<n&&(n=c),h<r&&(r=h),u>i&&(i=u),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,l=e.count;s<l;s++){var u=e.getX(s),c=e.getY(s),h=e.getZ(s);u<t&&(t=u),c<n&&(n=c),h<r&&(r=h),u>i&&(i=u),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new s;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new s),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new s),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){function e(e){var o=e.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(n=0,r=a.length;n<r;n++)i.copy(a[n]),i.applyMatrix4(e.matrixWorld),t.expandByPoint(i)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(n=0,r=s.count;n<r;n++)i.fromBufferAttribute(s,n).applyMatrix4(e.matrixWorld),t.expandByPoint(i)}}var t,n,r,i=new s;return function(n){return t=this,n.updateMatrixWorld(!0),n.traverse(e),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new s),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new s;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},intersectsTriangle:function(){function e(e){var i,o;for(i=0,o=e.length-3;i<=o;i+=3){l.fromArray(e,i);var a=c.x*Math.abs(l.x)+c.y*Math.abs(l.y)+c.z*Math.abs(l.z),s=t.dot(l),u=n.dot(l),h=r.dot(l);if(Math.max(-Math.max(s,u,h),Math.min(s,u,h))>a)return!1}return!0}var t=new s,n=new s,r=new s,i=new s,o=new s,a=new s,l=new s,u=new s,c=new s,h=new s;return function(s){if(this.isEmpty())return!1;this.getCenter(u),c.subVectors(this.max,u),t.subVectors(s.a,u),n.subVectors(s.b,u),r.subVectors(s.c,u),i.subVectors(n,t),o.subVectors(r,n),a.subVectors(t,r);var l=[0,-i.z,i.y,0,-o.z,o.y,0,-a.z,a.y,i.z,0,-i.x,o.z,0,-o.x,a.z,0,-a.x,-i.y,i.x,0,-o.y,o.x,0,-a.y,a.x,0];return!!e(l)&&(l=[1,0,0,0,1,0,0,0,1],!!e(l)&&(h.crossVectors(i,o),l=[h.x,h.y,h.z],e(l)))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new s),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new s;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new s;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new m),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new s,new s,new s,new s,new s,new s,new s,new s];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(m.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new p;return function(t,n){var r=this.center;void 0!==n?r.copy(n):e.setFromPoints(t).getCenter(r);for(var i=0,o=0,a=t.length;o<a;o++)i=Math.max(i,r.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new s),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new p),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(v.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new s,t=new s;return function(n,r,i){var o=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new s),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new s;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new s);var r=t.delta(e),i=this.normal.dot(r);if(0!==i){var o=-(t.start.dot(this.normal)+this.constant)/i;if(!(o<0||o>1))return n.copy(r).multiplyScalar(o).add(t.start)}else if(0===this.distanceToPoint(t.start))return n.copy(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new s),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new s,t=new l;return function(n,r){var i=r||t.getNormalMatrix(n),o=this.coplanarPoint(e).applyMatrix4(n),a=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(g.prototype,{set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-r,c-s,p-h,y-m).normalize(),t[1].setComponents(a+r,c+s,p+h,y+m).normalize(),t[2].setComponents(a+i,c+l,p+d,y+v).normalize(),t[3].setComponents(a-i,c-l,p-d,y-v).normalize(),t[4].setComponents(a-o,c-u,p-f,y-g).normalize(),t[5].setComponents(a+o,c+u,p+f,y+g).normalize(),this},intersectsObject:function(){var e=new m;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new m;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0},intersectsBox:function(){var e=new s,t=new s;return function(n){for(var r=this.planes,i=0;i<6;i++){var o=r[i];e.x=o.normal.x>0?n.min.x:n.max.x,t.x=o.normal.x>0?n.max.x:n.min.x,e.y=o.normal.y>0?n.min.y:n.max.y,t.y=o.normal.y>0?n.max.y:n.min.y,e.z=o.normal.z>0?n.min.z:n.max.z,t.z=o.normal.z>0?n.max.z:n.min.z;var a=o.distanceToPoint(e),s=o.distanceToPoint(t);if(a<0&&s<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var Us={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\t\tscale *= float( gl_FrontFacing ) * 2.0 - 1.0;\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},zs={merge:function(e){for(var t={},n=0;n<e.length;n++){var r=this.clone(e[n]);for(var i in r)t[i]=r[i]}return t},clone:function(e){var t={};for(var n in e){t[n]={};for(var r in e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}},Bs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(y.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,r){if(t=Ns.euclideanModulo(t,1),n=Ns.clamp(n,0,1),r=Ns.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,o=2*r-i;this.r=e(o,i,t+1/3),this.g=e(o,i,t),this.b=e(o,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,l=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(a,s,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u=n[1],c=u.length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}if(e&&e.length>0){var u=Bs[e];void 0!==u?this.setHex(u):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),l=(s+a)/2;if(s===a)t=0,n=0;else{var u=a-s;switch(n=l<=.5?u/(a+s):u/(2-a-s),a){case r:t=(i-o)/u+(i<o?6:0);break;case i:t=(o-r)/u+2;break;case o:t=(r-i)/u+4}t/=6}return e.h=t,e.s=n,e.l=l,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var e={};return function(t,n,r){return this.getHSL(e),e.h+=t,e.s+=n,e.l+=r,this.setHSL(e.h,e.s,e.l),this}}(),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var js={common:{diffuse:{value:new y(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new l},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new i(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new y(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new y(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new l}}},Hs={basic:{uniforms:zs.merge([js.common,js.specularmap,js.envmap,js.aomap,js.lightmap,js.fog]),vertexShader:Us.meshbasic_vert,fragmentShader:Us.meshbasic_frag},lambert:{uniforms:zs.merge([js.common,js.specularmap,js.envmap,js.aomap,js.lightmap,js.emissivemap,js.fog,js.lights,{emissive:{value:new y(0)}}]),vertexShader:Us.meshlambert_vert,fragmentShader:Us.meshlambert_frag},phong:{uniforms:zs.merge([js.common,js.specularmap,js.envmap,js.aomap,js.lightmap,js.emissivemap,js.bumpmap,js.normalmap,js.displacementmap,js.gradientmap,js.fog,js.lights,{emissive:{value:new y(0)},specular:{value:new y(1118481)},shininess:{value:30}}]),vertexShader:Us.meshphong_vert,fragmentShader:Us.meshphong_frag},standard:{uniforms:zs.merge([js.common,js.envmap,js.aomap,js.lightmap,js.emissivemap,js.bumpmap,js.normalmap,js.displacementmap,js.roughnessmap,js.metalnessmap,js.fog,js.lights,{emissive:{value:new y(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Us.meshphysical_vert,fragmentShader:Us.meshphysical_frag},points:{uniforms:zs.merge([js.points,js.fog]),vertexShader:Us.points_vert,fragmentShader:Us.points_frag},dashed:{uniforms:zs.merge([js.common,js.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Us.linedashed_vert,fragmentShader:Us.linedashed_frag},depth:{uniforms:zs.merge([js.common,js.displacementmap]),vertexShader:Us.depth_vert,fragmentShader:Us.depth_frag},normal:{uniforms:zs.merge([js.common,js.bumpmap,js.normalmap,js.displacementmap,{opacity:{value:1}}]),vertexShader:Us.normal_vert,fragmentShader:Us.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Us.cube_vert,fragmentShader:Us.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Us.equirect_vert,fragmentShader:Us.equirect_frag},distanceRGBA:{uniforms:zs.merge([js.common,js.displacementmap,{referencePosition:{value:new s},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Us.distanceRGBA_vert,fragmentShader:Us.distanceRGBA_frag},shadow:{uniforms:zs.merge([js.lights,js.fog,{color:{value:new y(0)},opacity:{value:1}}]),vertexShader:Us.shadow_vert,fragmentShader:Us.shadow_frag}};Hs.physical={uniforms:zs.merge([Hs.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Us.meshphysical_vert,fragmentShader:Us.meshphysical_frag},b.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],b.DefaultOrder="XYZ",Object.defineProperties(b.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(b.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=Ns.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],l=i[1],u=i[5],c=i[9],h=i[2],d=i[6],f=i[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,f),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o))):"ZYX"===t?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u))):"YZX"===t?(this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,f))):"XZY"===t?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(d,u),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new o;return function(t,n,r){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new a;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new s(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(w.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!==(this.mask&e.mask)}});var Vs=0;x.DefaultUp=new s(0,1,0),x.DefaultMatrixAutoUpdate=!0,x.prototype=Object.assign(Object.create(r.prototype),{constructor:x,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new a;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new a;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new s(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new s(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new s(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new s;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new s(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new s(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new s(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new o;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new o,t=new s;return function(n,r,i){n.isVector3?t.copy(n):t.set(n,r,i),this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],o=i.getObjectByProperty(e,t);if(void 0!==o)return o}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new s),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new s,t=new s;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new a),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,t),n}}(),getWorldScale:function(){var e=new s,t=new a;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new s),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(){var e=new a;return function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new s),this.getWorldQuaternion(e),t.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){function t(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}function n(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}var r=void 0===e||"string"===typeof e,i={};r&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var o={};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),void 0!==this.geometry){o.geometry=t(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var s=a.shapes;if(Array.isArray(s))for(var l=0,u=s.length;l<u;l++){var c=s[l];t(e.shapes,c)}else t(e.shapes,s)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var h=[],l=0,u=this.material.length;l<u;l++)h.push(t(e.materials,this.material[l]));o.material=h}else o.material=t(e.materials,this.material);if(this.children.length>0){o.children=[];for(var l=0;l<this.children.length;l++)o.children.push(this.children[l].toJSON(e).object)}if(r){var d=n(e.geometries),f=n(e.materials),p=n(e.textures),m=n(e.images),s=n(e.shapes);d.length>0&&(i.geometries=d),f.length>0&&(i.materials=f),p.length>0&&(i.textures=p),m.length>0&&(i.images=m),s.length>0&&(i.shapes=s)}return i.object=o,i},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}),E.prototype=Object.assign(Object.create(x.prototype),{constructor:E,isCamera:!0,copy:function(e,t){return x.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new a;return function(t){return void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new s),this.getWorldQuaternion(e),t.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){x.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),S.prototype=Object.assign(Object.create(E.prototype),{constructor:S,isOrthographicCamera:!0,copy:function(e,t){return E.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;i+=c*(this.view.offsetX/l),o=i+c*(this.view.width/l),a-=h*(this.view.offsetY/u),s=a-h*(this.view.height/u)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far)},toJSON:function(e){var t=x.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(T.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var Gs=0;M.prototype=Object.assign(Object.create(r.prototype),{constructor:M,isGeometry:!0,applyMatrix:function(e){for(var t=(new l).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){this.vertices[n].applyMatrix4(e)}for(var n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new o;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new o;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new o;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new o;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new o;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new x;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function t(e,t,r,i){var o=void 0!==l?[d[e].clone(),d[t].clone(),d[r].clone()]:[],a=void 0!==u?[n.colors[e].clone(),n.colors[t].clone(),n.colors[r].clone()]:[],s=new T(e,t,r,o,a,i);n.faces.push(s),void 0!==c&&n.faceVertexUvs[0].push([f[e].clone(),f[t].clone(),f[r].clone()]),void 0!==h&&n.faceVertexUvs[1].push([p[e].clone(),p[t].clone(),p[r].clone()])}var n=this,r=null!==e.index?e.index.array:void 0,o=e.attributes,a=o.position.array,l=void 0!==o.normal?o.normal.array:void 0,u=void 0!==o.color?o.color.array:void 0,c=void 0!==o.uv?o.uv.array:void 0,h=void 0!==o.uv2?o.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var d=[],f=[],p=[],m=0,v=0;m<a.length;m+=3,v+=2)n.vertices.push(new s(a[m],a[m+1],a[m+2])),void 0!==l&&d.push(new s(l[m],l[m+1],l[m+2])),void 0!==u&&n.colors.push(new y(u[m],u[m+1],u[m+2])),void 0!==c&&f.push(new i(c[v],c[v+1])),void 0!==h&&p.push(new i(h[v],h[v+1]));var g=e.groups;if(g.length>0)for(var m=0;m<g.length;m++)for(var _=g[m],b=_.start,w=_.count,v=b,x=b+w;v<x;v+=3)void 0!==r?t(r[v],r[v+1],r[v+2],_.materialIndex):t(v,v+1,v+2,_.materialIndex);else if(void 0!==r)for(var m=0;m<r.length;m+=3)t(r[m],r[m+1],r[m+2]);else for(var m=0;m<a.length/3;m+=3)t(m,m+1,m+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){var e=new s;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new o;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new s,t=new s,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],l=this.vertices[i.c];e.subVectors(l,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);var t,n,r,i,o,a;for(a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new s;if(e){var l,u,c,h=new s,d=new s;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],l=this.vertices[o.a],u=this.vertices[o.b],c=this.vertices[o.c],h.subVectors(c,u),d.subVectors(l,u),h.cross(d),a[o.a].add(h),a[o.b].add(h),a[o.c].add(h)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)o=this.faces[r],a[o.a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(r=0,i=this.faces.length;r<i;r++){o=this.faces[r];var f=o.vertexNormals;3===f.length?(f[0].copy(a[o.a]),f[1].copy(a[o.b]),f[2].copy(a[o.c])):(f[0]=a[o.a].clone(),f[1]=a[o.b].clone(),f[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){n=this.faces[e];var r=n.vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for(i=this.faces[n],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new M;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a,l,u=this.morphNormals[e].faceNormals,c=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)a=new s,l={a:new s,b:new s,c:new s},u.push(a),c.push(l)}var h=this.morphNormals[e];o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals();var a,l;for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],a=h.faceNormals[n],l=h.vertexNormals[n],a.copy(i.normal),l.a.copy(i.vertexNormals[0]),l.b.copy(i.vertexNormals[1]),l.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new p),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new m),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!e||!e.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);var r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,u=e.faces,c=this.faceVertexUvs[0],h=e.faceVertexUvs[0],d=this.colors,f=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new l).getNormalMatrix(t));for(var p=0,m=a.length;p<m;p++){var v=a[p],g=v.clone();void 0!==t&&g.applyMatrix4(t),o.push(g)}for(var p=0,m=f.length;p<m;p++)d.push(f[p].clone());for(p=0,m=u.length;p<m;p++){var y,_,b,w=u[p],x=w.vertexNormals,E=w.vertexColors;y=new T(w.a+i,w.b+i,w.c+i),y.normal.copy(w.normal),void 0!==r&&y.normal.applyMatrix3(r).normalize();for(var S=0,M=x.length;S<M;S++)_=x[S].clone(),void 0!==r&&_.applyMatrix3(r).normalize(),y.vertexNormals.push(_);y.color.copy(w.color);for(var S=0,M=E.length;S<M;S++)b=E[S],y.vertexColors.push(b.clone());y.materialIndex=w.materialIndex+n,s.push(y)}for(p=0,m=h.length;p<m;p++){var k=h[p],P=[];if(void 0!==k){for(var S=0,M=k.length;S<M;S++)P.push(k[S].clone());c.push(P)}}},mergeMesh:function(e){if(!e||!e.isMesh)return void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)},mergeVertices:function(){var e,t,n,r,i,o,a,s,l={},u=[],c=[],h=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h),void 0===l[t]?(l[t]=n,u.push(this.vertices[n]),c[n]=u.length-1):c[n]=c[l[t]];var d=[];for(n=0,r=this.faces.length;n<r;n++){i=this.faces[n],i.a=c[i.a],i.b=c[i.b],i.c=c[i.c],o=[i.a,i.b,i.c];for(var f=0;f<3;f++)if(o[f]===o[(f+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var p=d[n];for(this.faces.splice(p,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(p,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new s(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){function e(e,t){return e.materialIndex-t.materialIndex}for(var t=this.faces,n=t.length,r=0;r<n;r++)t[r]._id=r;t.sort(e);var i,o,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===n&&(i=[]),s&&s.length===n&&(o=[]);for(var r=0;r<n;r++){var l=t[r]._id;i&&i.push(a[l]),o&&o.push(s[l])}i&&(this.faceVertexUvs[0]=i),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){function e(e,t,n){return n?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==d[t]?d[t]:(d[t]=h.length/3,h.push(e.x,e.y,e.z),d[t])}function n(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==p[t]?p[t]:(p[t]=f.length,f.push(e.getHex()),p[t])}function r(e){var t=e.x.toString()+e.y.toString();return void 0!==v[t]?v[t]:(v[t]=m.length/2,m.push(e.x,e.y),v[t])}var i={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var a in o)void 0!==o[a]&&(i[a]=o[a]);return i}for(var s=[],l=0;l<this.vertices.length;l++){var u=this.vertices[l];s.push(u.x,u.y,u.z)}for(var c=[],h=[],d={},f=[],p={},m=[],v={},l=0;l<this.faces.length;l++){var g=this.faces[l],y=void 0!==this.faceVertexUvs[0][l],_=g.normal.length()>0,b=g.vertexNormals.length>0,w=1!==g.color.r||1!==g.color.g||1!==g.color.b,x=g.vertexColors.length>0,E=0;if(E=e(E,0,0),E=e(E,1,!0),E=e(E,2,!1),E=e(E,3,y),E=e(E,4,_),E=e(E,5,b),E=e(E,6,w),E=e(E,7,x),c.push(E),c.push(g.a,g.b,g.c),c.push(g.materialIndex),y){var S=this.faceVertexUvs[0][l];c.push(r(S[0]),r(S[1]),r(S[2]))}if(_&&c.push(t(g.normal)),b){var T=g.vertexNormals;c.push(t(T[0]),t(T[1]),t(T[2]))}if(w&&c.push(n(g.color)),x){var M=g.vertexColors;c.push(n(M[0]),n(M[1]),n(M[2]))}}return i.data={},i.data.vertices=s,i.data.normals=h,f.length>0&&(i.data.colors=f),m.length>0&&(i.data.uvs=[m]),i.data.faces=c,i},clone:function(){return(new M).copy(this)},copy:function(e){var t,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var l=e.colors;for(t=0,n=l.length;t<n;t++)this.colors.push(l[t].clone());var u=e.faces;for(t=0,n=u.length;t<n;t++)this.faces.push(u[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,i=c.length;r<i;r++){var h=c[r],d=[];for(o=0,a=h.length;o<a;o++){var f=h[o];d.push(f.clone())}this.faceVertexUvs[t].push(d)}}var p=e.morphTargets;for(t=0,n=p.length;t<n;t++){var m={};if(m.name=p[t].name,void 0!==p[t].vertices)for(m.vertices=[],r=0,i=p[t].vertices.length;r<i;r++)m.vertices.push(p[t].vertices[r].clone());if(void 0!==p[t].normals)for(m.normals=[],r=0,i=p[t].normals.length;r<i;r++)m.normals.push(p[t].normals[r].clone());this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,n=v.length;t<n;t++){var g={};if(void 0!==v[t].vertexNormals)for(g.vertexNormals=[],r=0,i=v[t].vertexNormals.length;r<i;r++){var y=v[t].vertexNormals[r],_={};_.a=y.a.clone(),_.b=y.b.clone(),_.c=y.c.clone(),g.vertexNormals.push(_)}if(void 0!==v[t].faceNormals)for(g.faceNormals=[],r=0,i=v[t].faceNormals.length;r<i;r++)g.faceNormals.push(v[t].faceNormals[r].clone());this.morphNormals.push(g)}var b=e.skinWeights;for(t=0,n=b.length;t<n;t++)this.skinWeights.push(b[t].clone());var w=e.skinIndices;for(t=0,n=w.length;t<n;t++)this.skinIndices.push(w[t].clone());var x=e.lineDistances;for(t=0,n=x.length;t<n;t++)this.lineDistances.push(x[t]);var E=e.boundingBox;null!==E&&(this.boundingBox=E.clone());var S=e.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(k.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(k.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new y),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,o=e.length;r<o;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new i),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new s),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new c),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),P.prototype=Object.create(k.prototype),P.prototype.constructor=P,C.prototype=Object.create(k.prototype),C.prototype.constructor=C,A.prototype=Object.create(k.prototype),A.prototype.constructor=A,O.prototype=Object.create(k.prototype),O.prototype.constructor=O,I.prototype=Object.create(k.prototype),I.prototype.constructor=I,R.prototype=Object.create(k.prototype),R.prototype.constructor=R,L.prototype=Object.create(k.prototype),L.prototype.constructor=L,D.prototype=Object.create(k.prototype),D.prototype.constructor=D,N.prototype=Object.create(k.prototype),N.prototype.constructor=N,Object.assign(F.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:r})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,r=e.vertices,o=e.faceVertexUvs,a=o[0]&&o[0].length>0,s=o[1]&&o[1].length>0,l=e.morphTargets,u=l.length;if(u>0){t=[];for(var c=0;c<u;c++)t[c]=[];this.morphTargets.position=t}var h,d=e.morphNormals,f=d.length;if(f>0){h=[];for(var c=0;c<f;c++)h[c]=[];this.morphTargets.normal=h}for(var p=e.skinIndices,m=e.skinWeights,v=p.length===r.length,g=m.length===r.length,c=0;c<n.length;c++){var y=n[c];this.vertices.push(r[y.a],r[y.b],r[y.c]);var _=y.vertexNormals;if(3===_.length)this.normals.push(_[0],_[1],_[2]);else{var b=y.normal;this.normals.push(b,b,b)}var w=y.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var x=y.color;this.colors.push(x,x,x)}if(!0===a){var E=o[0][c];void 0!==E?this.uvs.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new i,new i,new i))}if(!0===s){var E=o[1][c];void 0!==E?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new i,new i,new i))}for(var S=0;S<u;S++){var T=l[S].vertices;t[S].push(T[y.a],T[y.b],T[y.c])}for(var S=0;S<f;S++){var M=d[S].vertexNormals[c];h[S].push(M.a,M.b,M.c)}v&&this.skinIndices.push(p[y.a],p[y.b],p[y.c]),g&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Ws=1;z.prototype=Object.assign(Object.create(r.prototype),{constructor:z,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(U(e)>65535?L:I)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new k(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){(new l).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new o;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new o;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new o;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new o;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new o;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new x;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new s;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new D(3*t.vertices.length,3),r=new D(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new D(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new D(t,3)),this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var n=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(n=void 0,t.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}var r;return!0===t.verticesNeedUpdate&&(r=this.attributes.position,void 0!==r&&(r.copyVector3sArray(t.vertices),r.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(r=this.attributes.normal,void 0!==r&&(r.copyVector3sArray(t.normals),r.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(r=this.attributes.color,void 0!==r&&(r.copyColorsArray(t.colors),r.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(r=this.attributes.uv,void 0!==r&&(r.copyVector2sArray(t.uvs),r.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(r=this.attributes.lineDistance,void 0!==r&&(r.copyArray(t.lineDistances),r.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new F).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new k(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new k(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new k(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new k(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new k(o,2).copyVector2sArray(e.uvs2))}this.groups=e.groups;for(var a in e.morphTargets){for(var s=[],l=e.morphTargets[a],u=0,c=l.length;u<c;u++){var h=l[u],d=new D(3*h.length,3);s.push(d.copyVector3sArray(h))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var f=new D(4*e.skinIndices.length,4);this.addAttribute("skinIndex",f.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var p=new D(4*e.skinWeights.length,4);this.addAttribute("skinWeight",p.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new p);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new p,t=new s;return function(){null===this.boundingSphere&&(this.boundingSphere=new m);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(r);for(var i=0,o=0,a=n.count;o<a;o++)t.x=n.getX(o),t.y=n.getY(o),t.z=n.getZ(o),i=Math.max(i,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var r=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new k(new Float32Array(r.length),3));else for(var i=t.normal.array,o=0,a=i.length;o<a;o++)i[o]=0;var l,u,c,h=t.normal.array,d=new s,f=new s,p=new s,m=new s,v=new s;if(e){var g=e.array;0===n.length&&this.addGroup(0,g.length);for(var y=0,_=n.length;y<_;++y)for(var b=n[y],w=b.start,x=b.count,o=w,a=w+x;o<a;o+=3)l=3*g[o+0],u=3*g[o+1],c=3*g[o+2],d.fromArray(r,l),f.fromArray(r,u),p.fromArray(r,c),m.subVectors(p,f),v.subVectors(d,f),m.cross(v),h[l]+=m.x,h[l+1]+=m.y,h[l+2]+=m.z,h[u]+=m.x,h[u+1]+=m.y,h[u+2]+=m.z,h[c]+=m.x,h[c+1]+=m.y,h[c+2]+=m.z}else for(var o=0,a=r.length;o<a;o+=9)d.fromArray(r,o),f.fromArray(r,o+3),p.fromArray(r,o+6),m.subVectors(p,f),v.subVectors(d,f),m.cross(v),h[o]=m.x,h[o+1]=m.y,h[o+2]=m.z,h[o+3]=m.x,h[o+4]=m.y,h[o+5]=m.z,h[o+6]=m.x,h[o+7]=m.y,h[o+8]=m.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r],o=i.array,a=e.attributes[r],s=a.array,l=a.itemSize,u=0,c=l*t;u<s.length;u++,c++)o[c]=s[u];return this},normalizeNormals:function(){var e=new s;return function(){for(var t=this.attributes.normal,n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new z,t=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],o=i.array,a=i.itemSize,s=new o.constructor(t.length*a),l=0,u=0,c=0,h=t.length;c<h;c++){l=t[c]*a;for(var d=0;d<a;d++)s[u++]=o[l++]}e.addAttribute(r,new k(s,a))}for(var f=this.groups,c=0,h=f.length;c<h;c++){var p=f[c];e.addGroup(p.start,p.count,p.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var a=o[n],i=Array.prototype.slice.call(a.array);e.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:i,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var l=this.boundingSphere;return null!==l&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e},clone:function(){return(new z).copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var o=e.attributes;for(t in o){var a=o[t];this.addAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var l=[],u=s[t];for(n=0,r=u.length;n<r;n++)l.push(u[n].clone());this.morphAttributes[t]=l}var c=e.groups;for(n=0,r=c.length;n<r;n++){var h=c[n];this.addGroup(h.start,h.count,h.materialIndex)}var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());var f=e.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),B.prototype=Object.create(M.prototype),B.prototype.constructor=B,j.prototype=Object.create(z.prototype),j.prototype.constructor=j,H.prototype=Object.create(M.prototype),H.prototype.constructor=H,V.prototype=Object.create(z.prototype),V.prototype.constructor=V;var qs=0;G.prototype=Object.assign(Object.create(r.prototype),{constructor:G,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]="overdraw"===t?Number(n):n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){function t(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}var n=void 0===e||"string"===typeof e;n&&(e={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearCoat&&(r.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(r.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Do&&(r.blending=this.blending),!0===this.flatShading&&(r.flatShading=this.flatShading),this.side!==Po&&(r.side=this.side),this.vertexColors!==Oo&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,0!==this.rotation&&(r.rotation=this.rotation),1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(r.morphTargets=!0),!0===this.skinning&&(r.skinning=!0),!1===this.visible&&(r.visible=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),n){var i=t(e.textures),o=t(e.images);i.length>0&&(r.textures=i),o.length>0&&(r.images=o)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),W.prototype=Object.create(G.prototype),W.prototype.constructor=W,W.prototype.isMeshBasicMaterial=!0,W.prototype.copy=function(e){return G.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},q.prototype=Object.create(G.prototype),q.prototype.constructor=q,q.prototype.isShaderMaterial=!0,q.prototype.copy=function(e){return G.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=zs.clone(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},q.prototype.toJSON=function(e){var t=G.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(X.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new s),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new s;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new s),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new s;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new s,t=new s,n=new s;return function(r,i,o,a){e.copy(r).add(i).multiplyScalar(.5),t.copy(i).sub(r).normalize(),n.copy(this.origin).sub(e);var s,l,u,c,h=.5*r.distanceTo(i),d=-this.direction.dot(t),f=n.dot(this.direction),p=-n.dot(t),m=n.lengthSq(),v=Math.abs(1-d*d);if(v>0)if(s=d*p-f,l=d*f-p,c=h*v,s>=0)if(l>=-c)if(l<=c){var g=1/v;s*=g,l*=g,u=s*(s+d*l+2*f)+l*(d*s+l+2*p)+m}else l=h,s=Math.max(0,-(d*l+f)),u=-s*s+l*(l+2*p)+m;else l=-h,s=Math.max(0,-(d*l+f)),u=-s*s+l*(l+2*p)+m;else l<=-c?(s=Math.max(0,-(-d*h+f)),l=s>0?-h:Math.min(Math.max(-h,-p),h),u=-s*s+l*(l+2*p)+m):l<=c?(s=0,l=Math.min(Math.max(-h,-p),h),u=l*(l+2*p)+m):(s=Math.max(0,-(d*h+f)),l=s>0?h:Math.min(Math.max(-h,-p),h),u=-s*s+l*(l+2*p)+m);else l=d>0?-h:h,s=Math.max(0,-(d*l+f)),u=-s*s+l*(l+2*p)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(t).multiplyScalar(l).add(e),u}}(),intersectSphere:function(){var e=new s;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,o=t.radius*t.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,l=r+a;return s<0&&l<0?null:s<0?this.at(l,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,r,i,o,a,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(i=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(i=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),c>=0?(a=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(a=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:function(){var e=new s;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new s,t=new s,n=new s,r=new s;return function(i,o,a,s,l){t.subVectors(o,i),n.subVectors(a,i),r.crossVectors(t,n);var u,c=this.direction.dot(r);if(c>0){if(s)return null;u=1}else{if(!(c<0))return null;u=-1,c=-c}e.subVectors(this.origin,i);var h=u*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var d=u*this.direction.dot(t.cross(e));if(d<0)return null;if(h+d>c)return null;var f=-u*e.dot(r);return f<0?null:this.at(f/c,l)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(Y.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new s),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new s),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new s),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new s,t=new s;return function(n,r){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var i=t.dot(t),o=t.dot(e),a=o/i;return r&&(a=Ns.clamp(a,0,1)),a}}(),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new s),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(Z,{getNormal:function(){var e=new s;return function(t,n,r,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new s),i.subVectors(r,n),e.subVectors(t,n),i.cross(e);var o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}}(),getBarycoord:function(){var e=new s,t=new s,n=new s;return function(r,i,o,a,l){e.subVectors(a,i),t.subVectors(o,i),n.subVectors(r,i);var u=e.dot(e),c=e.dot(t),h=e.dot(n),d=t.dot(t),f=t.dot(n),p=u*d-c*c;if(void 0===l&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),l=new s),0===p)return l.set(-2,-1,-1);var m=1/p,v=(d*h-c*f)*m,g=(u*f-c*h)*m;return l.set(1-v-g,g,v)}}(),containsPoint:function(){var e=new s;return function(t,n,r,i){return Z.getBarycoord(t,n,r,i,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}()}),Object.assign(Z.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new s,t=new s;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new s),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return Z.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new s),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return Z.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return Z.containsPoint(e,this.a,this.b,this.c)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new v,t=[new Y,new Y,new Y],n=new s,r=new s;return function(i,o){void 0===o&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),o=new s);var a=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(i,n),!0===this.containsPoint(n))o.copy(n);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var l=0;l<t.length;l++){t[l].closestPointToPoint(n,!0,r);var u=n.distanceToSquared(r);u<a&&(a=u,o.copy(r))}}return o}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),J.prototype=Object.assign(Object.create(x.prototype),{constructor:J,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return x.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}},raycast:function(){function e(e,t,n,r,i,o,a){return Z.getBarycoord(e,t,n,r,_),i.multiplyScalar(_.x),o.multiplyScalar(_.y),a.multiplyScalar(_.z),i.add(o).add(a),i.clone()}function t(e,t,n,r,i,o,a,s){if(null===(t.side===Co?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side!==Ao,s)))return null;w.copy(s),w.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(w);return l<n.near||l>n.far?null:{distance:l,point:w.clone(),object:e}}function n(n,r,i,o,a,s,l,d){u.fromBufferAttribute(o,s),c.fromBufferAttribute(o,l),h.fromBufferAttribute(o,d);var f=t(n,n.material,r,i,u,c,h,b);if(f){a&&(v.fromBufferAttribute(a,s),g.fromBufferAttribute(a,l),y.fromBufferAttribute(a,d),f.uv=e(b,u,c,h,v,g,y));var p=new T(s,l,d);Z.getNormal(u,c,h,p.normal),f.face=p,f.faceIndex=s}return f}var r=new o,a=new X,l=new m,u=new s,c=new s,h=new s,d=new s,f=new s,p=new s,v=new i,g=new i,y=new i,_=new s,b=new s,w=new s;return function(i,o){var s=this.geometry,m=this.material,_=this.matrixWorld;if(void 0!==m&&(null===s.boundingSphere&&s.computeBoundingSphere(),l.copy(s.boundingSphere),l.applyMatrix4(_),!1!==i.ray.intersectsSphere(l)&&(r.getInverse(_),a.copy(i.ray).applyMatrix4(r),null===s.boundingBox||!1!==a.intersectsBox(s.boundingBox)))){var w;if(s.isBufferGeometry){var x,E,S,T,M,k=s.index,P=s.attributes.position,C=s.attributes.uv;if(null!==k)for(T=0,M=k.count;T<M;T+=3)x=k.getX(T),E=k.getX(T+1),S=k.getX(T+2),(w=n(this,i,a,P,C,x,E,S))&&(w.faceIndex=Math.floor(T/3),o.push(w));else if(void 0!==P)for(T=0,M=P.count;T<M;T+=3)x=T,E=T+1,S=T+2,(w=n(this,i,a,P,C,x,E,S))&&o.push(w)}else if(s.isGeometry){var A,O,I,R,L=Array.isArray(m),D=s.vertices,N=s.faces,F=s.faceVertexUvs[0];F.length>0&&(R=F);for(var U=0,z=N.length;U<z;U++){var B=N[U],j=L?m[B.materialIndex]:m;if(void 0!==j){if(A=D[B.a],O=D[B.b],I=D[B.c],!0===j.morphTargets){var H=s.morphTargets,V=this.morphTargetInfluences;u.set(0,0,0),c.set(0,0,0),h.set(0,0,0);for(var G=0,W=H.length;G<W;G++){var q=V[G];if(0!==q){var X=H[G].vertices;u.addScaledVector(d.subVectors(X[B.a],A),q),c.addScaledVector(f.subVectors(X[B.b],O),q),h.addScaledVector(p.subVectors(X[B.c],I),q)}}u.add(A),c.add(O),h.add(I),A=u,O=c,I=h}if(w=t(this,j,i,a,A,O,I,b)){if(R&&R[U]){var Y=R[U];v.copy(Y[0]),g.copy(Y[1]),y.copy(Y[2]),w.uv=e(b,A,O,I,v,g,y)}w.face=B,w.faceIndex=U,o.push(w)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),le.prototype=Object.create(u.prototype),le.prototype.constructor=le,le.prototype.isCubeTexture=!0,Object.defineProperty(le.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Xs=new u,Ys=new le,Zs=[],Js=[],Ks=new Float32Array(16),Qs=new Float32Array(9);ze.prototype.setValue=function(e,t){for(var n=this.seq,r=0,i=n.length;r!==i;++r){var o=n[r];o.setValue(e,t[o.id])}};var $s=/([\w\d_]+)(\])?(\[|\.)?/g;He.prototype.setValue=function(e,t,n){var r=this.map[t];void 0!==r&&r.setValue(e,n,this.renderer)},He.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},He.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},He.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var el=0,tl=0;pt.prototype=Object.create(G.prototype),pt.prototype.constructor=pt,pt.prototype.isMeshDepthMaterial=!0,pt.prototype.copy=function(e){return G.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},mt.prototype=Object.create(G.prototype),mt.prototype.constructor=mt,mt.prototype.isMeshDistanceMaterial=!0,mt.prototype.copy=function(e){return G.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},gt.prototype=Object.create(u.prototype),gt.prototype.constructor=gt,xt.prototype=Object.assign(Object.create(E.prototype),{constructor:xt,isPerspectiveCamera:!0,copy:function(e,t){return E.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Ns.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Ns.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Ns.RAD2DEG*Math.atan(Math.tan(.5*Ns.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Ns.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var l=this.filmOffset;0!==l&&(i+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far)},toJSON:function(e){var t=x.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Et.prototype=Object.assign(Object.create(xt.prototype),{constructor:Et,isArrayCamera:!0}),Mt.prototype.isFogExp2=!0,Mt.prototype.clone=function(){return new Mt(this.color.getHex(),this.density)},Mt.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},kt.prototype.isFog=!0,kt.prototype.clone=function(){return new kt(this.color.getHex(),this.near,this.far)},kt.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Pt.prototype=Object.assign(Object.create(x.prototype),{constructor:Pt,copy:function(e,t){return x.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=x.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Ct.prototype=Object.create(G.prototype),Ct.prototype.constructor=Ct,Ct.prototype.isSpriteMaterial=!0,Ct.prototype.copy=function(e){return G.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},At.prototype=Object.assign(Object.create(x.prototype),{constructor:At,isSprite:!0,raycast:function(){var e=new s,t=new s,n=new s;return function(r,i){t.setFromMatrixPosition(this.matrixWorld),r.ray.closestPointToPoint(t,e),n.setFromMatrixScale(this.matrixWorld);var o=n.x*n.y/4;if(!(t.distanceToSquared(e)>o)){var a=r.ray.origin.distanceTo(e);a<r.near||a>r.far||i.push({distance:a,point:e.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return x.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),Ot.prototype=Object.assign(Object.create(x.prototype),{constructor:Ot,copy:function(e){x.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new s;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,n)}}(),update:function(){var e=new s,t=new s;return function(n){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(e){var t=x.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Object.assign(It.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new o;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new o,t=new o;return function(){for(var n=this.bones,r=this.boneInverses,i=this.boneMatrices,o=this.boneTexture,a=0,s=n.length;a<s;a++){var l=n[a]?n[a].matrixWorld:t;e.multiplyMatrices(l,r[a]),e.toArray(i,16*a)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new It(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}}),Rt.prototype=Object.assign(Object.create(x.prototype),{constructor:Rt,isBone:!0}),Lt.prototype=Object.assign(Object.create(J.prototype),{constructor:Lt,isSkinnedMesh:!0,initBones:function(){var e,t,n,r,i=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,r=this.geometry.bones.length;n<r;n++)t=this.geometry.bones[n],e=new Rt,i.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(n=0,r=this.geometry.bones.length;n<r;n++)t=this.geometry.bones[n],-1!==t.parent&&null!==t.parent&&void 0!==i[t.parent]?i[t.parent].add(i[n]):this.add(i[n])}return this.updateMatrixWorld(!0),i},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];e=1/n.manhattanLength(),e!==1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new c,i=this.geometry.attributes.skinWeight;for(t=0;t<i.count;t++)r.x=i.getX(t),r.y=i.getY(t),r.z=i.getZ(t),r.w=i.getW(t),e=1/r.manhattanLength(),e!==1/0?r.multiplyScalar(e):r.set(1,0,0,0),i.setXYZW(t,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(e){J.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Dt.prototype=Object.create(G.prototype),Dt.prototype.constructor=Dt,Dt.prototype.isLineBasicMaterial=!0,Dt.prototype.copy=function(e){return G.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Nt.prototype=Object.assign(Object.create(x.prototype),{constructor:Nt,isLine:!0,computeLineDistances:function(){var e=new s,t=new s;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[0],o=1,a=r.count;o<a;o++)e.fromBufferAttribute(r,o-1),t.fromBufferAttribute(r,o),i[o]=i[o-1],i[o]+=e.distanceTo(t);n.addAttribute("lineDistance",new D(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices,i=n.lineDistances;i[0]=0;for(var o=1,a=s.length;o<a;o++)i[o]=i[o-1],i[o]+=s[o-1].distanceTo(s[o])}return this}}(),raycast:function(){var e=new o,t=new X,n=new m;return function(r,i){var o=r.linePrecision,a=o*o,l=this.geometry,u=this.matrixWorld;if(null===l.boundingSphere&&l.computeBoundingSphere(),n.copy(l.boundingSphere),n.applyMatrix4(u),!1!==r.ray.intersectsSphere(n)){e.getInverse(u),t.copy(r.ray).applyMatrix4(e);var c=new s,h=new s,d=new s,f=new s,p=this&&this.isLineSegments?2:1;if(l.isBufferGeometry){var m=l.index,v=l.attributes,g=v.position.array;if(null!==m)for(var y=m.array,_=0,b=y.length-1;_<b;_+=p){var w=y[_],x=y[_+1];c.fromArray(g,3*w),h.fromArray(g,3*x);var E=t.distanceSqToSegment(c,h,f,d);if(!(E>a)){f.applyMatrix4(this.matrixWorld);var S=r.ray.origin.distanceTo(f);S<r.near||S>r.far||i.push({distance:S,point:d.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else for(var _=0,b=g.length/3-1;_<b;_+=p){c.fromArray(g,3*_),h.fromArray(g,3*_+3);var E=t.distanceSqToSegment(c,h,f,d);if(!(E>a)){f.applyMatrix4(this.matrixWorld);var S=r.ray.origin.distanceTo(f);S<r.near||S>r.far||i.push({distance:S,point:d.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}else if(l.isGeometry)for(var T=l.vertices,M=T.length,_=0;_<M-1;_+=p){var E=t.distanceSqToSegment(T[_],T[_+1],f,d);if(!(E>a)){f.applyMatrix4(this.matrixWorld);var S=r.ray.origin.distanceTo(f);S<r.near||S>r.far||i.push({distance:S,point:d.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ft.prototype=Object.assign(Object.create(Nt.prototype),{constructor:Ft,isLineSegments:!0,computeLineDistances:function(){var e=new s,t=new s;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],o=0,a=r.count;o<a;o+=2)e.fromBufferAttribute(r,o),t.fromBufferAttribute(r,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t);n.addAttribute("lineDistance",new D(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry)for(var s=n.vertices,i=n.lineDistances,o=0,a=s.length;o<a;o+=2)e.copy(s[o]),t.copy(s[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t);return this}}()}),Ut.prototype=Object.assign(Object.create(Nt.prototype),{constructor:Ut,isLineLoop:!0}),zt.prototype=Object.create(G.prototype),zt.prototype.constructor=zt,zt.prototype.isPointsMaterial=!0,zt.prototype.copy=function(e){return G.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},Bt.prototype=Object.assign(Object.create(x.prototype),{constructor:Bt,isPoints:!0,raycast:function(){var e=new o,t=new X,n=new m;return function(r,i){function o(e,n){var o=t.distanceSqToPoint(e);if(o<d){t.closestPointToPoint(e,p),p.applyMatrix4(u);var s=r.ray.origin.distanceTo(p);if(s<r.near||s>r.far)return;i.push({distance:s,distanceToRay:Math.sqrt(o),point:p.clone(),index:n,face:null,object:a})}}var a=this,l=this.geometry,u=this.matrixWorld,c=r.params.Points.threshold;if(null===l.boundingSphere&&l.computeBoundingSphere(),n.copy(l.boundingSphere),n.applyMatrix4(u),n.radius+=c,!1!==r.ray.intersectsSphere(n)){e.getInverse(u),t.copy(r.ray).applyMatrix4(e);var h=c/((this.scale.x+this.scale.y+this.scale.z)/3),d=h*h,f=new s,p=new s;if(l.isBufferGeometry){var m=l.index,v=l.attributes,g=v.position.array;if(null!==m)for(var y=m.array,_=0,b=y.length;_<b;_++){var w=y[_];f.fromArray(g,3*w),o(f,w)}else for(var _=0,x=g.length/3;_<x;_++)f.fromArray(g,3*_),o(f,_)}else for(var E=l.vertices,_=0,x=E.length;_<x;_++)o(E[_],_)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),jt.prototype=Object.assign(Object.create(x.prototype),{constructor:jt,isGroup:!0}),Ht.prototype=Object.assign(Object.create(u.prototype),{constructor:Ht,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Vt.prototype=Object.create(u.prototype),Vt.prototype.constructor=Vt,Vt.prototype.isCompressedTexture=!0,Gt.prototype=Object.create(u.prototype),Gt.prototype.constructor=Gt,Gt.prototype.isDepthTexture=!0,Wt.prototype=Object.create(z.prototype),Wt.prototype.constructor=Wt,qt.prototype=Object.create(M.prototype),qt.prototype.constructor=qt,Xt.prototype=Object.create(z.prototype),Xt.prototype.constructor=Xt,Yt.prototype=Object.create(M.prototype),Yt.prototype.constructor=Yt,Zt.prototype=Object.create(z.prototype),Zt.prototype.constructor=Zt,Jt.prototype=Object.create(M.prototype),Jt.prototype.constructor=Jt,Kt.prototype=Object.create(Zt.prototype),Kt.prototype.constructor=Kt,Qt.prototype=Object.create(M.prototype),Qt.prototype.constructor=Qt,$t.prototype=Object.create(Zt.prototype),$t.prototype.constructor=$t,en.prototype=Object.create(M.prototype),en.prototype.constructor=en,tn.prototype=Object.create(Zt.prototype),tn.prototype.constructor=tn,nn.prototype=Object.create(M.prototype),nn.prototype.constructor=nn,rn.prototype=Object.create(Zt.prototype),rn.prototype.constructor=rn,on.prototype=Object.create(M.prototype),on.prototype.constructor=on,an.prototype=Object.create(z.prototype),an.prototype.constructor=an,sn.prototype=Object.create(M.prototype),sn.prototype.constructor=sn,ln.prototype=Object.create(z.prototype),ln.prototype.constructor=ln,un.prototype=Object.create(M.prototype),un.prototype.constructor=un,cn.prototype=Object.create(z.prototype),cn.prototype.constructor=cn;var nl={triangulate:function(e,t,n){n=n||2;var r=t&&t.length,i=r?t[0]*n:e.length,o=hn(e,0,i,n,!0),a=[];if(!o)return a;var s,l,u,c,h,d,f;if(r&&(o=yn(e,t,o,n)),e.length>80*n){s=u=e[0],l=c=e[1];for(var p=n;p<i;p+=n)h=e[p],d=e[p+1],h<s&&(s=h),d<l&&(l=d),h>u&&(u=h),d>c&&(c=d);f=Math.max(u-s,c-l),f=0!==f?1/f:0}return fn(o,a,n,s,l,f),a}},rl={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return rl.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];zn(e),Bn(n,e);var o=e.length;t.forEach(zn);for(var a=0;a<t.length;a++)r.push(o),o+=t[a].length,Bn(n,t[a]);for(var s=nl.triangulate(n,r),a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};jn.prototype=Object.create(M.prototype),jn.prototype.constructor=jn,Hn.prototype=Object.create(z.prototype),Hn.prototype.constructor=Hn;var il={generateTopUV:function(e,t,n,r,o){var a=t[3*n],s=t[3*n+1],l=t[3*r],u=t[3*r+1],c=t[3*o],h=t[3*o+1];return[new i(a,s),new i(l,u),new i(c,h)]},generateSideWallUV:function(e,t,n,r,o,a){var s=t[3*n],l=t[3*n+1],u=t[3*n+2],c=t[3*r],h=t[3*r+1],d=t[3*r+2],f=t[3*o],p=t[3*o+1],m=t[3*o+2],v=t[3*a],g=t[3*a+1],y=t[3*a+2];return Math.abs(l-h)<.01?[new i(s,1-u),new i(c,1-d),new i(f,1-m),new i(v,1-y)]:[new i(l,1-u),new i(h,1-d),new i(p,1-m),new i(g,1-y)]}};Vn.prototype=Object.create(M.prototype),Vn.prototype.constructor=Vn,Gn.prototype=Object.create(Hn.prototype),Gn.prototype.constructor=Gn,Wn.prototype=Object.create(M.prototype),Wn.prototype.constructor=Wn,qn.prototype=Object.create(z.prototype),qn.prototype.constructor=qn,Xn.prototype=Object.create(M.prototype),Xn.prototype.constructor=Xn,Yn.prototype=Object.create(z.prototype),Yn.prototype.constructor=Yn,Zn.prototype=Object.create(M.prototype),Zn.prototype.constructor=Zn,Jn.prototype=Object.create(z.prototype),Jn.prototype.constructor=Jn,Kn.prototype=Object.create(M.prototype),Kn.prototype.constructor=Kn,Kn.prototype.toJSON=function(){var e=M.prototype.toJSON.call(this);return $n(this.parameters.shapes,e)},Qn.prototype=Object.create(z.prototype),Qn.prototype.constructor=Qn,Qn.prototype.toJSON=function(){var e=z.prototype.toJSON.call(this);return $n(this.parameters.shapes,e)},er.prototype=Object.create(z.prototype),er.prototype.constructor=er,tr.prototype=Object.create(M.prototype),tr.prototype.constructor=tr,nr.prototype=Object.create(z.prototype),nr.prototype.constructor=nr,rr.prototype=Object.create(tr.prototype),rr.prototype.constructor=rr,ir.prototype=Object.create(nr.prototype),ir.prototype.constructor=ir,or.prototype=Object.create(M.prototype),or.prototype.constructor=or,ar.prototype=Object.create(z.prototype),ar.prototype.constructor=ar;var ol=Object.freeze({WireframeGeometry:Wt,ParametricGeometry:qt,ParametricBufferGeometry:Xt,TetrahedronGeometry:Jt,TetrahedronBufferGeometry:Kt,OctahedronGeometry:Qt,OctahedronBufferGeometry:$t,IcosahedronGeometry:en,IcosahedronBufferGeometry:tn,DodecahedronGeometry:nn,DodecahedronBufferGeometry:rn,PolyhedronGeometry:Yt,PolyhedronBufferGeometry:Zt,TubeGeometry:on,TubeBufferGeometry:an,TorusKnotGeometry:sn,TorusKnotBufferGeometry:ln,TorusGeometry:un,TorusBufferGeometry:cn,TextGeometry:Vn,TextBufferGeometry:Gn,SphereGeometry:Wn,SphereBufferGeometry:qn,RingGeometry:Xn,RingBufferGeometry:Yn,PlaneGeometry:H,PlaneBufferGeometry:V,LatheGeometry:Zn,LatheBufferGeometry:Jn,ShapeGeometry:Kn,ShapeBufferGeometry:Qn,ExtrudeGeometry:jn,ExtrudeBufferGeometry:Hn,EdgesGeometry:er,ConeGeometry:rr,ConeBufferGeometry:ir,CylinderGeometry:tr,CylinderBufferGeometry:nr,CircleGeometry:or,CircleBufferGeometry:ar,BoxGeometry:B,BoxBufferGeometry:j});sr.prototype=Object.create(G.prototype),sr.prototype.constructor=sr,sr.prototype.isShadowMaterial=!0,sr.prototype.copy=function(e){return G.prototype.copy.call(this,e),this.color.copy(e.color),this},lr.prototype=Object.create(q.prototype),lr.prototype.constructor=lr,lr.prototype.isRawShaderMaterial=!0,ur.prototype=Object.create(G.prototype),ur.prototype.constructor=ur,ur.prototype.isMeshStandardMaterial=!0,ur.prototype.copy=function(e){return G.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},cr.prototype=Object.create(ur.prototype),cr.prototype.constructor=cr,cr.prototype.isMeshPhysicalMaterial=!0,cr.prototype.copy=function(e){return ur.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},hr.prototype=Object.create(G.prototype),hr.prototype.constructor=hr,hr.prototype.isMeshPhongMaterial=!0,hr.prototype.copy=function(e){return G.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},dr.prototype=Object.create(hr.prototype),dr.prototype.constructor=dr,dr.prototype.isMeshToonMaterial=!0,dr.prototype.copy=function(e){return hr.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},fr.prototype=Object.create(G.prototype),fr.prototype.constructor=fr,fr.prototype.isMeshNormalMaterial=!0,fr.prototype.copy=function(e){return G.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},pr.prototype=Object.create(G.prototype),pr.prototype.constructor=pr,pr.prototype.isMeshLambertMaterial=!0,pr.prototype.copy=function(e){return G.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},mr.prototype=Object.create(Dt.prototype),mr.prototype.constructor=mr,mr.prototype.isLineDashedMaterial=!0,mr.prototype.copy=function(e){return Dt.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var al=Object.freeze({ShadowMaterial:sr,SpriteMaterial:Ct,RawShaderMaterial:lr,ShaderMaterial:q,PointsMaterial:zt,MeshPhysicalMaterial:cr,MeshStandardMaterial:ur,MeshPhongMaterial:hr,MeshToonMaterial:dr,MeshNormalMaterial:fr,MeshLambertMaterial:pr,MeshDepthMaterial:pt,MeshDistanceMaterial:mt,MeshBasicMaterial:W,LineDashedMaterial:mr,LineBasicMaterial:Dt,Material:G}),sl={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},ll=new vr,ul={};Object.assign(gr.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=sl.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;if(void 0!==ul[e])return void ul[e].push({onLoad:t,onProgress:n,onError:r});var a=/^data:(.*?)(;base64)?,(.*)$/,s=e.match(a);if(s){var l=s[1],u=!!s[2],c=s[3];c=window.decodeURIComponent(c),u&&(c=window.atob(c));try{var h,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":for(var f=new Uint8Array(c.length),p=0;p<c.length;p++)f[p]=c.charCodeAt(p);h="blob"===d?new Blob([f.buffer],{type:l}):f.buffer;break;case"document":var m=new DOMParser;h=m.parseFromString(c,l);break;case"json":h=JSON.parse(c);break;default:h=c}window.setTimeout(function(){t&&t(h),i.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){r&&r(t),i.manager.itemEnd(e),i.manager.itemError(e)},0)}}else{ul[e]=[],ul[e].push({onLoad:t,onProgress:n,onError:r});var v=new XMLHttpRequest;v.open("GET",e,!0),v.addEventListener("load",function(t){var n=this.response;sl.add(e,n);var r=ul[e];if(delete ul[e],200===this.status){for(var o=0,a=r.length;o<a;o++){var s=r[o];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(e)}else if(0===this.status){console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=r.length;o<a;o++){var s=r[o];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(e)}else{for(var o=0,a=r.length;o<a;o++){var s=r[o];s.onError&&s.onError(t)}i.manager.itemEnd(e),i.manager.itemError(e)}},!1),v.addEventListener("progress",function(t){for(var n=ul[e],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(t)}},!1),v.addEventListener("error",function(t){var n=ul[e];delete ul[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemEnd(e),i.manager.itemError(e)},!1),void 0!==this.responseType&&(v.responseType=this.responseType),void 0!==this.withCredentials&&(v.withCredentials=this.withCredentials),v.overrideMimeType&&v.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(var g in this.requestHeader)v.setRequestHeader(g,this.requestHeader[g]);v.send(null)}return i.manager.itemStart(e),v},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(yr.prototype,{load:function(e,t,n,r){var i=this,o=[],a=new Vt;a.image=o;var s=new gr(this.manager);if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var l=0,u=0,c=e.length;u<c;++u)!function(u){s.load(e[u],function(e){var n=i._parser(e,!0);o[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(a.minFilter=Oa),a.format=n.format,a.needsUpdate=!0,t&&t(a))},n,r)}(u);else s.load(e,function(e){var n=i._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=Oa),a.format=n.format,a.needsUpdate=!0,t&&t(a)},n,r);return a},setPath:function(e){return this.path=e,this}}),Object.assign(_r.prototype,{load:function(e,t,n,r){var i=this,o=new f,a=new gr(this.manager);return a.setResponseType("arraybuffer"),a.load(e,function(e){var n=i._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Ma,o.wrapT=void 0!==n.wrapT?n.wrapT:Ma,o.magFilter=void 0!==n.magFilter?n.magFilter:Oa,o.minFilter=void 0!==n.minFilter?n.minFilter:Ra,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=Oa),o.needsUpdate=!0,t&&t(o,n))},n,r),o}}),Object.assign(br.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=sl.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");return a.addEventListener("load",function(){sl.add(e,this),t&&t(this),i.manager.itemEnd(e)},!1),a.addEventListener("error",function(t){r&&r(t),i.manager.itemEnd(e),i.manager.itemError(e)},!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(wr.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,r){var i=new le,o=new br(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);for(var a=0,s=0;s<e.length;++s)!function(n){o.load(e[n],function(e){i.images[n]=e,6===++a&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}(s);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(xr.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,r){var i=new u,o=new br(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(n){i.image=n;var r=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?Xa:Ya,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Er.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)t=this.getPoint(n/e),o+=t.distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];for(var a,s=0,l=o-1;s<=l;)if(i=Math.floor(s+(l-s)/2),(a=r[i]-n)<0)s=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(i=l,r[i]===n)return i/(o-1);var u=r[i];return(i+(n-u)/(r[i+1]-u))/(o-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var r=this.getPoint(t);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,i,a=new s,l=[],u=[],c=[],h=new s,d=new o;for(n=0;n<=e;n++)r=n/e,l[n]=this.getTangentAt(r),l[n].normalize();u[0]=new s,c[0]=new s;var f=Number.MAX_VALUE,p=Math.abs(l[0].x),m=Math.abs(l[0].y),v=Math.abs(l[0].z);for(p<=f&&(f=p,a.set(1,0,0)),m<=f&&(f=m,a.set(0,1,0)),v<=f&&a.set(0,0,1),h.crossVectors(l[0],a).normalize(),u[0].crossVectors(l[0],h),c[0].crossVectors(l[0],u[0]),n=1;n<=e;n++)u[n]=u[n-1].clone(),c[n]=c[n-1].clone(),h.crossVectors(l[n-1],l[n]),h.length()>Number.EPSILON&&(h.normalize(),i=Math.acos(Ns.clamp(l[n-1].dot(l[n]),-1,1)),u[n].applyMatrix4(d.makeRotationAxis(h,i))),c[n].crossVectors(l[n],u[n]);if(!0===t)for(i=Math.acos(Ns.clamp(u[0].dot(u[e]),-1,1)),i/=e,l[0].dot(h.crossVectors(u[0],u[e]))>0&&(i=-i),n=1;n<=e;n++)u[n].applyMatrix4(d.makeRotationAxis(l[n],i*n)),c[n].crossVectors(l[n],u[n]);return{tangents:l,normals:u,binormals:c}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Sr.prototype=Object.create(Er.prototype),Sr.prototype.constructor=Sr,Sr.prototype.isEllipseCurve=!0,Sr.prototype.getPoint=function(e,t){for(var n=t||new i,r=2*Math.PI,o=this.aEndAngle-this.aStartAngle,a=Math.abs(o)<Number.EPSILON;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(o=a?0:r),!0!==this.aClockwise||a||(o===r?o=-r:o-=r);var s=this.aStartAngle+e*o,l=this.aX+this.xRadius*Math.cos(s),u=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){var c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=l-this.aX,f=u-this.aY;l=d*c-f*h+this.aX,u=d*h+f*c+this.aY}return n.set(l,u)},Sr.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Sr.prototype.toJSON=function(){var e=Er.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Sr.prototype.fromJSON=function(e){return Er.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Tr.prototype=Object.create(Sr.prototype),Tr.prototype.constructor=Tr,Tr.prototype.isArcCurve=!0;var cl=new s,hl=new Mr,dl=new Mr,fl=new Mr;kr.prototype=Object.create(Er.prototype),kr.prototype.constructor=kr,kr.prototype.isCatmullRomCurve3=!0,kr.prototype.getPoint=function(e,t){var n=t||new s,r=this.points,i=r.length,o=(i-(this.closed?0:1))*e,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/i)+1)*i:0===l&&a===i-1&&(a=i-2,l=1);var u,c,h,d;if(this.closed||a>0?u=r[(a-1)%i]:(cl.subVectors(r[0],r[1]).add(r[0]),u=cl),c=r[a%i],h=r[(a+1)%i],this.closed||a+2<i?d=r[(a+2)%i]:(cl.subVectors(r[i-1],r[i-2]).add(r[i-1]),d=cl),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,p=Math.pow(u.distanceToSquared(c),f),m=Math.pow(c.distanceToSquared(h),f),v=Math.pow(h.distanceToSquared(d),f);m<1e-4&&(m=1),p<1e-4&&(p=m),v<1e-4&&(v=m),hl.initNonuniformCatmullRom(u.x,c.x,h.x,d.x,p,m,v),dl.initNonuniformCatmullRom(u.y,c.y,h.y,d.y,p,m,v),fl.initNonuniformCatmullRom(u.z,c.z,h.z,d.z,p,m,v)}else"catmullrom"===this.curveType&&(hl.initCatmullRom(u.x,c.x,h.x,d.x,this.tension),dl.initCatmullRom(u.y,c.y,h.y,d.y,this.tension),fl.initCatmullRom(u.z,c.z,h.z,d.z,this.tension));return n.set(hl.calc(l),dl.calc(l),fl.calc(l)),n},kr.prototype.copy=function(e){Er.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},kr.prototype.toJSON=function(){var e=Er.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},kr.prototype.fromJSON=function(e){Er.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new s).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Ur.prototype=Object.create(Er.prototype),Ur.prototype.constructor=Ur,Ur.prototype.isCubicBezierCurve=!0,Ur.prototype.getPoint=function(e,t){var n=t||new i,r=this.v0,o=this.v1,a=this.v2,s=this.v3;return n.set(Fr(e,r.x,o.x,a.x,s.x),Fr(e,r.y,o.y,a.y,s.y)),n},Ur.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Ur.prototype.toJSON=function(){var e=Er.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Ur.prototype.fromJSON=function(e){return Er.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},zr.prototype=Object.create(Er.prototype),zr.prototype.constructor=zr,zr.prototype.isCubicBezierCurve3=!0,zr.prototype.getPoint=function(e,t){var n=t||new s,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Fr(e,r.x,i.x,o.x,a.x),Fr(e,r.y,i.y,o.y,a.y),Fr(e,r.z,i.z,o.z,a.z)),n},zr.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},zr.prototype.toJSON=function(){var e=Er.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},zr.prototype.fromJSON=function(e){return Er.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Br.prototype=Object.create(Er.prototype),Br.prototype.constructor=Br,Br.prototype.isLineCurve=!0,Br.prototype.getPoint=function(e,t){var n=t||new i;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Br.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Br.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Br.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Br.prototype.toJSON=function(){var e=Er.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Br.prototype.fromJSON=function(e){return Er.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},jr.prototype=Object.create(Er.prototype),jr.prototype.constructor=jr,jr.prototype.isLineCurve3=!0,jr.prototype.getPoint=function(e,t){var n=t||new s;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},jr.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},jr.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},jr.prototype.toJSON=function(){var e=Er.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},jr.prototype.fromJSON=function(e){return Er.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Hr.prototype=Object.create(Er.prototype),Hr.prototype.constructor=Hr,Hr.prototype.isQuadraticBezierCurve=!0,Hr.prototype.getPoint=function(e,t){var n=t||new i,r=this.v0,o=this.v1,a=this.v2;return n.set(Ir(e,r.x,o.x,a.x),Ir(e,r.y,o.y,a.y)),n},Hr.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Hr.prototype.toJSON=function(){var e=Er.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Hr.prototype.fromJSON=function(e){return Er.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Vr.prototype=Object.create(Er.prototype),Vr.prototype.constructor=Vr,Vr.prototype.isQuadraticBezierCurve3=!0,Vr.prototype.getPoint=function(e,t){var n=t||new s,r=this.v0,i=this.v1,o=this.v2;return n.set(Ir(e,r.x,i.x,o.x),Ir(e,r.y,i.y,o.y),Ir(e,r.z,i.z,o.z)),n},Vr.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Vr.prototype.toJSON=function(){var e=Er.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Vr.prototype.fromJSON=function(e){return Er.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Gr.prototype=Object.create(Er.prototype),Gr.prototype.constructor=Gr,Gr.prototype.isSplineCurve=!0,Gr.prototype.getPoint=function(e,t){var n=t||new i,r=this.points,o=(r.length-1)*e,a=Math.floor(o),s=o-a,l=r[0===a?a:a-1],u=r[a],c=r[a>r.length-2?r.length-1:a+1],h=r[a>r.length-3?r.length-1:a+2];return n.set(Pr(s,l.x,u.x,c.x,h.x),Pr(s,l.y,u.y,c.y,h.y)),n},Gr.prototype.copy=function(e){Er.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this},Gr.prototype.toJSON=function(){var e=Er.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e},Gr.prototype.fromJSON=function(e){Er.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new i).fromArray(r))}return this};var pl=Object.freeze({ArcCurve:Tr,CatmullRomCurve3:kr,CubicBezierCurve:Ur,CubicBezierCurve3:zr,EllipseCurve:Sr,LineCurve:Br,LineCurve3:jr,QuadraticBezierCurve:Hr,QuadraticBezierCurve3:Vr,SplineCurve:Gr});Wr.prototype=Object.assign(Object.create(Er.prototype),{constructor:Wr,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Br(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*e:o&&o.isLineCurve?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),l=0;l<s.length;l++){var u=s[l];t&&t.equals(u)||(n.push(u),t=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){Er.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Er.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){Er.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new pl[r.type]).fromJSON(r))}return this}}),qr.prototype=Object.assign(Object.create(Wr.prototype),{constructor:qr,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new Br(this.currentPoint.clone(),new i(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var o=new Hr(this.currentPoint.clone(),new i(e,t),new i(n,r));this.curves.push(o),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,o,a){var s=new Ur(this.currentPoint.clone(),new i(e,t),new i(n,r),new i(o,a));this.curves.push(s),this.currentPoint.set(o,a)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),n=new Gr(t);this.curves.push(n),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,n,r,i,o)},absarc:function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},ellipse:function(e,t,n,r,i,o,a,s){var l=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(e+l,t+u,n,r,i,o,a,s)},absellipse:function(e,t,n,r,i,o,a,s){var l=new Sr(e,t,n,r,i,o,a,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)},copy:function(e){return Wr.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Wr.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Wr.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Xr.prototype=Object.assign(Object.create(qr.prototype),{constructor:Xr,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){qr.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=qr.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){qr.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new qr).fromJSON(r))}return this}}),Yr.prototype=Object.assign(Object.create(x.prototype),{constructor:Yr,isLight:!0,copy:function(e){return x.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=x.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Zr.prototype=Object.assign(Object.create(Yr.prototype),{constructor:Zr,isHemisphereLight:!0,copy:function(e){return Yr.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Jr.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Kr.prototype=Object.assign(Object.create(Jr.prototype),{constructor:Kr,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*Ns.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix())}}),Qr.prototype=Object.assign(Object.create(Yr.prototype),{constructor:Qr,isSpotLight:!0,copy:function(e){return Yr.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),$r.prototype=Object.assign(Object.create(Yr.prototype),{constructor:$r,isPointLight:!0,copy:function(e){return Yr.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),ei.prototype=Object.assign(Object.create(Jr.prototype),{constructor:ei}),ti.prototype=Object.assign(Object.create(Yr.prototype),{constructor:ti,isDirectionalLight:!0,copy:function(e){return Yr.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),ni.prototype=Object.assign(Object.create(Yr.prototype),{constructor:ni,isAmbientLight:!0}),ri.prototype=Object.assign(Object.create(Yr.prototype),{constructor:ri,isRectAreaLight:!0,copy:function(e){return Yr.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Yr.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),ii.prototype=Object.assign(Object.create(pi.prototype),{constructor:ii,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),oi.prototype=Object.assign(Object.create(pi.prototype),{constructor:oi,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(ai.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}{if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){var l=n+o>>>1;e<t[l]?o=l:n=l+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(ai.prototype,{beforeStart_:ai.prototype.copySampleValue_,afterEnd_:ai.prototype.copySampleValue_}),si.prototype=Object.assign(Object.create(ai.prototype),{constructor:si,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=e*s,u=(n-t)/(r-t),c=l+s;l!==c;l+=4)a.slerpFlat(i,0,o,l-s,o,l,u);return i}}),li.prototype=Object.assign(Object.create(pi.prototype),{constructor:li,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new si(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),ui.prototype=Object.assign(Object.create(pi.prototype),{constructor:ui,ValueTypeName:"color"}),ci.prototype=Object.assign(Object.create(pi.prototype),{constructor:ci,ValueTypeName:"number"}),hi.prototype=Object.assign(Object.create(ai.prototype),{constructor:hi,DefaultSettings_:{endingStart:Es,endingEnd:Es},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=e,a=2*t-n;break;case 2402:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e,s=2*n-t;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=i*u,this._offsetNext=o*u},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,v=-h*m+2*h*p-h*f,g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*m+(1.5+d)*p+.5*f,_=d*m-d*p,b=0;b!==a;++b)i[b]=v*o[u+b]+g*o[l+b]+y*o[s+b]+_*o[c+b];return i}}),di.prototype=Object.assign(Object.create(ai.prototype),{constructor:di,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,u=(n-t)/(r-t),c=1-u,h=0;h!==a;++h)i[h]=o[l+h]*c+o[s+h]*u;return i}}),fi.prototype=Object.assign(Object.create(ai.prototype),{constructor:fi,interpolate_:function(e){return this.copySampleValue_(e-1)}});var ml={arraySlice:function(e,t,n){return ml.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,n){return e[t]-e[n]}for(var n=e.length,r=new Array(n),i=0;i!==n;++i)r[i]=i;return r.sort(t),r},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,l=0;l!==t;++l)i[a++]=e[s+l];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}}};Object.assign(pi,{parse:function(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=pi._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var n=[],r=[];ml.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:ml.convertArray(e.times,Array),values:ml.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ci;case"vector":case"vector2":case"vector3":case"vector4":return mi;case"color":return ui;case"quaternion":return li;case"bool":case"boolean":return oi;case"string":return ii}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}}),Object.assign(pi.prototype,{constructor:pi,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new fi(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new di(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new hi(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return void console.warn("THREE.KeyframeTrack:",n)}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);var a=this.getValueSize();this.times=ml.arraySlice(n,i,o),this.values=ml.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&ml.isTypedArray(r))for(var a=0,l=r.length;a!==l;++a){var u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=2302===this.getInterpolation(),i=1,o=e.length-1,a=1;a<o;++a){var s=!1,l=e[a];if(l!==e[a+1]&&(1!==a||l!==l[0]))if(r)s=!0;else for(var u=a*n,c=u-n,h=u+n,d=0;d!==n;++d){var f=t[u+d];if(f!==t[c+d]||f!==t[h+d]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];for(var p=a*n,m=i*n,d=0;d!==n;++d)t[m+d]=t[p+d]}++i}}if(o>0){e[i]=e[o];for(var p=o*n,m=i*n,d=0;d!==n;++d)t[m+d]=t[p+d];++i}return i!==e.length&&(this.times=ml.arraySlice(e,0,i),this.values=ml.arraySlice(t,0,i*n)),this}}),mi.prototype=Object.assign(Object.create(pi.prototype),{constructor:mi,ValueTypeName:"vector"}),Object.assign(vi,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(pi.parse(n[i]).scale(r));return new vi(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t},i=0,o=n.length;i!==o;++i)t.push(pi.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],l=[];s.push((a+i-1)%i,a,(a+1)%i),l.push(0,1,0);var u=ml.getKeyframeOrder(s);s=ml.sortedArray(s,1,u),l=ml.sortedArray(l,1,u),r||0!==s[0]||(s.push(i),l.push(l[0])),o.push(new ci(".morphTargetInfluences["+t[a].name+"]",s,l).scale(1/n))}return new vi(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],l=s.name.match(i);if(l&&l.length>1){var u=l[1],c=r[u];c||(r[u]=c=[]),c.push(s)}}var h=[];for(var u in r)h.push(vi.CreateFromMorphTargetSequence(u,r[u],t,n));return h},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];ml.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],l=0;l<s.length;l++){var u=s[l].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var c={},h=0;h<u.length;h++)if(u[h].morphTargets)for(var d=0;d<u[h].morphTargets.length;d++)c[u[h].morphTargets[d]]=-1;for(var f in c){for(var p=[],m=[],d=0;d!==u[h].morphTargets.length;++d){var v=u[h];p.push(v.time),m.push(v.morphTarget===f?1:0)}r.push(new ci(".morphTargetInfluence["+f+"]",p,m))}o=c.length*(a||1)}else{var g=".bones["+t[l].name+"]";n(mi,g+".position",u,"pos",r),n(li,g+".quaternion",u,"rot",r),n(mi,g+".scale",u,"scl",r)}}return 0===r.length?null:new vi(i,o,r)}}),Object.assign(vi.prototype,{resetDuration:function(){for(var e=this.tracks,t=0,n=0,r=e.length;n!==r;++n){var i=this.tracks[n];t=Math.max(t,i.times[i.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(gi.prototype,{load:function(e,t,n,r){var i=this;new gr(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setTextures:function(e){this.textures=e},parse:function(e){function t(e){return void 0===n[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),n[e]}var n=this.textures,r=new al[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(r.uniforms=e.uniforms),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=t(e.map)),void 0!==e.alphaMap&&(r.alphaMap=t(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=t(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=t(e.normalMap)),void 0!==e.normalScale){var o=e.normalScale;!1===Array.isArray(o)&&(o=[o,o]),r.normalScale=(new i).fromArray(o)}return void 0!==e.displacementMap&&(r.displacementMap=t(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=t(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=t(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=t(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=t(e.specularMap)),void 0!==e.envMap&&(r.envMap=t(e.envMap)),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.lightMap&&(r.lightMap=t(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=t(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=t(e.gradientMap)),r}}),Object.assign(yi.prototype,{load:function(e,t,n,r){var i=this;new gr(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=new z,n=e.data.index;if(void 0!==n){var r=new vl[n.type](n.array);t.setIndex(new k(r,1))}var i=e.data.attributes;for(var o in i){var a=i[o],r=new vl[a.type](a.array);t.addAttribute(o,new k(r,a.itemSize,a.normalized))}var l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(var u=0,c=l.length;u!==c;++u){var h=l[u];t.addGroup(h.start,h.count,h.materialIndex)}var d=e.data.boundingSphere;if(void 0!==d){var f=new s;void 0!==d.center&&f.fromArray(d.center),t.boundingSphere=new m(f,d.radius)}return t}});var vl={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};_i.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n],o=t[n+1];if(i.test(e))return o}return null}},Object.assign(_i.prototype,{crossOrigin:void 0,onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:function(){var e={NoBlending:Lo,NormalBlending:Do,AdditiveBlending:No,SubtractiveBlending:Fo,MultiplyBlending:Uo,CustomBlending:zo},t=new y,n=new xr,r=new gi;return function(i,o,a){function s(e,t,r,i,s){var u,c=o+e,h=_i.Handlers.get(c);null!==h?u=h.load(c):(n.setCrossOrigin(a),u=n.load(c)),void 0!==t&&(u.repeat.fromArray(t),1!==t[0]&&(u.wrapS=Ta),1!==t[1]&&(u.wrapT=Ta)),void 0!==r&&u.offset.fromArray(r),void 0!==i&&("repeat"===i[0]&&(u.wrapS=Ta),"mirror"===i[0]&&(u.wrapS=ka),"repeat"===i[1]&&(u.wrapT=Ta),"mirror"===i[1]&&(u.wrapT=ka)),void 0!==s&&(u.anisotropy=s);var d=Ns.generateUUID();return l[d]=u,d}var l={},u={uuid:Ns.generateUUID(),type:"MeshLambertMaterial"};for(var c in i){var h=i[c];switch(c){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":u.name=h;break;case"blending":u.blending=e[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",c,"is no longer supported.");break;case"colorDiffuse":u.color=t.fromArray(h).getHex();break;case"colorSpecular":u.specular=t.fromArray(h).getHex();break;case"colorEmissive":u.emissive=t.fromArray(h).getHex();break;case"specularCoef":u.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(u.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(u.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(u.type="MeshStandardMaterial");break;case"mapDiffuse":u.map=s(h,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":u.emissiveMap=s(h,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":u.lightMap=s(h,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":u.aoMap=s(h,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":u.bumpMap=s(h,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case"mapBumpScale":u.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":u.normalMap=s(h,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case"mapNormalFactor":u.normalScale=h;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":u.specularMap=s(h,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":u.metalnessMap=s(h,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":u.roughnessMap=s(h,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":u.alphaMap=s(h,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":u.side=Co;break;case"doubleSided":u.side=Ao;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),u.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":u[c]=h;break;case"vertexColors":!0===h&&(u.vertexColors=Ro),"face"===h&&(u.vertexColors=Io);break;default:console.error("THREE.Loader.createMaterial: Unsupported",c,h)}}return"MeshBasicMaterial"===u.type&&delete u.emissive,"MeshPhongMaterial"!==u.type&&delete u.specular,u.opacity<1&&(u.transparent=!0),r.setTextures(l),r.parse(u)}}()});var gl={decodeText:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};Object.assign(bi.prototype,{load:function(e,t,n,r){var i=this,o=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:gl.extractUrlBase(e),a=new gr(this.manager);a.setWithCredentials(this.withCredentials),a.load(e,function(n){var r=JSON.parse(n),a=r.metadata;if(void 0!==a){var s=a.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.")}var l=i.parse(r,o);t(l.geometry,l.materials)},n,r)},setTexturePath:function(e){this.texturePath=e},parse:function(){function e(e,t){function n(e,t){return e&1<<t}var r,o,a,l,u,c,h,d,f,p,m,v,g,_,b,w,x,E,S,M,k,P,C,A,O,I,R,L=e.faces,D=e.vertices,N=e.normals,F=e.colors,U=e.scale,z=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&z++;for(r=0;r<z;r++)t.faceVertexUvs[r]=[]}for(l=0,u=D.length;l<u;)E=new s,E.x=D[l++]*U,E.y=D[l++]*U,E.z=D[l++]*U,t.vertices.push(E);for(l=0,u=L.length;l<u;)if(p=L[l++],m=n(p,0),v=n(p,1),g=n(p,3),_=n(p,4),b=n(p,5),w=n(p,6),x=n(p,7),m){if(M=new T,M.a=L[l],M.b=L[l+1],M.c=L[l+3],k=new T,k.a=L[l+1],k.b=L[l+2],k.c=L[l+3],l+=4,v&&(f=L[l++],M.materialIndex=f,k.materialIndex=f),a=t.faces.length,g)for(r=0;r<z;r++)for(A=e.uvs[r],t.faceVertexUvs[r][a]=[],t.faceVertexUvs[r][a+1]=[],o=0;o<4;o++)d=L[l++],I=A[2*d],R=A[2*d+1],O=new i(I,R),2!==o&&t.faceVertexUvs[r][a].push(O),0!==o&&t.faceVertexUvs[r][a+1].push(O);if(_&&(h=3*L[l++],M.normal.set(N[h++],N[h++],N[h]),k.normal.copy(M.normal)),b)for(r=0;r<4;r++)h=3*L[l++],C=new s(N[h++],N[h++],N[h]),2!==r&&M.vertexNormals.push(C),0!==r&&k.vertexNormals.push(C);if(w&&(c=L[l++],P=F[c],M.color.setHex(P),k.color.setHex(P)),x)for(r=0;r<4;r++)c=L[l++],P=F[c],2!==r&&M.vertexColors.push(new y(P)),0!==r&&k.vertexColors.push(new y(P));t.faces.push(M),t.faces.push(k)}else{if(S=new T,S.a=L[l++],S.b=L[l++],S.c=L[l++],v&&(f=L[l++],S.materialIndex=f),a=t.faces.length,g)for(r=0;r<z;r++)for(A=e.uvs[r],t.faceVertexUvs[r][a]=[],o=0;o<3;o++)d=L[l++],I=A[2*d],R=A[2*d+1],O=new i(I,R),t.faceVertexUvs[r][a].push(O);if(_&&(h=3*L[l++],S.normal.set(N[h++],N[h++],N[h])),b)for(r=0;r<3;r++)h=3*L[l++],C=new s(N[h++],N[h++],N[h]),S.vertexNormals.push(C);if(w&&(c=L[l++],S.color.setHex(F[c])),x)for(r=0;r<3;r++)c=L[l++],S.vertexColors.push(new y(F[c]));t.faces.push(S)}}function t(e,t){var n=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,i=e.skinWeights.length;r<i;r+=n){var o=e.skinWeights[r],a=n>1?e.skinWeights[r+1]:0,s=n>2?e.skinWeights[r+2]:0,l=n>3?e.skinWeights[r+3]:0;t.skinWeights.push(new c(o,a,s,l))}if(e.skinIndices)for(var r=0,i=e.skinIndices.length;r<i;r+=n){var u=e.skinIndices[r],h=n>1?e.skinIndices[r+1]:0,d=n>2?e.skinIndices[r+2]:0,f=n>3?e.skinIndices[r+3]:0;t.skinIndices.push(new c(u,h,d,f))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}function n(e,t){var n=e.scale;if(void 0!==e.morphTargets)for(var r=0,i=e.morphTargets.length;r<i;r++){t.morphTargets[r]={},t.morphTargets[r].name=e.morphTargets[r].name,t.morphTargets[r].vertices=[];for(var o=t.morphTargets[r].vertices,a=e.morphTargets[r].vertices,l=0,u=a.length;l<u;l+=3){var c=new s;c.x=a[l]*n,c.y=a[l+1]*n,c.z=a[l+2]*n,o.push(c)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var h=t.faces,d=e.morphColors[0].colors,r=0,i=h.length;r<i;r++)h[r].color.fromArray(d,3*r)}}function r(e,t){var n=[],r=[];void 0!==e.animation&&r.push(e.animation),void 0!==e.animations&&(e.animations.length?r=r.concat(e.animations):r.push(e.animations));for(var i=0;i<r.length;i++){var o=vi.parseAnimation(r[i],t.bones);o&&n.push(o)}if(t.morphTargets){var a=vi.CreateClipsFromMorphTargetSequences(t.morphTargets,10);n=n.concat(a)}n.length>0&&(t.animations=n)}return function(i,o){void 0!==i.data&&(i=i.data),void 0!==i.scale?i.scale=1/i.scale:i.scale=1;var a=new M;return e(i,a),t(i,a),n(i,a),r(i,a),a.computeFaceNormals(),a.computeBoundingSphere(),void 0===i.materials||0===i.materials.length?{geometry:a}:{geometry:a,materials:_i.prototype.initMaterials(i.materials,o,this.crossOrigin)}}}()}),Object.assign(wi.prototype,{load:function(e,t,n,r){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this;new gr(i.manager).load(e,function(n){var o=null;try{o=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=o.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())return void console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.");i.parse(o,t)},n,r)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,function(){void 0!==t&&t(s)}),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new Xr).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var r=new bi,i=new yi,o=0,a=e.length;o<a;o++){var s,l=e[o];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new ol[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new ol[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new ol[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new ol[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new ol[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new ol[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new ol[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new ol[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new ol[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new ol[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new ol[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new ol[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var u=[],c=0,h=l.shapes.length;c<h;c++){var d=t[l.shapes[c]];u.push(d)}s=new ol[l.type](u,l.curveSegments);break;case"BufferGeometry":s=i.parse(l);break;case"Geometry":s=r.parse(l,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}s.uuid=l.uuid,void 0!==l.name&&(s.name=l.name),n[l.uuid]=s}return n},parseMaterials:function(e,t){var n={};if(void 0!==e){var r=new gi;r.setTextures(t);for(var i=0,o=e.length;i<o;i++){var a=e[i];if("MultiMaterial"===a.type){for(var s=[],l=0;l<a.materials.length;l++)s.push(r.parse(a.materials[l]));n[a.uuid]=s}else n[a.uuid]=r.parse(a)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=vi.parse(e[n]);t.push(r)}return t},parseImages:function(e,t){var n=this,r={};if(void 0!==e&&e.length>0){var i=new vr(t),o=new br(i);o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var l=e[a],u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.texturePath+l.url;r[l.uuid]=function(e){return n.manager.itemStart(e),o.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemEnd(e),n.manager.itemError(e)})}(u)}}return r},parseTextures:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a=e[i];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var s=new u(t[a.image]);s.needsUpdate=!0,s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=n(a.mapping,yl)),void 0!==a.offset&&s.offset.fromArray(a.offset),void 0!==a.repeat&&s.repeat.fromArray(a.repeat),void 0!==a.center&&s.center.fromArray(a.center),void 0!==a.rotation&&(s.rotation=a.rotation),void 0!==a.wrap&&(s.wrapS=n(a.wrap[0],_l),s.wrapT=n(a.wrap[1],_l)),void 0!==a.format&&(s.format=a.format),void 0!==a.minFilter&&(s.minFilter=n(a.minFilter,bl)),void 0!==a.magFilter&&(s.magFilter=n(a.magFilter,bl)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),void 0!==a.flipY&&(s.flipY=a.flipY),r[a.uuid]=s}return r},parseObject:function(e,t,n){function r(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function i(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}var o;switch(e.type){case"Scene":o=new Pt,void 0!==e.background&&Number.isInteger(e.background)&&(o.background=new y(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new kt(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new Mt(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new xt(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new S(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new ni(e.color,e.intensity);break;case"DirectionalLight":o=new ti(e.color,e.intensity);break;case"PointLight":o=new $r(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new ri(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Qr(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Zr(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=r(e.geometry),s=i(e.material);o=a.bones&&a.bones.length>0?new Lt(a,s):new J(a,s);break;case"LOD":o=new Ot;break;case"Line":o=new Nt(r(e.geometry),i(e.material),e.mode);break;case"LineLoop":o=new Ut(r(e.geometry),i(e.material));break;case"LineSegments":o=new Ft(r(e.geometry),i(e.material));break;case"PointCloud":case"Points":o=new Bt(r(e.geometry),i(e.material));break;case"Sprite":o=new At(i(e.material));break;case"Group":o=new jt;break;default:o=new x}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.children)for(var l=e.children,u=0;u<l.length;u++)o.add(this.parseObject(l[u],t,n));if("LOD"===e.type)for(var c=e.levels,h=0;h<c.length;h++){var d=c[h],f=o.getObjectByProperty("uuid",d.object);void 0!==f&&o.addLevel(f,d.distance)}return o}});var yl={UVMapping:300,CubeReflectionMapping:ya,CubeRefractionMapping:_a,EquirectangularReflectionMapping:ba,EquirectangularRefractionMapping:wa,SphericalReflectionMapping:xa,CubeUVReflectionMapping:Ea,CubeUVRefractionMapping:Sa},_l={RepeatWrapping:Ta,ClampToEdgeWrapping:Ma,MirroredRepeatWrapping:ka},bl={NearestFilter:Pa,NearestMipMapNearestFilter:Ca,NearestMipMapLinearFilter:Aa,LinearFilter:Oa,LinearMipMapNearestFilter:Ia,LinearMipMapLinearFilter:Ra};xi.prototype={constructor:xi,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var i=this,o=sl.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;fetch(e).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,i.options)}).then(function(n){sl.add(e,n),t&&t(n),i.manager.itemEnd(e)}).catch(function(t){r&&r(t),i.manager.itemEnd(e),i.manager.itemError(e)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(Ei.prototype,{moveTo:function(e,t){this.currentPath=new qr,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,o){this.currentPath.bezierCurveTo(e,t,n,r,i,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new Xr;o.curves=i.curves,t.push(o)}return t}var r=rl.isClockWise,i=this.subPaths;if(0===i.length)return[];if(!0===t)return n(i);var o,a,s,l=[];if(1===i.length)return a=i[0],s=new Xr,s.curves=a.curves,l.push(s),l;var u=!r(i[0].getPoints());u=e?!u:u;var c,h=[],d=[],f=[],p=0;d[p]=void 0,f[p]=[];for(var m=0,v=i.length;m<v;m++)a=i[m],c=a.getPoints(),o=r(c),o=e?!o:o,o?(!u&&d[p]&&p++,d[p]={s:new Xr,p:c},d[p].s.curves=a.curves,u&&p++,f[p]=[]):f[p].push({h:a,p:c[0]});if(!d[0])return n(i);if(d.length>1){for(var g=!1,y=[],_=0,b=d.length;_<b;_++)h[_]=[];for(var _=0,b=d.length;_<b;_++)for(var w=f[_],x=0;x<w.length;x++){for(var E=w[x],S=!0,T=0;T<d.length;T++)(function(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],l=s.x-a.x,u=s.y-a.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(a=t[o],l=-l,s=t[i],u=-u),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var c=u*(e.x-a.x)-l*(e.y-a.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r})(E.p,d[T].p)&&(_!==T&&y.push({froms:_,tos:T,hole:x}),S?(S=!1,h[T].push(E)):g=!0);S&&h[_].push(E)}y.length>0&&(g||(f=h))}for(var M,m=0,k=d.length;m<k;m++){s=d[m].s,l.push(s),M=f[m];for(var P=0,C=M.length;P<C;P++)s.holes.push(M[P].h)}return l}}),Object.assign(Si.prototype,{isFont:!0,generateShapes:function(e,t,n){void 0===t&&(t=100),void 0===n&&(n=4);for(var r=[],i=Ti(e,t,n,this.data),o=0,a=i.length;o<a;o++)Array.prototype.push.apply(r,i[o].toShapes());return r}}),Object.assign(ki.prototype,{load:function(e,t,n,r){var i=this,o=new gr(this.manager);o.setPath(this.path),o.load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)},n,r)},parse:function(e){return new Si(e)},setPath:function(e){return this.path=e,this}});var wl,xl={getContext:function(){return void 0===wl&&(wl=new(window.AudioContext||window.webkitAudioContext)),wl},setContext:function(e){wl=e}};Object.assign(Pi.prototype,{load:function(e,t,n,r){var i=new gr(this.manager);i.setResponseType("arraybuffer"),i.load(e,function(e){xl.getContext().decodeAudioData(e,function(e){t(e)})},n,r)}}),Object.assign(Ci.prototype,{update:function(){var e,t,n,r,i,a,s,l,u=new o,c=new o;return function(o){if(e!==this||t!==o.focus||n!==o.fov||r!==o.aspect*this.aspect||i!==o.near||a!==o.far||s!==o.zoom||l!==this.eyeSep){e=this,t=o.focus,n=o.fov,r=o.aspect*this.aspect,i=o.near,a=o.far,s=o.zoom;var h=o.projectionMatrix.clone();l=this.eyeSep/2;var d,f,p=l*i/t,m=i*Math.tan(Ns.DEG2RAD*n*.5)/s;c.elements[12]=-l,u.elements[12]=l,d=-m*r+p,f=m*r+p,h.elements[0]=2*i/(f-d),h.elements[8]=(f+d)/(f-d),this.cameraL.projectionMatrix.copy(h),d=-m*r-p,f=m*r-p,h.elements[0]=2*i/(f-d),h.elements[8]=(f+d)/(f-d),this.cameraR.projectionMatrix.copy(h)}this.cameraL.matrixWorld.copy(o.matrixWorld).multiply(c),this.cameraR.matrixWorld.copy(o.matrixWorld).multiply(u)}}()}),Ai.prototype=Object.create(x.prototype),Ai.prototype.constructor=Ai,Oi.prototype=Object.assign(Object.create(x.prototype),{constructor:Oi,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01)},updateMatrixWorld:function(){var e=new s,t=new a,n=new s,r=new s;return function(i){x.prototype.updateMatrixWorld.call(this,i);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),o.positionX?(o.positionX.setValueAtTime(e.x,this.context.currentTime),o.positionY.setValueAtTime(e.y,this.context.currentTime),o.positionZ.setValueAtTime(e.z,this.context.currentTime),o.forwardX.setValueAtTime(r.x,this.context.currentTime),o.forwardY.setValueAtTime(r.y,this.context.currentTime),o.forwardZ.setValueAtTime(r.z,this.context.currentTime),o.upX.setValueAtTime(a.x,this.context.currentTime),o.upY.setValueAtTime(a.y,this.context.currentTime),o.upZ.setValueAtTime(a.z,this.context.currentTime)):(o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z,a.x,a.y,a.z))}}()}),Ii.prototype=Object.assign(Object.create(x.prototype),{constructor:Ii,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()},pause:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this)},stop:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.offset=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),Ri.prototype=Object.assign(Object.create(Ii.prototype),{constructor:Ri,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new s;return function(t){x.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(Li.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(Di.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else{o+=t;var s=t/o;this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*t;this._mixBufferRegion(n,r,a,1-i,t)}for(var s=t,l=t+t;s!==l;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=3*n;e.getValue(t,r);for(var i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r){a.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}});var El="\\[\\]\\.:\\/";Object.assign(Ni.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Fi,{Composite:Ni,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Fi.Composite(e,t,n):new Fi(e,t,n)},sanitizeNodeName:function(){var e=new RegExp("["+El+"]","g");return function(t){return t.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var e="[^"+El+"]",t="[^"+El.replace("\\.","")+"]",n=/((?:WC+[\/:])*)/.source.replace("WC",e),r=/(WCOD+)?/.source.replace("WCOD",t),i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e),a=new RegExp("^"+n+r+i+o+"$"),s=["material","materials","bones"];return function(e){var t=a.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==s.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name===t||i.uuid===t)return i;var o=r(i.children);if(o)return o}return null},i=r(e.children);if(i)return i}return null}}),Object.assign(Fi.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=Fi.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[r];if(void 0===s){var l=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+r+" but it wasn't found.",e)}var u=this.Versioning.None;void 0!==e.needsUpdate?(u=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var c=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(var a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(var a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Fi.prototype,{_getValue_unbound:Fi.prototype.getValue,_setValue_unbound:Fi.prototype.setValue}),Object.assign(Ui.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,l=void 0,u=0,c=arguments.length;u!==c;++u){var h=arguments[u],d=h.uuid,f=r[d];if(void 0===f){f=t++,r[d]=f,e.push(h);for(var p=0,m=s;p!==m;++p)a[p].push(new Fi(h,i[p],o[p]))}else if(f<n){l=e[f];var v=--n,g=e[v];r[g.uuid]=f,e[f]=g,r[d]=v,e[v]=h;for(var p=0,m=s;p!==m;++p){var y=a[p],_=y[v],b=y[f];y[f]=_,void 0===b&&(b=new Fi(h,i[p],o[p])),y[v]=b}}else e[f]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],l=s.uuid,u=n[l];if(void 0!==u&&u>=t){var c=t++,h=e[c];n[h.uuid]=u,e[u]=h,n[l]=c,e[c]=s;for(var d=0,f=i;d!==f;++d){var p=r[d],m=p[c],v=p[u];p[u]=m,p[c]=v}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var l=arguments[a],u=l.uuid,c=r[u];if(void 0!==c)if(delete r[u],c<n){var h=--n,d=e[h],f=--t,p=e[f];r[d.uuid]=c,e[c]=d,r[p.uuid]=h,e[h]=p,e.pop();for(var m=0,v=o;m!==v;++m){var g=i[m],y=g[h],_=g[f];g[c]=y,g[h]=_,g.pop()}}else{var f=--t,p=e[f];r[p.uuid]=c,e[c]=p,e.pop();for(var m=0,v=o;m!==v;++m){var g=i[m];g[c]=g[f],g.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(c);for(var h=u,d=s.length;h!==d;++h){var f=s[h];c[h]=new Fi(f,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(zi.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/a,l[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var l=this._interpolants,u=this._propertyBindings,c=0,h=l.length;c!==h;++c)l[c].evaluate(a),u[c].accumulate(r,s)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var n=this._clip.duration,r=this.loop,i=this._loopCount;if(2200===r){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var o=2202===r;if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1===(1&i))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:Es:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:Es:2402)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}),Bi.prototype=Object.assign(Object.create(r.prototype),{constructor:Bi,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==i;++c){var h=r[c],d=h.name,f=u[d];if(void 0!==f)o[c]=f;else{if(void 0!==(f=o[c])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,s,d));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;f=new Di(Fi.create(n,d,p),h.ValueTypeName,h.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,s,d),o[c]=f}a[c].resultBuffer=f.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[i];e:{for(var u in a)break e;delete o[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(n=new di(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?vi.findByName(n,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var l=a.actionByRoot[r];if(void 0!==l)return l;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var u=new zi(this,i,t);return this._bindAction(u,s),this._addInactiveAction(u,o,r),u},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?vi.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a?a.actionByRoot[r]||null:null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(var i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){t[a]._update(r,e,i,o)}for(var s=this._bindings,l=this._nActiveBindings,a=0;a!==l;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var l=o[a];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot,o=i[t];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var a=this._bindingsByRootAndName,s=a[t];if(void 0!==s)for(var l in s){var u=s[l];u.restoreOriginalState(),this._removeInactiveBinding(u)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),ji.prototype.clone=function(){return new ji(void 0===this.value.clone?this.value:this.value.clone())},Hi.prototype=Object.assign(Object.create(z.prototype),{constructor:Hi,isInstancedBufferGeometry:!0,copy:function(e){return z.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(Vi.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Vi.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}}),Object.defineProperty(Gi.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Gi.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Wi.prototype=Object.assign(Object.create(Gi.prototype),{constructor:Wi,isInstancedInterleavedBuffer:!0,copy:function(e){return Gi.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),qi.prototype=Object.assign(Object.create(k.prototype),{constructor:qi,isInstancedBufferAttribute:!0,copy:function(e){return k.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Xi.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var r=n||[];return Zi(e,this,r,t),r.sort(Yi),r},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=e.length;i<o;i++)Zi(e[i],this,r,t);return r.sort(Yi),r}}),Object.assign(Ji.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"===typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(Ki.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(Ns.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(Qi.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),Object.assign($i.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new i;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new i),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new i),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new i),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new i),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new i;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),eo.prototype=Object.create(x.prototype),eo.prototype.constructor=eo,eo.prototype.isImmediateRenderObject=!0,to.prototype=Object.create(Ft.prototype),to.prototype.constructor=to,to.prototype.update=function(){var e=new s,t=new s,n=new l;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,l=a.faces,u=0,c=0,h=l.length;c<h;c++)for(var d=l[c],f=0,p=d.vertexNormals.length;f<p;f++){var m=s[d[r[f]]],v=d.vertexNormals[f];e.copy(m).applyMatrix4(i),t.copy(v).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(u,e.x,e.y,e.z),u+=1,o.setXYZ(u,t.x,t.y,t.z),u+=1}else if(a&&a.isBufferGeometry)for(var g=a.attributes.position,y=a.attributes.normal,u=0,f=0,p=g.count;f<p;f++)e.set(g.getX(f),g.getY(f),g.getZ(f)).applyMatrix4(i),t.set(y.getX(f),y.getY(f),y.getZ(f)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(u,e.x,e.y,e.z),u+=1,o.setXYZ(u,t.x,t.y,t.z),u+=1;o.needsUpdate=!0}}(),no.prototype=Object.create(x.prototype),no.prototype.constructor=no,no.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},no.prototype.update=function(){var e=new s,t=new s;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),io.prototype=Object.create(Ft.prototype),io.prototype.constructor=io,io.prototype.updateMatrixWorld=function(){var e=new s,t=new o,n=new o;return function(r){var i=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,l=0;s<i.length;s++){var u=i[s];u.parent&&u.parent.isBone&&(t.multiplyMatrices(n,u.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(l,e.x,e.y,e.z),t.multiplyMatrices(n,u.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(l+1,e.x,e.y,e.z),l+=2)}o.getAttribute("position").needsUpdate=!0,x.prototype.updateMatrixWorld.call(this,r)}}(),oo.prototype=Object.create(J.prototype),oo.prototype.constructor=oo,oo.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},oo.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},ao.prototype=Object.create(x.prototype),ao.prototype.constructor=ao,ao.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ao.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,n=this.line.geometry.attributes.position,r=n.array;r[0]=e,r[1]=-t,r[2]=0,r[3]=e,r[4]=t,r[5]=0,r[6]=-e,r[7]=t,r[8]=0,r[9]=-e,r[10]=-t,r[11]=0,r[12]=e,r[13]=-t,r[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},so.prototype=Object.create(x.prototype),so.prototype.constructor=so,so.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},so.prototype.update=function(){var e=new s,t=new y,n=new y;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=r.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?t:n;i.setXYZ(o,s.r,s.g,s.b)}i.needsUpdate=!0}r.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),lo.prototype=Object.create(Ft.prototype),lo.prototype.constructor=lo,uo.prototype=Object.create(Ft.prototype),uo.prototype.constructor=uo,co.prototype=Object.create(Ft.prototype),co.prototype.constructor=co,co.prototype.update=function(){var e=new s,t=new s,n=new l;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,l=0,u=0,c=s.length;u<c;u++){var h=s[u],d=h.normal;e.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(r),t.copy(d).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),i.setXYZ(l,e.x,e.y,e.z),l+=1,i.setXYZ(l,t.x,t.y,t.z),l+=1}i.needsUpdate=!0}}(),ho.prototype=Object.create(x.prototype),ho.prototype.constructor=ho,ho.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},ho.prototype.update=function(){var e=new s,t=new s,n=new s;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),fo.prototype=Object.create(Ft.prototype),fo.prototype.constructor=fo,fo.prototype.update=function(){function e(e,o,a,s){r.set(o,a,s).unproject(i);var l=n[e];if(void 0!==l)for(var u=t.getAttribute("position"),c=0,h=l.length;c<h;c++)u.setXYZ(l[c],r.x,r.y,r.z)}var t,n,r=new s,i=new E;return function(){t=this.geometry,n=this.pointMap;i.projectionMatrix.copy(this.camera.projectionMatrix),e("c",0,0,-1),e("t",0,0,1),e("n1",-1,-1,-1),e("n2",1,-1,-1),e("n3",-1,1,-1),e("n4",1,1,-1),e("f1",-1,-1,1),e("f2",1,-1,1),e("f3",-1,1,1),e("f4",1,1,1),e("u1",.7,1.1,-1),e("u2",-.7,1.1,-1),e("u3",0,2,-1),e("cf1",-1,0,1),e("cf2",1,0,1),e("cf3",0,-1,1),e("cf4",0,1,1),e("cn1",-1,0,-1),e("cn2",1,0,-1),e("cn3",0,-1,-1),e("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),po.prototype=Object.create(Ft.prototype),po.prototype.constructor=po,po.prototype.update=function(){var e=new p;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,r=e.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),po.prototype.setFromObject=function(e){return this.object=e,this.update(),this},mo.prototype=Object.create(Ft.prototype),mo.prototype.constructor=mo,mo.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),x.prototype.updateMatrixWorld.call(this,e))},vo.prototype=Object.create(Nt.prototype),vo.prototype.constructor=vo,vo.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.lookAt(this.plane.normal),x.prototype.updateMatrixWorld.call(this,e)};var Sl,Tl;go.prototype=Object.create(x.prototype),go.prototype.constructor=go,go.prototype.setDirection=function(){var e,t=new s;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),go.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},go.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},yo.prototype=Object.create(Ft.prototype),yo.prototype.constructor=yo;Er.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Er.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Wr.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new M,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new s(i.x,i.y,i.z||0))}return t}}),Object.assign(qr.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),_o.prototype=Object.create(kr.prototype),bo.prototype=Object.create(kr.prototype),wo.prototype=Object.create(kr.prototype),Object.assign(wo.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),lo.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},io.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(_i.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),gl.extractUrlBase(e)}}),Object.assign($i.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(p.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Y.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Ns,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Ns.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Ns.ceilPowerOfTwo(e)}}),Object.assign(l.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(o.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new s),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)}}),v.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},a.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(X.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Z.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(Z,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Z.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Z.getNormal(e,t,n,r)}}),Object.assign(Xr.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new jn(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Kn(this,e)}}),Object.assign(i.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(s.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(c.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(M.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(x.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(x.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Ot.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(It.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Er.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),xt.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Yr.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(k.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(z.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(z.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Hn.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(ji.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(G.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new y}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}}}),Object.defineProperties(hr.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(q.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Tt.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(Tt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(vt.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(h.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(St.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),Ii.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Pi).load(e,function(e){t.setBuffer(e)}),this},Li.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Ai.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(300))},function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r;t.default=i},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(h===clearTimeout)return clearTimeout(e);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function a(){m&&f&&(m=!1,f.length?p=f.concat(p):v=-1,p.length&&s())}function s(){if(!m){var e=i(a);m=!0;for(var t=p.length;t;){for(f=p,p=[];++v<t;)f&&f[v].run();v=-1,t=p.length}f=null,m=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,h,d=e.exports={};!function(){try{c="function"===typeof setTimeout?setTimeout:n}catch(e){c=n}try{h="function"===typeof clearTimeout?clearTimeout:r}catch(e){h=r}}();var f,p=[],m=!1,v=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new l(e,t)),1!==p.length||m||i(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var i="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==typeof n)throw new TypeError(n+"must be non-object");for(var i in n)r(n,i)&&(e[i]=n[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),i);for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},a={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(i)},function(e,t,n){"use strict";var r="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),i);for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(r)},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(108),o=n(19),a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(454),u=function(){function e(){r(this,e)}return s(e,null,[{key:"bbox",value:function(e,t){return i.a.vector3(e)&&i.a.vector3(t)?t.x>=0&&t.y>=0&&t.z>=0?{min:e.clone().sub(t),max:e.clone().add(t)}:(window.console.log("halfDimensions must be >= 0."),window.console.log(t),!1):(window.console.log("Invalid center or plane halfDimensions."),!1)}},{key:"minMax",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[65535,-32768],n=e.length,r=0;r<n;r++){var i=e[r];t[0]=Math.min(t[0],i),t[1]=Math.max(t[1],i)}return t}},{key:"isElement",value:function(e){try{return e instanceof HTMLElement}catch(t){return"object"===("undefined"===typeof e?"undefined":a(e))&&1===e.nodeType&&"object"===a(e.style)&&"object"===a(e.ownerDocument)}}},{key:"isString",value:function(e){return"string"===typeof e||e instanceof String}},{key:"parseUrl",value:function(e){var t={};t.filename="",t.extension="",t.pathname="",t.query="";var n=l.parse(e);return t.pathname=n.pathname,t.query=n.query,t.query&&(t.filename=t.query.split("&").reduce(function(e,t){var n=t.split("=");return n.length>0&&"filename"==n[0]&&(e=n[1]),e})),t.filename||(t.filename=t.pathname.split("/").pop()),t.filename.split(".").length<=1?t.extension="dicom":t.extension=t.filename.split(".").pop(),isNaN(t.extension)||(t.extension="dicom"),t.query&&t.query.includes("contentType=application%2Fdicom")&&(t.extension="dicom"),t}},{key:"ijk2LPS",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new o.h,s=new o.h;return s.set(e.x*r.y,t.x*r.x,n.x*r.z,i.x,e.y*r.y,t.y*r.x,n.y*r.z,i.y,e.z*r.y,t.z*r.x,n.z*r.z,i.z,0,0,0,1),s.premultiply(a),s}},{key:"aabb2LPS",value:function(e,t,n,r){var i=new o.h;return i.set(e.x,t.x,n.x,r.x,e.y,t.y,n.y,r.y,e.z,t.z,n.z,r.z,0,0,0,1),i}},{key:"worldToData",value:function(e,t){var n=(new o.q).copy(t).applyMatrix4(e);return n.addScalar(.5).floor(),n}},{key:"value",value:function(e,t){window.console.warn("value is deprecated, please use getPixelData instead"),this.getPixelData(e,t)}},{key:"getPixelData",value:function(e,t){return t.z>=0&&t.z<e._frame.length?e._frame[t.z].getPixelData(t.x,t.y):null}},{key:"setPixelData",value:function(e,t,n){if(!(t.z>=0&&t.z<e._frame.length))return null;e._frame[t.z].setPixelData(t.x,t.y,n)}},{key:"rescaleSlopeIntercept",value:function(e,t,n){return e*t+n}},{key:"centerOfMass",value:function(e){for(var t=new o.q(0,0,0),n=0;n<e.length;n++)t.x+=e[n].x,t.y+=e[n].y,t.z+=e[n].z;return t.divideScalar(e.length),t}},{key:"orderIntersections",value:function(e,t){for(var n=this.centerOfMass(e),r=new o.q(e[0].x-n.x,e[0].y-n.y,e[0].z-n.z).normalize(),i=new o.q(0,0,0).crossVectors(r,t).normalize(),a=[],s=0;s<e.length;s++){var l=new o.q(e[s].x,e[s].y,e[s].z);l.direction=new o.q(e[s].x-n.x,e[s].y-n.y,e[s].z-n.z).normalize();var u=r.dot(l.direction),c=i.dot(l.direction);l.xy={x:u,y:c};var h=Math.atan2(c,u)*(180/Math.PI);l.angle=h,a.push(l)}a.sort(function(e,t){return e.angle-t.angle});for(var d=[a[0]],f=1;f<a.length;f++)Math.abs(a[f-1].angle-a[f].angle)>1e-4&&d.push(a[f]);return d}},{key:"getRoI",value:function(t,n,r){t.geometry.computeBoundingBox();var i=(new o.a).setFromObject(t),a=i.min.clone().project(n),s=i.max.clone().project(n),l=n.controls.domElement.offsetWidth,u=n.controls.domElement.offsetHeight,c=new o.n,h=[];a.x=Math.round((a.x+1)*l/2),a.y=Math.round((1-a.y)*u/2),s.x=Math.round((s.x+1)*l/2),s.y=Math.round((1-s.y)*u/2);var d=[Math.min(a.x,s.x),Math.max(a.x,s.x)];a.x=d[0],s.x=d[1];var f=[Math.min(a.y,s.y),Math.max(a.y,s.y)];a.y=f[0],s.y=f[1];for(var p=[],m=null,v=a.x;v<=s.x;v++)for(var g=a.y;g<=s.y;g++)c.setFromCamera({x:v/l*2-1,y:-g/u*2+1},n),p=c.intersectObject(t),0!==p.length&&null!==(m=e.getPixelData(r,e.worldToData(r.lps2IJK,p[0].point)))&&1===r.numberOfChannels&&h.push(e.rescaleSlopeIntercept(m,r.rescaleSlope,r.rescaleIntercept));if(0===h.length)return null;var y=h.reduce(function(e,t){return e+t})/h.length;return{min:h.reduce(function(e,t){return e<t?e:t}),max:h.reduce(function(e,t){return e>t?e:t}),mean:y,sd:Math.sqrt(h.reduce(function(e,t){return e+Math.pow(t-y,2)},0)/h.length)}}},{key:"getGeometryArea",value:function(e){if(e.faces.length<1)return 0;var t=0,n=e.vertices;return e.faces.forEach(function(e){t+=new o.p(n[e.a],n[e.b],n[e.c]).getArea()}),t}}]),e}();t.a=u},function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);u.call(this,e),c.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||a.nextTick(o,this)}function o(e){e.end()}var a=n(73),s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var l=n(51);l.inherits=n(29);var u=n(175),c=n(114);l.inherits(r,u);for(var h=s(c.prototype),d=0;d<h.length;d++){var f=h[d];r.prototype[f]||(r.prototype[f]=c.prototype[f])}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),a.nextTick(t,e)}},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e<t?t:e>n?n:e}function i(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length/3,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map(function(e){return e+e})),n?"rgb(".concat(n.map(function(e){return parseInt(e,16)}).join(", "),")"):""}function o(e){function t(e){var t=e.toString(16);return 1===t.length?"0".concat(t):t}if(0===e.indexOf("#"))return e;var n=a(e),r=n.values;return r=r.map(function(e){return t(e)}),"#".concat(r.join(""))}function a(e){if("#"===e.charAt(0))return a(i(e));var t=e.indexOf("("),n=e.substring(0,t),r=e.substring(t+1,e.length-1).split(",");return r=r.map(function(e){return parseFloat(e)}),{type:n,values:r}}function s(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")&&(n=n.map(function(e,t){return t<3?parseInt(e,10):e})),-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(e.type,"(").concat(n.join(", "),")")}function l(e,t){var n=u(e),r=u(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function u(e){var t=a(e);if(-1!==t.type.indexOf("rgb")){var n=t.values.map(function(e){return e/=255,e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)});return Number((.2126*n[0]+.7152*n[1]+.0722*n[2]).toFixed(3))}return t.values[2]/100}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return u(e)>.5?d(e,t):f(e,t)}function h(e,t){return e?(e=a(e),t=r(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,s(e)):e}function d(e,t){if(!e)return e;if(e=a(e),t=r(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return s(e)}function f(e,t){if(!e)return e;if(e=a(e),t=r(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return s(e)}var p=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.convertHexToRGB=i,t.rgbToHex=o,t.decomposeColor=a,t.recomposeColor=s,t.getContrastRatio=l,t.getLuminance=u,t.emphasize=c,t.fade=h,t.darken=d,t.lighten=f;p(n(13))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isNumber=t.isString=t.formatMs=t.duration=t.easing=void 0;var i=r(n(3)),o=(r(n(13)),{easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"});t.easing=o;var a={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};t.duration=a;var s=function(e){return"".concat(Math.round(e),"ms")};t.formatMs=s;var l=function(e){return"string"===typeof e};t.isString=l;var u=function(e){return!isNaN(parseFloat(e))};t.isNumber=u;var c={easing:o,duration:a,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=t.duration,r=void 0===n?a.standard:n,l=t.easing,u=void 0===l?o.easeInOut:l,c=t.delay,h=void 0===c?0:c;(0,i.default)(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map(function(e){return"".concat(e," ").concat("string"===typeof r?r:s(r)," ").concat(u," ").concat("string"===typeof h?h:s(h))}).join(",")}()},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(26),u=r(l),c=n(79),h=r(c),d=n(53),f=r(d),p=function(){function e(t,n,r){i(this,e),this.type="style",this.isProcessed=!1;var o=r.sheet,a=r.Renderer,s=r.selector;this.key=t,this.options=r,this.style=n,s&&(this.selectorText=s),this.renderer=o?o.renderer:new a}return s(e,[{key:"prop",value:function(e,t){if(void 0===t)return this.style[e];if(this.style[e]===t)return this;t=this.options.jss.plugins.onChangeValue(t,e,this);var n=null==t||!1===t,r=e in this.style;if(n&&!r)return this;var i=n&&r;if(i?delete this.style[e]:this.style[e]=t,this.renderable)return i?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,t),this;var o=this.options.sheet;return o&&o.attached&&(0,u.default)(!1,'Rule is not linked. Missing sheet option "link: true".'),this}},{key:"applyTo",value:function(e){var t=this.toJSON();for(var n in t)this.renderer.setProperty(e,n,t[n]);return this}},{key:"toJSON",value:function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==("undefined"===typeof n?"undefined":a(n))?e[t]=n:Array.isArray(n)&&(e[t]=(0,f.default)(n))}return e}},{key:"toString",value:function(e){var t=this.options.sheet,n=!!t&&t.options.link,r=n?o({},e,{allowEmpty:!0}):e;return(0,h.default)(this.selector,this.style,r)}},{key:"selector",set:function(e){if(e!==this.selectorText&&(this.selectorText=e,this.renderable)){if(!this.renderer.setSelector(this.renderable,e)&&this.renderable){var t=this.renderer.replaceRule(this.renderable,this);t&&(this.renderable=t)}}},get:function(){return this.selectorText}}]),e}();t.default=p},function(e,t){function n(e){if(e&&"object"===typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"===typeof e)return a[e];var n=String(e),o=r[n.toLowerCase()];if(o)return o;var o=i[n.toLowerCase()];return o||(1===n.length?n.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"===typeof e){var n=e.which||e.keyCode||e.charCode;if(null===n||void 0===n)return!1;if("string"===typeof t){var o=r[t.toLowerCase()];if(o)return o===n;var o=i[t.toLowerCase()];if(o)return o===n}else if("number"===typeof t)return t===n;return!1}},t=e.exports=n;var r=t.code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=t.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(o=97;o<123;o++)r[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)r[o-48]=o;for(o=1;o<13;o++)r["f"+o]=o+111;for(o=0;o<10;o++)r["numpad "+o]=o+96;var a=t.names=t.title={};for(o in r)a[r[o]]=o;for(var s in i)r[s]=i[s]},function(e,t){var n=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(37),i=n(65);e.exports=n(39)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(50),i=n(148),o=n(90),a=Object.defineProperty;t.f=n(39)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t,n){e.exports=!n(64)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(319),i=n(89);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(95)("wks"),i=n(66),o=n(22).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(350))},function(e,t,n){"use strict";(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!o.TYPED_ARRAY_SUPPORT&&!(this instanceof o))return new o(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,n,r):"string"===typeof t?c(e,t,n):f(e,t)}function s(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t,n,r){return s(t),t<=0?i(e,t):void 0!==n?"string"===typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}function u(e,t){if(s(t),e=i(e,t<0?0:0|p(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function c(e,t,n){if("string"===typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(t,n);e=i(e,r);var a=e.write(t,n);return a!==r&&(e=e.slice(0,a)),e}function h(e,t){var n=t.length<0?0:0|p(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=h(e,t),e}function f(e,t){if(o.isBuffer(t)){var n=0|p(t.length);return e=i(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||Z(t.length)?i(e,0):h(e,t);if("Buffer"===t.type&&Q(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function m(e){return+e!=e&&(e=0),o.alloc(+e)}function v(e,t){if(o.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return X(e).length;default:if(r)return G(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return P(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"===typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}var u;if(i){var c=-1;for(u=n;u<s;u++)if(o(e,u)===o(t,-1===c?0:u-c)){if(-1===c&&(c=u),u-c+1===l)return c*a}else-1!==c&&(u-=u-c),c=-1}else for(n+l>s&&(n=s-l),u=n;u>=0;u--){for(var h=!0,d=0;d<l;d++)if(o(e,u+d)!==o(t,d)){h=!1;break}if(h)return u}return-1}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function x(e,t,n,r){return Y(G(t,e.length-n),e,n,r)}function E(e,t,n,r){return Y(W(t),e,n,r)}function S(e,t,n,r){return E(e,t,n,r)}function T(e,t,n,r){return Y(X(t),e,n,r)}function M(e,t,n,r){return Y(q(t,e.length-n),e,n,r)}function k(e,t,n){return 0===t&&n===e.length?J.fromByteArray(e):J.fromByteArray(e.slice(t,n))}function P(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var l,u,c,h;switch(s){case 1:o<128&&(a=o);break;case 2:l=e[i+1],128===(192&l)&&(h=(31&o)<<6|63&l)>127&&(a=h);break;case 3:l=e[i+1],u=e[i+2],128===(192&l)&&128===(192&u)&&(h=(15&o)<<12|(63&l)<<6|63&u)>2047&&(h<55296||h>57343)&&(a=h);break;case 4:l=e[i+1],u=e[i+2],c=e[i+3],128===(192&l)&&128===(192&u)&&128===(192&c)&&(h=(15&o)<<18|(63&l)<<12|(63&u)<<6|63&c)>65535&&h<1114112&&(a=h)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return C(r)}function C(e){var t=e.length;if(t<=$)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=$));return n}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function I(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=V(e[o]);return i}function R(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function L(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function F(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function U(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(e,t,n,r,i){return i||U(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(e,t,n,r,23,4),n+4}function B(e,t,n,r,i){return i||U(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(e,t,n,r,52,8),n+8}function j(e){if(e=H(e).replace(ee,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function H(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function V(e){return e<16?"0"+e.toString(16):e.toString(16)}function G(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function W(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function q(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function X(e){return J.toByteArray(j(e))}function Y(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Z(e){return e!==e}var J=n(503),K=n(504),Q=n(174);t.Buffer=o,t.SlowBuffer=m,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return a(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return l(null,e,t,n)},o.allocUnsafe=function(e){return u(null,e)},o.allocUnsafeSlow=function(e){return u(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=v,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?P(this,0,e):g.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,s=n-t,l=Math.min(a,s),u=this.slice(r,i),c=e.slice(t,n),h=0;h<l;++h)if(u[h]!==c[h]){a=u[h],s=c[h];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":return E(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var i=t-e;r=new o(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),K.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),K.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),K.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),K.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){D(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){D(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return z(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return z(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"===typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=o.isBuffer(e)?e:G(new o(e,r).toString()),l=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%l]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(14))},function(e,t,n){"use strict";var r=r||{};r.lossless=r.lossless||{},r.lossless.DataStream=r.lossless.DataStream||function(e,t,n){this.buffer=new DataView(e,t,n),this.index=0},r.lossless.DataStream.prototype.get16=function(){var e=this.buffer.getUint16(this.index,!1);return this.index+=2,e},r.lossless.DataStream.prototype.get8=function(){var e=this.buffer.getUint8(this.index);return this.index+=1,e},"undefined"!==typeof e&&e.exports&&(e.exports=r.lossless.DataStream)},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createGenerateClassName",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"createMuiTheme",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"jssPreset",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"MuiThemeProvider",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"createStyles",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"withStyles",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"withTheme",{enumerable:!0,get:function(){return c.default}});var i=r(n(124)),o=r(n(78)),a=r(n(126)),s=r(n(265)),l=r(n(270)),u=r(n(5)),c=r(n(59))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(54),l=r(s),u=n(130),c=r(u),h=n(33),d=r(h),f=n(240),p=r(f),m=function(){function e(t){var n=this;i(this,e),this.map={},this.raw={},this.index=[],this.update=function(e,t){var r=n.options,i=r.jss.plugins,o=r.sheet;if("string"===typeof e)i.onUpdate(t,n.get(e),o);else for(var a=0;a<n.index.length;a++)i.onUpdate(e,n.index[a],o)},this.options=t,this.classes=t.classes}return a(e,[{key:"add",value:function(e,t,n){var r=this.options,i=r.parent,a=r.sheet,s=r.jss,u=r.Renderer,c=r.generateClassName;n=o({classes:this.classes,parent:i,sheet:a,jss:s,Renderer:u,generateClassName:c},n),!n.selector&&this.classes[e]&&(n.selector="."+(0,p.default)(this.classes[e])),this.raw[e]=t;var h=(0,l.default)(e,t,n),f=void 0;!n.selector&&h instanceof d.default&&(f=c(h,a),h.selector="."+(0,p.default)(f)),this.register(h,f);var m=void 0===n.index?this.index.length:n.index;return this.index.splice(m,0,h),h}},{key:"get",value:function(e){return this.map[e]}},{key:"remove",value:function(e){this.unregister(e),this.index.splice(this.indexOf(e),1)}},{key:"indexOf",value:function(e){return this.index.indexOf(e)}},{key:"process",value:function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)}},{key:"register",value:function(e,t){this.map[e.key]=e,e instanceof d.default&&(this.map[e.selector]=e,t&&(this.classes[e.key]=t))}},{key:"unregister",value:function(e){delete this.map[e.key],e instanceof d.default&&(delete this.map[e.selector],delete this.classes[e.key])}},{key:"link",value:function(e){for(var t=this.options.sheet.renderer.getUnescapedKeysMap(this.index),n=0;n<e.length;n++){var r=e[n],i=this.options.sheet.renderer.getKey(r);t[i]&&(i=t[i]);var o=this.map[i];o&&(0,c.default)(o,r)}}},{key:"toString",value:function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,i=0;i<this.index.length;i++){var o=this.index[i],a=o.toString(e);(a||r)&&(t&&(t+="\n"),t+=a)}return t}}]),e}();t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(){}t.__esModule=!0,t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var u=n(2),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),h=n(1),d=r(h),f=n(18),p=r(f),m=n(142),v=(n(296),t.UNMOUNTED="unmounted"),g=t.EXITED="exited",y=t.ENTERING="entering",_=t.ENTERED="entered",b=t.EXITING="exiting",w=function(e){function t(n,r){o(this,t);var i=a(this,e.call(this,n,r)),s=r.transitionGroup,l=s&&!s.isMounting?n.enter:n.appear,u=void 0;return i.appearStatus=null,n.in?l?(u=g,i.appearStatus=y):u=_:u=n.unmountOnExit||n.mountOnEnter?v:g,i.state={status:u},i.nextCallback=null,i}return s(t,e),t.prototype.getChildContext=function(){return{transitionGroup:null}},t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===v?{status:g}:null},t.prototype.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.prototype.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==y&&n!==_&&(t=y):n!==y&&n!==_||(t=b)}this.updateStatus(!1,t)},t.prototype.componentWillUnmount=function(){this.cancelNextCallback()},t.prototype.getTimeouts=function(){var e=this.props.timeout,t=void 0,n=void 0,r=void 0;return t=n=r=e,null!=e&&"number"!==typeof e&&(t=e.exit,n=e.enter,r=e.appear),{exit:t,enter:n,appear:r}},t.prototype.updateStatus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];if(null!==t){this.cancelNextCallback();var n=p.default.findDOMNode(this);t===y?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===g&&this.setState({status:v})},t.prototype.performEnter=function(e,t){var n=this,r=this.props.enter,i=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,o=this.getTimeouts();if(!t&&!r)return void this.safeSetState({status:_},function(){n.props.onEntered(e)});this.props.onEnter(e,i),this.safeSetState({status:y},function(){n.props.onEntering(e,i),n.onTransitionEnd(e,o.enter,function(){n.safeSetState({status:_},function(){n.props.onEntered(e,i)})})})},t.prototype.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();if(!n)return void this.safeSetState({status:g},function(){t.props.onExited(e)});this.props.onExit(e),this.safeSetState({status:b},function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,function(){t.safeSetState({status:g},function(){t.props.onExited(e)})})})},t.prototype.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},t.prototype.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},t.prototype.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},t.prototype.onTransitionEnd=function(e,t,n){this.setNextCallback(n),e?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},t.prototype.render=function(){var e=this.state.status;if(e===v)return null;var t=this.props,n=t.children,r=i(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"===typeof n)return n(e,r);var o=d.default.Children.only(n);return d.default.cloneElement(o,r)},t}(d.default.Component);w.contextTypes={transitionGroup:c.object},w.childContextTypes={transitionGroup:function(){}},w.propTypes={},w.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:l,onEntering:l,onEntered:l,onExit:l,onExiting:l,onExited:l},w.UNMOUNTED=0,w.EXITED=1,w.ENTERING=2,w.ENTERED=3,w.EXITING=4,t.default=(0,m.polyfill)(w)},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(306))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(309),o=r(i),a=n(349),s=r(a),l=n(156),u=(r(l),n(58)),c=(r(u),function(e){var t=(0,o.default)(function(e,t){return!(0,s.default)(e,t)});return t(e)});t.default=c},function(e,t,n){var r=n(38);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===v(e)}function r(e){return"boolean"===typeof e}function i(e){return null===e}function o(e){return null==e}function a(e){return"number"===typeof e}function s(e){return"string"===typeof e}function l(e){return"symbol"===typeof e}function u(e){return void 0===e}function c(e){return"[object RegExp]"===v(e)}function h(e){return"object"===typeof e&&null!==e}function d(e){return"[object Date]"===v(e)}function f(e){return"[object Error]"===v(e)||e instanceof Error}function p(e){return"function"===typeof e}function m(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function v(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=r,t.isNull=i,t.isNullOrUndefined=o,t.isNumber=a,t.isString=s,t.isSymbol=l,t.isUndefined=u,t.isRegExp=c,t.isObject=h,t.isDate=d,t.isError=f,t.isFunction=p,t.isPrimitive=m,t.isBuffer=e.isBuffer}).call(t,n(43).Buffer)},function(e,t,n){"use strict";function r(e){return!!e&&"object"===typeof e}function i(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||o(e)}function o(e){return e.$$typeof===f}function a(e){return Array.isArray(e)?[]:{}}function s(e,t){return!1!==t.clone&&t.isMergeableObject(e)?c(a(e),e,t):e}function l(e,t,n){return e.concat(t).map(function(e){return s(e,n)})}function u(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach(function(t){r[t]=s(e[t],n)}),Object.keys(t).forEach(function(i){n.isMergeableObject(t[i])&&e[i]?r[i]=c(e[i],t[i],n):r[i]=s(t[i],n)}),r}function c(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||l,n.isMergeableObject=n.isMergeableObject||h;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):u(e,t,n):s(t,n)}Object.defineProperty(t,"__esModule",{value:!0});var h=function(e){return r(e)&&!i(e)},d="function"===typeof Symbol&&Symbol.for,f=d?Symbol.for("react.element"):60103;c.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,n){return c(e,n,t)},{})};var p=c;t.default=p},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=", "),n+=i(e[r]," ");else n=i(e,", ");return t||"!important"!==e[e.length-1]||(n+=" !important"),n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unnamed",t=arguments[1],n=arguments[2],r=n.jss,i=(0,c.default)(t),o=r.plugins.onCreateRule(e,i,n);return o||("@"===e[0]&&(0,a.default)(!1,"[JSS] Unknown at-rule %s",e),new l.default(e,i,n))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(26),a=r(o),s=n(33),l=r(s),u=n(236),c=r(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"isBrowser",function(){return i});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="object"===("undefined"===typeof window?"undefined":r(window))&&"object"===("undefined"===typeof document?"undefined":r(document))&&9===document.nodeType;t.default=i},function(e,t){function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"===typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},function(e,t){function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(84),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(e,t){return t+"("+(0,i.default)(e)+")"};t.default=o},function(e,t,n){"use strict";function r(){return o||(o=(0,p.default)())}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=i(n(4)),s=i(n(3)),l=i(n(9)),u=i(n(10)),c=i(n(11)),h=i(n(12)),d=i(n(1)),f=(i(n(2)),i(n(134))),p=(i(n(58)),i(n(78))),m=i(n(82)),v=function(){return function(e){var t=function(t){function n(e,t){var i;return(0,l.default)(this,n),i=(0,c.default)(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t)),i.unsubscribeId=null,i.state={},i.state={theme:m.default.initial(t)||r()},i}return(0,h.default)(n,t),(0,u.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribeId=m.default.subscribe(this.context,function(t){e.setState({theme:t})})}},{key:"componentWillUnmount",value:function(){null!==this.unsubscribeId&&m.default.unsubscribe(this.context,this.unsubscribeId)}},{key:"render",value:function(){var t=this.props,n=t.innerRef,r=(0,s.default)(t,["innerRef"]);return d.default.createElement(e,(0,a.default)({theme:this.state.theme,ref:n},r))}}]),n}(d.default.Component);return t.propTypes={},t.contextTypes=m.default.contextTypes,(0,f.default)(t,e),t}},g=v;t.default=g},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=(0,o.default)(e);return n.defaultView||n.parentView||t}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(21)),a=r;t.default=a},function(e,t,n){"use strict";function r(e,t){var n=e.timeout,r=e.style,i=void 0===r?{}:r;return{duration:i.transitionDuration||"number"===typeof n?n:n[t.mode],delay:i.transitionDelay}}Object.defineProperty(t,"__esModule",{value:!0}),t.getTransitionProps=r,t.reflow=void 0;var i=function(e){return e.scrollTop};t.reflow=i},function(e,t){e.exports=!0},function(e,t,n){var r=n(22),i=n(35),o=n(147),a=n(36),s=n(27),l=function(e,t,n){var u,c,h,d=e&l.F,f=e&l.G,p=e&l.S,m=e&l.P,v=e&l.B,g=e&l.W,y=f?i:i[t]||(i[t]={}),_=y.prototype,b=f?r:p?r[t]:(r[t]||{}).prototype;f&&(n=t);for(u in n)(c=!d&&b&&void 0!==b[u])&&s(y,u)||(h=c?b[u]:n[u],y[u]=f&&"function"!=typeof b[u]?n[u]:v&&c?o(h,r):g&&b[u]==h?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(h):m&&"function"==typeof h?o(Function.call,h):h,m&&((y.virtual||(y.virtual={}))[u]=h,e&l.R&&_&&!_[u]&&a(_,u,h)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(361))},function(e,t,n){"use strict";function r(e,t){return l.default.cloneElement(e,{className:(0,u.default)(e.props.className,t)})}function i(e,t){return l.default.Children.map(e,function(e){return l.default.isValidElement(e)&&r(e,t)})}function o(e,t){return l.default.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}function a(e,t){return-1!==t.indexOf(e.muiName)}var s=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.cloneElementWithClassName=r,t.cloneChildrenWithClassName=i,t.isMuiElement=o,t.isMuiComponent=a;var l=s(n(1)),u=s(n(6))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this._name="shadersBase",this._base={_functions:{},_uniforms:{}},this._definition=""}return i(e,[{key:"name",get:function(){return this._name},set:function(e){this._name=e}}]),e}();t.a=o},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"===typeof e}function i(e){return"number"===typeof e}function o(e){return"object"===typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),u=n.slice(),i=u.length,l=0;l<i;l++)u[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"===typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this._rightHanded=!0}return i(e,[{key:"pixelRepresentation",value:function(){return 0}},{key:"pixelPaddingValue",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null}},{key:"modality",value:function(){return"unknown"}},{key:"segmentationType",value:function(){return"unknown"}},{key:"segmentationSegments",value:function(){return[]}},{key:"referencedSegmentNumber",value:function(e){return-1}},{key:"rightHanded",value:function(){return this._rightHanded}},{key:"spacingBetweenSlices",value:function(){return null}},{key:"numberOfChannels",value:function(){return 1}},{key:"sliceThickness",value:function(){return null}},{key:"dimensionIndexValues",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null}},{key:"instanceNumber",value:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0}},{key:"windowCenter",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null}},{key:"windowWidth",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null}},{key:"rescaleSlope",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return 1}},{key:"rescaleIntercept",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return 0}},{key:"frameTime",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null}},{key:"_decompressUncompressed",value:function(){}},{key:"_swap16",value:function(e){return(255&e)<<8|e>>8&255}},{key:"_swap32",value:function(e){return(255&e)<<24|(65280&e)<<8|e>>8&65280|e>>24&255}},{key:"invert",value:function(){return!1}},{key:"transferSyntaxUID",value:function(){return"no value provided"}},{key:"studyDate",value:function(){return"no value provided"}},{key:"studyDescription",value:function(){return"no value provided"}},{key:"seriesDate",value:function(){return"no value provided"}},{key:"seriesDescription",value:function(){return"no value provided"}},{key:"patientID",value:function(){return"no value provided"}},{key:"patientName",value:function(){return"no value provided"}},{key:"patientAge",value:function(){return"no value provided"}},{key:"patientBirthdate",value:function(){return"no value provided"}},{key:"patientSex",value:function(){return"no value provided"}},{key:"minMaxPixelData",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],n=e.length,r=0;r<n;r++){var i=e[r];t[0]=Math.min(t[0],i),t[1]=Math.max(t[1],i)}return t}}]),e}();t.a=o},function(e,t,n){"use strict";(function(t){function n(e,n,r,i){if("function"!==typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:n}:e.exports=t}).call(t,n(23))},function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return a(e,t,n)}var o=n(43),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=o:(r(o,t),t.Buffer=i),r(a,i),i.from=function(e,t,n){if("number"===typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},i.alloc=function(e,t,n){if("number"!==typeof e)throw new TypeError("Argument must be a number");var r=a(e);return void 0!==t?"string"===typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return a(e)},i.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var i="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==typeof n)throw new TypeError(n+"must be non-object");for(var i in n)r(n,i)&&(e[i]=n[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),i);for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},a={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(i)},function(e,t,n){"use strict";var r=r||{};r.lossless=r.lossless||{},r.lossless.Utils=r.lossless.Utils||{},r.lossless.Utils.createArray=function(e){var t=new Array(e||0),n=e;if(arguments.length>1)for(var i=Array.prototype.slice.call(arguments,1);n--;)t[e-1-n]=r.lossless.Utils.createArray.apply(this,i);return t},r.lossless.Utils.makeCRCTable=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t},r.lossless.Utils.crc32=function(e){for(var t=r.lossless.Utils.crcTable||(r.lossless.Utils.crcTable=r.lossless.Utils.makeCRCTable()),n=-1,i=0;i<e.byteLength;i++)n=n>>>8^t[255&(n^e.getUint8(i))];return(-1^n)>>>0},"undefined"!==typeof e&&e.exports&&(e.exports=r.lossless.Utils)},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,l=r(e),u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var c in n)o.call(n,c)&&(l[c]=n[c]);if(i){s=i(n);for(var h=0;h<s.length;h++)a.call(n,s[h])&&(l[s[h]]=n[s[h]])}}return l}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,i=void 0===r?{}:r,y=e.palette,_=void 0===y?{}:y,b=e.shadows,w=e.typography,x=void 0===w?{}:w,E=(0,a.default)(e,["breakpoints","mixins","palette","shadows","typography"]),S=(0,h.default)(_),T=(0,u.default)(n),M=(0,o.default)({breakpoints:T,direction:"ltr",mixins:(0,c.default)(T,m.default,i),overrides:{},palette:S,props:{},shadows:b||f.default,typography:(0,d.default)(S,x)},(0,s.default)({shape:p.default,spacing:m.default,transitions:v.default,zIndex:g.default},E,{isMergeableObject:l.default}));return M}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(8)),a=i(n(3)),s=i(n(52)),l=i(n(219)),u=(i(n(13)),i(n(125))),c=i(n(221)),h=i(n(222)),d=i(n(228)),f=i(n(229)),p=i(n(230)),m=i(n(231)),v=i(n(32)),g=i(n(232)),y=r;t.default=y},function(e,t,n){"use strict";function r(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="";if(!t)return i;var o=n.indent,s=void 0===o?0:o,l=t.fallbacks;if(s++,l)if(Array.isArray(l))for(var u=0;u<l.length;u++){var c=l[u];for(var h in c){var d=c[h];null!=d&&(i+="\n"+r(h+": "+(0,a.default)(d)+";",s))}}else for(var f in l){var p=l[f];null!=p&&(i+="\n"+r(f+": "+(0,a.default)(p)+";",s))}for(var m in t){var v=t[m];null!=v&&"fallbacks"!==m&&(i+="\n"+r(m+": "+(0,a.default)(v)+";",s))}return i||n.allowEmpty?(s--,i=r(e+" {"+i+"\n",s)+r("}",s)):i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(53),a=function(e){return e&&e.__esModule?e:{default:e}}(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(128),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=new i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(55),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o="",a="";if(i.default){var s={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},l=document.createElement("p").style;for(var u in s)if(u+"Transform"in l){o=u,a=s[u];break}}t.default={js:o,css:a}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CHANNEL=void 0;var i=r(n(7)),o=r(n(2)),a="__THEMING__";t.CHANNEL=a;var s={contextTypes:(0,i.default)({},a,o.default.object),initial:function(e){return e[a]?e[a].getState():null},subscribe:function(e,t){return e[a]?e[a].subscribe(t):null},unsubscribe:function(e,t){e[a]&&e[a].unsubscribe(t)}},l=s;t.default=l},function(e,t,n){"use strict";function r(e){return e}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.specialProperty=void 0;var o=(i(n(7)),i(n(8)),"exact-prop: \u200b");t.specialProperty=o;var a=r;t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if("string"===typeof e)return e;if(e)return e.displayName||e.name||"Component"};t.default=r},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"ModalManager",{enumerable:!0,get:function(){return o.default}});var i=r(n(277)),o=r(n(137))},function(e,t,n){"use strict";function r(e){return e&&"object"===typeof e&&"default"in e?e.default:e}function i(e,t,n){return Object.defineProperty(e,t,n)}function o(e){return g({},b,e)}function a(e,t,n){var r=[e,t];return r.push(_?n:n.capture),r}function s(e,t,n,r){e.addEventListener.apply(e,a(t,n,r))}function l(e,t,n,r){e.removeEventListener.apply(e,a(t,n,r))}function u(e,t){var n=(e.children,e.target,v(e,["children","target"]));Object.keys(n).forEach(function(e){if("on"===e.substring(0,2)){var r=n[e],i=m(r),a="object"===i,s="function"===i;if(a||s){var l="capture"===e.substr(-7).toLowerCase(),u=e.substring(2).toLowerCase();u=l?u.substring(0,u.length-7):u,a?t(u,r.handler,r.options):t(u,r,o({capture:l}))}}})}function c(e,t){return{handler:e,options:o(t)}}Object.defineProperty(t,"__esModule",{value:!0});var h=r(n(9)),d=r(n(10)),f=r(n(11)),p=r(n(12)),m=r(n(56)),v=r(n(3)),g=r(n(8)),y=r(n(1)),_=(r(n(2)),r(n(299)),function(){var e=null;return function(){if(null!==e)return e;var t=!1;try{window.addEventListener("test",null,i({},"passive",{get:function(){t=!0}}))}catch(e){}return e=t,t}()}()),b={capture:!1,passive:!1},w=function(e){function t(){return h(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),d(t,[{key:"componentDidMount",value:function(){this.applyListeners(s)}},{key:"componentDidUpdate",value:function(e){this.applyListeners(l,e),this.applyListeners(s)}},{key:"componentWillUnmount",value:function(){this.applyListeners(l)}},{key:"applyListeners",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props,n=t.target;if(n){var r=n;"string"===typeof n&&(r=window[n]),u(t,e.bind(null,r))}}},{key:"render",value:function(){return this.props.children||null}}]),t}(y.PureComponent);w.propTypes={},t.withOptions=c,t.default=w},function(e,t){e.exports=function(e,t,n){function r(){var u=Date.now()-s;u<t&&u>=0?i=setTimeout(r,t-u):(i=null,n||(l=e.apply(a,o),a=o=null))}var i,o,a,s,l;null==t&&(t=100);var u=function(){a=this,o=arguments,s=Date.now();var u=n&&!i;return i||(i=setTimeout(r,t)),u&&(l=e.apply(a,o),a=o=null),l};return u.clear=function(){i&&(clearTimeout(i),i=null)},u.flush=function(){i&&(l=e.apply(a,o),a=o=null,clearTimeout(i),i=null)},u}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(38);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports={}},function(e,t,n){var r=n(50),i=n(318),o=n(96),a=n(94)("IE_PROTO"),s=function(){},l=function(){var e,t=n(149)("iframe"),r=o.length;for(t.style.display="none",n(323).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l.prototype[o[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=l(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(151),i=n(96);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(95)("keys"),i=n(66);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(35),i=n(22),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(62)?"pure":"global",copyright:"\xa9 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(37).f,i=n(27),o=n(41)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){t.f=n(41)},function(e,t,n){var r=n(22),i=n(35),o=n(62),a=n(98),s=n(37).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(375))},function(e,t,n){"use strict";(function(t){function r(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i=n(17),o=n(396),a={"Content-Type":"application/x-www-form-urlencoded"},s={adapter:function(){var e;return"undefined"!==typeof XMLHttpRequest?e=n(161):"undefined"!==typeof t&&(e=n(161)),e}(),transformRequest:[function(e,t){return o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};s.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){s.headers[e]={}}),i.forEach(["post","put","patch"],function(e){s.headers[e]=i.merge(a)}),e.exports=s}).call(t,n(23))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(421))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(105))},function(e,t,n){"use strict";function r(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(r(e.value)&&""!==e.value||t&&r(e.defaultValue)&&""!==e.defaultValue)}function o(e){return e.startAdornment}function a(e,t){var n=e.disabled,r=e.error,i=e.margin,o=e.required;return t&&t.muiFormControl&&("undefined"===typeof n&&(n=t.muiFormControl.disabled),"undefined"===typeof r&&(r=t.muiFormControl.error),"undefined"===typeof i&&(i=t.muiFormControl.margin),"undefined"===typeof o&&(o=t.muiFormControl.required)),{disabled:n,error:r,margin:i,required:o}}var s=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.hasValue=r,t.isFilled=i,t.isAdornedStart=o,t.default=t.styles=void 0;var l=s(n(4)),u=s(n(8)),c=s(n(7)),h=s(n(3)),d=s(n(9)),f=s(n(10)),p=s(n(11)),m=s(n(12)),v=s(n(1)),g=s(n(2)),y=s(n(6)),_=s(n(5)),b=s(n(427)),w=function(e){var t="light"===e.palette.type,n={color:"currentColor",opacity:t?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},r={opacity:0},i={opacity:t?.42:.5},o=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{display:"inline-flex",position:"relative",fontFamily:e.typography.fontFamily,color:t?"rgba(0, 0, 0, 0.87)":e.palette.common.white,fontSize:e.typography.pxToRem(16),lineHeight:"1.1875em","&$disabled":{color:e.palette.text.disabled}},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary[t?"dark":"light"]),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(o),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):not($focused):not($error):before":{borderBottom:"2px solid ".concat(e.palette.text.primary)},"&$disabled:before":{borderBottom:"1px dotted ".concat(o)}},error:{},multiline:{padding:"".concat(6,"px 0 ").concat(7,"px")},fullWidth:{width:"100%"},input:{font:"inherit",color:"currentColor",padding:"".concat(6,"px 0 ").concat(7,"px"),border:0,boxSizing:"content-box",verticalAlign:"middle",background:"none",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,flexGrow:1,"&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus:-ms-input-placeholder":i,"&:focus::-ms-input-placeholder":i},"&$disabled":{opacity:1}},inputMarginDense:{paddingTop:3},inputMultiline:{resize:"none",padding:0},inputType:{height:"1.1875em"},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"}}};t.styles=w;var x=function(e){function t(e,n){var r;(0,d.default)(this,t),r=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r.isControlled=null!=r.props.value,r.input=null,r.state={focused:!1},r.handleFocus=function(e){if(a(r.props,r.context).disabled)return void e.stopPropagation();r.setState({focused:!0}),r.props.onFocus&&r.props.onFocus(e);var t=r.context.muiFormControl;t&&t.onFocus&&t.onFocus(e)},r.handleBlur=function(e){r.setState({focused:!1}),r.props.onBlur&&r.props.onBlur(e);var t=r.context.muiFormControl;t&&t.onBlur&&t.onBlur(e)},r.handleChange=function(e){r.isControlled||r.checkDirty(r.inputRef),r.props.onChange&&r.props.onChange(e)},r.handleRefInput=function(e){r.inputRef=e;var t;r.props.inputRef?t=r.props.inputRef:r.props.inputProps&&r.props.inputProps.ref&&(t=r.props.inputProps.ref),t&&("function"===typeof t?t(e):t.current=e)},r.isControlled&&r.checkDirty(e);var i=function(e,t){!a(r.props,r.context).disabled&&a(e,t).disabled&&r.setState({focused:!1})},o=function(e,t,n){if(!a(r.props,r.context).disabled&&a(e,n).disabled){var i=r.context.muiFormControl;i&&i.onBlur&&i.onBlur()}};return v.default.createContext?(r.UNSAFE_componentWillReceiveProps=i,r.UNSAFE_componentWillUpdate=o):(r.componentWillReceiveProps=i,r.componentWillUpdate=o),r}return(0,m.default)(t,e),(0,f.default)(t,[{key:"getChildContext",value:function(){return{muiFormControl:null}}},{key:"componentDidMount",value:function(){this.isControlled||this.checkDirty(this.inputRef)}},{key:"componentDidUpdate",value:function(){this.isControlled&&this.checkDirty(this.props)}},{key:"checkDirty",value:function(e){var t=this.context.muiFormControl;if(i(e))return t&&t.onFilled&&t.onFilled(),void(this.props.onFilled&&this.props.onFilled());t&&t.onEmpty&&t.onEmpty(),this.props.onEmpty&&this.props.onEmpty()}},{key:"render",value:function(){var e,t,n=this.props,r=n.autoComplete,i=n.autoFocus,o=n.classes,s=n.className,d=n.defaultValue,f=(n.disabled,n.disableUnderline),p=n.endAdornment,m=(n.error,n.fullWidth),g=n.id,_=n.inputComponent,w=n.inputProps;w=void 0===w?{}:w;var x=w.className,E=(0,h.default)(w,["className"]),S=(n.inputRef,n.margin,n.multiline),T=n.name,M=(n.onBlur,n.onChange,n.onEmpty,n.onFilled,n.onFocus,n.onKeyDown),k=n.onKeyUp,P=n.placeholder,C=n.readOnly,A=n.rows,O=n.rowsMax,I=n.startAdornment,R=n.type,L=n.value,D=(0,h.default)(n,["autoComplete","autoFocus","classes","className","defaultValue","disabled","disableUnderline","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onEmpty","onFilled","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","rows","rowsMax","startAdornment","type","value"]),N=this.context.muiFormControl,F=a(this.props,this.context),U=F.disabled,z=F.error,B=F.margin,j=F.required,H=(0,y.default)(o.root,(e={},(0,c.default)(e,o.disabled,U),(0,c.default)(e,o.error,z),(0,c.default)(e,o.fullWidth,m),(0,c.default)(e,o.focused,this.state.focused),(0,c.default)(e,o.formControl,N),(0,c.default)(e,o.multiline,S),(0,c.default)(e,o.underline,!f),e),s),V=(0,y.default)(o.input,(t={},(0,c.default)(t,o.disabled,U),(0,c.default)(t,o.inputType,"text"!==R),(0,c.default)(t,o.inputTypeSearch,"search"===R),(0,c.default)(t,o.inputMultiline,S),(0,c.default)(t,o.inputMarginDense,"dense"===B),t),x),G="input",W=(0,u.default)({},E,{ref:this.handleRefInput});return _?(G=_,W=(0,u.default)({inputRef:this.handleRefInput},W,{ref:null})):S&&(A&&!O?G="textarea":(W=(0,u.default)({rowsMax:O,textareaRef:this.handleRefInput},W,{ref:null}),G=b.default)),v.default.createElement("div",(0,l.default)({className:H},D),I,v.default.createElement(G,(0,l.default)({"aria-invalid":z,autoComplete:r,autoFocus:i,className:V,defaultValue:d,disabled:U,id:g,name:T,onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onKeyDown:M,onKeyUp:k,placeholder:P,readOnly:C,required:j,rows:A,type:R,value:L},W)),p)}}]),t}(v.default.Component);x.propTypes={},x.muiName="Input",x.defaultProps={disableUnderline:!1,fullWidth:!1,multiline:!1,type:"text"},x.contextTypes={muiFormControl:g.default.object},x.childContextTypes={muiFormControl:g.default.object};var E=(0,_.default)(w,{name:"MuiInput"})(x);t.default=E},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return l});var a=n(107),s=n(28),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.THREE;if(void 0===e||void 0===e.ShapeGeometry)return null;var t=e.ShapeGeometry;return function(t){function n(t,o,l,u){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new e.Matrix4;r(this,n);var h={halfDimensions:t,center:o,toAABB:c},d={position:l,direction:u},f=a.a.aabbPlane(h,d);if(f.length<3){window.console.log("WARNING: Less than 3 intersections between AABB and Plane."),window.console.log("AABB"),window.console.log(h),window.console.log("Plane"),window.console.log(d),window.console.log("exiting...");throw new Error("geometries.slice has less than 3 intersections, can not create a valid geometry.")}var p=s.a.orderIntersections(f,u),m=new e.Shape;m.moveTo(p[0].xy.x,p[0].xy.y);for(var v=1;v<p.length;v++)m.lineTo(p[v].xy.x,p[v].xy.y);m.lineTo(p[0].xy.x,p[0].xy.y);var g=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,m));return g.type="SliceGeometry",g.vertices=p,g.verticesNeedUpdate=!0,g}return o(n,t),n}(t)};l()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(28),o=n(108),a=n(19),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(){function e(){r(this,e)}return s(e,null,[{key:"aabbPlane",value:function(e,t){var n=[];if(!this.validateAabb(e)||!this.validatePlane(t))return window.console.log("Invalid aabb or plane provided."),!1;var r=new a.h;r.getInverse(e.toAABB);var o=t.direction.clone().applyMatrix4(e.toAABB),s=new a.q(0,0,0).applyMatrix4(e.toAABB),l=this.posdir(t.position.clone().applyMatrix4(e.toAABB),new a.q(o.x-s.x,o.y-s.y,o.z-s.z).normalize()),u=i.a.bbox(e.center,e.halfDimensions),c=new a.q(new a.q(1,0,0),new a.q(0,1,0),new a.q(0,0,1)),h=this.posdir(new a.q(e.center.x-e.halfDimensions.x,e.center.y-e.halfDimensions.y,e.center.z-e.halfDimensions.z),c.x);this.rayPlaneInBBox(h,l,u,n),h.direction=c.y,this.rayPlaneInBBox(h,l,u,n),h.direction=c.z,this.rayPlaneInBBox(h,l,u,n);var d=this.posdir(new a.q(e.center.x+e.halfDimensions.x,e.center.y+e.halfDimensions.y,e.center.z+e.halfDimensions.z),c.x);this.rayPlaneInBBox(d,l,u,n),d.direction=c.y,this.rayPlaneInBBox(d,l,u,n),d.direction=c.z,this.rayPlaneInBBox(d,l,u,n);var f=this.posdir(new a.q(e.center.x+e.halfDimensions.x,e.center.y-e.halfDimensions.y,e.center.z-e.halfDimensions.z),c.y);this.rayPlaneInBBox(f,l,u,n),f.direction=c.z,this.rayPlaneInBBox(f,l,u,n);var p=this.posdir(new a.q(e.center.x-e.halfDimensions.x,e.center.y+e.halfDimensions.y,e.center.z-e.halfDimensions.z),c.x);this.rayPlaneInBBox(p,l,u,n),p.direction=c.z,this.rayPlaneInBBox(p,l,u,n);var m=this.posdir(new a.q(e.center.x-e.halfDimensions.x,e.center.y-e.halfDimensions.y,e.center.z+e.halfDimensions.z),c.x);return this.rayPlaneInBBox(m,l,u,n),m.direction=c.y,this.rayPlaneInBBox(m,l,u,n),n.map(function(e){return e.applyMatrix4(r)}),n}},{key:"rayPlane",value:function(e,t){if(0!==e.direction.dot(t.direction)){var n=(t.direction.x*(t.position.x-e.position.x)+t.direction.y*(t.position.y-e.position.y)+t.direction.z*(t.position.z-e.position.z))/(t.direction.x*e.direction.x+t.direction.y*e.direction.y+t.direction.z*e.direction.z);return new a.q(e.position.x+n*e.direction.x,e.position.y+n*e.direction.y,e.position.z+n*e.direction.z)}return null}},{key:"rayBox",value:function(e,t){var n=[],r=i.a.bbox(t.center,t.halfDimensions),o=this.posdir(new a.q(r.min.x,t.center.y,t.center.z),new a.q(-1,0,0));return this.rayPlaneInBBox(e,o,r,n),o=this.posdir(new a.q(r.max.x,t.center.y,t.center.z),new a.q(1,0,0)),this.rayPlaneInBBox(e,o,r,n),o=this.posdir(new a.q(t.center.x,r.min.y,t.center.z),new a.q(0,-1,0)),this.rayPlaneInBBox(e,o,r,n),o=this.posdir(new a.q(t.center.x,r.max.y,t.center.z),new a.q(0,1,0)),this.rayPlaneInBBox(e,o,r,n),o=this.posdir(new a.q(t.center.x,t.center.y,r.min.z),new a.q(0,0,-1)),this.rayPlaneInBBox(e,o,r,n),o=this.posdir(new a.q(t.center.x,t.center.y,r.max.z),new a.q(0,0,1)),this.rayPlaneInBBox(e,o,r,n),n}},{key:"rayPlaneInBBox",value:function(e,t,n,r){var i=this.rayPlane(e,t);i&&this.inBBox(i,n)&&(r.find(this.findIntersection(i))||r.push(i))}},{key:"findIntersection",value:function(e){return function(t,n,r){return e.x===t.x&&e.y===t.y&&e.z===t.z}}},{key:"inBBox",value:function(e,t){return!!(e&&e.x>=t.min.x-1e-4&&e.y>=t.min.y-1e-4&&e.z>=t.min.z-1e-4&&e.x<=t.max.x+1e-4&&e.y<=t.max.y+1e-4&&e.z<=t.max.z+1e-4)}},{key:"posdir",value:function(e,t){return{position:e,direction:t}}},{key:"validatePlane",value:function(e){return null===e?(window.console.log("Invalid plane."),window.console.log(e),!1):o.a.vector3(e.position)?!!o.a.vector3(e.direction)||(window.console.log("Invalid plane.direction."),window.console.log(e.direction),!1):(window.console.log("Invalid plane.position."),window.console.log(e.position),!1)}},{key:"validateAabb",value:function(e){return null===e?(window.console.log("Invalid aabb."),window.console.log(e),!1):o.a.matrix4(e.toAABB)?o.a.vector3(e.center)?!!(o.a.vector3(e.halfDimensions)&&e.halfDimensions.x>=0&&e.halfDimensions.y>=0&&e.halfDimensions.z>=0)||(window.console.log("Invalid aabb.halfDimensions."),window.console.log(e.halfDimensions),!1):(window.console.log("Invalid aabb.center."),window.console.log(e.center),!1):(window.console.log("Invalid aabb.toAABB: "),window.console.log(e.toAABB),!1)}}]),e}();t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"matrix4",value:function(e){return!(null===e||"undefined"===typeof e||!e.hasOwnProperty("elements")||16!==e.elements.length||"function"!==typeof e.identity||"function"!==typeof e.copy||"function"!==typeof e.determinant)}},{key:"vector3",value:function(e){return!(!(null!==e&&"undefined"!==typeof e&&e.hasOwnProperty("x")&&e.hasOwnProperty("y")&&e.hasOwnProperty("z"))||e.hasOwnProperty("w"))}},{key:"box",value:function(e){return!!(null!==e&&"undefined"!==typeof e&&e.hasOwnProperty("center")&&this.vector3(e.center)&&e.hasOwnProperty("halfDimensions")&&this.vector3(e.halfDimensions)&&e.halfDimensions.x>=0&&e.halfDimensions.y>=0&&e.halfDimensions.z>=0)}},{key:"ray",value:function(e){return!!(null!==e&&"undefined"!==typeof e&&e.hasOwnProperty("position")&&this.vector3(e.position)&&e.hasOwnProperty("direction")&&this.vector3(e.direction))}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this._id=-1}return i(e,[{key:"mergeModels",value:function(e,t){if(!this._validateModelArray(e)||!this._validateModelArray(t))return window.console.log("invalid inputs provided."),!1;for(var n=0,r=t.length;n<r;n++)for(var i=0,o=e.length;i<o&&!e[i].merge(t[n]);i++)i===e.length-1&&e.push(t[n]);return!0}},{key:"merge",value:function(e){return!!this.validate(e)&&this._id===e._id}},{key:"validate",value:function(e){return!(!e||null===e||"function"!==typeof e.merge)}},{key:"_validateModelArray",value:function(e){if(null===e||Array!==e.constructor)return window.console.log("invalid model array provided."),!1;for(var t=0;t<e.length;t++)if(!e[t]||null===e[t]||"function"!==typeof e[t].validate||!e[t].validate(e[t]))return!1;return!0}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e){return"string"===typeof e}e.exports=r},function(e,t,n){"use strict";function r(e){return i(e)&&e>=0}var i=n(495);e.exports=r},function(e,t,n){"use strict";function r(e,t){var n,r;if(!i(e))throw new TypeError("invalid input argument. First argument must be a string. Value: `"+e+"`.");if(!o(t))throw new TypeError("invalid input argument. Second argument must be a nonnegative integer. Value: `"+t+"`.");if(0===e.length||0===t)return"";if(e.length*t>a)throw new RangeError("invalid input argument. Output string length exceeds maximum allowed string length.");for(n="",r=t;1===(1&r)&&(n+=e),0!==(r>>>=1);)e+=e;return n}var i=n(110),o=n(111),a=9007199254740991;e.exports=r},function(e,t,n){t=e.exports=n(175),t.Stream=t,t.Readable=t,t.Writable=n(114),t.Duplex=n(30),t.Transform=n(179),t.PassThrough=n(513)},function(e,t,n){"use strict";(function(t,r,i){function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){k(t,e)}}function a(e){return L.from(e)}function s(e){return L.isBuffer(e)||e instanceof D}function l(){}function u(e,t){C=C||n(30),e=e||{};var r=t instanceof C;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,a=e.writableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===e.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){y(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function c(e){if(C=C||n(30),!F.call(c,this)&&!(this instanceof C))return new c(e);this._writableState=new u(e,this),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),R.call(this)}function h(e,t){var n=new Error("write after end");e.emit("error",n),P.nextTick(t,n)}function d(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"===typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),P.nextTick(r,o),i=!1),i}function f(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=L.from(t,n)),t}function p(e,t,n,r,i,o){if(!n){var a=f(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else m(e,t,!1,s,r,i,o);return l}function m(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function v(e,t,n,r,i){--t.pendingcb,n?(P.nextTick(i,r),P.nextTick(T,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),T(e,t))}function g(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function y(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(g(n),t)v(e,n,r,t,i);else{var o=x(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),r?A(_,e,n,o,i):_(e,n,o,i)}}function _(e,t,n,r){n||b(e,t),t.pendingcb--,r(),T(e,t)}function b(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,l=!0;n;)i[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;i.allBuffers=l,m(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,c=n.encoding,h=n.callback;if(m(e,t,!1,t.objectMode?1:u.length,u,c,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function x(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),T(e,t)})}function S(e,t){t.prefinished||t.finalCalled||("function"===typeof e._final?(t.pendingcb++,t.finalCalled=!0,P.nextTick(E,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function T(e,t){var n=x(t);return n&&(S(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function M(e,t,n){t.ending=!0,T(e,t),n&&(t.finished?P.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function k(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var P=n(73);e.exports=c;var C,A=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:P.nextTick;c.WritableState=u;var O=n(51);O.inherits=n(29);var I={deprecate:n(512)},R=n(176),L=n(74).Buffer,D=i.Uint8Array||function(){},N=n(177);O.inherits(c,R),u.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(u.prototype,"buffer",{get:I.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var F;"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(F=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(e){return!!F.call(this,e)||this===c&&(e&&e._writableState instanceof u)}})):F=function(e){return e instanceof this},c.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},c.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=!r.objectMode&&s(e);return o&&!L.isBuffer(e)&&(e=a(e)),"function"===typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!==typeof n&&(n=l),r.ended?h(this,n):(o||d(this,r,e,n))&&(r.pendingcb++,i=p(this,r,o,e,t,n)),i},c.prototype.cork=function(){this._writableState.corked++},c.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},c.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),c.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},c.prototype._writev=null,c.prototype.end=function(e,t,n){var r=this._writableState;"function"===typeof e?(n=e,e=null,t=null):"function"===typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||M(this,r,n)},Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),c.prototype.destroy=N.destroy,c.prototype._undestroy=N.undestroy,c.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,n(23),n(510).setImmediate,n(14))},function(e,t,n){"use strict";var r=r||{};r.Utils=r.Utils||{},r.Utils.crcTable=null,r.Utils.GUNZIP_MAGIC_COOKIE1=31,r.Utils.GUNZIP_MAGIC_COOKIE2=139,r.Utils.getStringAt=function(e,t,n){var r,i,o="";for(r=t;r<n;r+=1)0!==(i=e.getUint8(r))&&(o+=String.fromCharCode(i));return o},r.Utils.getByteAt=function(e,t){return e.getInt8(t)},r.Utils.getShortAt=function(e,t,n){return e.getInt16(t,n)},r.Utils.getIntAt=function(e,t,n){return e.getInt32(t,n)},r.Utils.getFloatAt=function(e,t,n){return e.getFloat32(t,n)},r.Utils.getDoubleAt=function(e,t,n){return e.getFloat64(t,n)},r.Utils.getLongAt=function(e,t,n){var i,o=[],a=0;for(i=0;i<8;i+=1)o[i]=r.Utils.getByteAt(e,t+i,n);for(i=o.length-1;i>=0;i--)a=256*a+o[i];return a},r.Utils.toArrayBuffer=function(e){var t,n,r;for(t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r+=1)n[r]=e[r];return t},r.Utils.isString=function(e){return"string"===typeof e||e instanceof String},r.Utils.formatNumber=function(e,t){var n=0;return n=r.Utils.isString(e)?Number(e):e,n=t?n.toPrecision(5):n.toPrecision(7),parseFloat(n)},r.Utils.makeCRCTable=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t},r.Utils.crc32=function(e){for(var t=r.Utils.crcTable||(r.Utils.crcTable=r.Utils.makeCRCTable()),n=-1,i=0;i<e.byteLength;i++)n=n>>>8^t[255&(n^e.getUint8(i))];return(-1^n)>>>0},"undefined"!==typeof e&&e.exports&&(e.exports=r.Utils)},function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return l});var a=n(556),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.THREE;if(void 0===e||void 0===e.Object3D)return null;var t=e.Object3D;return function(t){function n(t,o){r(this,n);var s=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));if(s._widgetType="Base",null===document.getElementById("ami-widgets")){var l=document.createElement("style");l.setAttribute("id","ami-widgets"),l.innerHTML=a.a.code,document.head.appendChild(l)}return s._enabled=!0,s._selected=!1,s._hovered=!0,s._active=!0,s._colors={default:"#00B0FF",active:"#FFEB3B",hover:"#F50057",select:"#76FF03",text:"#FFF",error:"#F77"},s._color=s._colors.default,s._dragged=!1,s._displayed=!0,s._targetMesh=t,s._controls=o,s._camera=o.object,s._container=o.domElement,s._worldPosition=new e.Vector3,null!==s._targetMesh&&s._worldPosition.copy(s._targetMesh.position),s}return o(n,t),s(n,[{key:"initOffsets",value:function(){var e=this._container.getBoundingClientRect(),t=document.body,n=document.documentElement,r=window.pageYOffset||n.scrollTop||t.scrollTop,i=window.pageXOffset||n.scrollLeft||t.scrollLeft,o=n.clientTop||t.clientTop||0,a=n.clientLeft||t.clientLeft||0;this._offsets={top:Math.round(e.top+r-o),left:Math.round(e.left+i-a)}}},{key:"getMouseOffsets",value:function(e,t){return{x:(e.clientX-this._offsets.left)/t.offsetWidth*2-1,y:-(e.clientY-this._offsets.top)/t.offsetHeight*2+1,screenX:e.clientX-this._offsets.left,screenY:e.clientY-this._offsets.top}}},{key:"getLineData",value:function(t,n){var r=n.clone().sub(t),i=n.clone().add(t).multiplyScalar(.5),o=r.length(),a=r.angleTo(new e.Vector3(1,0,0));return{line:r,length:o,transformX:i.x-o/2,transformY:i.y-this._container.offsetHeight,transformAngle:t.y<n.y?a:-a,center:i}}},{key:"getRectData",value:function(t,n){var r=n.clone().sub(t),i=r.clone().projectOnVector(new e.Vector3(0,1,0)),o=t.clone().min(n);return{width:r.clone().projectOnVector(new e.Vector3(1,0,0)).length(),height:i.length(),transformX:o.x,transformY:o.y-this._container.offsetHeight,paddingVector:i.clone().normalize()}}},{key:"adjustLabelTransform",value:function(t,n,r){var i=Math.round(n.x-(r?0:t.offsetWidth/2)),o=Math.round(n.y-(r?0:t.offsetHeight/2))-this._container.offsetHeight;return i<0?i=i>-t.offsetWidth?0:i+t.offsetWidth:i>this._container.offsetWidth-t.offsetWidth&&(i=i<this._container.offsetWidth?this._container.offsetWidth-t.offsetWidth:i-t.offsetWidth),o<-this._container.offsetHeight?o=o>-this._container.offsetHeight-t.offsetHeight?-this._container.offsetHeight:o+t.offsetHeight:o>-t.offsetHeight&&(o=o<0?-t.offsetHeight:o-t.offsetHeight),new e.Vector2(i,o)}},{key:"worldToScreen",value:function(e){var t=e.clone();return t.project(this._camera),t.x=Math.round((t.x+1)*this._container.offsetWidth/2),t.y=Math.round((1-t.y)*this._container.offsetHeight/2),t.z=0,t}},{key:"update",value:function(){window.console.log("update() should be overloaded!")}},{key:"updateColor",value:function(){this._active?this._color=this._colors.active:this._hovered?this._color=this._colors.hover:this._selected?this._color=this._colors.select:this._color=this._colors.default}},{key:"show",value:function(){this.showDOM(),this.showMesh(),this.update()}},{key:"hide",value:function(){this.hideDOM(),this.hideMesh()}},{key:"hideDOM",value:function(){window.console.log("hideDOM() should be overloaded!")}},{key:"showDOM",value:function(){window.console.log("showDOM() should be overloaded!")}},{key:"hideMesh",value:function(){this.visible=!1}},{key:"showMesh",value:function(){this.visible=!0}},{key:"free",value:function(){this._container=null}},{key:"widgetType",get:function(){return this._widgetType}},{key:"targetMesh",get:function(){return this._targetMesh},set:function(e){this._targetMesh=e,this.update()}},{key:"worldPosition",get:function(){return this._worldPosition},set:function(e){this._worldPosition.copy(e),this.update()}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e,this.update()}},{key:"selected",get:function(){return this._selected},set:function(e){this._selected=e,this.update()}},{key:"hovered",get:function(){return this._hovered},set:function(e){this._hovered=e,this.update()}},{key:"dragged",get:function(){return this._dragged},set:function(e){this._dragged=e,this.update()}},{key:"displayed",get:function(){return this._displayed},set:function(e){this._displayed=e,this.update()}},{key:"active",get:function(){return this._active},set:function(e){this._active=e,this.update()}},{key:"color",get:function(){return this._color},set:function(e){this._color=e,this.update()}}]),n}(t)};l()},function(e,t,n){"use strict";function r(){}function i(e){try{return e.then}catch(e){return g=e,y}}function o(e,t){try{return e(t)}catch(e){return g=e,y}}function a(e,t,n){try{e(t,n)}catch(e){return g=e,y}}function s(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,e!==r&&m(e,this)}function l(e,t,n){return new e.constructor(function(i,o){var a=new s(r);a.then(i,o),u(e,new p(t,n,a))})}function u(e,t){for(;3===e._83;)e=e._18;if(s._47&&s._47(e),0===e._83)return 0===e._75?(e._75=1,void(e._38=t)):1===e._75?(e._75=2,void(e._38=[e._38,t])):void e._38.push(t);c(e,t)}function c(e,t){v(function(){var n=1===e._83?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._83?h(t.promise,e._18):d(t.promise,e._18));var r=o(n,e._18);r===y?d(t.promise,g):h(t.promise,r)})}function h(e,t){if(t===e)return d(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===typeof t||"function"===typeof t)){var n=i(t);if(n===y)return d(e,g);if(n===e.then&&t instanceof s)return e._83=3,e._18=t,void f(e);if("function"===typeof n)return void m(n.bind(t),e)}e._83=1,e._18=t,f(e)}function d(e,t){e._83=2,e._18=t,s._71&&s._71(e,t),f(e)}function f(e){if(1===e._75&&(u(e,e._38),e._38=null),2===e._75){for(var t=0;t<e._38.length;t++)u(e,e._38[t]);e._38=null}}function p(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function m(e,t){var n=!1,r=a(e,function(e){n||(n=!0,h(t,e))},function(e){n||(n=!0,d(t,e))});n||r!==y||(n=!0,d(t,g))}var v=n(205),g=null,y={};e.exports=s,s._47=null,s._71=null,s._44=r,s.prototype.then=function(e,t){if(this.constructor!==s)return l(this,e,t);var n=new s(r);return u(this,new p(e,t,n)),n}},function(e,t,n){"use strict";function r(e,t,n,r,o,a,s,l){if(i(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,a,s,l],h=0;u=new Error(t.replace(/%s/g,function(){return c[h++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}var i=function(e){};e.exports=r},function(e,t,n){"use strict";var r={};e.exports=r},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function i(e,t){if(r(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(!o.call(t,n[a])||!r(e[n[a]],t[n[a]]))return!1;return!0}var o=Object.prototype.hasOwnProperty;e.exports=i},function(e,t,n){"use strict";(function(e){function r(e){var t=String(e);return t.replace(a,"-")}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.dangerouslyUseGlobalCSS,i=void 0!==n&&n,o=t.productionPrefix,a=void 0===o?"jss":o,s=0;return"undefined"!==typeof window&&(e.__MUI_GENERATOR_COUNTER__+=1,e.__MUI_GENERATOR_COUNTER__>2&&console.error(["Material-UI: we have detected more than needed creation of the class name generator.","You should only use one class name generator on the client side.","If you do otherwise, you take the risk to have conflicting class names in production."].join("\n"))),function(e,t){if(s+=1,i){if(t&&t.options.classNamePrefix){var n=r(t.options.classNamePrefix);if(n.match(/^Mui/))return"".concat(n,"-").concat(e.key)}return"".concat(a).concat(s)}return"".concat(a).concat(s)}}var o=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;o(n(13));e.__MUI_GENERATOR_COUNTER__=0;var a=/([[\].#*$><+~=|^:(),"'`\s])/g}).call(t,n(14))},function(e,t,n){"use strict";function r(e){function t(e){return"@media (min-width:".concat("number"===typeof c[e]?c[e]:e).concat(d,")")}function n(e){var n=s.indexOf(e)+1,r=c[s[n]];return n===s.length?t("xs"):"@media (max-width:".concat(("number"===typeof r&&n>0?r:e)-p/100).concat(d,")")}function r(e,n){var r=s.indexOf(n)+1;return r===s.length?t(e):"@media (min-width:".concat(c[e]).concat(d,") and ")+"(max-width:".concat(c[s[r]]-p/100).concat(d,")")}function i(e){return r(e,e)}function l(e){return c[e]}var u=e.values,c=void 0===u?{xs:0,sm:600,md:960,lg:1280,xl:1920}:u,h=e.unit,d=void 0===h?"px":h,f=e.step,p=void 0===f?5:f,m=(0,a.default)(e,["values","unit","step"]);return(0,o.default)({keys:s,values:c,up:t,down:n,between:r,only:i,width:l},m)}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.keys=void 0;var o=i(n(8)),a=i(n(3)),s=["xs","sm","md","lg","xl"];t.keys=s},function(e,t,n){"use strict";function r(){return{plugins:[(0,o.default)(),(0,a.default)(),(0,s.default)(),(0,l.default)(),(0,u.default)(),(0,c.default)()]}}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(233)),a=i(n(254)),s=i(n(255)),l=i(n(257)),u=i(n(259)),c=i(n(264)),h=r;t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.createGenerateClassName=t.sheets=t.RuleList=t.SheetsManager=t.SheetsRegistry=t.toCssValue=t.getDynamicStyles=void 0;var i=n(234);Object.defineProperty(t,"getDynamicStyles",{enumerable:!0,get:function(){return r(i).default}});var o=n(53);Object.defineProperty(t,"toCssValue",{enumerable:!0,get:function(){return r(o).default}});var a=n(128);Object.defineProperty(t,"SheetsRegistry",{enumerable:!0,get:function(){return r(a).default}});var s=n(235);Object.defineProperty(t,"SheetsManager",{enumerable:!0,get:function(){return r(s).default}});var l=n(46);Object.defineProperty(t,"RuleList",{enumerable:!0,get:function(){return r(l).default}});var u=n(80);Object.defineProperty(t,"sheets",{enumerable:!0,get:function(){return r(u).default}});var c=n(131);Object.defineProperty(t,"createGenerateClassName",{enumerable:!0,get:function(){return r(c).default}});var h=n(242),d=r(h),f=t.create=function(e){return new d.default(e)};t.default=f()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this.registry=[]}return i(e,[{key:"add",value:function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e)){if(0===t.length||n>=this.index)return void t.push(e);for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)}}},{key:"reset",value:function(){this.registry=[]}},{key:"remove",value:function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)}},{key:"toString",value:function(e){return this.registry.filter(function(e){return e.attached}).map(function(t){return t.toString(e)}).join("\n")}},{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(237),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){return e&&e[i.default]&&e===e[i.default]()}},function(e,t,n){"use strict";function r(e,t){e.renderable=t,e.rules&&t.cssRules&&e.rules.link(t.cssRules)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(26),o=r(i),a=n(132),s=(r(a),n(241)),l=r(s);t.default=function(){var e=0;return function(t,n){(e+=1)>1e10&&(0,o.default)(!1,"[JSS] You might have a memory leak. Rule counter is at %s.",e);var r="c",i="";return n&&(r=n.options.classNamePrefix||"c",null!=n.options.jss.id&&(i+=n.options.jss.id)),""+r+l.default+i+e}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(130),l=r(s),u=n(46),c=r(u),h=function(){function e(t,n){var r=this;i(this,e),this.update=function(e,t){return"string"===typeof e?r.rules.update(e,t):r.rules.update(e),r},this.attached=!1,this.deployed=!1,this.linked=!1,this.classes={},this.options=o({},n,{sheet:this,parent:this,classes:this.classes}),this.renderer=new n.Renderer(this),this.rules=new c.default(this.options);for(var a in t)this.rules.add(a,t[a]);this.rules.process()}return a(e,[{key:"attach",value:function(){return this.attached?this:(this.deployed||this.deploy(),this.renderer.attach(),!this.linked&&this.options.link&&this.link(),this.attached=!0,this)}},{key:"detach",value:function(){return this.attached?(this.renderer.detach(),this.attached=!1,this):this}},{key:"addRule",value:function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var i=this.rules.add(e,t,n);return this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(r?r.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)}},{key:"insertRule",value:function(e){var t=this.renderer.insertRule(e);t&&this.options.link&&(0,l.default)(e,t)}},{key:"addRules",value:function(e,t){var n=[];for(var r in e)n.push(this.addRule(r,e[r],t));return n}},{key:"getRule",value:function(e){return this.rules.get(e)}},{key:"deleteRule",value:function(e){var t=this.rules.get(e);return!!t&&(this.rules.remove(t),!this.attached||!t.renderable||this.renderer.deleteRule(t.renderable))}},{key:"indexOf",value:function(e){return this.rules.indexOf(e)}},{key:"deploy",value:function(){return this.renderer.deploy(),this.deployed=!0,this}},{key:"link",value:function(){var e=this.renderer.getRules();return e&&this.rules.link(e),this.linked=!0,this}},{key:"toString",value:function(e){return this.rules.toString(e)}}]),e}();t.default=h},function(e,t){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}e.exports=n},function(e,t,n){"use strict";function r(e,t,n){if("string"!==typeof t){if(h){var d=c(t);d&&d!==h&&r(e,d,n)}var f=s(t);l&&(f=f.concat(l(t)));for(var p=0;p<f.length;++p){var m=f[p];if(!i[m]&&!o[m]&&(!n||!n[m])){var v=u(t,m);try{a(e,m,v)}catch(e){}}}return e}return e}var i={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a=Object.defineProperty,s=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,c=Object.getPrototypeOf,h=c&&c(Object);e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.jss="64a55d578f856d258dc345b094a2a2b3",t.sheetsRegistry="d4bd0baacbc52bbd48bbb9eb24344ecd",t.managers="b768b78919504fba9de2c03545c5cd3a",t.sheetOptions="6fc570d6bd61383819d0f9e7407c452d"},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component,e.noBase;return n?(0,o.default)({},t,Object.keys(n).reduce(function(e,r){return n[r]&&(e[r]="".concat(t[r]," ").concat(n[r])),e},{})):t}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(8)),a=(i(n(13)),i(n(84)),r);t.default=a},function(e,t,n){"use strict";function r(e,t){var n=-1;return e.some(function(e,r){return!!t(e)&&(n=r,!0)}),n}function i(e){return parseInt((0,c.default)(e,"paddingRight")||0,10)}function o(e,t){var n={overflow:"hidden"};if(e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing){var r=(0,h.default)();n.paddingRight="".concat(i(t)+r,"px");for(var o=(0,d.default)(t).querySelectorAll(".mui-fixed"),a=0;a<o.length;a+=1){var s=i(o[a]);e.prevPaddings.push(s),o[a].style.paddingRight="".concat(s+r,"px")}}Object.keys(n).forEach(function(e){t.style[e]=n[e]})}function a(e,t){Object.keys(e.style).forEach(function(n){t.style[n]=e.style[n]});for(var n=(0,d.default)(t).querySelectorAll(".mui-fixed"),r=0;r<n.length;r+=1)n[r].style.paddingRight="".concat(e.prevPaddings[r],"px")}var s=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=s(n(9)),u=s(n(10)),c=s(n(282)),h=s(n(140)),d=s(n(21)),f=s(n(290)),p=n(292),m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.default)(this,e);var n=t.hideSiblingNodes,r=void 0===n||n,i=t.handleContainerOverflow,o=void 0===i||i;this.hideSiblingNodes=r,this.handleContainerOverflow=o,this.modals=[],this.containers=[],this.data=[]}return(0,u.default)(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),this.hideSiblingNodes&&(0,p.hideSiblings)(t,e.mountNode);var r=this.containers.indexOf(t);if(-1!==r)return this.data[r].modals.push(e),n;var i={modals:[e],overflowing:(0,f.default)(t),prevPaddings:[]};return this.handleContainerOverflow&&o(i,t),this.containers.push(t),this.data.push(i),n}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=r(this.data,function(t){return-1!==t.modals.indexOf(e)}),i=this.data[n],o=this.containers[n];return i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(t,1),0===i.modals.length?(this.handleContainerOverflow&&a(i,o),this.hideSiblingNodes&&(0,p.showSiblings)(o,e.mountNode),this.containers.splice(n,1),this.data.splice(n,1)):this.hideSiblingNodes&&(0,p.ariaHidden)(!1,i.modals[i.modals.length-1].mountNode),t}},{key:"isTopModal",value:function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}]),e}(),v=m;t.default=v},function(e,t,n){"use strict";function r(e){return(0,o.default)(e.replace(a,"ms-"))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(283),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=/^-ms-/;e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=!("undefined"===typeof window||!window.document||!window.document.createElement),e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((!o&&0!==o||e)&&i.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),o=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return o};var r=n(139),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=void 0;e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(295))},function(e,t,n){"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function i(e){function t(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}this.setState(t.bind(this))}function o(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function a(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,a=null,s=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?a="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(a="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?s="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==a||null!==s){var l=e.displayName||e.name,u="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+l+" uses "+u+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==a?"\n  "+a:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=i),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=o;var c=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;c.call(this,e,t,r)}}return e}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"polyfill",function(){return a}),r.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(305))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(307))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(312),o=r(i),a=n(330),s=r(a),l="function"===typeof s.default&&"symbol"===typeof o.default?function(e){return typeof e}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"===typeof s.default&&"symbol"===l(o.default)?function(e){return"undefined"===typeof e?"undefined":l(e)}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":"undefined"===typeof e?"undefined":l(e)}},function(e,t,n){"use strict";var r=n(62),i=n(63),o=n(150),a=n(36),s=n(91),l=n(317),u=n(97),c=n(324),h=n(41)("iterator"),d=!([].keys&&"next"in[].keys()),f=function(){return this};e.exports=function(e,t,n,p,m,v,g){l(n,t,p);var y,_,b,w=function(e){if(!d&&e in T)return T[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",E="values"==m,S=!1,T=e.prototype,M=T[h]||T["@@iterator"]||m&&T[m],k=M||w(m),P=m?E?w("entries"):k:void 0,C="Array"==t?T.entries||M:M;if(C&&(b=c(C.call(new e)))!==Object.prototype&&b.next&&(u(b,x,!0),r||"function"==typeof b[h]||a(b,h,f)),E&&M&&"values"!==M.name&&(S=!0,k=function(){return M.call(this)}),r&&!g||!d&&!S&&T[h]||a(T,h,k),s[t]=k,s[x]=f,m)if(y={values:E?k:w("values"),keys:v?k:w("keys"),entries:P},g)for(_ in y)_ in T||o(T,_,y[_]);else i(i.P+i.F*(d||S),t,y);return y}},function(e,t,n){var r=n(316);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){e.exports=!n(39)&&!n(64)(function(){return 7!=Object.defineProperty(n(149)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(38),i=n(22).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){e.exports=n(36)},function(e,t,n){var r=n(27),i=n(40),o=n(320)(!1),a=n(94)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),l=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>l;)r(s,n=t[l++])&&(~o(u,n)||u.push(n));return u}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(151),i=n(96).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(100),i=n(65),o=n(40),a=n(90),s=n(27),l=n(148),u=Object.getOwnPropertyDescriptor;t.f=n(39)?u:function(e,t){if(e=o(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(348),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(e){return(0,i.default)("displayName",e)};t.default=o},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(360))},function(e,t,n){function r(e){return i(e)||o(e)||a()}var i=n(364),o=n(365),a=n(366);e.exports=r},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(15)),a=(0,o.default)(i.default.createElement("g",null,i.default.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})),"ExpandMore");t.default=a},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(17),i=n(397),o=n(399),a=n(400),s=n(401),l=n(162),u="undefined"!==typeof window&&window.btoa&&window.btoa.bind(window)||n(402);e.exports=function(e){return new Promise(function(t,c){var h=e.data,d=e.headers;r.isFormData(h)&&delete d["Content-Type"];var f=new XMLHttpRequest,p="onreadystatechange",m=!1;if("undefined"===typeof window||!window.XDomainRequest||"withCredentials"in f||s(e.url)||(f=new window.XDomainRequest,p="onload",m=!0,f.onprogress=function(){},f.ontimeout=function(){}),e.auth){var v=e.auth.username||"",g=e.auth.password||"";d.Authorization="Basic "+u(v+":"+g)}if(f.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f[p]=function(){if(f&&(4===f.readyState||m)&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?a(f.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?f.response:f.responseText,o={data:r,status:1223===f.status?204:f.status,statusText:1223===f.status?"No Content":f.statusText,headers:n,config:e,request:f};i(t,c,o),f=null}},f.onerror=function(){c(l("Network Error",e,null,f)),f=null},f.ontimeout=function(){c(l("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var y=n(403),_=(e.withCredentials||s(e.url))&&e.xsrfCookieName?y.read(e.xsrfCookieName):void 0;_&&(d[e.xsrfHeaderName]=_)}if("setRequestHeader"in f&&r.forEach(d,function(e,t){"undefined"===typeof h&&"content-type"===t.toLowerCase()?delete d[t]:f.setRequestHeader(t,e)}),e.withCredentials&&(f.withCredentials=!0),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"===typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){f&&(f.abort(),c(e),f=null)}),void 0===h&&(h=null),f.send(h)})}},function(e,t,n){"use strict";var r=n(398);e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";function r(e){var t=e.alt,n=e.children,r=e.childrenClassName,i=e.classes,c=e.className,h=e.component,d=e.imgProps,f=e.sizes,p=e.src,m=e.srcSet,v=(0,s.default)(e,["alt","children","childrenClassName","classes","className","component","imgProps","sizes","src","srcSet"]),g=(0,u.default)(i.root,(0,a.default)({},i.colorDefault,n&&!p&&!m),c),y=null;if(n)if(r&&"string"!==typeof n&&l.default.isValidElement(n)){var _=(0,u.default)(r,n.props.className);y=l.default.cloneElement(n,{className:_})}else y=n;else(p||m)&&(y=l.default.createElement("img",(0,o.default)({alt:t,src:p,srcSet:m,sizes:f,className:i.img},d)));return l.default.createElement(h,(0,o.default)({className:g},v),y)}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(7)),s=i(n(3)),l=i(n(1)),u=(i(n(2)),i(n(6))),c=i(n(5)),h=function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover"}}};t.styles=h,r.propTypes={},r.defaultProps={component:"div"};var d=(0,c.default)(h,{name:"MuiAvatar"})(r);t.default=d},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(49)),a=r(n(42)),s=i.default.createElement("path",{d:"M7 10l5 5 5-5z"}),l=function(e){return i.default.createElement(a.default,e,s)};l=(0,o.default)(l),l.muiName="SvgIcon";var u=l;t.default=u},function(e,t,n){"use strict";function r(e){var t=e.children,n=e.classes,r=e.className,i=e.disabled,c=e.IconComponent,h=e.inputRef,d=e.name,f=e.onChange,p=e.value,m=(0,s.default)(e,["children","classes","className","disabled","IconComponent","inputRef","name","onChange","value"]);return l.default.createElement("div",{className:n.root},l.default.createElement("select",(0,o.default)({className:(0,u.default)(n.select,(0,a.default)({},n.disabled,i),r),name:d,disabled:i,onChange:f,value:p,ref:h},m),t),l.default.createElement(c,{className:n.icon}))}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(4)),a=i(n(7)),s=i(n(3)),l=i(n(1)),u=(i(n(2)),i(n(6)));r.propTypes={};var c=r;t.default=c},function(e,t,n){"use strict";n(106),n(460)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){e.domElement=document.getElementById(e.domId),e.renderer=new p.s({antialias:!1}),e.renderer.autoClear=!1,e.renderer.localClippingEnabled=!0,e.renderer.setSize(e.domElement.clientWidth,e.domElement.clientHeight),e.renderer.setClearColor(1184274,1),e.renderer.domElement.id=e.targetID,e.domElement.appendChild(e.renderer.domElement),e.camera=new v.a(e.domElement.clientWidth/-2,e.domElement.clientWidth/2,e.domElement.clientHeight/2,e.domElement.clientHeight/-2,1,1e3),e.controls=new g.a(e.camera,e.domElement),e.controls.staticMoving=!0,e.controls.noRotate=!0,e.camera.controls=e.controls,e.scene=new p.o}function s(e,t){e.stackHelper=new x.a(t),e.stackHelper.bbox.visible=!1,e.stackHelper.borderColor=e.sliceColor,e.stackHelper.slice.canvasWidth=e.domElement.clientWidth,e.stackHelper.slice.canvasHeight=e.domElement.clientHeight;var n=t.worldBoundingBox(),r=new p.q((n[1]-n[0])/2,(n[3]-n[2])/2,(n[5]-n[4])/2),i={center:t.worldCenter().clone(),halfDimensions:new p.q(r.x+10,r.y+10,r.z+10)},o={width:e.domElement.clientWidth,height:e.domElement.clientHeight};e.camera.directions=[t.xCosine,t.yCosine,t.zCosine],e.camera.box=i,e.camera.canvas=o,e.camera.orientation=e.sliceOrientation,e.camera.update(),e.camera.fitBox(2,1),e.stackHelper.orientation=e.camera.stackOrientation,e.stackHelper.index=Math.floor(e.stackHelper.orientationMaxIndex/2),e.scene.add(e.stackHelper)}function l(e,t,n,r){e.localizerHelper=new w.a(t,e.stackHelper.slice.geometry,n);for(var i=0;i<r.length;i++)e.localizerHelper["plane"+(i+1)]=r[i].plane,e.localizerHelper["color"+(i+1)]=r[i].color;e.localizerHelper.canvasWidth=2*e.domElement.clientWidth,e.localizerHelper.canvasHeight=2*e.domElement.clientHeight,e.localizerScene=new p.o,e.localizerScene.add(e.localizerHelper)}function u(){P&&(R.controls.update(),L.controls.update(),D.controls.update(),R.renderer.render(R.scene,R.camera),R.renderer.clearDepth(),L.renderer.clear(),L.renderer.render(L.scene,L.camera),L.renderer.clearDepth(),L.renderer.clearDepth(),D.renderer.clear(),D.renderer.render(D.scene,D.camera),D.renderer.clearDepth(),D.renderer.clearDepth())}function c(){function e(){u(),requestAnimationFrame(function(){e()})}a(R),a(L),a(D),e()}var h=n(1),d=n.n(h),f=n(2),p=(n.n(f),n(19)),m=n(461),v=(n.n(m),n(462)),g=n(463),y=n(28),_=n(170),b=n(464),w=n(468),x=n(472),E=(n(483),n(484)),S=(n(555),n(558)),T=n(559),M=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),k=function(){};Object.assign(k.prototype,p.d.prototype,{constructor:k,load:function(e,t,n,r){function i(n){if(200===n.target.status||0===n.target.status){var r=o.parse(n.target.response||n.target.responseText);o.dispatchEvent({type:"load",content:r}),t&&t(r)}else o.dispatchEvent({type:"error",message:"Couldn't load URL ["+e+"]",response:n.target.statusText})}var o=this,a=new XMLHttpRequest;a.addEventListener("load",i,!1),a.addEventListener("progress",function(e){o.dispatchEvent({type:"progress",loaded:e.loaded,total:e.total})},!1),a.addEventListener("error",function(){o.dispatchEvent({type:"error",message:"Couldn't load URL ["+e+"]"})},!1),a.overrideMimeType&&a.overrideMimeType("text/plain; charset=x-user-defined"),a.open("GET",e,!0),a.responseType="arraybuffer",a.send(null)},littleEndian:function(){var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]},parse:function(e){function t(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0,i=r.getUint8(e),o=r.getUint8(e+1),a=r.getUint8(e+2);return t?(n+=a<<16,n+=o<<8,n+=i):(n+=i<<16,n+=o<<8,n+=a),n}var n=this.littleEndian(),r=new DataView(e),i=0,o=void 0,a=t(0);a>16776960?n=!1:(n=!0,a=t(0,n)),i+=3;var s=0,l=0;switch(a){case k.QUAD_FILE_MAGIC_NUMBER:if(s=t(i,n),i+=3,l=t(i,n),i+=3,l>4*s)throw Error("file has many more faces than vertices!  Probably trying to use a scalar data file as a surface!");o=new p.f;for(var u=0;u<s;u++)o.vertices.push(new p.q(r.getInt16(i+0,n)/100,r.getInt16(i+2,n)/100,r.getInt16(i+4,n)/100)),i+=6;for(var c=0;c<l;c++){var h=t(i+0,n),d=t(i+3,n),f=t(i+6,n),m=t(i+9,n);i+=12,o.faces.push(new p.e(h,d,f)),o.faces.push(new p.e(h,f,m))}o.computeBoundingBox();break;case k.TRIANGLE_FILE_MAGIC_NUMBER:for(var v=0,g=0;10!=v&&10!=g;)v=g,g=r.getUint8(i),i++;(new TextDecoder).decode(e.slice(3,i-1)),i++,s=r.getInt32(i,n),i+=4,l=r.getInt32(i,n),i+=4,o=new p.f;for(var y=0;y<s;y++)o.vertices.push(new p.q(r.getFloat32(i+0,n),r.getFloat32(i+4,n),r.getFloat32(i+8,n))),i+=12;for(var _=0;_<l;_++)o.faces.push(new p.e(r.getInt32(i+0,n),r.getInt32(i+4,n),r.getInt32(i+8,n))),i+=12;o.computeBoundingBox();break;case k.NEW_QUAD_FILE_MAGIC_NUMBER:throw Error("Parser not defined for  NEW_QUAD_FILE_MAGIC_NUMBER");default:throw Error("Unknown FreeSurfer MAGICNUMBER: "+a.toString(16))}return o}}),k.QUAD_FILE_MAGIC_NUMBER=16777215,k.TRIANGLE_FILE_MAGIC_NUMBER=16777214,k.NEW_QUAD_FILE_MAGIC_NUMBER=16777213;var P=!1,C=null,A=null,O=null,I=[],R={domId:"view1",domElement:null,renderer:null,color:1184274,sliceOrientation:"axial",sliceColor:16717636,targetID:1,camera:null,controls:null,scene:null,light:null,stackHelper:null,localizerHelper:null,localizerScene:null},L={domId:"view2",domElement:null,renderer:null,color:1184274,sliceOrientation:"sagittal",sliceColor:16771584,targetID:2,camera:null,controls:null,scene:null,light:null,stackHelper:null,localizerHelper:null,localizerScene:null},D={domId:"view3",domElement:null,renderer:null,color:1184274,sliceOrientation:"coronal",sliceColor:7798531,targetID:3,camera:null,controls:null,scene:null,light:null,stackHelper:null,localizerHelper:null,localizerScene:null},N=(new p.o,new p.k(new p.q(0,0,0),0)),F=new p.k(new p.q(0,0,0),0),U=new p.k(new p.q(0,0,0),0),z=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),M(t,[{key:"componentDidMount",value:function(){c();var e=[this.props.image],t=e.map(function(e){return"http://localhost/get_files/get_file.cgi?folder="+e}),n=new E.a;n.load(t).then(function(){function e(e,t){var n=e.stackHelper,r=e.localizerHelper,i=n.slice.cartesianEquation();r.referencePlane=i;for(var o=0;o<t.length;o++)for(var a=0;a<3;a++){var s=t[o]["plane"+(a+1)];s&&i.x.toFixed(6)===s.x.toFixed(6)&&i.y.toFixed(6)===s.y.toFixed(6)&&i.z.toFixed(6)===s.z.toFixed(6)&&(t[o]["plane"+(a+1)]=i)}r.geometry=n.slice.geometry}function t(e,t){var n=e.stackHelper,r=e.camera,i=n.slice.geometry.vertices,o=new p.q(i[0].x,i[0].y,i[0].z).applyMatrix4(n._stack.ijk2LPS),a=new p.q(i[1].x,i[1].y,i[1].z).applyMatrix4(n._stack.ijk2LPS),s=new p.q(i[2].x,i[2].y,i[2].z).applyMatrix4(n._stack.ijk2LPS);t.setFromCoplanarPoints(o,a,s);var l=new p.q(1,1,1);l.applyQuaternion(r.quaternion),l.dot(t.normal)>0&&t.negate()}function r(){e(L,[R.localizerHelper,D.localizerHelper]),t(L,F)}function i(){e(R,[L.localizerHelper,D.localizerHelper]),t(R,N),C&&(C.geometry=R.stackHelper.slice.geometry)}function o(){e(D,[R.localizerHelper,L.localizerHelper]),t(D,U)}function a(e){var t=e.target.parentElement,n=e.target.id,r={x:(e.clientX-t.offsetLeft)/t.clientWidth*2-1,y:-(e.clientY-t.offsetTop)/t.clientHeight*2+1},i=null,o=null,a=null;switch(n){case"1":i=R.camera,o=R.stackHelper,a=R.scene;break;case"2":i=L.camera,o=L.stackHelper,a=L.scene;break;case"3":i=D.camera,o=D.stackHelper,a=D.scene}var s=new p.n;s.setFromCamera(r,i);var l=s.intersectObjects(a.children,!0);if(l.length>0){var u=y.a.worldToData(o.stack.lps2IJK,l[0].point);R.stackHelper.index=u.getComponent((R.stackHelper.orientation+2)%3),L.stackHelper.index=u.getComponent((L.stackHelper.orientation+2)%3),D.stackHelper.index=u.getComponent((D.stackHelper.orientation+2)%3),R.controls.addEventListener("mouseup",function(){console.log();var e=!0,t=!1,n=void 0;try{for(var r,i=I[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;if(o.active)return void o.onEnd()}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}),R.controls.addEventListener("mousemove",function(e){console.log(e);var t="default",n=!0,r=!1,i=void 0;try{for(var o,a=I[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.onMove(e),s.hovered&&(t="pointer")}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}R.controls.style.cursor=t}),R.controls.addEventListener("mousedown",function(e){console.log(e);var t=!0,n=!1,r=void 0;try{for(var i,o=I[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.hovered)return void a.onStart(e)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}R.controls.style.cursor="default"});var c=new S.a(R.stackHelper.slice.mesh,R.controls,d);c.worldPosition=l[0].point,console.log(c.worldPosition),I.push(c),a.add(c)}}function c(e){var t=e.target.domElement.id,n=null;switch(t){case"r1":n=R.stackHelper;break;case"r2":n=L.stackHelper;break;case"r3":n=D.stackHelper}if(e.delta>0){if(n.index>=n.orientationMaxIndex-1)return!1;n.index+=1}else{if(n.index<=0)return!1;n.index-=1}o(),i(),r()}var h=n.data[0].mergeSeries(n.data)[0];n.free(),n=null;var d=h.stack[0];d.prepare();d.worldCenter(),new _.a(d);s(R,d),A=new p.r(R.domElement.clientWidth,R.domElement.clientHeight,{minFilter:p.g,magFilter:p.i,format:p.l}),C=new b.a(d,R.stackHelper.slice.geometry),C.canvasWidth=A.width,C.canvasHeight=A.height,C.textureToFilter=A.texture,O=new p.o,O.add(C),s(L,d),s(D,d);var f=R.stackHelper.slice.cartesianEquation(),m=L.stackHelper.slice.cartesianEquation(),v=D.stackHelper.slice.cartesianEquation();l(R,d,f,[{plane:m,color:new p.b(L.stackHelper.borderColor)},{plane:v,color:new p.b(D.stackHelper.borderColor)}]),l(L,d,m,[{plane:f,color:new p.b(R.stackHelper.borderColor)},{plane:v,color:new p.b(D.stackHelper.borderColor)}]),l(D,d,v,[{plane:f,color:new p.b(R.stackHelper.borderColor)},{plane:m,color:new p.b(L.stackHelper.borderColor)}]);var g=new T.a.GUI({autoPlace:!1});document.getElementById("gui-container").appendChild(g.domElement);var w=g.addFolder("Axial (Red)");w.add(R.stackHelper,"index",0,R.stackHelper.orientationMaxIndex).step(1).listen();w.add(R.stackHelper.slice,"interpolation",0,1).step(1).listen(),w.add(R.stackHelper.slice,"windowWidth",1,d.minMax[1]-d.minMax[0]).step(1).listen(),w.add(R.stackHelper.slice,"windowCenter",d.minMax[0],d.minMax[1]).step(1).listen(),w.add(R.stackHelper.slice,"lowerThreshold",d.minMax[0],d.minMax[1]).step(1).listen(),w.add(R.stackHelper.slice,"upperThreshold",d.minMax[0],d.minMax[1]).step(1).listen(),w.add(R.stackHelper.slice,"intensityAuto").listen(),w.add(R.stackHelper.slice,"invert");var x=g.addFolder("Sagittal (yellow)");x.add(L.stackHelper,"index",0,L.stackHelper.orientationMaxIndex).step(1).listen();x.add(L.stackHelper.slice,"interpolation",0,1).step(1).listen(),x.add(L.stackHelper.slice,"windowWidth",1,d.minMax[1]-d.minMax[0]).step(1).listen(),x.add(L.stackHelper.slice,"windowCenter",d.minMax[0],d.minMax[1]).step(1).listen(),x.add(L.stackHelper.slice,"lowerThreshold",d.minMax[0],d.minMax[1]).step(1).listen(),x.add(L.stackHelper.slice,"upperThreshold",d.minMax[0],d.minMax[1]).step(1).listen(),x.add(L.stackHelper.slice,"intensityAuto").listen(),x.add(L.stackHelper.slice,"invert");var E=g.addFolder("Coronal (green)");E.add(D.stackHelper,"index",0,D.stackHelper.orientationMaxIndex).step(1).listen();E.add(D.stackHelper.slice,"interpolation",0,1).step(1).listen(),E.add(D.stackHelper.slice,"windowWidth",1,d.minMax[1]-d.minMax[0]).step(1).listen(),E.add(D.stackHelper.slice,"windowCenter",d.minMax[0],d.minMax[1]).step(1).listen(),E.add(D.stackHelper.slice,"lowerThreshold",d.minMax[0],d.minMax[1]).step(1).listen(),E.add(D.stackHelper.slice,"upperThreshold",d.minMax[0],d.minMax[1]).step(1).listen(),E.add(D.stackHelper.slice,"intensityAuto").listen(),E.add(D.stackHelper.slice,"invert"),R.domElement.addEventListener("click",a),L.domElement.addEventListener("click",a),D.domElement.addEventListener("click",a),R.controls.addEventListener("OnScroll",c),L.controls.addEventListener("OnScroll",c),D.controls.addEventListener("OnScroll",c),o(),i(),r(),P=!0,u();var M=document.createElement("div");M.setAttribute("id","puppeteer"),document.body.appendChild(M)}).catch(function(e){window.console.log("oops... something went wrong..."),window.console.log(e)})}},{key:"render",value:function(){return d.a.createElement("div",null)}}]),t}(d.a.Component);t.a=z},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"b",function(){return s});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.THREE;if(void 0===e||void 0===e.Object3D)return null;var t=e.Object3D;return function(t){function n(e){r(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t._stack=e,t._visible=!0,t._color=16777215,t._material=null,t._geometry=null,t._mesh=null,t._meshStack=null,t._create(),t}return o(n,t),a(n,[{key:"_create",value:function(){var t=this._stack.dimensionsIJK,n=this._stack.halfDimensionsIJK,r=new e.Vector3(-.5,-.5,-.5),i=new e.BoxGeometry(t.x,t.y,t.z);i.applyMatrix((new e.Matrix4).makeTranslation(n.x+r.x,n.y+r.y,n.z+r.z)),this._geometry=i,this._material=new e.MeshBasicMaterial({wireframe:!0});var o=new e.Mesh(this._geometry,null);o.applyMatrix(this._stack.ijk2LPS),o.visible=this._visible,this._meshStack=o,this._mesh=new e.BoxHelper(this._meshStack,this._color),this._material=this._mesh.material,this.add(this._mesh)}},{key:"_update",value:function(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null),this._create()}},{key:"dispose",value:function(){this._mesh.material.dispose(),this._mesh.material=null,this._geometry.dispose(),this._geometry=null,this._material.dispose(),this._material=null}},{key:"visible",set:function(e){this._visible=e,this._mesh&&(this._mesh.visible=this._visible)},get:function(){return this._visible}},{key:"color",set:function(e){this._color=e,this._material&&this._material.color.set(this._color)},get:function(){return this._color}}]),n}(t)};t.a=s()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(70),s=n(479),l=n(480),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="interpolationIdentity",e._currentVoxel="currentVoxel",e._dataValue="dataValue",e}return o(t,e),u(t,[{key:"api",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._base,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._currentVoxel,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._dataValue;return this._base=e,this.compute(t,n)}},{key:"compute",value:function(e,t){return this.computeDefinition(),this._base._functions[this._name]=this._definition,this._name+"("+e+", "+t+");"}},{key:"computeDefinition",value:function(){this._definition="\nvoid "+this._name+"(in vec3 currentVoxel, out vec4 dataValue){\n  // lower bound\n  vec3 rcurrentVoxel = vec3(floor(currentVoxel.x + 0.5 ), floor(currentVoxel.y + 0.5 ), floor(currentVoxel.z + 0.5 ));\n  ivec3 voxel = ivec3(int(rcurrentVoxel.x), int(rcurrentVoxel.y), int(rcurrentVoxel.z));\n\n  vec4 tmp = vec4(0., 0., 0., 0.);\n  int offset = 0;\n\n  "+l.a.api(this._base,"voxel","tmp","offset")+"\n  "+s.a.api(this._base,"tmp","offset","dataValue")+"\n}\n    "}}]),t}(a.a);t.a=new c},function(e,t,n){"use strict";e.exports=Math.floor},function(e,t,n){"use strict";e.exports=Math.ceil},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";(function(t,r){function i(e){return F.from(e)}function o(e){return F.isBuffer(e)||e instanceof U}function a(e,t,n){if("function"===typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?L(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function s(e,t){R=R||n(30),e=e||{};var r=t instanceof R;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new V,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(H||(H=n(178).StringDecoder),this.decoder=new H(e.encoding),this.encoding=e.encoding)}function l(e){if(R=R||n(30),!(this instanceof l))return new l(e);this._readableState=new s(e,this),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),N.call(this)}function u(e,t,n,r,o){var a=e._readableState;if(null===t)a.reading=!1,m(e,a);else{var s;o||(s=h(a,t)),s?e.emit("error",s):a.objectMode||t&&t.length>0?("string"===typeof t||a.objectMode||Object.getPrototypeOf(t)===F.prototype||(t=i(t)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):c(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?c(e,a,t,!1):y(e,a)):c(e,a,t,!1))):r||(a.reading=!1)}return d(a)}function c(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&v(e)),y(e,t)}function h(e,t){var n;return o(t)||"string"===typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function d(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function f(e){return e>=q?e=q:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function p(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=f(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function m(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,v(e)}}function v(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(j("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?I.nextTick(g,e):g(e))}function g(e){j("emit readable"),e.emit("readable"),S(e)}function y(e,t){t.readingMore||(t.readingMore=!0,I.nextTick(_,e,t))}function _(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(j("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function b(e){return function(){var t=e._readableState;j("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&D(e,"data")&&(t.flowing=!0,S(e))}}function w(e){j("readable nexttick read 0"),e.read(0)}function x(e,t){t.resumeScheduled||(t.resumeScheduled=!0,I.nextTick(E,e,t))}function E(e,t){t.reading||(j("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),S(e),t.flowing&&!t.reading&&e.read(0)}function S(e){var t=e._readableState;for(j("flow",t.flowing);t.flowing&&null!==e.read(););}function T(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=M(e,t.buffer,t.decoder),n}function M(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?k(e,t):P(e,t),r}function k(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0===(e-=a)){a===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++r}return t.length-=r,i}function P(e,t){var n=F.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),0===(e-=a)){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}function C(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,I.nextTick(A,t,e))}function A(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function O(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var I=n(73);e.exports=l;var R,L=n(174);l.ReadableState=s;var D=(n(71).EventEmitter,function(e,t){return e.listeners(t).length}),N=n(176),F=n(74).Buffer,U=t.Uint8Array||function(){},z=n(51);z.inherits=n(29);var B=n(507),j=void 0;j=B&&B.debuglog?B.debuglog("stream"):function(){};var H,V=n(508),G=n(177);z.inherits(l,N);var W=["error","close","destroy","pause","resume"];Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),l.prototype.destroy=G.destroy,l.prototype._undestroy=G.undestroy,l.prototype._destroy=function(e,t){this.push(null),t(e)},l.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"===typeof e&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=F.from(e,t),t=""),n=!0),u(this,e,t,!1,n)},l.prototype.unshift=function(e){return u(this,e,null,!0,!1)},l.prototype.isPaused=function(){return!1===this._readableState.flowing},l.prototype.setEncoding=function(e){return H||(H=n(178).StringDecoder),this._readableState.decoder=new H(e),this._readableState.encoding=e,this};var q=8388608;l.prototype.read=function(e){j("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return j("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?C(this):v(this),null;if(0===(e=p(e,t))&&t.ended)return 0===t.length&&C(this),null;var r=t.needReadable;j("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,j("length less than watermark",r)),t.ended||t.reading?(r=!1,j("reading or ended",r)):r&&(j("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=p(n,t)));var i;return i=e>0?T(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&C(this)),null!==i&&this.emit("data",i),i},l.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},l.prototype.pipe=function(e,t){function n(e,t){j("onunpipe"),e===d&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function i(){j("onend"),e.end()}function o(){j("cleanup"),e.removeListener("close",u),e.removeListener("finish",c),e.removeListener("drain",v),e.removeListener("error",l),e.removeListener("unpipe",n),d.removeListener("end",i),d.removeListener("end",h),d.removeListener("data",s),g=!0,!f.awaitDrain||e._writableState&&!e._writableState.needDrain||v()}function s(t){j("ondata"),y=!1,!1!==e.write(t)||y||((1===f.pipesCount&&f.pipes===e||f.pipesCount>1&&-1!==O(f.pipes,e))&&!g&&(j("false write response, pause",d._readableState.awaitDrain),d._readableState.awaitDrain++,y=!0),d.pause())}function l(t){j("onerror",t),h(),e.removeListener("error",l),0===D(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",c),h()}function c(){j("onfinish"),e.removeListener("close",u),h()}function h(){j("unpipe"),d.unpipe(e)}var d=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e)}f.pipesCount+=1,j("pipe count=%d opts=%j",f.pipesCount,t);var p=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr,m=p?i:h;f.endEmitted?I.nextTick(m):d.once("end",m),e.on("unpipe",n);var v=b(d);e.on("drain",v);var g=!1,y=!1;return d.on("data",s),a(e,"error",l),e.once("close",u),e.once("finish",c),e.emit("pipe",d),f.flowing||(j("pipe resume"),d.resume()),e},l.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=O(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},l.prototype.on=function(e,t){var n=N.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&v(this):I.nextTick(w,this))}return n},l.prototype.addListener=l.prototype.on,l.prototype.resume=function(){var e=this._readableState;return e.flowing||(j("resume"),e.flowing=!0,x(this,e)),this},l.prototype.pause=function(){return j("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(j("pause"),this._readableState.flowing=!1,this.emit("pause")),this},l.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;e.on("end",function(){if(j("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){if(j("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)){t.push(i)||(r=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"===typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<W.length;o++)e.on(W[o],this.emit.bind(this,W[o]));return this._read=function(t){j("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(l.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),l._fromList=T}).call(t,n(14),n(23))},function(e,t,n){e.exports=n(71).EventEmitter},function(e,t,n){"use strict";function r(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||a.nextTick(o,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(a.nextTick(o,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(e,t){e.emit("error",t)}var a=n(73);e.exports={destroy:r,undestroy:i}},function(e,t,n){"use strict";function r(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function i(e){var t=r(e);if("string"!==typeof t&&(y.isEncoding===_||!_(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){this.encoding=i(e);var t;switch(this.encoding){case"utf16le":this.text=d,this.end=f,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=p,this.end=m,t=3;break;default:return this.write=v,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=y.allocUnsafe(t)}function a(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function s(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=a(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=a(t[r]),i>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0)}function l(e,t,n){if(128!==(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"\ufffd"}}function u(e){var t=this.lastTotal-this.lastNeed,n=l(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){var n=s(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t}function d(e,t){if((e.length-t)%2===0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function f(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function p(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function m(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function v(e){return e.toString(this.encoding)}function g(e){return e&&e.length?this.write(e):""}var y=n(74).Buffer,_=y.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=h,o.prototype.text=c,o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";function r(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);s.call(this,e),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"===typeof this._flush?this._flush(function(t,n){a(e,t,n)}):a(this,null,null)}function a(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=i;var s=n(30),l=n(51);l.inherits=n(29),l.inherits(i,s),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var n=this;s.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},function(e,t,n){"use strict";(function(t){function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function i(e){return t.Buffer&&"function"===typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function o(e){return Object.prototype.toString.call(e)}function a(e){return!i(e)&&("function"===typeof t.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function s(e){if(b.isFunction(e)){if(E)return e.name;var t=e.toString(),n=t.match(T);return n&&n[1]}}function l(e,t){return"string"===typeof e?e.length<t?e:e.slice(0,t):e}function u(e){if(E||!b.isFunction(e))return b.inspect(e);var t=s(e);return"[Function"+(t?": "+t:"")+"]"}function c(e){return l(u(e.actual),128)+" "+e.operator+" "+l(u(e.expected),128)}function h(e,t,n,r,i){throw new S.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function d(e,t){e||h(e,!0,t,"==",S.ok)}function f(e,t,n,s){if(e===t)return!0;if(i(e)&&i(t))return 0===r(e,t);if(b.isDate(e)&&b.isDate(t))return e.getTime()===t.getTime();if(b.isRegExp(e)&&b.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===typeof e||null!==t&&"object"===typeof t){if(a(e)&&a(t)&&o(e)===o(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;s=s||{actual:[],expected:[]};var l=s.actual.indexOf(e);return-1!==l&&l===s.expected.indexOf(t)||(s.actual.push(e),s.expected.push(t),m(e,t,n,s))}return n?e===t:e==t}function p(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function m(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(b.isPrimitive(e)||b.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=p(e),o=p(t);if(i&&!o||!i&&o)return!1;if(i)return e=x.call(e),t=x.call(t),f(e,t,n);var a,s,l=M(e),u=M(t);if(l.length!==u.length)return!1;for(l.sort(),u.sort(),s=l.length-1;s>=0;s--)if(l[s]!==u[s])return!1;for(s=l.length-1;s>=0;s--)if(a=l[s],!f(e[a],t[a],n,r))return!1;return!0}function v(e,t,n){f(e,t,!0)&&h(e,t,n,"notDeepStrictEqual",v)}function g(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function y(e){var t;try{e()}catch(e){t=e}return t}function _(e,t,n,r){var i;if("function"!==typeof t)throw new TypeError('"block" argument must be a function');"string"===typeof n&&(r=n,n=null),i=y(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&h(i,n,"Missing expected exception"+r);var o="string"===typeof r,a=!e&&b.isError(i),s=!e&&i&&!n;if((a&&o&&g(i,n)||s)&&h(i,n,"Got unwanted exception"+r),e&&i&&n&&!g(i,n)||!e&&i)throw i}var b=n(181),w=Object.prototype.hasOwnProperty,x=Array.prototype.slice,E=function(){return"foo"===function(){}.name}(),S=e.exports=d,T=/\s*function\s+([^\(\s]*)\s*/;S.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var t=e.stackStartFunction||h;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=s(t),o=r.indexOf("\n"+i);if(o>=0){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}},b.inherits(S.AssertionError,Error),S.fail=h,S.ok=d,S.equal=function(e,t,n){e!=t&&h(e,t,n,"==",S.equal)},S.notEqual=function(e,t,n){e==t&&h(e,t,n,"!=",S.notEqual)},S.deepEqual=function(e,t,n){f(e,t,!1)||h(e,t,n,"deepEqual",S.deepEqual)},S.deepStrictEqual=function(e,t,n){f(e,t,!0)||h(e,t,n,"deepStrictEqual",S.deepStrictEqual)},S.notDeepEqual=function(e,t,n){f(e,t,!1)&&h(e,t,n,"notDeepEqual",S.notDeepEqual)},S.notDeepStrictEqual=v,S.strictEqual=function(e,t,n){e!==t&&h(e,t,n,"===",S.strictEqual)},S.notStrictEqual=function(e,t,n){e===t&&h(e,t,n,"!==",S.notStrictEqual)},S.throws=function(e,t,n){_(!0,e,t,n)},S.doesNotThrow=function(e,t,n){_(!1,e,t,n)},S.ifError=function(e){if(e)throw e};var M=Object.keys||function(e){var t=[];for(var n in e)w.call(e,n)&&t.push(n);return t}}).call(t,n(14))},function(e,t,n){(function(e,r){function i(e,n){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(n)?r.showHidden=n:n&&t._extend(r,n),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),l(r,e,r.depth)}function o(e,t){var n=i.styles[t];return n?"\x1b["+i.colors[n][0]+"m"+e+"\x1b["+i.colors[n][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function l(e,n,r){if(e.customInspect&&n&&M(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return _(i)||(i=l(e,i,r)),i}var o=u(e,n);if(o)return o;var a=Object.keys(n),m=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),T(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(n);if(0===a.length){if(M(n)){var v=n.name?": "+n.name:"";return e.stylize("[Function"+v+"]","special")}if(x(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(S(n))return e.stylize(Date.prototype.toString.call(n),"date");if(T(n))return c(n)}var g="",y=!1,b=["{","}"];if(p(n)&&(y=!0,b=["[","]"]),M(n)){g=" [Function"+(n.name?": "+n.name:"")+"]"}if(x(n)&&(g=" "+RegExp.prototype.toString.call(n)),S(n)&&(g=" "+Date.prototype.toUTCString.call(n)),T(n)&&(g=" "+c(n)),0===a.length&&(!y||0==n.length))return b[0]+g+b[1];if(r<0)return x(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var w;return w=y?h(e,n,r,m,a):a.map(function(t){return d(e,n,r,m,t,y)}),e.seen.pop(),f(w,g,b)}function u(e,t){if(w(t))return e.stylize("undefined","undefined");if(_(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)O(t,String(a))?o.push(d(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(d(e,t,n,r,i,!0))}),o}function d(e,t,n,r,i,o){var a,s,u;if(u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),O(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=v(n)?l(e,u.value,null):l(e,u.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),w(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function f(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function p(e){return Array.isArray(e)}function m(e){return"boolean"===typeof e}function v(e){return null===e}function g(e){return null==e}function y(e){return"number"===typeof e}function _(e){return"string"===typeof e}function b(e){return"symbol"===typeof e}function w(e){return void 0===e}function x(e){return E(e)&&"[object RegExp]"===P(e)}function E(e){return"object"===typeof e&&null!==e}function S(e){return E(e)&&"[object Date]"===P(e)}function T(e){return E(e)&&("[object Error]"===P(e)||e instanceof Error)}function M(e){return"function"===typeof e}function k(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function P(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}function A(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var I=/%[sdj%]/g;t.format=function(e){if(!_(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(e).replace(I,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),s=r[n];n<o;s=r[++n])v(s)||!E(s)?a+=" "+s:a+=" "+i(s);return a},t.deprecate=function(n,i){function o(){if(!a){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),a=!0}return n.apply(this,arguments)}if(w(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var a=!1;return o};var R,L={};t.debuglog=function(e){if(w(R)&&(R=Object({NODE_ENV:"production",PUBLIC_URL:"/irir-client"}).NODE_DEBUG||""),e=e.toUpperCase(),!L[e])if(new RegExp("\\b"+e+"\\b","i").test(R)){var n=r.pid;L[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else L[e]=function(){};return L[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=m,t.isNull=v,t.isNullOrUndefined=g,t.isNumber=y,t.isString=_,t.isSymbol=b,t.isUndefined=w,t.isRegExp=x,t.isObject=E,t.isDate=S,t.isError=T,t.isFunction=M,t.isPrimitive=k,t.isBuffer=n(519);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",A(),t.format.apply(t,arguments))},t.inherits=n(29),t._extend=function(e,t){if(!t||!E(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,n(14),n(23))},function(e,t,n){"use strict";function r(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){a=n>2e3?2e3:n,n-=a;do{i=i+t[r++]|0,o=o+i|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){var o=i,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}var i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=r},function(e,t,n){"use strict";var r=r||{};r.lossless=r.lossless||{},r.lossless.ComponentSpec=r.lossless.ComponentSpec||function(){this.hSamp=0,this.quantTableSel=0,this.vSamp=0},"undefined"!==typeof e&&e.exports&&(e.exports=r.lossless.ComponentSpec)},function(e,t,n){"use strict";var r=r||{};r.lossless=r.lossless||{},r.lossless.DataStream=r.lossless.DataStream||n(44),r.lossless.Utils=r.lossless.Utils||n(76),r.lossless.HuffmanTable=r.lossless.HuffmanTable||function(){this.l=r.lossless.Utils.createArray(4,2,16),this.th=[],this.v=r.lossless.Utils.createArray(4,2,16,200),this.tc=r.lossless.Utils.createArray(4,2),this.tc[0][0]=0,this.tc[1][0]=0,this.tc[2][0]=0,this.tc[3][0]=0,this.tc[0][1]=0,this.tc[1][1]=0,this.tc[2][1]=0,this.tc[3][1]=0,this.th[0]=0,this.th[1]=0,this.th[2]=0,this.th[3]=0},r.lossless.HuffmanTable.MSB=2147483648,r.lossless.HuffmanTable.prototype.read=function(e,t){var n,r,i,o,a,s,l=0;for(n=e.get16(),l+=2;l<n;){if(r=e.get8(),l+=1,(i=15&r)>3)throw new Error("ERROR: Huffman table ID > 3");if((o=r>>4)>2)throw new Error("ERROR: Huffman table [Table class > 2 ]");for(this.th[i]=1,this.tc[i][o]=1,a=0;a<16;a+=1)this.l[i][o][a]=e.get8(),l+=1;for(a=0;a<16;a+=1)for(s=0;s<this.l[i][o][a];s+=1){if(l>n)throw new Error("ERROR: Huffman table format error [count>Lh]");this.v[i][o][a][s]=e.get8(),l+=1}}if(l!==n)throw new Error("ERROR: Huffman table format error [count!=Lf]");for(a=0;a<4;a+=1)for(s=0;s<2;s+=1)0!==this.tc[a][s]&&this.buildHuffTable(t[a][s],this.l[a][s],this.v[a][s]);return 1},r.lossless.HuffmanTable.prototype.buildHuffTable=function(e,t,n){var i,o,a,s,l,u;for(o=256,a=0,s=0;s<8;s+=1)for(l=0;l<t[s];l+=1)for(u=0;u<o>>s+1;u+=1)e[a]=n[s][l]|s+1<<8,a+=1;for(s=1;a<256;s+=1,a+=1)e[a]=s|r.lossless.HuffmanTable.MSB;for(i=1,a=0,s=8;s<16;s+=1)for(l=0;l<t[s];l+=1){for(u=0;u<o>>s-7;u+=1)e[256*i+a]=n[s][l]|s+1<<8,a+=1;if(a>=256){if(a>256)throw new Error("ERROR: Huffman table error(1)!");a=0,i+=1}}},"undefined"!==typeof e&&e.exports&&(e.exports=r.lossless.HuffmanTable)},function(e,t,n){"use strict";var r=r||{};r.lossless=r.lossless||{},r.lossless.DataStream=r.lossless.DataStream||n(44),r.lossless.Utils=r.lossless.Utils||n(76),r.lossless.QuantizationTable=r.lossless.QuantizationTable||function(){this.precision=[],this.tq=[],this.quantTables=r.lossless.Utils.createArray(4,64),this.tq[0]=0,this.tq[1]=0,this.tq[2]=0,this.tq[3]=0},r.lossless.QuantizationTable.enhanceQuantizationTable=function(e,t){var n;for(n=0;n<8;n+=1)e[t[0+n]]*=90,e[t[32+n]]*=90,e[t[16+n]]*=118,e[t[48+n]]*=49,e[t[40+n]]*=71,e[t[8+n]]*=126,e[t[56+n]]*=25,e[t[24+n]]*=106;for(n=0;n<8;n+=1)e[t[0+8*n]]*=90,e[t[4+8*n]]*=90,e[t[2+8*n]]*=118,e[t[6+8*n]]*=49,e[t[5+8*n]]*=71,e[t[1+8*n]]*=126,e[t[7+8*n]]*=25,e[t[3+8*n]]*=106;for(n=0;n<64;n+=1)e[n]>>=6},r.lossless.QuantizationTable.prototype.read=function(e,t){var n,i,o,a,s=0;for(n=e.get16(),s+=2;s<n;){if(i=e.get8(),s+=1,(o=15&i)>3)throw new Error("ERROR: Quantization table ID > 3");if(this.precision[o]=i>>4,0===this.precision[o])this.precision[o]=8;else{if(1!==this.precision[o])throw new Error("ERROR: Quantization table precision error");this.precision[o]=16}if(this.tq[o]=1,8===this.precision[o]){for(a=0;a<64;a+=1){if(s>n)throw new Error("ERROR: Quantization table format error");this.quantTables[o][a]=e.get8(),s+=1}r.lossless.QuantizationTable.enhanceQuantizationTable(this.quantTables[o],t)}else{for(a=0;a<64;a+=1){if(s>n)throw new Error("ERROR: Quantization table format error");this.quantTables[o][a]=e.get16(),s+=2}r.lossless.QuantizationTable.enhanceQuantizationTable(this.quantTables[o],t)}}if(s!==n)throw new Error("ERROR: Quantization table error [count!=Lq]");return 1},"undefined"!==typeof e&&e.exports&&(e.exports=r.lossless.QuantizationTable)},function(e,t,n){"use strict";var r=r||{};r.lossless=r.lossless||{},r.lossless.DataStream=r.lossless.DataStream||n(44),r.lossless.ScanComponent=r.lossless.ScanComponent||n(188),r.lossless.ScanHeader=r.lossless.ScanHeader||function(){this.ah=0,this.al=0,this.numComp=0,this.selection=0,this.spectralEnd=0,this.components=[]},r.lossless.ScanHeader.prototype.read=function(e){var t,n,i,o=0;for(t=e.get16(),o+=2,this.numComp=e.get8(),o+=1,n=0;n<this.numComp;n+=1){if(this.components[n]=new r.lossless.ScanComponent,o>t)throw new Error("ERROR: scan header format error");this.components[n].scanCompSel=e.get8(),o+=1,i=e.get8(),o+=1,this.components[n].dcTabSel=i>>4,this.components[n].acTabSel=15&i}if(this.selection=e.get8(),o+=1,this.spectralEnd=e.get8(),o+=1,i=e.get8(),this.ah=i>>4,this.al=15&i,(o+=1)!==t)throw new Error("ERROR: scan header format error [count!=Ns]");return 1},"undefined"!==typeof e&&e.exports&&(e.exports=r.lossless.ScanHeader)},function(e,t,n){"use strict";var r=r||{};r.lossless=r.lossless||{},r.lossless.ScanComponent=r.lossless.ScanComponent||function(){this.acTabSel=0,this.dcTabSel=0,this.scanCompSel=0},"undefined"!==typeof e&&e.exports&&(e.exports=r.lossless.ScanComponent)},function(e,t,n){"use strict";var r=r||{};r.lossless=r.lossless||{},r.lossless.ComponentSpec=r.lossless.ComponentSpec||n(184),r.lossless.DataStream=r.lossless.DataStream||n(44),r.lossless.FrameHeader=r.lossless.FrameHeader||function(){this.components=[],this.dimX=0,this.dimY=0,this.numComp=0,this.precision=0},r.lossless.FrameHeader.prototype.read=function(e){var t,n,i,o,a=0;for(t=e.get16(),a+=2,this.precision=e.get8(),a+=1,this.dimY=e.get16(),a+=2,this.dimX=e.get16(),a+=2,this.numComp=e.get8(),a+=1,n=1;n<=this.numComp;n+=1){if(a>t)throw new Error("ERROR: frame format error");if(i=e.get8(),(a+=1)>=t)throw new Error("ERROR: frame format error [c>=Lf]");o=e.get8(),a+=1,this.components[i]||(this.components[i]=new r.lossless.ComponentSpec),this.components[i].hSamp=o>>4,this.components[i].vSamp=15&o,this.components[i].quantTableSel=e.get8(),a+=1}if(a!==t)throw new Error("ERROR: frame format error [Lf!=count]");return 1},"undefined"!==typeof e&&e.exports&&(e.exports=r.lossless.FrameHeader)},function(e,t,n){"use strict";var r=r||{};r.Utils=r.Utils||n(115),r.NIFTI1=r.NIFTI1||function(){this.littleEndian=!1,this.dim_info=0,this.dims=[],this.intent_p1=0,this.intent_p2=0,this.intent_p3=0,this.intent_code=0,this.datatypeCode=0,this.numBitsPerVoxel=0,this.slice_start=0,this.slice_end=0,this.slice_code=0,this.pixDims=[],this.vox_offset=0,this.scl_slope=1,this.scl_inter=0,this.xyzt_units=0,this.cal_max=0,this.cal_min=0,this.slice_duration=0,this.toffset=0,this.description="",this.aux_file="",this.intent_name="",this.qform_code=0,this.sform_code=0,this.quatern_b=0,this.quatern_c=0,this.quatern_d=0,this.qoffset_x=0,this.qoffset_y=0,this.qoffset_z=0,this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],this.magic=0,this.isHDR=!1,this.extensionFlag=[0,0,0,0],this.extensionSize=0,this.extensionCode=0},r.NIFTI1.TYPE_NONE=0,r.NIFTI1.TYPE_BINARY=1,r.NIFTI1.TYPE_UINT8=2,r.NIFTI1.TYPE_INT16=4,r.NIFTI1.TYPE_INT32=8,r.NIFTI1.TYPE_FLOAT32=16,r.NIFTI1.TYPE_COMPLEX64=32,r.NIFTI1.TYPE_FLOAT64=64,r.NIFTI1.TYPE_RGB24=128,r.NIFTI1.TYPE_INT8=256,r.NIFTI1.TYPE_UINT16=512,r.NIFTI1.TYPE_UINT32=768,r.NIFTI1.TYPE_INT64=1024,r.NIFTI1.TYPE_UINT64=1280,r.NIFTI1.TYPE_FLOAT128=1536,r.NIFTI1.TYPE_COMPLEX128=1792,r.NIFTI1.TYPE_COMPLEX256=2048,r.NIFTI1.XFORM_UNKNOWN=0,r.NIFTI1.XFORM_SCANNER_ANAT=1,r.NIFTI1.XFORM_ALIGNED_ANAT=2,r.NIFTI1.XFORM_TALAIRACH=3,r.NIFTI1.XFORM_MNI_152=4,r.NIFTI1.SPATIAL_UNITS_MASK=7,r.NIFTI1.TEMPORAL_UNITS_MASK=56,r.NIFTI1.UNITS_UNKNOWN=0,r.NIFTI1.UNITS_METER=1,r.NIFTI1.UNITS_MM=2,r.NIFTI1.UNITS_MICRON=3,r.NIFTI1.UNITS_SEC=8,r.NIFTI1.UNITS_MSEC=16,r.NIFTI1.UNITS_USEC=24,r.NIFTI1.UNITS_HZ=32,r.NIFTI1.UNITS_PPM=40,r.NIFTI1.UNITS_RADS=48,r.NIFTI1.MAGIC_COOKIE=348,r.NIFTI1.MAGIC_NUMBER_LOCATION=344,r.NIFTI1.MAGIC_NUMBER=[110,43,49],r.NIFTI1.MAGIC_NUMBER2=[110,105,49],r.NIFTI1.EXTENSION_HEADER_SIZE=8,r.NIFTI1.prototype.readHeader=function(e){var t,n,i,o,a=new DataView(e),s=r.Utils.getIntAt(a,0,this.littleEndian);if(s!==r.NIFTI1.MAGIC_COOKIE&&(this.littleEndian=!0,s=r.Utils.getIntAt(a,0,this.littleEndian)),s!==r.NIFTI1.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.dim_info=r.Utils.getByteAt(a,39),t=0;t<8;t+=1)o=40+2*t,this.dims[t]=r.Utils.getShortAt(a,o,this.littleEndian);for(this.intent_p1=r.Utils.getFloatAt(a,56,this.littleEndian),this.intent_p2=r.Utils.getFloatAt(a,60,this.littleEndian),this.intent_p3=r.Utils.getFloatAt(a,64,this.littleEndian),this.intent_code=r.Utils.getShortAt(a,68,this.littleEndian),this.datatypeCode=r.Utils.getShortAt(a,70,this.littleEndian),this.numBitsPerVoxel=r.Utils.getShortAt(a,72,this.littleEndian),this.slice_start=r.Utils.getShortAt(a,74,this.littleEndian),t=0;t<8;t+=1)o=76+4*t,this.pixDims[t]=r.Utils.getFloatAt(a,o,this.littleEndian);for(this.vox_offset=r.Utils.getFloatAt(a,108,this.littleEndian),this.scl_slope=r.Utils.getFloatAt(a,112,this.littleEndian),this.scl_inter=r.Utils.getFloatAt(a,116,this.littleEndian),this.slice_end=r.Utils.getShortAt(a,120,this.littleEndian),this.slice_code=r.Utils.getByteAt(a,122),this.xyzt_units=r.Utils.getByteAt(a,123),this.cal_max=r.Utils.getFloatAt(a,124,this.littleEndian),this.cal_min=r.Utils.getFloatAt(a,128,this.littleEndian),this.slice_duration=r.Utils.getFloatAt(a,132,this.littleEndian),this.toffset=r.Utils.getFloatAt(a,136,this.littleEndian),this.description=r.Utils.getStringAt(a,148,228),this.aux_file=r.Utils.getStringAt(a,228,252),this.qform_code=r.Utils.getShortAt(a,252,this.littleEndian),this.sform_code=r.Utils.getShortAt(a,254,this.littleEndian),this.quatern_b=r.Utils.getFloatAt(a,256,this.littleEndian),this.quatern_c=r.Utils.getFloatAt(a,260,this.littleEndian),this.quatern_d=r.Utils.getFloatAt(a,264,this.littleEndian),this.qoffset_x=r.Utils.getFloatAt(a,268,this.littleEndian),this.qoffset_y=r.Utils.getFloatAt(a,272,this.littleEndian),this.qoffset_z=r.Utils.getFloatAt(a,276,this.littleEndian),n=0;n<3;n+=1)for(i=0;i<4;i+=1)o=280+4*(4*n+i),this.affine[n][i]=r.Utils.getFloatAt(a,o,this.littleEndian);this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.intent_name=r.Utils.getStringAt(a,328,344),this.magic=r.Utils.getStringAt(a,344,348),this.isHDR=this.magic===r.NIFTI1.MAGIC_NUMBER2,a.byteLength>r.NIFTI1.MAGIC_COOKIE&&(this.extensionFlag[0]=r.Utils.getByteAt(a,348),this.extensionFlag[1]=r.Utils.getByteAt(a,349),this.extensionFlag[2]=r.Utils.getByteAt(a,350),this.extensionFlag[3]=r.Utils.getByteAt(a,351),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(a),this.extensionCode=this.getExtensionCode(a)))},r.NIFTI1.prototype.toFormattedString=function(){var e=r.Utils.formatNumber,t="";return t+="Dim Info = "+this.dim_info+"\n",t+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n",t+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n",t+="Intent Code = "+this.intent_code+"\n",t+="Datatype = "+this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n",t+="Bits Per Voxel = "+this.numBitsPerVoxel+"\n",t+="Slice Start = "+this.slice_start+"\n",t+="Voxel Dimensions (1-8): "+e(this.pixDims[0])+", "+e(this.pixDims[1])+", "+e(this.pixDims[2])+", "+e(this.pixDims[3])+", "+e(this.pixDims[4])+", "+e(this.pixDims[5])+", "+e(this.pixDims[6])+", "+e(this.pixDims[7])+"\n",t+="Image Offset = "+this.vox_offset+"\n",t+="Data Scale:  Slope = "+e(this.scl_slope)+"  Intercept = "+e(this.scl_inter)+"\n",t+="Slice End = "+this.slice_end+"\n",t+="Slice Code = "+this.slice_code+"\n",t+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(r.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(r.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n",t+="Display Range:  Max = "+e(this.cal_max)+"  Min = "+e(this.cal_min)+"\n",t+="Slice Duration = "+this.slice_duration+"\n",t+="Time Axis Shift = "+this.toffset+"\n",t+='Description: "'+this.description+'"\n',t+='Auxiliary File: "'+this.aux_file+'"\n',t+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n",t+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n",t+="Quaternion Parameters:  b = "+e(this.quatern_b)+"  c = "+e(this.quatern_c)+"  d = "+e(this.quatern_d)+"\n",t+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n",t+="S-Form Parameters X: "+e(this.affine[0][0])+", "+e(this.affine[0][1])+", "+e(this.affine[0][2])+", "+e(this.affine[0][3])+"\n",t+="S-Form Parameters Y: "+e(this.affine[1][0])+", "+e(this.affine[1][1])+", "+e(this.affine[1][2])+", "+e(this.affine[1][3])+"\n",t+="S-Form Parameters Z: "+e(this.affine[2][0])+", "+e(this.affine[2][1])+", "+e(this.affine[2][2])+", "+e(this.affine[2][3])+"\n",t+='Intent Name: "'+this.intent_name+'"\n',this.extensionFlag[0]&&(t+="Extension: Size = "+this.extensionSize+"  Code = "+this.extensionCode+"\n"),t},r.NIFTI1.prototype.getDatatypeCodeString=function(e){return e===r.NIFTI1.TYPE_UINT8?"1-Byte Unsigned Integer":e===r.NIFTI1.TYPE_INT16?"2-Byte Signed Integer":e===r.NIFTI1.TYPE_INT32?"4-Byte Signed Integer":e===r.NIFTI1.TYPE_FLOAT32?"4-Byte Float":e===r.NIFTI1.TYPE_FLOAT64?"8-Byte Float":e===r.NIFTI1.TYPE_RGB24?"RGB":e===r.NIFTI1.TYPE_INT8?"1-Byte Signed Integer":e===r.NIFTI1.TYPE_UINT16?"2-Byte Unsigned Integer":e===r.NIFTI1.TYPE_UINT32?"4-Byte Unsigned Integer":e===r.NIFTI1.TYPE_INT64?"8-Byte Signed Integer":e===r.NIFTI1.TYPE_UINT64?"8-Byte Unsigned Integer":"Unknown"},r.NIFTI1.prototype.getTransformCodeString=function(e){return e===r.NIFTI1.XFORM_SCANNER_ANAT?"Scanner":e===r.NIFTI1.XFORM_ALIGNED_ANAT?"Aligned":e===r.NIFTI1.XFORM_TALAIRACH?"Talairach":e===r.NIFTI1.XFORM_MNI_152?"MNI":"Unknown"},r.NIFTI1.prototype.getUnitsCodeString=function(e){return e===r.NIFTI1.UNITS_METER?"Meters":e===r.NIFTI1.UNITS_MM?"Millimeters":e===r.NIFTI1.UNITS_MICRON?"Microns":e===r.NIFTI1.UNITS_SEC?"Seconds":e===r.NIFTI1.UNITS_MSEC?"Milliseconds":e===r.NIFTI1.UNITS_USEC?"Microseconds":e===r.NIFTI1.UNITS_HZ?"Hz":e===r.NIFTI1.UNITS_PPM?"PPM":e===r.NIFTI1.UNITS_RADS?"Rads":"Unknown"},r.NIFTI1.prototype.getQformMat=function(){return this.convertNiftiQFormToNiftiSForm(this.quatern_b,this.quatern_c,this.quatern_d,this.qoffset_x,this.qoffset_y,this.qoffset_z,this.pixDims[1],this.pixDims[2],this.pixDims[3],this.pixDims[0])},r.NIFTI1.prototype.convertNiftiQFormToNiftiSForm=function(e,t,n,r,i,o,a,s,l,u){var c,h,d,f,p=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],m=e,v=t,g=n;return p[3][0]=p[3][1]=p[3][2]=0,p[3][3]=1,c=1-(m*m+v*v+g*g),c<1e-7?(c=1/Math.sqrt(m*m+v*v+g*g),m*=c,v*=c,g*=c,c=0):c=Math.sqrt(c),h=a>0?a:1,d=s>0?s:1,f=l>0?l:1,u<0&&(f=-f),p[0][0]=(c*c+m*m-v*v-g*g)*h,p[0][1]=2*(m*v-c*g)*d,p[0][2]=2*(m*g+c*v)*f,p[1][0]=2*(m*v+c*g)*h,p[1][1]=(c*c+v*v-m*m-g*g)*d,p[1][2]=2*(v*g-c*m)*f,p[2][0]=2*(m*g-c*v)*h,p[2][1]=2*(v*g+c*m)*d,p[2][2]=(c*c+g*g-v*v-m*m)*f,p[0][3]=r,p[1][3]=i,p[2][3]=o,p},r.NIFTI1.prototype.convertNiftiSFormToNEMA=function(e){var t,n,r,i,o,a,s,l,u,c,h,d,f,p,m,v,g,y,_,b,w,x,E,S,T,M,k,P,C,A,O,I,R;if(p=0,M=[[0,0,0],[0,0,0],[0,0,0]],k=[[0,0,0],[0,0,0],[0,0,0]],t=e[0][0],n=e[0][1],r=e[0][2],i=e[1][0],o=e[1][1],a=e[1][2],s=e[2][0],l=e[2][1],u=e[2][2],0===(c=Math.sqrt(t*t+i*i+s*s)))return null;if(t/=c,i/=c,s/=c,0===(c=Math.sqrt(n*n+o*o+l*l)))return null;if(n/=c,o/=c,l/=c,c=t*n+i*o+s*l,Math.abs(c)>1e-4){if(n-=c*t,o-=c*i,l-=c*s,0===(c=Math.sqrt(n*n+o*o+l*l)))return null;n/=c,o/=c,l/=c}if(c=Math.sqrt(r*r+a*a+u*u),0===c?(r=i*l-s*o,a=s*n-l*t,u=t*o-i*n):(r/=c,a/=c,u/=c),c=t*r+i*a+s*u,Math.abs(c)>1e-4){if(r-=c*t,a-=c*i,u-=c*s,0===(c=Math.sqrt(r*r+a*a+u*u)))return null;r/=c,a/=c,u/=c}if(c=n*r+o*a+l*u,Math.abs(c)>1e-4){if(r-=c*n,a-=c*o,u-=c*l,0===(c=Math.sqrt(r*r+a*a+u*u)))return null;r/=c,a/=c,u/=c}if(M[0][0]=t,M[0][1]=n,M[0][2]=r,M[1][0]=i,M[1][1]=o,M[1][2]=a,M[2][0]=s,M[2][1]=l,M[2][2]=u,0===(h=this.nifti_mat33_determ(M)))return null;for(T=-666,y=w=x=E=1,_=2,b=3,d=1;d<=3;d+=1)for(f=1;f<=3;f+=1)if(d!==f)for(p=1;p<=3;p+=1)if(d!==p&&f!==p)for(k[0][0]=k[0][1]=k[0][2]=k[1][0]=k[1][1]=k[1][2]=k[2][0]=k[2][1]=k[2][2]=0,m=-1;m<=1;m+=2)for(v=-1;v<=1;v+=2)for(g=-1;g<=1;g+=2)k[0][d-1]=m,k[1][f-1]=v,k[2][p-1]=g,this.nifti_mat33_determ(k)*h>0&&(S=this.nifti_mat33_mul(k,M),(c=S[0][0]+S[1][1]+S[2][2])>T&&(T=c,y=d,_=f,b=p,w=m,x=v,E=g));switch(P=C=A=O=I=R=0,y*w){case 1:P="X",O="+";break;case-1:P="X",O="-";break;case 2:P="Y",O="+";break;case-2:P="Y",O="-";break;case 3:P="Z",O="+";break;case-3:P="Z",O="-"}switch(_*x){case 1:C="X",I="+";break;case-1:C="X",I="-";break;case 2:C="Y",I="+";break;case-2:C="Y",I="-";break;case 3:C="Z",I="+";break;case-3:C="Z",I="-"}switch(b*E){case 1:A="X",R="+";break;case-1:A="X",R="-";break;case 2:A="Y",R="+";break;case-2:A="Y",R="-";break;case 3:A="Z",R="+";break;case-3:A="Z",R="-"}return P+C+A+O+I+R},r.NIFTI1.prototype.nifti_mat33_mul=function(e,t){var n,r,i=[[0,0,0],[0,0,0],[0,0,0]];for(n=0;n<3;n+=1)for(r=0;r<3;r+=1)i[n][r]=e[n][0]*t[0][r]+e[n][1]*t[1][r]+e[n][2]*t[2][r];return i},r.NIFTI1.prototype.nifti_mat33_determ=function(e){var t,n,r,i,o,a,s,l,u;return t=e[0][0],n=e[0][1],r=e[0][2],i=e[1][0],o=e[1][1],a=e[1][2],s=e[2][0],l=e[2][1],u=e[2][2],t*o*u-t*l*a-i*n*u+i*l*r+s*n*a-s*o*r},r.NIFTI1.prototype.getExtensionLocation=function(){return r.NIFTI1.MAGIC_COOKIE+4},r.NIFTI1.prototype.getExtensionSize=function(e){return r.Utils.getIntAt(e,this.getExtensionLocation(),this.littleEndian)},r.NIFTI1.prototype.getExtensionCode=function(e){return r.Utils.getIntAt(e,this.getExtensionLocation()+4,this.littleEndian)},"undefined"!==typeof e&&e.exports&&(e.exports=r.NIFTI1)},function(e,t,n){"use strict";function r(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){a=n>2e3?2e3:n,n-=a;do{i=i+t[r++]|0,o=o+i|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){var o=i,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}var i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=r},function(e,t,n){"use strict";function r(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}var i=n(24),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var s=new i.Buf8(256),l=0;l<256;l++)s[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;s[254]=s[254]=1,t.string2buf=function(e){var t,n,r,o,a,s=e.length,l=0;for(o=0;o<s;o++)n=e.charCodeAt(o),55296===(64512&n)&&o+1<s&&56320===(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new i.Buf8(l),a=0,o=0;a<l;o++)n=e.charCodeAt(o),55296===(64512&n)&&o+1<s&&56320===(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},t.buf2binstring=function(e){return r(e,e.length)},t.binstring2buf=function(e){for(var t=new i.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,i,o,a,l=t||e.length,u=new Array(2*l);for(i=0,n=0;n<l;)if((o=e[n++])<128)u[i++]=o;else if((a=s[o])>4)u[i++]=65533,n+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&n<l;)o=o<<6|63&e[n++],a--;a>1?u[i++]=65533:o<65536?u[i++]=o:(o-=65536,u[i++]=55296|o>>10&1023,u[i++]=56320|1023&o)}return r(u,i)},t.utf8border=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&128===(192&e[n]);)n--;return n<0?t:0===n?t:n+s[e[n]]>t?n:t}},function(e,t,n){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=r},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){"use strict";function r(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){a=n>2e3?2e3:n,n-=a;do{i=i+t[r++]|0,o=o+i|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){var o=i,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}var i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=r},function(e,t,n){"use strict";function r(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}var i=n(25),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var s=new i.Buf8(256),l=0;l<256;l++)s[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;s[254]=s[254]=1,t.string2buf=function(e){var t,n,r,o,a,s=e.length,l=0;for(o=0;o<s;o++)n=e.charCodeAt(o),55296===(64512&n)&&o+1<s&&56320===(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new i.Buf8(l),a=0,o=0;a<l;o++)n=e.charCodeAt(o),55296===(64512&n)&&o+1<s&&56320===(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},t.buf2binstring=function(e){return r(e,e.length)},t.binstring2buf=function(e){for(var t=new i.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,i,o,a,l=t||e.length,u=new Array(2*l);for(i=0,n=0;n<l;)if((o=e[n++])<128)u[i++]=o;else if((a=s[o])>4)u[i++]=65533,n+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&n<l;)o=o<<6|63&e[n++],a--;a>1?u[i++]=65533:o<65536?u[i++]=o:(o-=65536,u[i++]=55296|o>>10&1023,u[i++]=56320|1023&o)}return r(u,i)},t.utf8border=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&128===(192&e[n]);)n--;return n<0?t:0===n?t:n+s[e[n]]>t?n:t}},function(e,t,n){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=r},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return c});var a=n(118),s=n(107),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.THREE;if(void 0===e||void 0===e.Object3D)return null;var t=Object(a.a)(e);return function(t){function n(t,o){r(this,n);var a=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,o));return a._widgetType="Handle",a._plane={position:new e.Vector3,direction:new e.Vector3},a._offset=new e.Vector3,a._raycaster=new e.Raycaster,a._active=!1,a._hovered=!1,a._tracking=!1,a._mouse=new e.Vector2,a._initialized=!1,a._material=null,a._geometry=null,a._mesh=null,a._meshDisplayed=!0,a._meshHovered=!1,a._meshStyle="sphere",a._dom=null,a._domDisplayed=!0,a._domHovered=!1,a._domStyle="circle",a._screenPosition=a.worldToScreen(a._worldPosition),a.create(),a.initOffsets(),a.onResize=a.onResize.bind(a),a.onMove=a.onMove.bind(a),a.onHover=a.onHover.bind(a),a.addEventListeners(),a}return o(n,t),l(n,[{key:"addEventListeners",value:function(){window.addEventListener("resize",this.onResize),this._dom.addEventListener("mouseenter",this.onHover),this._dom.addEventListener("mouseleave",this.onHover),this._container.addEventListener("wheel",this.onMove)}},{key:"removeEventListeners",value:function(){window.removeEventListener("resize",this.onResize),this._dom.removeEventListener("mouseenter",this.onHover),this._dom.removeEventListener("mouseleave",this.onHover),this._container.removeEventListener("wheel",this.onMove)}},{key:"onResize",value:function(){this.initOffsets()}},{key:"onHover",value:function(e){e&&this.hoverDom(e),this.hoverMesh(),this._hovered=this._meshHovered||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default"}},{key:"hoverMesh",value:function(){var e=this._raycaster.intersectObject(this._mesh);this._meshHovered=e.length>0}},{key:"hoverDom",value:function(e){this._domHovered="mouseenter"===e.type}},{key:"onStart",value:function(e){var t=this.getMouseOffsets(e,this._container);if(this._mouse.set(t.x,t.y),this._raycaster.setFromCamera(this._mouse,this._camera),this._raycaster.ray.position=this._raycaster.ray.origin,this._hovered){if(this._active=!0,this._controls.enabled=!1,this._targetMesh){var n=this._raycaster.intersectObject(this._targetMesh);n.length>0&&this._offset.copy(n[0].point).sub(this._worldPosition)}else{this._plane.position.copy(this._worldPosition),this._plane.direction.copy(this._camera.getWorldDirection());var r=s.a.rayPlane(this._raycaster.ray,this._plane);null!==r&&this._offset.copy(r).sub(this._plane.position)}this.update()}}},{key:"onMove",value:function(e,t){var n=this.getMouseOffsets(e,this._container);if(this._mouse.set(n.x,n.y),this._raycaster.setFromCamera(this._mouse,this._camera),this._raycaster.ray.position=this._raycaster.ray.origin,this._active||t)if(this._dragged=!0,null!==this._targetMesh){var r=this._raycaster.intersectObject(this._targetMesh);r.length>0&&this._worldPosition.copy(r[0].point.sub(this._offset))}else{0===this._plane.direction.length()&&(this._plane.position.copy(this._worldPosition),this._plane.direction.copy(this._camera.getWorldDirection()));var i=s.a.rayPlane(this._raycaster.ray,this._plane);null!==i&&this._worldPosition.copy(i.sub(this._offset))}else this.onHover(null);this.update()}},{key:"onEnd",value:function(){!0!==this._tracking&&(!this._dragged&&this._active&&this._initialized&&(this._selected=!this._selected),this._initialized=!0,this._active=!1,this._dragged=!1,this._controls.enabled=!0,this.update())}},{key:"create",value:function(){this.createMesh(),this.createDOM()}},{key:"createMesh",value:function(){this._geometry=new e.SphereGeometry(1,16,16),this._material=new e.MeshBasicMaterial({wireframe:!0,wireframeLinewidth:2}),this.updateMeshColor(),this._mesh=new e.Mesh(this._geometry,this._material),this._mesh.position.copy(this._worldPosition),this._mesh.visible=!0,this.add(this._mesh)}},{key:"createDOM",value:function(){this._dom=document.createElement("div"),this._dom.setAttribute("class","widgets-handle"),this._dom.style.transform="translate3D(\n      "+this._screenPosition.x+"px,\n      "+(this._screenPosition.y-this._container.offsetHeight)+"px, 0)",this.updateDOMColor(),this._container.appendChild(this._dom)}},{key:"update",value:function(){this.updateColor(),this._screenPosition=this.worldToScreen(this._worldPosition),this.updateMeshColor(),this.updateMeshPosition(),this.updateDOMColor(),this.updateDOMPosition()}},{key:"updateMeshColor",value:function(){this._material&&this._material.color.set(this._color)}},{key:"updateMeshPosition",value:function(){this._mesh&&this._mesh.position.copy(this._worldPosition)}},{key:"updateDOMPosition",value:function(){this._dom&&(this._dom.style.transform="translate3D("+this._screenPosition.x+"px,\n        "+(this._screenPosition.y-this._container.offsetHeight)+"px, 0)")}},{key:"updateDOMColor",value:function(){this._dom.style.borderColor=this._color}},{key:"free",value:function(){this.removeEventListeners(),this._container.removeChild(this._dom),this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,u(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"free",this).call(this)}},{key:"hideDOM",value:function(){this._dom.style.display="none"}},{key:"showDOM",value:function(){this._dom.style.display=""}},{key:"screenPosition",get:function(){return this._screenPosition},set:function(e){this._screenPosition=e}},{key:"active",get:function(){return this._active},set:function(e){this._active=e,this._controls.enabled=!this._active,this.update()}},{key:"tracking",get:function(){return this._tracking},set:function(e){this._tracking=e,this.update()}}]),n}(t)};c()},function(e,t,n){n(203),e.exports=n(208)},function(e,t,n){"use strict";"undefined"===typeof Promise&&(n(204).enable(),window.Promise=n(206)),n(207),Object.assign=n(77)},function(e,t,n){"use strict";function r(){u=!1,s._47=null,s._71=null}function i(e){function t(t){(e.allRejections||a(h[t].error,e.whitelist||l))&&(h[t].displayId=c++,e.onUnhandled?(h[t].logged=!0,e.onUnhandled(h[t].displayId,h[t].error)):(h[t].logged=!0,o(h[t].displayId,h[t].error)))}function n(t){h[t].logged&&(e.onHandled?e.onHandled(h[t].displayId,h[t].error):h[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+h[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+h[t].displayId+".")))}e=e||{},u&&r(),u=!0;var i=0,c=0,h={};s._47=function(e){2===e._83&&h[e._56]&&(h[e._56].logged?n(e._56):clearTimeout(h[e._56].timeout),delete h[e._56])},s._71=function(e,n){0===e._75&&(e._56=i++,h[e._56]={displayId:null,error:n,timeout:setTimeout(t.bind(null,e._56),a(n,l)?100:2e3),logged:!1})}}function o(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach(function(e){console.warn("  "+e)})}function a(e,t){return t.some(function(t){return e instanceof t})}var s=n(119),l=[ReferenceError,TypeError,RangeError],u=!1;t.disable=r,t.enable=i},function(e,t,n){"use strict";(function(t){function n(e){a.length||(o(),s=!0),a[a.length]=e}function r(){for(;l<a.length;){var e=l;if(l+=1,a[e].call(),l>u){for(var t=0,n=a.length-l;t<n;t++)a[t]=a[t+l];a.length-=l,l=0}}a.length=0,l=0,s=!1}function i(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var o,a=[],s=!1,l=0,u=1024,c="undefined"!==typeof t?t:self,h=c.MutationObserver||c.WebKitMutationObserver;o="function"===typeof h?function(e){var t=1,n=new h(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(r):i(r),n.requestFlush=o,n.makeRequestCallFromTimer=i}).call(t,n(14))},function(e,t,n){"use strict";function r(e){var t=new i(i._44);return t._83=1,t._18=e,t}var i=n(119);e.exports=i;var o=r(!0),a=r(!1),s=r(null),l=r(void 0),u=r(0),c=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return l;if(!0===e)return o;if(!1===e)return a;if(0===e)return u;if(""===e)return c;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,n){n(e)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(a,s){if(s&&("object"===typeof s||"function"===typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._83;)s=s._18;return 1===s._83?r(a,s._18):(2===s._83&&n(s._18),void s.then(function(e){r(a,e)},n))}var l=s.then;if("function"===typeof l){return void new i(l.bind(s)).then(function(e){r(a,e)},n)}}t[a]=s,0===--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,a=0;a<t.length;a++)r(a,t[a])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t){!function(e){"use strict";function t(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!==typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return g.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function l(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function u(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"===typeof e)this._bodyText=e;else if(g.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(g.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(g.arrayBuffer&&g.blob&&_(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!b(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(u(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(e){var t=e.toUpperCase();return w.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var n=t.body;if(e instanceof f){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=d(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function m(e){var t=new i;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function v(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var g={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(g.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=function(e){return e&&DataView.prototype.isPrototypeOf(e)},b=ArrayBuffer.isView||function(e){return e&&y.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];this.map[e]=i?i+","+r:r},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=n(r)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},g.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this,{body:this._bodyInit})},h.call(f.prototype),h.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];v.redirect=function(e,t){if(-1===x.indexOf(t))throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=f,e.Response=v,e.fetch=function(e,t){return new Promise(function(n,r){var i=new f(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:m(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new v(t,e))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&g.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"===typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n.n(r),o=n(18),a=n.n(o),s=n(216);a.a.render(i.a.createElement(s.a,null),document.getElementById("root"))},function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);y(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function i(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||I}function o(){}function a(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||I}function s(e,t,n){var r=void 0,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)D.call(t,r)&&!N.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:x,type:e,key:o,ref:a,props:i,_owner:L.current}}function l(e){return"object"===typeof e&&null!==e&&e.$$typeof===x}function u(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function c(e,t,n,r){if(U.length){var i=U.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function h(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>U.length&&U.push(e)}function d(e,t,n,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case x:case E:a=!0}}if(a)return n(i,e,""===t?"."+f(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){o=e[s];var l=t+f(o,s);a+=d(o,l,n,i)}else if(null===e||"undefined"===typeof e?l=null:(l=O&&e[O]||e["@@iterator"],l="function"===typeof l?l:null),"function"===typeof l)for(e=l.call(e),s=0;!(o=e.next()).done;)o=o.value,l=t+f(o,s++),a+=d(o,l,n,i);else"object"===o&&(n=""+e,r("31","[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function f(e,t){return"object"===typeof e&&null!==e&&null!=e.key?u(e.key):t.toString(36)}function p(e,t){e.func.call(e.context,t,e.count++)}function m(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?v(e,r,n,b.thatReturnsArgument):null!=e&&(l(e)&&(t=i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(F,"$&/")+"/")+n,e={$$typeof:x,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}),r.push(e))}function v(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(F,"$&/")+"/"),t=c(t,o,r,i),null==e||d(e,"",m,t),h(t)}var g=n(77),y=n(120),_=n(121),b=n(122),w="function"===typeof Symbol&&Symbol.for,x=w?Symbol.for("react.element"):60103,E=w?Symbol.for("react.portal"):60106,S=w?Symbol.for("react.fragment"):60107,T=w?Symbol.for("react.strict_mode"):60108,M=w?Symbol.for("react.profiler"):60114,k=w?Symbol.for("react.provider"):60109,P=w?Symbol.for("react.context"):60110,C=w?Symbol.for("react.async_mode"):60111,A=w?Symbol.for("react.forward_ref"):60112;w&&Symbol.for("react.timeout");var O="function"===typeof Symbol&&Symbol.iterator,I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};i.prototype.isReactComponent={},i.prototype.setState=function(e,t){"object"!==typeof e&&"function"!==typeof e&&null!=e&&r("85"),this.updater.enqueueSetState(this,e,t,"setState")},i.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},o.prototype=i.prototype;var R=a.prototype=new o;R.constructor=a,g(R,i.prototype),R.isPureReactComponent=!0;var L={current:null},D=Object.prototype.hasOwnProperty,N={key:!0,ref:!0,__self:!0,__source:!0},F=/\/+/g,U=[],z={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return v(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;t=c(null,null,t,n),null==e||d(e,"",p,t),h(t)},count:function(e){return null==e?0:d(e,"",b.thatReturnsNull,null)},toArray:function(e){var t=[];return v(e,t,null,b.thatReturnsArgument),t},only:function(e){return l(e)||r("143"),e}},createRef:function(){return{current:null}},Component:i,PureComponent:a,createContext:function(e,t){return void 0===t&&(t=null),e={$$typeof:P,_calculateChangedBits:t,_defaultValue:e,_currentValue:e,_currentValue2:e,_changedBits:0,_changedBits2:0,Provider:null,Consumer:null},e.Provider={$$typeof:k,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:A,render:e}},Fragment:S,StrictMode:T,unstable_AsyncMode:C,unstable_Profiler:M,createElement:s,cloneElement:function(e,t,n){(null===e||void 0===e)&&r("267",e);var i=void 0,o=g({},e.props),a=e.key,s=e.ref,l=e._owner;if(null!=t){void 0!==t.ref&&(s=t.ref,l=L.current),void 0!==t.key&&(a=""+t.key);var u=void 0;e.type&&e.type.defaultProps&&(u=e.type.defaultProps);for(i in t)D.call(t,i)&&!N.hasOwnProperty(i)&&(o[i]=void 0===t[i]&&void 0!==u?u[i]:t[i])}if(1===(i=arguments.length-2))o.children=n;else if(1<i){u=Array(i);for(var c=0;c<i;c++)u[c]=arguments[c+2];o.children=u}return{$$typeof:x,type:e.type,key:a,ref:s,props:o,_owner:l}},createFactory:function(e){var t=s.bind(null,e);return t.type=e,t},isValidElement:l,version:"16.4.1",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:L,assign:g}},B={default:z},j=B&&z||B;e.exports=j.default?j.default:j},function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);Lr(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function i(e,t,n,r,i,o,a,s,l){this._hasCaughtError=!1,this._caughtError=null;var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this._caughtError=e,this._hasCaughtError=!0}}function o(){if(Vr._hasRethrowError){var e=Vr._rethrowError;throw Vr._rethrowError=null,Vr._hasRethrowError=!1,e}}function a(){if(Gr)for(var e in Wr){var t=Wr[e],n=Gr.indexOf(e);if(-1<n||r("96",e),!qr[n]){t.extractEvents||r("97",e),qr[n]=t,n=t.eventTypes;for(var i in n){var o=void 0,a=n[i],l=t,u=i;Xr.hasOwnProperty(u)&&r("99",u),Xr[u]=a;var c=a.phasedRegistrationNames;if(c){for(o in c)c.hasOwnProperty(o)&&s(c[o],l,u);o=!0}else a.registrationName?(s(a.registrationName,l,u),o=!0):o=!1;o||r("98",i,e)}}}}function s(e,t,n){Yr[e]&&r("100",e),Yr[e]=t,Zr[e]=t.eventTypes[n].dependencies}function l(e){Gr&&r("101"),Gr=Array.prototype.slice.call(e),a()}function u(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var i=e[t];Wr.hasOwnProperty(t)&&Wr[t]===i||(Wr[t]&&r("102",t),Wr[t]=i,n=!0)}n&&a()}function c(e,t,n,r){t=e.type||"unknown-event",e.currentTarget=$r(r),Vr.invokeGuardedCallbackAndCatchFirstError(t,n,void 0,e),e.currentTarget=null}function h(e,t){return null==t&&r("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function d(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}function f(e,t){if(e){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)c(e,t,n[i],r[i]);else n&&c(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function p(e){return f(e,!0)}function m(e){return f(e,!1)}function v(e,t){var n=e.stateNode;if(!n)return null;var i=Kr(n);if(!i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(i=!i.disabled)||(e=e.type,i=!("button"===e||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}return e?null:(n&&"function"!==typeof n&&r("231",t,typeof n),n)}function g(e,t){null!==e&&(ei=h(ei,e)),e=ei,ei=null,e&&(t?d(e,p):d(e,m),ei&&r("95"),Vr.rethrowCaughtError())}function y(e,t,n,r){for(var i=null,o=0;o<qr.length;o++){var a=qr[o];a&&(a=a.extractEvents(e,t,n,r))&&(i=h(i,a))}g(i,!1)}function _(e){if(e[ii])return e[ii];for(;!e[ii];){if(!e.parentNode)return null;e=e.parentNode}return e=e[ii],5===e.tag||6===e.tag?e:null}function b(e){if(5===e.tag||6===e.tag)return e.stateNode;r("33")}function w(e){return e[oi]||null}function x(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function E(e,t,n){for(var r=[];e;)r.push(e),e=x(e);for(e=r.length;0<e--;)t(r[e],"captured",n);for(e=0;e<r.length;e++)t(r[e],"bubbled",n)}function S(e,t,n){(t=v(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=h(n._dispatchListeners,t),n._dispatchInstances=h(n._dispatchInstances,e))}function T(e){e&&e.dispatchConfig.phasedRegistrationNames&&E(e._targetInst,S,e)}function M(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;t=t?x(t):null,E(t,S,e)}}function k(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=v(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=h(n._dispatchListeners,t),n._dispatchInstances=h(n._dispatchInstances,e))}function P(e){e&&e.dispatchConfig.registrationName&&k(e._targetInst,null,e)}function C(e){d(e,T)}function A(e,t,n,r){if(n&&r)e:{for(var i=n,o=r,a=0,s=i;s;s=x(s))a++;s=0;for(var l=o;l;l=x(l))s++;for(;0<a-s;)i=x(i),a--;for(;0<s-a;)o=x(o),s--;for(;a--;){if(i===o||i===o.alternate)break e;i=x(i),o=x(o)}i=null}else i=null;for(o=i,i=[];n&&n!==o&&(null===(a=n.alternate)||a!==o);)i.push(n),n=x(n);for(n=[];r&&r!==o&&(null===(a=r.alternate)||a!==o);)n.push(r),r=x(r);for(r=0;r<i.length;r++)k(i[r],"bubbled",e);for(e=n.length;0<e--;)k(n[e],"captured",t)}function O(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function I(e){if(ui[e])return ui[e];if(!li[e])return e;var t,n=li[e];for(t in n)if(n.hasOwnProperty(t)&&t in ci)return ui[e]=n[t];return e}function R(){return!vi&&Nr.canUseDOM&&(vi="textContent"in document.documentElement?"textContent":"innerText"),vi}function L(){if(gi._fallbackText)return gi._fallbackText;var e,t,n=gi._startText,r=n.length,i=D(),o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return gi._fallbackText=i.slice(e,1<t?1-t:void 0),gi._fallbackText}function D(){return"value"in gi._root?gi._root.value:gi._root[R()]}function N(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface;for(var i in e)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Ur.thatReturnsTrue:Ur.thatReturnsFalse,this.isPropagationStopped=Ur.thatReturnsFalse,this}function F(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function U(e){e instanceof this||r("223"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function z(e){e.eventPool=[],e.getPooled=F,e.release=U}function B(e,t){switch(e){case"keyup":return-1!==xi.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function j(e){return e=e.detail,"object"===typeof e&&"data"in e?e.data:null}function H(e,t){switch(e){case"compositionend":return j(t);case"keypress":return 32!==t.which?null:(Ci=!0,ki);case"textInput":return e=t.data,e===ki&&Ci?null:e;default:return null}}function V(e,t){if(Ai)return"compositionend"===e||!Ei&&B(e,t)?(e=L(),gi._root=null,gi._startText=null,gi._fallbackText=null,Ai=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mi?null:t.data;default:return null}}function G(e){if(e=Qr(e)){Ii&&"function"===typeof Ii.restoreControlledState||r("194");var t=Kr(e.stateNode);Ii.restoreControlledState(e.stateNode,e.type,t)}}function W(e){Li?Di?Di.push(e):Di=[e]:Li=e}function q(){return null!==Li||null!==Di}function X(){if(Li){var e=Li,t=Di;if(Di=Li=null,G(e),t)for(e=0;e<t.length;e++)G(t[e])}}function Y(e,t){return e(t)}function Z(e,t,n){return e(t,n)}function J(){}function K(e,t){if(Fi)return e(t);Fi=!0;try{return Y(e,t)}finally{Fi=!1,q()&&(J(),X())}}function Q(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ui[e.type]:"textarea"===t}function $(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ee(e,t){return!(!Nr.canUseDOM||t&&!("addEventListener"in document))&&(e="on"+e,t=e in document,t||(t=document.createElement("div"),t.setAttribute(e,"return;"),t="function"===typeof t[e]),t)}function te(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ne(e){var t=te(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function re(e){e._valueTracker||(e._valueTracker=ne(e))}function ie(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=te(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function oe(e){return null===e||"undefined"===typeof e?null:(e=Ki&&e[Ki]||e["@@iterator"],"function"===typeof e?e:null)}function ae(e){var t=e.type;if("function"===typeof t)return t.displayName||t.name;if("string"===typeof t)return t;switch(t){case Yi:return"AsyncMode";case Xi:return"Context.Consumer";case Vi:return"ReactFragment";case Hi:return"ReactPortal";case Wi:return"Profiler("+e.pendingProps.id+")";case qi:return"Context.Provider";case Gi:return"StrictMode";case Ji:return"Timeout"}if("object"===typeof t&&null!==t)switch(t.$$typeof){case Zi:return e=t.render.displayName||t.render.name||"",""!==e?"ForwardRef("+e+")":"ForwardRef"}return null}function se(e){var t="";do{e:switch(e.tag){case 0:case 1:case 2:case 5:var n=e._debugOwner,r=e._debugSource,i=ae(e),o=null;n&&(o=ae(n)),n=r,i="\n    in "+(i||"Unknown")+(n?" (at "+n.fileName.replace(/^.*[\\\/]/,"")+":"+n.lineNumber+")":o?" (created by "+o+")":"");break e;default:i=""}t+=i,e=e.return}while(e);return t}function le(e){return!!eo.hasOwnProperty(e)||!$i.hasOwnProperty(e)&&(Qi.test(e)?eo[e]=!0:($i[e]=!0,!1))}function ue(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}function ce(e,t,n,r){if(null===t||"undefined"===typeof t||ue(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function he(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}function de(e){return e[1].toUpperCase()}function fe(e,t,n,r){var i=to.hasOwnProperty(t)?to[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(ce(t,n,i,r)&&(n=null),r||null===i?le(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(i=i.type,n=3===i||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function pe(e,t){var n=t.checked;return Fr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function me(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=be(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function ve(e,t){null!=(t=t.checked)&&fe(e,"checked",t,!1)}function ge(e,t){ve(e,t);var n=be(t.value);null!=n&&("number"===t.type?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n)),t.hasOwnProperty("value")?_e(e,t.type,n):t.hasOwnProperty("defaultValue")&&_e(e,t.type,be(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ye(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){t=""+e._wrapperState.initialValue;var r=e.value;n||t===r||(e.value=t),e.defaultValue=t}n=e.name,""!==n&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!e.defaultChecked,""!==n&&(e.name=n)}function _e(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function be(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function we(e,t,n){return e=N.getPooled(ro.change,e,t,n),e.type="change",W(n),C(e),e}function xe(e){g(e,!1)}function Ee(e){if(ie(b(e)))return e}function Se(e,t){if("change"===e)return t}function Te(){io&&(io.detachEvent("onpropertychange",Me),oo=io=null)}function Me(e){"value"===e.propertyName&&Ee(oo)&&(e=we(oo,e,$(e)),K(xe,e))}function ke(e,t,n){"focus"===e?(Te(),io=t,oo=n,io.attachEvent("onpropertychange",Me)):"blur"===e&&Te()}function Pe(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ee(oo)}function Ce(e,t){if("click"===e)return Ee(t)}function Ae(e,t){if("input"===e||"change"===e)return Ee(t)}function Oe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=uo[e])&&!!t[e]}function Ie(){return Oe}function Re(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!==(2&t.effectTag))return 1;for(;t.return;)if(t=t.return,0!==(2&t.effectTag))return 1}return 3===t.tag?2:3}function Le(e){2!==Re(e)&&r("188")}function De(e){var t=e.alternate;if(!t)return t=Re(e),3===t&&r("188"),1===t?null:e;for(var n=e,i=t;;){var o=n.return,a=o?o.alternate:null;if(!o||!a)break;if(o.child===a.child){for(var s=o.child;s;){if(s===n)return Le(o),e;if(s===i)return Le(o),t;s=s.sibling}r("188")}if(n.return!==i.return)n=o,i=a;else{s=!1;for(var l=o.child;l;){if(l===n){s=!0,n=o,i=a;break}if(l===i){s=!0,i=o,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,i=o;break}if(l===i){s=!0,i=a,n=o;break}l=l.sibling}s||r("189")}}n.alternate!==i&&r("190")}return 3!==n.tag&&r("188"),n.stateNode.current===n?e:t}function Ne(e){if(!(e=De(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Fe(e){if(!(e=De(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child&&4!==t.tag)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ue(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ze(e,t){var n=e[0];e=e[1];var r="on"+(e[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},Mo[e]=t,ko[n]=t}function Be(e){var t=e.targetInst;do{if(!t){e.ancestors.push(t);break}var n;for(n=t;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;e.ancestors.push(t),t=_(n)}while(t);for(n=0;n<e.ancestors.length;n++)t=e.ancestors[n],y(e.topLevelType,t,e.nativeEvent,$(e.nativeEvent))}function je(e){Oo=!!e}function He(e,t){if(!t)return null;var n=(Co(e)?Ge:We).bind(null,e);t.addEventListener(e,n,!1)}function Ve(e,t){if(!t)return null;var n=(Co(e)?Ge:We).bind(null,e);t.addEventListener(e,n,!0)}function Ge(e,t){Z(We,e,t)}function We(e,t){if(Oo){var n=$(t);if(n=_(n),null===n||"number"!==typeof n.tag||2===Re(n)||(n=null),Ao.length){var r=Ao.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{K(Be,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>Ao.length&&Ao.push(e)}}}function qe(e){return Object.prototype.hasOwnProperty.call(e,Do)||(e[Do]=Lo++,Ro[e[Do]]={}),Ro[e[Do]]}function Xe(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ye(e,t){var n=Xe(e);e=0;for(var r;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xe(n)}}function Ze(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Je(e,t){if(jo||null==Uo||Uo!==zr())return null;var n=Uo;return"selectionStart"in n&&Ze(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?(n=window.getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}):n=void 0,Bo&&Br(Bo,n)?null:(Bo=n,e=N.getPooled(Fo.select,zo,e,t),e.type="select",e.target=Uo,C(e),e)}function Ke(e){var t="";return Dr.Children.forEach(e,function(e){null==e||"string"!==typeof e&&"number"!==typeof e||(t+=e)}),t}function Qe(e,t){return e=Fr({children:void 0},t),(t=Ke(t.children))&&(e.children=t),e}function $e(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+n,t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function et(e,t){var n=t.value;e._wrapperState={initialValue:null!=n?n:t.defaultValue,wasMultiple:!!t.multiple}}function tt(e,t){return null!=t.dangerouslySetInnerHTML&&r("91"),Fr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nt(e,t){var n=t.value;null==n&&(n=t.defaultValue,t=t.children,null!=t&&(null!=n&&r("92"),Array.isArray(t)&&(1>=t.length||r("93"),t=t[0]),n=""+t),null==n&&(n="")),e._wrapperState={initialValue:""+n}}function rt(e,t){var n=t.value;null!=n&&(n=""+n,n!==e.value&&(e.value=n),null==t.defaultValue&&(e.defaultValue=n)),null!=t.defaultValue&&(e.defaultValue=t.defaultValue)}function it(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}function ot(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function at(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ot(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}function st(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function lt(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=n,o=t[n];i=null==o||"boolean"===typeof o||""===o?"":r||"number"!==typeof o||0===o||pa.hasOwnProperty(i)&&pa[i]?(""+o).trim():o+"px","float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}function ut(e,t,n){t&&(va[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&r("137",e,n()),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&r("60"),"object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||r("61")),null!=t.style&&"object"!==typeof t.style&&r("62",n()))}function ct(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ht(e,t){e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument;var n=qe(e);t=Zr[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":Ve("scroll",e);break;case"focus":case"blur":Ve("focus",e),Ve("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":ee(i,!0)&&Ve(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===mi.indexOf(i)&&He(i,e)}n[i]=!0}}}function dt(e,t,n,r){return n=9===n.nodeType?n:n.ownerDocument,r===ha.html&&(r=ot(e)),r===ha.html?"script"===e?(e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):e="string"===typeof t.is?n.createElement(e,{is:t.is}):n.createElement(e):e=n.createElementNS(r,e),e}function ft(e,t){return(9===t.nodeType?t:t.ownerDocument).createTextNode(e)}function pt(e,t,n,r){var i=ct(t,n);switch(t){case"iframe":case"object":He("load",e);var o=n;break;case"video":case"audio":for(o=0;o<mi.length;o++)He(mi[o],e);o=n;break;case"source":He("error",e),o=n;break;case"img":case"image":case"link":He("error",e),He("load",e),o=n;break;case"form":He("reset",e),He("submit",e),o=n;break;case"details":He("toggle",e),o=n;break;case"input":me(e,n),o=pe(e,n),He("invalid",e),ht(r,"onChange");break;case"option":o=Qe(e,n);break;case"select":et(e,n),o=Fr({},n,{value:void 0}),He("invalid",e),ht(r,"onChange");break;case"textarea":nt(e,n),o=tt(e,n),He("invalid",e),ht(r,"onChange");break;default:o=n}ut(t,o,ga);var a,s=o;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];"style"===a?lt(e,l,ga):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&fa(e,l):"children"===a?"string"===typeof l?("textarea"!==t||""!==l)&&st(e,l):"number"===typeof l&&st(e,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(Yr.hasOwnProperty(a)?null!=l&&ht(r,a):null!=l&&fe(e,a,l,i))}switch(t){case"input":re(e),ye(e,n,!1);break;case"textarea":re(e),it(e,n);break;case"option":null!=n.value&&e.setAttribute("value",n.value);break;case"select":e.multiple=!!n.multiple,t=n.value,null!=t?$e(e,!!n.multiple,t,!1):null!=n.defaultValue&&$e(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Ur)}}function mt(e,t,n,r,i){var o=null;switch(t){case"input":n=pe(e,n),r=pe(e,r),o=[];break;case"option":n=Qe(e,n),r=Qe(e,r),o=[];break;case"select":n=Fr({},n,{value:void 0}),r=Fr({},r,{value:void 0}),o=[];break;case"textarea":n=tt(e,n),r=tt(e,r),o=[];break;default:"function"!==typeof n.onClick&&"function"===typeof r.onClick&&(e.onclick=Ur)}ut(t,r,ga),t=e=void 0;var a=null;for(e in n)if(!r.hasOwnProperty(e)&&n.hasOwnProperty(e)&&null!=n[e])if("style"===e){var s=n[e];for(t in s)s.hasOwnProperty(t)&&(a||(a={}),a[t]="")}else"dangerouslySetInnerHTML"!==e&&"children"!==e&&"suppressContentEditableWarning"!==e&&"suppressHydrationWarning"!==e&&"autoFocus"!==e&&(Yr.hasOwnProperty(e)?o||(o=[]):(o=o||[]).push(e,null));for(e in r){var l=r[e];if(s=null!=n?n[e]:void 0,r.hasOwnProperty(e)&&l!==s&&(null!=l||null!=s))if("style"===e)if(s){for(t in s)!s.hasOwnProperty(t)||l&&l.hasOwnProperty(t)||(a||(a={}),a[t]="");for(t in l)l.hasOwnProperty(t)&&s[t]!==l[t]&&(a||(a={}),a[t]=l[t])}else a||(o||(o=[]),o.push(e,a)),a=l;else"dangerouslySetInnerHTML"===e?(l=l?l.__html:void 0,s=s?s.__html:void 0,null!=l&&s!==l&&(o=o||[]).push(e,""+l)):"children"===e?s===l||"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(e,""+l):"suppressContentEditableWarning"!==e&&"suppressHydrationWarning"!==e&&(Yr.hasOwnProperty(e)?(null!=l&&ht(i,e),o||s===l||(o=[])):(o=o||[]).push(e,l))}return a&&(o=o||[]).push("style",a),o}function vt(e,t,n,r,i){"input"===n&&"radio"===i.type&&null!=i.name&&ve(e,i),ct(n,r),r=ct(n,i);for(var o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];"style"===a?lt(e,s,ga):"dangerouslySetInnerHTML"===a?fa(e,s):"children"===a?st(e,s):fe(e,a,s,r)}switch(n){case"input":ge(e,i);break;case"textarea":rt(e,i);break;case"select":e._wrapperState.initialValue=void 0,t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,n=i.value,null!=n?$e(e,!!i.multiple,n,!1):t!==!!i.multiple&&(null!=i.defaultValue?$e(e,!!i.multiple,i.defaultValue,!0):$e(e,!!i.multiple,i.multiple?[]:"",!1))}}function gt(e,t,n,r,i){switch(t){case"iframe":case"object":He("load",e);break;case"video":case"audio":for(r=0;r<mi.length;r++)He(mi[r],e);break;case"source":He("error",e);break;case"img":case"image":case"link":He("error",e),He("load",e);break;case"form":He("reset",e),He("submit",e);break;case"details":He("toggle",e);break;case"input":me(e,n),He("invalid",e),ht(i,"onChange");break;case"select":et(e,n),He("invalid",e),ht(i,"onChange");break;case"textarea":nt(e,n),He("invalid",e),ht(i,"onChange")}ut(t,n,ga),r=null;for(var o in n)if(n.hasOwnProperty(o)){var a=n[o];"children"===o?"string"===typeof a?e.textContent!==a&&(r=["children",a]):"number"===typeof a&&e.textContent!==""+a&&(r=["children",""+a]):Yr.hasOwnProperty(o)&&null!=a&&ht(i,o)}switch(t){case"input":re(e),ye(e,n,!0);break;case"textarea":re(e),it(e,n);break;case"select":case"option":break;default:"function"===typeof n.onClick&&(e.onclick=Ur)}return r}function yt(e,t){return e.nodeValue!==t}function _t(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function bt(e,t){return"textarea"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&"string"===typeof t.dangerouslySetInnerHTML.__html}function wt(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function xt(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function Et(e){return{current:e}}function St(e){0>Ta||(e.current=Sa[Ta],Sa[Ta]=null,Ta--)}function Tt(e,t){Ta++,Sa[Ta]=e.current,e.current=t}function Mt(e){return Pt(e)?Pa:Ma.current}function kt(e,t){var n=e.type.contextTypes;if(!n)return Hr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Pt(e){return 2===e.tag&&null!=e.type.childContextTypes}function Ct(e){Pt(e)&&(St(ka,e),St(Ma,e))}function At(e){St(ka,e),St(Ma,e)}function Ot(e,t,n){Ma.current!==Hr&&r("168"),Tt(Ma,t,e),Tt(ka,n,e)}function It(e,t){var n=e.stateNode,i=e.type.childContextTypes;if("function"!==typeof n.getChildContext)return t;n=n.getChildContext();for(var o in n)o in i||r("108",ae(e)||"Unknown",o);return Fr({},t,n)}function Rt(e){if(!Pt(e))return!1;var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Hr,Pa=Ma.current,Tt(Ma,t,e),Tt(ka,ka.current,e),!0}function Lt(e,t){var n=e.stateNode;if(n||r("169"),t){var i=It(e,Pa);n.__reactInternalMemoizedMergedChildContext=i,St(ka,e),St(Ma,e),Tt(Ma,i,e)}else St(ka,e);Tt(ka,t,e)}function Dt(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=null,this.index=0,this.ref=null,this.pendingProps=t,this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function Nt(e,t,n){var r=e.alternate;return null===r?(r=new Dt(e.tag,t,e.key,e.mode),r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.expirationTime=n,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ft(e,t,n){var i=e.type,o=e.key;if(e=e.props,"function"===typeof i)var a=i.prototype&&i.prototype.isReactComponent?2:0;else if("string"===typeof i)a=5;else switch(i){case Vi:return Ut(e.children,t,n,o);case Yi:a=11,t|=3;break;case Gi:a=11,t|=2;break;case Wi:return i=new Dt(15,e,o,4|t),i.type=Wi,i.expirationTime=n,i;case Ji:a=16,t|=2;break;default:e:{switch("object"===typeof i&&null!==i?i.$$typeof:null){case qi:a=13;break e;case Xi:a=12;break e;case Zi:a=14;break e;default:r("130",null==i?i:typeof i,"")}a=void 0}}return t=new Dt(a,e,o,t),t.type=i,t.expirationTime=n,t}function Ut(e,t,n,r){return e=new Dt(10,e,r,t),e.expirationTime=n,e}function zt(e,t,n){return e=new Dt(6,e,null,t),e.expirationTime=n,e}function Bt(e,t,n){return t=new Dt(4,null!==e.children?e.children:[],e.key,t),t.expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jt(e,t,n){return t=new Dt(3,null,null,t?3:0),e={current:t,containerInfo:e,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,pendingCommitExpirationTime:0,finishedWork:null,context:null,pendingContext:null,hydrate:n,remainingExpirationTime:0,firstBatch:null,nextScheduledRoot:null},t.stateNode=e}function Ht(e){return function(t){try{return e(t)}catch(e){}}}function Vt(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Ca=Ht(function(e){return t.onCommitFiberRoot(n,e)}),Aa=Ht(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0}function Gt(e){"function"===typeof Ca&&Ca(e)}function Wt(e){"function"===typeof Aa&&Aa(e)}function qt(e){return{expirationTime:0,baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Xt(e){return{expirationTime:e.expirationTime,baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Yt(e){return{expirationTime:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Zt(e,t,n){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t),(0===e.expirationTime||e.expirationTime>n)&&(e.expirationTime=n)}function Jt(e,t,n){var r=e.alternate;if(null===r){var i=e.updateQueue,o=null;null===i&&(i=e.updateQueue=qt(e.memoizedState))}else i=e.updateQueue,o=r.updateQueue,null===i?null===o?(i=e.updateQueue=qt(e.memoizedState),o=r.updateQueue=qt(r.memoizedState)):i=e.updateQueue=Xt(o):null===o&&(o=r.updateQueue=Xt(i));null===o||i===o?Zt(i,t,n):null===i.lastUpdate||null===o.lastUpdate?(Zt(i,t,n),Zt(o,t,n)):(Zt(i,t,n),o.lastUpdate=t)}function Kt(e,t,n){var r=e.updateQueue;r=null===r?e.updateQueue=qt(e.memoizedState):Qt(e,r),null===r.lastCapturedUpdate?r.firstCapturedUpdate=r.lastCapturedUpdate=t:(r.lastCapturedUpdate.next=t,r.lastCapturedUpdate=t),(0===r.expirationTime||r.expirationTime>n)&&(r.expirationTime=n)}function Qt(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=Xt(t)),t}function $t(e,t,n,r,i,o){switch(n.tag){case 1:return e=n.payload,"function"===typeof e?e.call(o,r,i):e;case 3:e.effectTag=-1025&e.effectTag|64;case 0:if(e=n.payload,null===(i="function"===typeof e?e.call(o,r,i):e)||void 0===i)break;return Fr({},r,i);case 2:Oa=!0}return r}function en(e,t,n,r,i){if(Oa=!1,!(0===t.expirationTime||t.expirationTime>i)){t=Qt(e,t);for(var o=t.baseState,a=null,s=0,l=t.firstUpdate,u=o;null!==l;){var c=l.expirationTime;c>i?(null===a&&(a=l,o=u),(0===s||s>c)&&(s=c)):(u=$t(e,t,l,u,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=l:(t.lastEffect.nextEffect=l,t.lastEffect=l))),l=l.next}for(c=null,l=t.firstCapturedUpdate;null!==l;){var h=l.expirationTime;h>i?(null===c&&(c=l,null===a&&(o=u)),(0===s||s>h)&&(s=h)):(u=$t(e,t,l,u,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=l:(t.lastCapturedEffect.nextEffect=l,t.lastCapturedEffect=l))),l=l.next}null===a&&(t.lastUpdate=null),null===c?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===c&&(o=u),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=c,t.expirationTime=s,e.memoizedState=u}}function tn(e,t){"function"!==typeof e&&r("191",e),e.call(t)}function nn(e,t,n){for(null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),e=t.firstEffect,t.firstEffect=t.lastEffect=null;null!==e;){var r=e.callback;null!==r&&(e.callback=null,tn(r,n)),e=e.nextEffect}for(e=t.firstCapturedEffect,t.firstCapturedEffect=t.lastCapturedEffect=null;null!==e;)t=e.callback,null!==t&&(e.callback=null,tn(t,n)),e=e.nextEffect}function rn(e,t){return{value:e,source:t,stack:se(t)}}function on(e){var t=e.type._context;Tt(La,t._changedBits,e),Tt(Ra,t._currentValue,e),Tt(Ia,e,e),t._currentValue=e.pendingProps.value,t._changedBits=e.stateNode}function an(e){var t=La.current,n=Ra.current;St(Ia,e),St(Ra,e),St(La,e),e=e.type._context,e._currentValue=n,e._changedBits=t}function sn(e){return e===Da&&r("174"),e}function ln(e,t){Tt(Ua,t,e),Tt(Fa,e,e),Tt(Na,Da,e);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:at(null,"");break;default:n=8===n?t.parentNode:t,t=n.namespaceURI||null,n=n.tagName,t=at(t,n)}St(Na,e),Tt(Na,t,e)}function un(e){St(Na,e),St(Fa,e),St(Ua,e)}function cn(e){Fa.current===e&&(St(Na,e),St(Fa,e))}function hn(e,t,n){var r=e.memoizedState;t=t(n,r),r=null===t||void 0===t?r:Fr({},r,t),e.memoizedState=r,null!==(e=e.updateQueue)&&0===e.expirationTime&&(e.baseState=r)}function dn(e,t,n,r,i,o){var a=e.stateNode;return e=e.type,"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(n,i,o):!e.prototype||!e.prototype.isPureReactComponent||(!Br(t,n)||!Br(r,i))}function fn(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function pn(e,t){var n=e.type,r=e.stateNode,i=e.pendingProps,o=Mt(e);r.props=i,r.state=e.memoizedState,r.refs=Hr,r.context=kt(e,o),o=e.updateQueue,null!==o&&(en(e,o,i,r,t),r.state=e.memoizedState),o=e.type.getDerivedStateFromProps,"function"===typeof o&&(hn(e,o,i),r.state=e.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(n=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),n!==r.state&&za.enqueueReplaceState(r,r.state,null),null!==(o=e.updateQueue)&&(en(e,o,i,r,t),r.state=e.memoizedState)),"function"===typeof r.componentDidMount&&(e.effectTag|=4)}function mn(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){n=n._owner;var i=void 0;n&&(2!==n.tag&&r("110"),i=n.stateNode),i||r("147",e);var o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs===Hr?i.refs={}:i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}"string"!==typeof e&&r("148"),n._owner||r("254",e)}return e}function vn(e,t){"textarea"!==e.type&&r("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function gn(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t,n){return e=Nt(e,t,n),e.index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index,r<n?(t.effectTag=2,n):r):(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?(t=zt(n,e.mode,r),t.return=e,t):(t=o(t,n,r),t.return=e,t)}function u(e,t,n,r){return null!==t&&t.type===n.type?(r=o(t,n.props,r),r.ref=mn(e,t,n),r.return=e,r):(r=Ft(n,e.mode,r),r.ref=mn(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=Bt(n,e.mode,r),t.return=e,t):(t=o(t,n.children||[],r),t.return=e,t)}function h(e,t,n,r,i){return null===t||10!==t.tag?(t=Ut(n,e.mode,r,i),t.return=e,t):(t=o(t,n,r),t.return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return t=zt(""+t,e.mode,n),t.return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ji:return n=Ft(t,e.mode,n),n.ref=mn(e,null,t),n.return=e,n;case Hi:return t=Bt(t,e.mode,n),t.return=e,t}if(Ba(t)||oe(t))return t=Ut(t,e.mode,n,null),t.return=e,t;vn(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ji:return n.key===i?n.type===Vi?h(e,t,n.props.children,r,i):u(e,t,n,r):null;case Hi:return n.key===i?c(e,t,n,r):null}if(Ba(n)||oe(n))return null!==i?null:h(e,t,n,r,null);vn(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return e=e.get(n)||null,l(t,e,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ji:return e=e.get(null===r.key?n:r.key)||null,r.type===Vi?h(t,e,r.props.children,i,r.key):u(t,e,r,i);case Hi:return e=e.get(null===r.key?n:r.key)||null,c(t,e,r,i)}if(Ba(r)||oe(r))return e=e.get(n)||null,h(t,e,r,i,null);vn(t,r)}return null}function m(r,o,s,l){for(var u=null,c=null,h=o,m=o=0,v=null;null!==h&&m<s.length;m++){h.index>m?(v=h,h=null):v=h.sibling;var g=f(r,h,s[m],l);if(null===g){null===h&&(h=v);break}e&&h&&null===g.alternate&&t(r,h),o=a(g,o,m),null===c?u=g:c.sibling=g,c=g,h=v}if(m===s.length)return n(r,h),u;if(null===h){for(;m<s.length;m++)(h=d(r,s[m],l))&&(o=a(h,o,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=i(r,h);m<s.length;m++)(v=p(h,r,m,s[m],l))&&(e&&null!==v.alternate&&h.delete(null===v.key?m:v.key),o=a(v,o,m),null===c?u=v:c.sibling=v,c=v);return e&&h.forEach(function(e){return t(r,e)}),u}function v(o,s,l,u){var c=oe(l);"function"!==typeof c&&r("150"),null==(l=c.call(l))&&r("151");for(var h=c=null,m=s,v=s=0,g=null,y=l.next();null!==m&&!y.done;v++,y=l.next()){m.index>v?(g=m,m=null):g=m.sibling;var _=f(o,m,y.value,u);if(null===_){m||(m=g);break}e&&m&&null===_.alternate&&t(o,m),s=a(_,s,v),null===h?c=_:h.sibling=_,h=_,m=g}if(y.done)return n(o,m),c;if(null===m){for(;!y.done;v++,y=l.next())null!==(y=d(o,y.value,u))&&(s=a(y,s,v),null===h?c=y:h.sibling=y,h=y);return c}for(m=i(o,m);!y.done;v++,y=l.next())null!==(y=p(m,o,v,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=a(y,s,v),null===h?c=y:h.sibling=y,h=y);return e&&m.forEach(function(e){return t(o,e)}),c}return function(e,i,a,l){var u="object"===typeof a&&null!==a&&a.type===Vi&&null===a.key;u&&(a=a.props.children);var c="object"===typeof a&&null!==a;if(c)switch(a.$$typeof){case ji:e:{for(c=a.key,u=i;null!==u;){if(u.key===c){if(10===u.tag?a.type===Vi:u.type===a.type){n(e,u.sibling),i=o(u,a.type===Vi?a.props.children:a.props,l),i.ref=mn(e,u,a),i.return=e,e=i;break e}n(e,u);break}t(e,u),u=u.sibling}a.type===Vi?(i=Ut(a.props.children,e.mode,l,a.key),i.return=e,e=i):(l=Ft(a,e.mode,l),l.ref=mn(e,i,a),l.return=e,e=l)}return s(e);case Hi:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(e,i.sibling),i=o(i,a.children||[],l),i.return=e,e=i;break e}n(e,i);break}t(e,i),i=i.sibling}i=Bt(a,e.mode,l),i.return=e,e=i}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==i&&6===i.tag?(n(e,i.sibling),i=o(i,a,l),i.return=e,e=i):(n(e,i),i=zt(a,e.mode,l),i.return=e,e=i),s(e);if(Ba(a))return m(e,i,a,l);if(oe(a))return v(e,i,a,l);if(c&&vn(e,a),"undefined"===typeof a&&!u)switch(e.tag){case 2:case 1:l=e.type,r("152",l.displayName||l.name||"Component")}return n(e,i)}}function yn(e,t){var n=new Dt(5,null,null,0);n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function _n(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function bn(e){if(Wa){var t=Ga;if(t){var n=t;if(!_n(e,t)){if(!(t=wt(n))||!_n(e,t))return e.effectTag|=2,Wa=!1,void(Va=e);yn(Va,n)}Va=e,Ga=xt(t)}else e.effectTag|=2,Wa=!1,Va=e}}function wn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;Va=e}function xn(e){if(e!==Va)return!1;if(!Wa)return wn(e),Wa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!bt(t,e.memoizedProps))for(t=Ga;t;)yn(e,t),t=wt(t);return wn(e),Ga=Va?wt(e.stateNode):null,!0}function En(){Ga=Va=null,Wa=!1}function Sn(e,t,n){Tn(e,t,n,t.expirationTime)}function Tn(e,t,n,r){t.child=null===e?Ha(t,null,n,r):ja(t,e.child,n,r)}function Mn(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function kn(e,t,n,r,i){Mn(e,t);var o=0!==(64&t.effectTag);if(!n&&!o)return r&&Lt(t,!1),On(e,t);n=t.stateNode,zi.current=t;var a=o?null:n.render();return t.effectTag|=1,o&&(Tn(e,t,null,i),t.child=null),Tn(e,t,a,i),t.memoizedState=n.state,t.memoizedProps=n.props,r&&Lt(t,!0),t.child}function Pn(e){var t=e.stateNode;t.pendingContext?Ot(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ot(e,t.context,!1),ln(e,t.containerInfo)}function Cn(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){switch(i.tag){case 12:var o=0|i.stateNode;if(i.type===t&&0!==(o&n)){for(o=i;null!==o;){var a=o.alternate;if(0===o.expirationTime||o.expirationTime>r)o.expirationTime=r,null!==a&&(0===a.expirationTime||a.expirationTime>r)&&(a.expirationTime=r);else{if(null===a||!(0===a.expirationTime||a.expirationTime>r))break;a.expirationTime=r}o=o.return}o=null}else o=i.child;break;case 13:o=i.type===e.type?null:i.child;break;default:o=i.child}if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function An(e,t,n){var r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=!0;if(ka.current)a=!1;else if(o===i)return t.stateNode=0,on(t),On(e,t);var s=i.value;if(t.memoizedProps=i,null===o)s=1073741823;else if(o.value===i.value){if(o.children===i.children&&a)return t.stateNode=0,on(t),On(e,t);s=0}else{var l=o.value;if(l===s&&(0!==l||1/l===1/s)||l!==l&&s!==s){if(o.children===i.children&&a)return t.stateNode=0,on(t),On(e,t);s=0}else if(s="function"===typeof r._calculateChangedBits?r._calculateChangedBits(l,s):1073741823,0===(s|=0)){if(o.children===i.children&&a)return t.stateNode=0,on(t),On(e,t)}else Cn(t,r,s,n)}return t.stateNode=s,on(t),Sn(e,t,i.children),t.child}function On(e,t){if(null!==e&&t.child!==e.child&&r("153"),null!==t.child){e=t.child;var n=Nt(e,e.pendingProps,e.expirationTime);for(t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,n=n.sibling=Nt(e,e.pendingProps,e.expirationTime),n.return=t;n.sibling=null}return t.child}function In(e,t,n){if(0===t.expirationTime||t.expirationTime>n){switch(t.tag){case 3:Pn(t);break;case 2:Rt(t);break;case 4:ln(t,t.stateNode.containerInfo);break;case 13:on(t)}return null}switch(t.tag){case 0:null!==e&&r("155");var i=t.type,o=t.pendingProps,a=Mt(t);return a=kt(t,a),i=i(o,a),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(a=t.type,t.tag=2,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,a=a.getDerivedStateFromProps,"function"===typeof a&&hn(t,a,o),o=Rt(t),i.updater=za,t.stateNode=i,i._reactInternalFiber=t,pn(t,n),e=kn(e,t,!0,o,n)):(t.tag=1,Sn(e,t,i),t.memoizedProps=o,e=t.child),e;case 1:return o=t.type,n=t.pendingProps,ka.current||t.memoizedProps!==n?(i=Mt(t),i=kt(t,i),o=o(n,i),t.effectTag|=1,Sn(e,t,o),t.memoizedProps=n,e=t.child):e=On(e,t),e;case 2:if(o=Rt(t),null===e)if(null===t.stateNode){var s=t.pendingProps,l=t.type;i=Mt(t);var u=2===t.tag&&null!=t.type.contextTypes;a=u?kt(t,i):Hr,s=new l(s,a),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=za,t.stateNode=s,s._reactInternalFiber=t,u&&(u=t.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=i,u.__reactInternalMemoizedMaskedChildContext=a),pn(t,n),i=!0}else{l=t.type,i=t.stateNode,u=t.memoizedProps,a=t.pendingProps,i.props=u;var c=i.context;s=Mt(t),s=kt(t,s);var h=l.getDerivedStateFromProps;(l="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(u!==a||c!==s)&&fn(t,i,a,s),Oa=!1;var d=t.memoizedState;c=i.state=d;var f=t.updateQueue;null!==f&&(en(t,f,a,i,n),c=t.memoizedState),u!==a||d!==c||ka.current||Oa?("function"===typeof h&&(hn(t,h,a),c=t.memoizedState),(u=Oa||dn(t,u,a,d,c,s))?(l||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.effectTag|=4)):("function"===typeof i.componentDidMount&&(t.effectTag|=4),t.memoizedProps=a,t.memoizedState=c),i.props=a,i.state=c,i.context=s,i=u):("function"===typeof i.componentDidMount&&(t.effectTag|=4),i=!1)}else l=t.type,i=t.stateNode,a=t.memoizedProps,u=t.pendingProps,i.props=a,c=i.context,s=Mt(t),s=kt(t,s),h=l.getDerivedStateFromProps,(l="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==u||c!==s)&&fn(t,i,u,s),Oa=!1,c=t.memoizedState,d=i.state=c,f=t.updateQueue,null!==f&&(en(t,f,u,i,n),d=t.memoizedState),a!==u||c!==d||ka.current||Oa?("function"===typeof h&&(hn(t,h,u),d=t.memoizedState),(h=Oa||dn(t,a,u,c,d,s))?(l||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(u,d,s),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(u,d,s)),"function"===typeof i.componentDidUpdate&&(t.effectTag|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),t.memoizedProps=u,t.memoizedState=d),i.props=u,i.state=d,i.context=s,i=h):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),i=!1);return kn(e,t,i,o,n);case 3:return Pn(t),o=t.updateQueue,null!==o?(i=t.memoizedState,i=null!==i?i.element:null,en(t,o,t.pendingProps,null,n),(o=t.memoizedState.element)===i?(En(),e=On(e,t)):(i=t.stateNode,(i=(null===e||null===e.child)&&i.hydrate)&&(Ga=xt(t.stateNode.containerInfo),Va=t,i=Wa=!0),i?(t.effectTag|=2,t.child=Ha(t,null,o,n)):(En(),Sn(e,t,o)),e=t.child)):(En(),e=On(e,t)),e;case 5:return sn(Ua.current),o=sn(Na.current),i=at(o,t.type),o!==i&&(Tt(Fa,t,t),Tt(Na,i,t)),null===e&&bn(t),o=t.type,u=t.memoizedProps,i=t.pendingProps,a=null!==e?e.memoizedProps:null,ka.current||u!==i||((u=1&t.mode&&!!i.hidden)&&(t.expirationTime=1073741823),u&&1073741823===n)?(u=i.children,bt(o,i)?u=null:a&&bt(o,a)&&(t.effectTag|=16),Mn(e,t),1073741823!==n&&1&t.mode&&i.hidden?(t.expirationTime=1073741823,t.memoizedProps=i,e=null):(Sn(e,t,u),t.memoizedProps=i,e=t.child)):e=On(e,t),e;case 6:return null===e&&bn(t),t.memoizedProps=t.pendingProps,null;case 16:return null;case 4:return ln(t,t.stateNode.containerInfo),o=t.pendingProps,ka.current||t.memoizedProps!==o?(null===e?t.child=ja(t,null,o,n):Sn(e,t,o),t.memoizedProps=o,e=t.child):e=On(e,t),e;case 14:return o=t.type.render,n=t.pendingProps,i=t.ref,ka.current||t.memoizedProps!==n||i!==(null!==e?e.ref:null)?(o=o(n,i),Sn(e,t,o),t.memoizedProps=n,e=t.child):e=On(e,t),e;case 10:return n=t.pendingProps,ka.current||t.memoizedProps!==n?(Sn(e,t,n),t.memoizedProps=n,e=t.child):e=On(e,t),e;case 11:return n=t.pendingProps.children,ka.current||null!==n&&t.memoizedProps!==n?(Sn(e,t,n),t.memoizedProps=n,e=t.child):e=On(e,t),e;case 15:return n=t.pendingProps,t.memoizedProps===n?e=On(e,t):(Sn(e,t,n.children),t.memoizedProps=n,e=t.child),e;case 13:return An(e,t,n);case 12:e:if(i=t.type,a=t.pendingProps,u=t.memoizedProps,o=i._currentValue,s=i._changedBits,ka.current||0!==s||u!==a){if(t.memoizedProps=a,l=a.unstable_observedBits,void 0!==l&&null!==l||(l=1073741823),t.stateNode=l,0!==(s&l))Cn(t,i,s,n);else if(u===a){e=On(e,t);break e}n=a.children,n=n(o),t.effectTag|=1,Sn(e,t,n),e=t.child}else e=On(e,t);return e;default:r("156")}}function Rn(e){e.effectTag|=4}function Ln(e,t){var n=t.pendingProps;switch(t.tag){case 1:return null;case 2:return Ct(t),null;case 3:un(t),At(t);var i=t.stateNode;return i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(xn(t),t.effectTag&=-3),qa(t),null;case 5:cn(t),i=sn(Ua.current);var o=t.type;if(null!==e&&null!=t.stateNode){var a=e.memoizedProps,s=t.stateNode,l=sn(Na.current);s=mt(s,o,a,n,i),Xa(e,t,s,o,a,n,i,l),e.ref!==t.ref&&(t.effectTag|=128)}else{if(!n)return null===t.stateNode&&r("166"),null;if(e=sn(Na.current),xn(t))n=t.stateNode,o=t.type,a=t.memoizedProps,n[ii]=t,n[oi]=a,i=gt(n,o,a,e,i),t.updateQueue=i,null!==i&&Rn(t);else{e=dt(o,n,i,e),e[ii]=t,e[oi]=n;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}pt(e,o,n,i),_t(o,n)&&Rn(t),t.stateNode=e}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Ya(e,t,e.memoizedProps,n);else{if("string"!==typeof n)return null===t.stateNode&&r("166"),null;i=sn(Ua.current),sn(Na.current),xn(t)?(i=t.stateNode,n=t.memoizedProps,i[ii]=t,yt(i,n)&&Rn(t)):(i=ft(n,i),i[ii]=t,t.stateNode=i)}return null;case 14:case 16:case 10:case 11:case 15:return null;case 4:return un(t),qa(t),null;case 13:return an(t),null;case 12:return null;case 0:r("167");default:r("156")}}function Dn(e,t){var n=t.source;null===t.stack&&null!==n&&se(n),null!==n&&ae(n),t=t.value,null!==e&&2===e.tag&&ae(e);try{t&&t.suppressReactErrorLogging||console.error(t)}catch(e){e&&e.suppressReactErrorLogging||console.error(e)}}function Nn(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(t){Jn(e,t)}else t.current=null}function Fn(e){switch("function"===typeof Wt&&Wt(e),e.tag){case 2:Nn(e);var t=e.stateNode;if("function"===typeof t.componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Jn(e,t)}break;case 5:Nn(e);break;case 4:Bn(e)}}function Un(e){return 5===e.tag||3===e.tag||4===e.tag}function zn(e){e:{for(var t=e.return;null!==t;){if(Un(t)){var n=t;break e}t=t.return}r("160"),n=void 0}var i=t=void 0;switch(n.tag){case 5:t=n.stateNode,i=!1;break;case 3:case 4:t=n.stateNode.containerInfo,i=!0;break;default:r("161")}16&n.effectTag&&(st(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Un(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var o=e;;){if(5===o.tag||6===o.tag)if(n)if(i){var a=t,s=o.stateNode,l=n;8===a.nodeType?a.parentNode.insertBefore(s,l):a.insertBefore(s,l)}else t.insertBefore(o.stateNode,n);else i?(a=t,s=o.stateNode,8===a.nodeType?a.parentNode.insertBefore(s,a):a.appendChild(s)):t.appendChild(o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}}function Bn(e){for(var t=e,n=!1,i=void 0,o=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&r("160"),n.tag){case 5:i=n.stateNode,o=!1;break e;case 3:case 4:i=n.stateNode.containerInfo,o=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var a=t,s=a;;)if(Fn(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===a)break;for(;null===s.sibling;){if(null===s.return||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}o?(a=i,s=t.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):i.removeChild(t.stateNode)}else if(4===t.tag?i=t.stateNode.containerInfo:Fn(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return,4===t.tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function jn(e,t){switch(t.tag){case 2:break;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps;e=null!==e?e.memoizedProps:i;var o=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&(n[oi]=i,vt(n,a,o,e,i))}break;case 6:null===t.stateNode&&r("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 15:case 16:break;default:r("163")}}function Hn(e,t,n){n=Yt(n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){pr(r),Dn(e,t)},n}function Vn(e,t,n){n=Yt(n),n.tag=3;var r=e.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(n.callback=function(){null===us?us=new Set([this]):us.add(this);var n=t.value,r=t.stack;Dn(e,t),this.componentDidCatch(n,{componentStack:null!==r?r:""})}),n}function Gn(e,t,n,r,i,o){n.effectTag|=512,n.firstEffect=n.lastEffect=null,r=rn(r,n),e=t;do{switch(e.tag){case 3:return e.effectTag|=1024,r=Hn(e,r,o),void Kt(e,r,o);case 2:if(t=r,n=e.stateNode,0===(64&e.effectTag)&&null!==n&&"function"===typeof n.componentDidCatch&&(null===us||!us.has(n)))return e.effectTag|=1024,r=Vn(e,t,o),void Kt(e,r,o)}e=e.return}while(null!==e)}function Wn(e){switch(e.tag){case 2:Ct(e);var t=e.effectTag;return 1024&t?(e.effectTag=-1025&t|64,e):null;case 3:return un(e),At(e),t=e.effectTag,1024&t?(e.effectTag=-1025&t|64,e):null;case 5:return cn(e),null;case 16:return t=e.effectTag,1024&t?(e.effectTag=-1025&t|64,e):null;case 4:return un(e),null;case 13:return an(e),null;default:return null}}function qn(){if(null!==ts)for(var e=ts.return;null!==e;){var t=e;switch(t.tag){case 2:Ct(t);break;case 3:un(t),At(t);break;case 5:cn(t);break;case 4:un(t);break;case 13:an(t)}e=e.return}ns=null,rs=0,is=-1,os=!1,ts=null,ls=!1}function Xn(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0===(512&e.effectTag)){t=Ln(t,e,rs);var i=e;if(1073741823===rs||1073741823!==i.expirationTime){var o=0;switch(i.tag){case 3:case 2:var a=i.updateQueue;null!==a&&(o=a.expirationTime)}for(a=i.child;null!==a;)0!==a.expirationTime&&(0===o||o>a.expirationTime)&&(o=a.expirationTime),a=a.sibling;i.expirationTime=o}if(null!==t)return t;if(null!==n&&0===(512&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e)),null!==r)return r;if(null===n){ls=!0;break}e=n}else{if(null!==(e=Wn(e,os,rs)))return e.effectTag&=511,e;if(null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=512),null!==r)return r;if(null===n)break;e=n}}return null}function Yn(e){var t=In(e.alternate,e,rs);return null===t&&(t=Xn(e)),zi.current=null,t}function Zn(e,t,n){es&&r("243"),es=!0,t===rs&&e===ns&&null!==ts||(qn(),ns=e,rs=t,is=-1,ts=Nt(ns.current,null,rs),e.pendingCommitExpirationTime=0);var i=!1;for(os=!n||rs<=Ja;;){try{if(n)for(;null!==ts&&!fr();)ts=Yn(ts);else for(;null!==ts;)ts=Yn(ts)}catch(t){if(null===ts)i=!0,pr(t);else{null===ts&&r("271"),n=ts;var o=n.return;if(null===o){i=!0,pr(t);break}Gn(e,o,n,t,os,rs,Ka),ts=Xn(n)}}break}if(es=!1,i)return null;if(null===ts){if(ls)return e.pendingCommitExpirationTime=t,e.current.alternate;os&&r("262"),0<=is&&setTimeout(function(){var t=e.current.expirationTime;0!==t&&(0===e.remainingExpirationTime||e.remainingExpirationTime<t)&&ir(e,t)},is),mr(e.current.expirationTime)}return null}function Jn(e,t){var n;e:{for(es&&!ss&&r("263"),n=e.return;null!==n;){switch(n.tag){case 2:var i=n.stateNode;if("function"===typeof n.type.getDerivedStateFromCatch||"function"===typeof i.componentDidCatch&&(null===us||!us.has(i))){e=rn(t,e),e=Vn(n,e,1),Jt(n,e,1),$n(n,1),n=void 0;break e}break;case 3:e=rn(t,e),e=Hn(n,e,1),Jt(n,e,1),$n(n,1),n=void 0;break e}n=n.return}3===e.tag&&(n=rn(t,e),n=Hn(e,n,1),Jt(e,n,1),$n(e,1)),n=void 0}return n}function Kn(){var e=2+25*(1+((er()-2+500)/25|0));return e<=Qa&&(e=Qa+1),Qa=e}function Qn(e,t){return e=0!==$a?$a:es?ss?1:rs:1&t.mode?Ss?2+10*(1+((e-2+15)/10|0)):2+25*(1+((e-2+500)/25|0)):1,Ss&&(0===gs||e>gs)&&(gs=e),e}function $n(e,t){for(;null!==e;){if((0===e.expirationTime||e.expirationTime>t)&&(e.expirationTime=t),null!==e.alternate&&(0===e.alternate.expirationTime||e.alternate.expirationTime>t)&&(e.alternate.expirationTime=t),null===e.return){if(3!==e.tag)break;var n=e.stateNode;!es&&0!==rs&&t<rs&&qn();var i=n.current.expirationTime;es&&!ss&&ns===n||ir(n,i),ks>Ms&&r("185")}e=e.return}}function er(){return Ka=wa()-Za,Ja=2+(Ka/10|0)}function tr(e){var t=$a;$a=2+25*(1+((er()-2+500)/25|0));try{return e()}finally{$a=t}}function nr(e,t,n,r,i){var o=$a;$a=1;try{return e(t,n,r,i)}finally{$a=o}}function rr(e){if(0!==ds){if(e>ds)return;null!==fs&&Ea(fs)}var t=wa()-Za;ds=e,fs=xa(ar,{timeout:10*(e-2)-t})}function ir(e,t){if(null===e.nextScheduledRoot)e.remainingExpirationTime=t,null===hs?(cs=hs=e,e.nextScheduledRoot=e):(hs=hs.nextScheduledRoot=e,hs.nextScheduledRoot=cs);else{var n=e.remainingExpirationTime;(0===n||t<n)&&(e.remainingExpirationTime=t)}ps||(xs?Es&&(ms=e,vs=1,hr(e,1,!1)):1===t?sr():rr(t))}function or(){var e=0,t=null;if(null!==hs)for(var n=hs,i=cs;null!==i;){var o=i.remainingExpirationTime;if(0===o){if((null===n||null===hs)&&r("244"),i===i.nextScheduledRoot){cs=hs=i.nextScheduledRoot=null;break}if(i===cs)cs=o=i.nextScheduledRoot,hs.nextScheduledRoot=o,i.nextScheduledRoot=null;else{if(i===hs){hs=n,hs.nextScheduledRoot=cs,i.nextScheduledRoot=null;break}n.nextScheduledRoot=i.nextScheduledRoot,i.nextScheduledRoot=null}i=n.nextScheduledRoot}else{if((0===e||o<e)&&(e=o,t=i),i===hs)break;n=i,i=i.nextScheduledRoot}}n=ms,null!==n&&n===t&&1===e?ks++:ks=0,ms=t,vs=e}function ar(e){lr(0,!0,e)}function sr(){lr(1,!1,null)}function lr(e,t,n){if(ws=n,or(),t)for(;null!==ms&&0!==vs&&(0===e||e>=vs)&&(!ys||er()>=vs);)er(),hr(ms,vs,!ys),or();else for(;null!==ms&&0!==vs&&(0===e||e>=vs);)hr(ms,vs,!1),or();null!==ws&&(ds=0,fs=null),0!==vs&&rr(vs),ws=null,ys=!1,cr()}function ur(e,t){ps&&r("253"),ms=e,vs=t,hr(e,t,!1),sr(),cr()}function cr(){if(ks=0,null!==Ts){var e=Ts;Ts=null;for(var t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){_s||(_s=!0,bs=e)}}}if(_s)throw e=bs,bs=null,_s=!1,e}function hr(e,t,n){ps&&r("245"),ps=!0,n?(n=e.finishedWork,null!==n?dr(e,n,t):null!==(n=Zn(e,t,!0))&&(fr()?e.finishedWork=n:dr(e,n,t))):(n=e.finishedWork,null!==n?dr(e,n,t):null!==(n=Zn(e,t,!1))&&dr(e,n,t)),ps=!1}function dr(e,t,n){var i=e.firstBatch;if(null!==i&&i._expirationTime<=n&&(null===Ts?Ts=[i]:Ts.push(i),i._defer))return e.finishedWork=t,void(e.remainingExpirationTime=0);if(e.finishedWork=null,ss=es=!0,n=t.stateNode,n.current===t&&r("177"),i=n.pendingCommitExpirationTime,0===i&&r("261"),n.pendingCommitExpirationTime=0,er(),zi.current=null,1<t.effectTag)if(null!==t.lastEffect){t.lastEffect.nextEffect=t;var o=t.firstEffect}else o=t;else o=t.firstEffect;_a=Oo;var a=zr();if(Ze(a)){if("selectionStart"in a)var s={start:a.selectionStart,end:a.selectionEnd};else e:{var l=window.getSelection&&window.getSelection();if(l&&0!==l.rangeCount){s=l.anchorNode;var u=l.anchorOffset,c=l.focusNode;l=l.focusOffset;try{s.nodeType,c.nodeType}catch(e){s=null;break e}var h=0,d=-1,f=-1,p=0,m=0,v=a,g=null;t:for(;;){for(var y;v!==s||0!==u&&3!==v.nodeType||(d=h+u),v!==c||0!==l&&3!==v.nodeType||(f=h+l),3===v.nodeType&&(h+=v.nodeValue.length),null!==(y=v.firstChild);)g=v,v=y;for(;;){if(v===a)break t;if(g===s&&++p===u&&(d=h),g===c&&++m===l&&(f=h),null!==(y=v.nextSibling))break;v=g,g=v.parentNode}v=y}s=-1===d||-1===f?null:{start:d,end:f}}else s=null}s=s||{start:0,end:0}}else s=null;for(ba={focusedElem:a,selectionRange:s},je(!1),as=o;null!==as;){a=!1,s=void 0;try{for(;null!==as;){if(256&as.effectTag){var _=as.alternate;switch(u=as,u.tag){case 2:if(256&u.effectTag&&null!==_){var b=_.memoizedProps,w=_.memoizedState,x=u.stateNode;x.props=u.memoizedProps,x.state=u.memoizedState;var E=x.getSnapshotBeforeUpdate(b,w);x.__reactInternalSnapshotBeforeUpdate=E}break;case 3:case 5:case 6:case 4:break;default:r("163")}}as=as.nextEffect}}catch(e){a=!0,s=e}a&&(null===as&&r("178"),Jn(as,s),null!==as&&(as=as.nextEffect))}for(as=o;null!==as;){_=!1,b=void 0;try{for(;null!==as;){var S=as.effectTag;if(16&S&&st(as.stateNode,""),128&S){var T=as.alternate;if(null!==T){var M=T.ref;null!==M&&("function"===typeof M?M(null):M.current=null)}}switch(14&S){case 2:zn(as),as.effectTag&=-3;break;case 6:zn(as),as.effectTag&=-3,jn(as.alternate,as);break;case 4:jn(as.alternate,as);break;case 8:w=as,Bn(w),w.return=null,w.child=null,w.alternate&&(w.alternate.child=null,w.alternate.return=null)}as=as.nextEffect}}catch(e){_=!0,b=e}_&&(null===as&&r("178"),Jn(as,b),null!==as&&(as=as.nextEffect))}if(M=ba,T=zr(),S=M.focusedElem,_=M.selectionRange,T!==S&&jr(document.documentElement,S)){null!==_&&Ze(S)&&(T=_.start,M=_.end,void 0===M&&(M=T),"selectionStart"in S?(S.selectionStart=T,S.selectionEnd=Math.min(M,S.value.length)):window.getSelection&&(T=window.getSelection(),b=S[R()].length,M=Math.min(_.start,b),_=void 0===_.end?M:Math.min(_.end,b),!T.extend&&M>_&&(b=_,_=M,M=b),b=Ye(S,M),w=Ye(S,_),b&&w&&(1!==T.rangeCount||T.anchorNode!==b.node||T.anchorOffset!==b.offset||T.focusNode!==w.node||T.focusOffset!==w.offset)&&(x=document.createRange(),x.setStart(b.node,b.offset),T.removeAllRanges(),M>_?(T.addRange(x),T.extend(w.node,w.offset)):(x.setEnd(w.node,w.offset),T.addRange(x))))),T=[];for(M=S;M=M.parentNode;)1===M.nodeType&&T.push({element:M,left:M.scrollLeft,top:M.scrollTop});for("function"===typeof S.focus&&S.focus(),S=0;S<T.length;S++)M=T[S],M.element.scrollLeft=M.left,M.element.scrollTop=M.top}for(ba=null,je(_a),_a=null,n.current=t,as=o;null!==as;){o=!1,S=void 0;try{for(T=i;null!==as;){var k=as.effectTag;if(36&k){var P=as.alternate;switch(M=as,_=T,M.tag){case 2:var C=M.stateNode;if(4&M.effectTag)if(null===P)C.props=M.memoizedProps,C.state=M.memoizedState,C.componentDidMount();else{var A=P.memoizedProps,O=P.memoizedState;C.props=M.memoizedProps,C.state=M.memoizedState,C.componentDidUpdate(A,O,C.__reactInternalSnapshotBeforeUpdate)}var I=M.updateQueue;null!==I&&(C.props=M.memoizedProps,C.state=M.memoizedState,nn(M,I,C,_));break;case 3:var L=M.updateQueue;if(null!==L){if(b=null,null!==M.child)switch(M.child.tag){case 5:b=M.child.stateNode;break;case 2:b=M.child.stateNode}nn(M,L,b,_)}break;case 5:var D=M.stateNode;null===P&&4&M.effectTag&&_t(M.type,M.memoizedProps)&&D.focus();break;case 6:case 4:case 15:case 16:break;default:r("163")}}if(128&k){M=void 0;var N=as.ref;if(null!==N){var F=as.stateNode;switch(as.tag){case 5:M=F;break;default:M=F}"function"===typeof N?N(M):N.current=M}}var U=as.nextEffect;as.nextEffect=null,as=U}}catch(e){o=!0,S=e}o&&(null===as&&r("178"),Jn(as,S),null!==as&&(as=as.nextEffect))}es=ss=!1,"function"===typeof Gt&&Gt(t.stateNode),t=n.current.expirationTime,0===t&&(us=null),e.remainingExpirationTime=t}function fr(){return!(null===ws||ws.timeRemaining()>Ps)&&(ys=!0)}function pr(e){null===ms&&r("246"),ms.remainingExpirationTime=0,_s||(_s=!0,bs=e)}function mr(e){null===ms&&r("246"),ms.remainingExpirationTime=e}function vr(e,t){var n=xs;xs=!0;try{return e(t)}finally{(xs=n)||ps||sr()}}function gr(e,t){if(xs&&!Es){Es=!0;try{return e(t)}finally{Es=!1}}return e(t)}function yr(e,t){ps&&r("187");var n=xs;xs=!0;try{return nr(e,t)}finally{xs=n,sr()}}function _r(e,t,n){if(Ss)return e(t,n);xs||ps||0===gs||(lr(gs,!1,null),gs=0);var r=Ss,i=xs;xs=Ss=!0;try{return e(t,n)}finally{Ss=r,(xs=i)||ps||sr()}}function br(e){var t=xs;xs=!0;try{nr(e)}finally{(xs=t)||ps||lr(1,!1,null)}}function wr(e,t,n,i,o){var a=t.current;if(n){n=n._reactInternalFiber;var s;e:{for(2===Re(n)&&2===n.tag||r("170"),s=n;3!==s.tag;){if(Pt(s)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}(s=s.return)||r("171")}s=s.stateNode.context}n=Pt(n)?It(n,s):s}else n=Hr;return null===t.context?t.context=n:t.pendingContext=n,t=o,o=Yt(i),o.payload={element:e},t=void 0===t?null:t,null!==t&&(o.callback=t),Jt(a,o,i),$n(a,i),i}function xr(e){var t=e._reactInternalFiber;return void 0===t&&("function"===typeof e.render?r("188"):r("268",Object.keys(e))),e=Ne(t),null===e?null:e.stateNode}function Er(e,t,n,r){var i=t.current;return i=Qn(er(),i),wr(e,t,n,i,r)}function Sr(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Tr(e){var t=e.findFiberByHostInstance;return Vt(Fr({},e,{findHostInstanceByFiber:function(e){return e=Ne(e),null===e?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}function Mr(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Hi,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function kr(e){this._expirationTime=Kn(),this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Pr(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Cr(e,t,n){this._internalRoot=jt(e,t,n)}function Ar(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Or(e,t){if(t||(t=e?9===e.nodeType?e.documentElement:e.firstChild:null,t=!(!t||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Cr(e,!1,t)}function Ir(e,t,n,i,o){Ar(n)||r("200");var a=n._reactRootContainer;if(a){if("function"===typeof o){var s=o;o=function(){var e=Sr(a._internalRoot);s.call(e)}}null!=e?a.legacy_renderSubtreeIntoContainer(e,t,o):a.render(t,o)}else{if(a=n._reactRootContainer=Or(n,i),"function"===typeof o){var l=o;o=function(){var e=Sr(a._internalRoot);l.call(e)}}gr(function(){null!=e?a.legacy_renderSubtreeIntoContainer(e,t,o):a.render(t,o)})}return Sr(a._internalRoot)}function Rr(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Ar(t)||r("200"),Mr(e,t,null,n)}var Lr=n(120),Dr=n(1),Nr=n(211),Fr=n(77),Ur=n(122),zr=n(212),Br=n(123),jr=n(213),Hr=n(121);Dr||r("227");var Vr={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(e,t,n,r,o,a,s,l,u){i.apply(Vr,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,r,i,o,a,s,l){if(Vr.invokeGuardedCallback.apply(this,arguments),Vr.hasCaughtError()){var u=Vr.clearCaughtError();Vr._hasRethrowError||(Vr._hasRethrowError=!0,Vr._rethrowError=u)}},rethrowCaughtError:function(){return o.apply(Vr,arguments)},hasCaughtError:function(){return Vr._hasCaughtError},clearCaughtError:function(){if(Vr._hasCaughtError){var e=Vr._caughtError;return Vr._caughtError=null,Vr._hasCaughtError=!1,e}r("198")}},Gr=null,Wr={},qr=[],Xr={},Yr={},Zr={},Jr={plugins:qr,eventNameDispatchConfigs:Xr,registrationNameModules:Yr,registrationNameDependencies:Zr,possibleRegistrationNames:null,injectEventPluginOrder:l,injectEventPluginsByName:u},Kr=null,Qr=null,$r=null,ei=null,ti={injectEventPluginOrder:l,injectEventPluginsByName:u},ni={injection:ti,getListener:v,runEventsInBatch:g,runExtractedEventsInBatch:y},ri=Math.random().toString(36).slice(2),ii="__reactInternalInstance$"+ri,oi="__reactEventHandlers$"+ri,ai={precacheFiberNode:function(e,t){t[ii]=e},getClosestInstanceFromNode:_,getInstanceFromNode:function(e){return e=e[ii],!e||5!==e.tag&&6!==e.tag?null:e},getNodeFromInstance:b,getFiberCurrentPropsFromNode:w,updateFiberProps:function(e,t){e[oi]=t}},si={accumulateTwoPhaseDispatches:C,accumulateTwoPhaseDispatchesSkipTarget:function(e){d(e,M)},accumulateEnterLeaveDispatches:A,accumulateDirectDispatches:function(e){d(e,P)}},li={animationend:O("Animation","AnimationEnd"),animationiteration:O("Animation","AnimationIteration"),animationstart:O("Animation","AnimationStart"),transitionend:O("Transition","TransitionEnd")},ui={},ci={};Nr.canUseDOM&&(ci=document.createElement("div").style,"AnimationEvent"in window||(delete li.animationend.animation,delete li.animationiteration.animation,delete li.animationstart.animation),"TransitionEvent"in window||delete li.transitionend.transition);var hi=I("animationend"),di=I("animationiteration"),fi=I("animationstart"),pi=I("transitionend"),mi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vi=null,gi={_root:null,_startText:null,_fallbackText:null},yi="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),_i={type:null,target:null,currentTarget:Ur.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};Fr(N.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Ur.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Ur.thatReturnsTrue)},persist:function(){this.isPersistent=Ur.thatReturnsTrue},isPersistent:Ur.thatReturnsFalse,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;for(t=0;t<yi.length;t++)this[yi[t]]=null}}),N.Interface=_i,N.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return Fr(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=Fr({},r.Interface,e),n.extend=r.extend,z(n),n},z(N);var bi=N.extend({data:null}),wi=N.extend({data:null}),xi=[9,13,27,32],Ei=Nr.canUseDOM&&"CompositionEvent"in window,Si=null;Nr.canUseDOM&&"documentMode"in document&&(Si=document.documentMode);var Ti=Nr.canUseDOM&&"TextEvent"in window&&!Si,Mi=Nr.canUseDOM&&(!Ei||Si&&8<Si&&11>=Si),ki=String.fromCharCode(32),Pi={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Ci=!1,Ai=!1,Oi={eventTypes:Pi,extractEvents:function(e,t,n,r){var i=void 0,o=void 0;if(Ei)e:{switch(e){case"compositionstart":i=Pi.compositionStart;break e;case"compositionend":i=Pi.compositionEnd;break e;case"compositionupdate":i=Pi.compositionUpdate;break e}i=void 0}else Ai?B(e,n)&&(i=Pi.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=Pi.compositionStart);return i?(Mi&&(Ai||i!==Pi.compositionStart?i===Pi.compositionEnd&&Ai&&(o=L()):(gi._root=r,gi._startText=D(),Ai=!0)),i=bi.getPooled(i,t,n,r),o?i.data=o:null!==(o=j(n))&&(i.data=o),C(i),o=i):o=null,(e=Ti?H(e,n):V(e,n))?(t=wi.getPooled(Pi.beforeInput,t,n,r),t.data=e,C(t)):t=null,null===o?t:null===t?o:[o,t]}},Ii=null,Ri={injectFiberControlledHostComponent:function(e){Ii=e}},Li=null,Di=null,Ni={injection:Ri,enqueueStateRestore:W,needsStateRestore:q,restoreStateIfNeeded:X},Fi=!1,Ui={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},zi=Dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Bi="function"===typeof Symbol&&Symbol.for,ji=Bi?Symbol.for("react.element"):60103,Hi=Bi?Symbol.for("react.portal"):60106,Vi=Bi?Symbol.for("react.fragment"):60107,Gi=Bi?Symbol.for("react.strict_mode"):60108,Wi=Bi?Symbol.for("react.profiler"):60114,qi=Bi?Symbol.for("react.provider"):60109,Xi=Bi?Symbol.for("react.context"):60110,Yi=Bi?Symbol.for("react.async_mode"):60111,Zi=Bi?Symbol.for("react.forward_ref"):60112,Ji=Bi?Symbol.for("react.timeout"):60113,Ki="function"===typeof Symbol&&Symbol.iterator,Qi=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$i={},eo={},to={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){to[e]=new he(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];to[t]=new he(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){to[e]=new he(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(e){to[e]=new he(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){to[e]=new he(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){to[e]=new he(e,3,!0,e.toLowerCase(),null)}),["capture","download"].forEach(function(e){to[e]=new he(e,4,!1,e.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(e){to[e]=new he(e,6,!1,e.toLowerCase(),null)}),["rowSpan","start"].forEach(function(e){to[e]=new he(e,5,!1,e.toLowerCase(),null)});var no=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(no,de);to[t]=new he(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(no,de);to[t]=new he(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(no,de);to[t]=new he(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),to.tabIndex=new he("tabIndex",1,!1,"tabindex",null);var ro={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},io=null,oo=null,ao=!1;Nr.canUseDOM&&(ao=ee("input")&&(!document.documentMode||9<document.documentMode));var so={eventTypes:ro,_isInputEventSupported:ao,extractEvents:function(e,t,n,r){var i=t?b(t):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=Se:Q(i)?ao?o=Ae:(o=Pe,a=ke):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Ce),o&&(o=o(e,t)))return we(o,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&_e(i,"number",i.value)}},lo=N.extend({view:null,detail:null}),uo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},co=lo.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ie,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}}),ho=co.extend({pointerId:null,width:null,height:null,pressure:null,tiltX:null,tiltY:null,pointerType:null,isPrimary:null}),fo={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},po={eventTypes:fo,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=t,t=(t=n.relatedTarget||n.toElement)?_(t):null):o=null,o===t)return null;var a=void 0,s=void 0,l=void 0,u=void 0;return"mouseout"===e||"mouseover"===e?(a=co,s=fo.mouseLeave,l=fo.mouseEnter,u="mouse"):"pointerout"!==e&&"pointerover"!==e||(a=ho,s=fo.pointerLeave,l=fo.pointerEnter,u="pointer"),e=null==o?i:b(o),i=null==t?i:b(t),s=a.getPooled(s,o,n,r),s.type=u+"leave",s.target=e,s.relatedTarget=i,n=a.getPooled(l,t,n,r),n.type=u+"enter",n.target=i,n.relatedTarget=e,A(s,n,o,t),[s,n]}},mo=N.extend({animationName:null,elapsedTime:null,pseudoElement:null}),vo=N.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),go=lo.extend({relatedTarget:null}),yo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_o={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bo=lo.extend({key:function(e){if(e.key){var t=yo[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?(e=Ue(e),13===e?"Enter":String.fromCharCode(e)):"keydown"===e.type||"keyup"===e.type?_o[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ie,charCode:function(e){return"keypress"===e.type?Ue(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ue(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),wo=co.extend({dataTransfer:null}),xo=lo.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ie}),Eo=N.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),So=co.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),To=[["abort","abort"],[hi,"animationEnd"],[di,"animationIteration"],[fi,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[pi,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],Mo={},ko={};[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){ze(e,!0)}),To.forEach(function(e){ze(e,!1)});var Po={eventTypes:Mo,isInteractiveTopLevelEventType:function(e){return void 0!==(e=ko[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=ko[e];if(!i)return null;switch(e){case"keypress":if(0===Ue(n))return null;case"keydown":case"keyup":e=bo;break;case"blur":case"focus":e=go;break;case"click":if(2===n.button)return null;case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=co;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=wo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=xo;break;case hi:case di:case fi:e=mo;break;case pi:e=Eo;break;case"scroll":e=lo;break;case"wheel":e=So;break;case"copy":case"cut":case"paste":e=vo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=ho;break;default:e=N}return t=e.getPooled(i,t,n,r),C(t),t}},Co=Po.isInteractiveTopLevelEventType,Ao=[],Oo=!0,Io={get _enabled(){return Oo},setEnabled:je,isEnabled:function(){return Oo},trapBubbledEvent:He,trapCapturedEvent:Ve,dispatchEvent:We},Ro={},Lo=0,Do="_reactListenersID"+(""+Math.random()).slice(2),No=Nr.canUseDOM&&"documentMode"in document&&11>=document.documentMode,Fo={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Uo=null,zo=null,Bo=null,jo=!1,Ho={eventTypes:Fo,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=qe(o),i=Zr.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break e}}o=!0}i=!o}if(i)return null;switch(o=t?b(t):window,e){case"focus":(Q(o)||"true"===o.contentEditable)&&(Uo=o,zo=t,Bo=null);break;case"blur":Bo=zo=Uo=null;break;case"mousedown":jo=!0;break;case"contextmenu":case"mouseup":return jo=!1,Je(n,r);case"selectionchange":if(No)break;case"keydown":case"keyup":return Je(n,r)}return null}};ti.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),Kr=ai.getFiberCurrentPropsFromNode,Qr=ai.getInstanceFromNode,$r=ai.getNodeFromInstance,ti.injectEventPluginsByName({SimpleEventPlugin:Po,EnterLeaveEventPlugin:po,ChangeEventPlugin:so,SelectEventPlugin:Ho,BeforeInputEventPlugin:Oi});var Vo="function"===typeof requestAnimationFrame?requestAnimationFrame:void 0,Go=Date,Wo=setTimeout,qo=clearTimeout,Xo=void 0;if("object"===typeof performance&&"function"===typeof performance.now){var Yo=performance;Xo=function(){return Yo.now()}}else Xo=function(){return Go.now()};var Zo=void 0,Jo=void 0;if(Nr.canUseDOM){var Ko="function"===typeof Vo?Vo:function(){r("276")},Qo=null,$o=null,ea=-1,ta=!1,na=!1,ra=0,ia=33,oa=33,aa={didTimeout:!1,timeRemaining:function(){var e=ra-Xo();return 0<e?e:0}},sa=function(e,t){var n=e.scheduledCallback,r=!1;try{n(t),r=!0}finally{Jo(e),r||(ta=!0,window.postMessage(la,"*"))}},la="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===la&&(ta=!1,null!==Qo)){if(null!==Qo){var t=Xo();if(!(-1===ea||ea>t)){e=-1;for(var n=[],r=Qo;null!==r;){var i=r.timeoutTime;-1!==i&&i<=t?n.push(r):-1!==i&&(-1===e||i<e)&&(e=i),r=r.next}if(0<n.length)for(aa.didTimeout=!0,t=0,r=n.length;t<r;t++)sa(n[t],aa);ea=e}}for(e=Xo();0<ra-e&&null!==Qo;)e=Qo,aa.didTimeout=!1,sa(e,aa),e=Xo();null===Qo||na||(na=!0,Ko(ua))}},!1);var ua=function(e){na=!1;var t=e-ra+oa;t<oa&&ia<oa?(8>t&&(t=8),oa=t<ia?ia:t):ia=t,ra=e+oa,ta||(ta=!0,window.postMessage(la,"*"))};Zo=function(e,t){var n=-1;return null!=t&&"number"===typeof t.timeout&&(n=Xo()+t.timeout),(-1===ea||-1!==n&&n<ea)&&(ea=n),e={scheduledCallback:e,timeoutTime:n,prev:null,next:null},null===Qo?Qo=e:null!==(t=e.prev=$o)&&(t.next=e),$o=e,na||(na=!0,Ko(ua)),e},Jo=function(e){if(null!==e.prev||Qo===e){var t=e.next,n=e.prev;e.next=null,e.prev=null,null!==t?null!==n?(n.next=t,t.prev=n):(t.prev=null,Qo=t):null!==n?(n.next=null,$o=n):$o=Qo=null}}}else{var ca=new Map;Zo=function(e){var t={scheduledCallback:e,timeoutTime:0,next:null,prev:null},n=Wo(function(){e({timeRemaining:function(){return 1/0},didTimeout:!1})});return ca.set(e,n),t},Jo=function(e){var t=ca.get(e.scheduledCallback);ca.delete(e),qo(t)}}var ha={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},da=void 0,fa=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==ha.svg||"innerHTML"in e)e.innerHTML=t;else{for(da=da||document.createElement("div"),da.innerHTML="<svg>"+t+"</svg>",t=da.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}),pa={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ma=["Webkit","ms","Moz","O"];Object.keys(pa).forEach(function(e){ma.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pa[t]=pa[e]})});var va=Fr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ga=Ur.thatReturns(""),ya={createElement:dt,createTextNode:ft,setInitialProperties:pt,diffProperties:mt,updateProperties:vt,diffHydratedProperties:gt,diffHydratedText:yt,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(e,t,n){switch(t){case"input":if(ge(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=w(i);o||r("90"),ie(i),ge(i,o)}}}break;case"textarea":rt(e,n);break;case"select":null!=(t=n.value)&&$e(e,!!n.multiple,t,!1)}}},_a=null,ba=null,wa=Xo,xa=Zo,Ea=Jo;new Set;var Sa=[],Ta=-1,Ma=Et(Hr),ka=Et(!1),Pa=Hr,Ca=null,Aa=null,Oa=!1,Ia=Et(null),Ra=Et(null),La=Et(0),Da={},Na=Et(Da),Fa=Et(Da),Ua=Et(Da),za={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===Re(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=er();r=Qn(r,e);var i=Yt(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),Jt(e,i,r),$n(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=er();r=Qn(r,e);var i=Yt(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),Jt(e,i,r),$n(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=er();n=Qn(n,e);var r=Yt(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),Jt(e,r,n),$n(e,n)}},Ba=Array.isArray,ja=gn(!0),Ha=gn(!1),Va=null,Ga=null,Wa=!1,qa=void 0,Xa=void 0,Ya=void 0;qa=function(){},Xa=function(e,t,n){(t.updateQueue=n)&&Rn(t)},Ya=function(e,t,n,r){n!==r&&Rn(t)};var Za=wa(),Ja=2,Ka=Za,Qa=0,$a=0,es=!1,ts=null,ns=null,rs=0,is=-1,os=!1,as=null,ss=!1,ls=!1,us=null,cs=null,hs=null,ds=0,fs=void 0,ps=!1,ms=null,vs=0,gs=0,ys=!1,_s=!1,bs=null,ws=null,xs=!1,Es=!1,Ss=!1,Ts=null,Ms=1e3,ks=0,Ps=1,Cs={updateContainerAtExpirationTime:wr,createContainer:function(e,t,n){return jt(e,t,n)},updateContainer:Er,flushRoot:ur,requestWork:ir,computeUniqueAsyncExpiration:Kn,batchedUpdates:vr,unbatchedUpdates:gr,deferredUpdates:tr,syncUpdates:nr,interactiveUpdates:_r,flushInteractiveUpdates:function(){ps||0===gs||(lr(gs,!1,null),gs=0)},flushControlled:br,flushSync:yr,getPublicRootInstance:Sr,findHostInstance:xr,findHostInstanceWithNoPortals:function(e){return e=Fe(e),null===e?null:e.stateNode},injectIntoDevTools:Tr};Ri.injectFiberControlledHostComponent(ya),kr.prototype.render=function(e){this._defer||r("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,i=new Pr;return wr(e,t,null,n,i._onCommit),i},kr.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},kr.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||r("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var i=null,o=t;o!==this;)i=o,o=o._next;null===i&&r("251"),i._next=o._next,this._next=t,e.firstBatch=this}this._defer=!1,ur(e,n),t=this._next,this._next=null,t=e.firstBatch=t,null!==t&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},kr.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Pr.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Pr.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!==typeof n&&r("191",n),n()}}},Cr.prototype.render=function(e,t){var n=this._internalRoot,r=new Pr;return t=void 0===t?null:t,null!==t&&r.then(t),Er(e,n,null,r._onCommit),r},Cr.prototype.unmount=function(e){var t=this._internalRoot,n=new Pr;return e=void 0===e?null:e,null!==e&&n.then(e),Er(null,t,null,n._onCommit),n},Cr.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new Pr;return n=void 0===n?null:n,null!==n&&i.then(n),Er(t,r,e,i._onCommit),i},Cr.prototype.createBatch=function(){var e=new kr(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime<=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},Y=Cs.batchedUpdates,Z=Cs.interactiveUpdates,J=Cs.flushInteractiveUpdates;var As={createPortal:Rr,findDOMNode:function(e){return null==e?null:1===e.nodeType?e:xr(e)},hydrate:function(e,t,n){return Ir(null,e,t,!0,n)},render:function(e,t,n){return Ir(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,i){return(null==e||void 0===e._reactInternalFiber)&&r("38"),Ir(e,t,n,!1,i)},unmountComponentAtNode:function(e){return Ar(e)||r("40"),!!e._reactRootContainer&&(gr(function(){Ir(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Rr.apply(void 0,arguments)},unstable_batchedUpdates:vr,unstable_deferredUpdates:tr,unstable_interactiveUpdates:_r,flushSync:yr,unstable_flushControlled:br,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:ni,EventPluginRegistry:Jr,EventPropagators:si,ReactControlledComponent:Ni,ReactDOMComponentTree:ai,ReactDOMEventListener:Io},unstable_createRoot:function(e,t){return new Cr(e,!0,null!=t&&!0===t.hydrate)}};Tr({findFiberByHostInstance:_,bundleType:0,version:"16.4.1",rendererPackageName:"react-dom"});var Os={default:As},Is=Os&&As||Os;e.exports=Is.default?Is.default:Is},function(e,t,n){"use strict";var r=!("undefined"===typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=i},function(e,t,n){"use strict";function r(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}e.exports=r},function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e===t||!i(e)&&(i(t)?r(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var i=n(214);e.exports=r},function(e,t,n){"use strict";function r(e){return i(e)&&3==e.nodeType}var i=n(215);e.exports=r},function(e,t,n){"use strict";function r(e){var t=e?e.ownerDocument||e:document,n=t.defaultView||window;return!(!e||!("function"===typeof n.Node?e instanceof n.Node:"object"===typeof e&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName))}e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),l=n(217),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(l.a,null))}}]),t}(a.Component);t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),l=n(45),u=(n.n(l),n(275)),c=n.n(u),h=n(301),d=n.n(h),f=n(303),p=n.n(f),m=n(143),v=n.n(m),g=n(48),y=n.n(g),_=n(144),b=n.n(_),w=n(308),x=n.n(w),E=n(351),S=n.n(E),T=n(352),M=n.n(T),k=n(353),P=n.n(k),C=n(354),A=n.n(C),O=n(355),I=n.n(O),R=n(356),L=n.n(R),D=n(357),N=n.n(D),F=n(358),U=n.n(F),z=n(157),B=n.n(z),j=n(371),H=n.n(j),V=n(373),G=n.n(V),W=n(101),q=n.n(W),X=n(376),Y=n.n(X),Z=n(159),J=n.n(Z),K=n(377),Q=n.n(K),$=n(378),ee=n.n($),te=n(380),ne=n.n(te),re=n(382),ie=n.n(re),oe=n(384),ae=n.n(oe),se=n(386),le=n.n(se),ue=n(20),ce=n.n(ue),he=n(388),de=n(560),fe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),pe=Object(l.withStyles)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}})(ie.a),me=function(e){return{root:{flexGrow:1,zIndex:1,display:"flex"},content:{flexGrow:1,marginLeft:240,paddingTop:12*e.spacing.unit,padding:2*e.spacing.unit,minWidth:0,position:"relative"},appBar:{zIndex:e.zIndex.drawer+1},drawerPaper:{position:"fixed",width:240},menuButton:{marginLeft:-12,marginRight:20},toolbar:e.mixins.toolbar}},ve=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={open:!1},n.handleClickAlgorithms=function(){n.setState({openAlgo:!n.state.openAlgo})},n.handleListFiles=function(){fetch("http://localhost:3005/api/subjectslist").then(function(e){return e.json()}).then(function(e){n.setState({isLoaded:!0,subjectList:e,LoadSplitVolumes:!1,LoadPipeline:!1})})},n.handleClickPipeline=function(){n.setState({openPipe:!n.state.openPipe})},n.handleLoadPipeline=function(){n.setState({LoadSplitVolumes:!1,isLoaded:!1,LoadPipeline:!0})},n.handleSplitVolumes=function(){n.setState({LoadSplitVolumes:!0,isLoaded:!1,LoadPipeline:!1}),fetch("http://localhost:3005/api/subjectslist").then(function(e){return e.json()}).then(function(e){n.setState({subjectList:e})})},n.handleSVRRecon=function(){console.log("SVRRecon")},n.handleBrainExtraction=function(){console.log("BrainExtract")},n.state={showComponent:!1,subjectList:[],isLoaded:!1,error:null,LoadSplitVolumes:!1,LoadPipeline:!1},n._onButtonClick=n._onButtonClick.bind(n),n}return o(t,e),fe(t,[{key:"_onButtonClick",value:function(){this.setState({showComponent:!0})}},{key:"render",value:function(){var e=this.props.classes,t=this.state,n=t.subjectList;t.isLoaded,t.LoadSplitVolumes,t.LoadPipeline;return s.a.createElement("div",{className:e.root},s.a.createElement(d.a,{className:e.appBar},s.a.createElement(p.a,null,s.a.createElement(y.a,{variant:"title",color:"inherit",noWrap:!0},"IRIS"),s.a.createElement(p.a,null))),s.a.createElement(c.a,{variant:"permanent",classes:{paper:e.drawerPaper}},s.a.createElement("div",{className:e.toolbar}),s.a.createElement("div",{className:e.root},s.a.createElement(v.a,{component:"nav",subheader:s.a.createElement(U.a,{component:"div"},"Return to Home")},s.a.createElement(B.a,{button:!0},s.a.createElement(H.a,null,s.a.createElement(Y.a,null)),s.a.createElement(G.a,{inset:!0,primary:"Explore Files",onClick:this.handleListFiles})),s.a.createElement(B.a,{button:!0,onClick:this.handleClickAlgorithms},s.a.createElement(H.a,null,s.a.createElement(A.a,null)),s.a.createElement(G.a,{inset:!0,primary:"Algorithms"}),this.state.openAlgo?s.a.createElement(J.a,null):s.a.createElement(Q.a,null)),s.a.createElement(q.a,{in:this.state.openAlgo,timeout:"auto",unmountOnExit:!0},s.a.createElement(v.a,{component:"div",disablePadding:!0},s.a.createElement(B.a,{button:!0,className:e.nested},s.a.createElement(H.a,null,s.a.createElement(I.a,null)),s.a.createElement(G.a,{inset:!0,primary:"SplitVolumes",onClick:this.handleSplitVolumes})),s.a.createElement(B.a,{button:!0,className:e.nested},s.a.createElement(H.a,null,s.a.createElement(L.a,null)),s.a.createElement(G.a,{inset:!0,primary:"SVR Reconstruction",onClick:this.handleSVRRecon})),s.a.createElement(B.a,{button:!0,className:e.nested},s.a.createElement(H.a,null,s.a.createElement(N.a,null)),s.a.createElement(G.a,{inset:!0,primary:"Brain Extraction",onClick:this.handleBrainExtraction})))),s.a.createElement(B.a,{button:!0,onClick:this.handleClickPipeline},s.a.createElement(H.a,null,s.a.createElement(x.a,null)),s.a.createElement(G.a,{inset:!0,primary:"Pipeline"}),this.state.openPipe?s.a.createElement(J.a,null):s.a.createElement(Q.a,null)),s.a.createElement(q.a,{in:this.state.openPipe,timeout:"auto",unmountOnExit:!0},s.a.createElement(v.a,{component:"div",disablePadding:!0},s.a.createElement(B.a,{button:!0,className:e.nested},s.a.createElement(H.a,null,s.a.createElement(S.a,null)),s.a.createElement(G.a,{inset:!0,primary:"Create Pipeline"})),s.a.createElement(B.a,{button:!0,className:e.nested},s.a.createElement(H.a,null,s.a.createElement(M.a,null)),s.a.createElement(G.a,{inset:!0,primary:"Load Pipeline",onClick:this.handleLoadPipeline})),s.a.createElement(B.a,{button:!0,className:e.nested},s.a.createElement(H.a,null,s.a.createElement(P.a,null)),s.a.createElement(G.a,{inset:!0,primary:"Share Pipeline"})))),s.a.createElement(B.a,{button:!0},s.a.createElement(H.a,null,s.a.createElement(Y.a,null)),s.a.createElement(G.a,{inset:!0,primary:"Results"})),s.a.createElement(B.a,{button:!0},s.a.createElement(H.a,null,s.a.createElement(Y.a,null)),s.a.createElement(G.a,{inset:!0,primary:"Logout"})))),s.a.createElement(b.a,null)),this.state.isLoaded?s.a.createElement("main",{className:e.content},s.a.createElement(ce.a,{className:e.root},s.a.createElement(ee.a,{className:e.table},s.a.createElement(ae.a,null,s.a.createElement(le.a,null,s.a.createElement(pe,null,"Subject Name"),s.a.createElement(pe,{numeric:!0},"Scan no"),s.a.createElement(pe,{numeric:!0},"Group"),s.a.createElement(pe,{numeric:!0},"GA"),s.a.createElement(pe,{numeric:!0},"Study Group"))),s.a.createElement(ne.a,null,n.map(function(t,n){return s.a.createElement(le.a,{className:e.row,key:n},s.a.createElement(pe,{component:"th",scope:"row"},t.sname),s.a.createElement(pe,{numeric:!0},t.scan),s.a.createElement(pe,{numeric:!0},t.group),s.a.createElement(pe,{numeric:!0},t.GA),s.a.createElement(pe,{numeric:!0},t.study_group))}))))):null,this.state.LoadSplitVolumes?s.a.createElement("main",{className:e.content}," ",s.a.createElement(he.a,null)):null,this.state.LoadPipeline?s.a.createElement("main",{className:e.content},s.a.createElement(de.a,null)):null)}}]),t}(s.a.Component);t.a=Object(l.withStyles)(me)(ve)},function(e,t){function n(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}e.exports=n},function(e,t,n){"use strict";function r(e){return!0===i(e)&&"[object Object]"===Object.prototype.toString.call(e)}var i=n(220);e.exports=function(e){var t,n;return!1!==r(e)&&("function"===typeof(t=e.constructor)&&(n=t.prototype,!1!==r(n)&&!1!==n.hasOwnProperty("isPrototypeOf")))}},function(e,t,n){"use strict";e.exports=function(e){return null!=e&&"object"===typeof e&&!1===Array.isArray(e)}},function(e,t,n){"use strict";function r(e,t,n){var r;return(0,a.default)({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.default)({paddingLeft:2*t.unit,paddingRight:2*t.unit},n,(0,o.default)({},e.up("sm"),(0,a.default)({paddingLeft:3*t.unit,paddingRight:3*t.unit},n[e.up("sm")])))},toolbar:(r={minHeight:56},(0,o.default)(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,o.default)(r,e.up("sm"),{minHeight:64}),r)},n)}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=i(n(7)),a=i(n(8))},function(e,t,n){"use strict";function r(e,t,n,r){e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,p.lighten)(e.main,r):"dark"===t&&(e.dark=(0,p.darken)(e.main,1.5*r)))}function i(e){function t(e){var t=(0,p.getContrastRatio)(e,v.text.primary)>=S?v.text.primary:m.text.primary;return t}function n(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;!e.main&&e[n]&&(e.main=e[n]),r(e,"light",i,M),r(e,"dark",o,M),e.contrastText||(e.contrastText=t(e.main))}var i=e.primary,o=void 0===i?{light:u.default[300],main:u.default[500],dark:u.default[700]}:i,g=e.secondary,y=void 0===g?{light:c.default.A200,main:c.default.A400,dark:c.default.A700}:g,_=e.error,b=void 0===_?{light:d.default[300],main:d.default[500],dark:d.default[700]}:_,w=e.type,x=void 0===w?"light":w,E=e.contrastThreshold,S=void 0===E?3:E,T=e.tonalOffset,M=void 0===T?.2:T,k=(0,s.default)(e,["primary","secondary","error","type","contrastThreshold","tonalOffset"]);n(o),n(y,"A400","A200","A700"),n(b);var P={dark:v,light:m};return(0,l.default)((0,a.default)({common:f.default,type:x,primary:o,secondary:y,error:b,grey:h.default,contrastThreshold:S,getContrastText:t,augmentColor:n,tonalOffset:M},P[x]),k,{clone:!1})}var o=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,t.dark=t.light=void 0;var a=o(n(8)),s=o(n(3)),l=(o(n(13)),o(n(52))),u=o(n(223)),c=o(n(224)),h=o(n(225)),d=o(n(226)),f=o(n(227)),p=n(31),m={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:f.default.white,default:h.default[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.08)",hoverOpacity:.08,selected:"rgba(0, 0, 0, 0.14)",disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)"}};t.light=m;var v={text:{primary:f.default.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:h.default[800],default:"#303030"},action:{active:f.default.white,hover:"rgba(255, 255, 255, 0.1)",hoverOpacity:.1,selected:"rgba(255, 255, 255, 0.2)",disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)"}};t.dark=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},i=r;t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},i=r;t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},i=r;t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},i=r;t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={black:"#000",white:"#fff"},i=r;t.default=i},function(e,t,n){"use strict";function r(e){return Math.round(1e5*e)/1e5}function i(e,t){function n(e){return"".concat(e/_*x,"rem")}var i="function"===typeof t?t(e):t,o=i.fontFamily,u=void 0===o?'"Roboto", "Helvetica", "Arial", sans-serif':o,c=i.fontSize,h=void 0===c?14:c,d=i.fontWeightLight,f=void 0===d?300:d,p=i.fontWeightRegular,m=void 0===p?400:p,v=i.fontWeightMedium,g=void 0===v?500:v,y=i.htmlFontSize,_=void 0===y?16:y,b=i.allVariants,w=(0,s.default)(i,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","htmlFontSize","allVariants"]),x=h/14;return(0,l.default)({pxToRem:n,round:r,fontFamily:u,fontSize:h,fontWeightLight:f,fontWeightRegular:m,fontWeightMedium:g,display4:(0,a.default)({fontSize:n(112),fontWeight:f,fontFamily:u,letterSpacing:"-.04em",lineHeight:"".concat(r(128/112),"em"),marginLeft:"-.04em",color:e.text.secondary},b),display3:(0,a.default)({fontSize:n(56),fontWeight:m,fontFamily:u,letterSpacing:"-.02em",lineHeight:"".concat(r(73/56),"em"),marginLeft:"-.02em",color:e.text.secondary},b),display2:(0,a.default)({fontSize:n(45),fontWeight:m,fontFamily:u,lineHeight:"".concat(r(51/45),"em"),marginLeft:"-.02em",color:e.text.secondary},b),display1:(0,a.default)({fontSize:n(34),fontWeight:m,fontFamily:u,lineHeight:"".concat(r(41/34),"em"),color:e.text.secondary},b),headline:(0,a.default)({fontSize:n(24),fontWeight:m,fontFamily:u,lineHeight:"".concat(r(32.5/24),"em"),color:e.text.primary},b),title:(0,a.default)({fontSize:n(21),fontWeight:g,fontFamily:u,lineHeight:"".concat(r(24.5/21),"em"),color:e.text.primary},b),subheading:(0,a.default)({fontSize:n(16),fontWeight:m,fontFamily:u,lineHeight:"".concat(r(1.5),"em"),color:e.text.primary},b),body2:(0,a.default)({fontSize:n(14),fontWeight:g,fontFamily:u,lineHeight:"".concat(r(24/14),"em"),color:e.text.primary},b),body1:(0,a.default)({fontSize:n(14),fontWeight:m,fontFamily:u,lineHeight:"".concat(r(20.5/14),"em"),color:e.text.primary},b),caption:(0,a.default)({fontSize:n(12),fontWeight:m,fontFamily:u,lineHeight:"".concat(r(1.375),"em"),color:e.text.secondary},b),button:(0,a.default)({fontSize:n(14),textTransform:"uppercase",fontWeight:g,fontFamily:u,color:e.text.primary},b)},w,{clone:!1})}var o=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=o(n(8)),s=o(n(3)),l=o(n(52))},function(e,t,n){"use strict";function r(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0, 0, 0, ").concat(i,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0, 0, 0, ").concat(o,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0, 0, 0, ").concat(a,")")].join(",")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=.2,o=.14,a=.12,s=["none",r(0,1,3,0,0,1,1,0,0,2,1,-1),r(0,1,5,0,0,2,2,0,0,3,1,-2),r(0,1,8,0,0,3,4,0,0,3,3,-2),r(0,2,4,-1,0,4,5,0,0,1,10,0),r(0,3,5,-1,0,5,8,0,0,1,14,0),r(0,3,5,-1,0,6,10,0,0,1,18,0),r(0,4,5,-2,0,7,10,1,0,2,16,1),r(0,5,5,-3,0,8,10,1,0,3,14,2),r(0,5,6,-3,0,9,12,1,0,3,16,2),r(0,6,6,-3,0,10,14,1,0,4,18,3),r(0,6,7,-4,0,11,15,1,0,4,20,3),r(0,7,8,-4,0,12,17,2,0,5,22,4),r(0,7,8,-4,0,13,19,2,0,5,24,4),r(0,7,9,-4,0,14,21,2,0,5,26,4),r(0,8,9,-5,0,15,22,2,0,6,28,5),r(0,8,10,-5,0,16,24,2,0,6,30,5),r(0,8,11,-5,0,17,26,2,0,6,32,5),r(0,9,11,-5,0,18,28,2,0,7,34,6),r(0,9,12,-6,0,19,29,2,0,7,36,6),r(0,10,13,-6,0,20,31,3,0,8,38,7),r(0,10,13,-6,0,21,33,3,0,8,40,7),r(0,10,14,-6,0,22,35,3,0,8,42,7),r(0,11,14,-7,0,23,36,3,0,9,44,8),r(0,11,15,-7,0,24,38,3,0,9,46,8)],l=s;t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={borderRadius:4},i=r;t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={unit:8},i=r;t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={mobileStepper:1e3,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},i=r;t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=e.split(m),r="",i=0;i<n.length;i++)r+=t+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}function o(e){var t=e.options,n=e.style,r=n[h];if(r){for(var o in r)t.sheet.addRule(o,r[o],l({},t,{selector:i(o,e.selector)}));delete n[h]}}function a(e){var t=e.options,n=e.style;for(var r in n)if(r.substr(0,h.length)===h){var o=i(r.substr(h.length),e.selector);t.sheet.addRule(o,n[r],l({},t,{selector:o})),delete n[r]}}function s(){function e(e,t,n){if(e===h)return new f(e,t,n);if("@"===e[0]&&e.substr(0,d.length)===d)return new p(e,t,n);var r=n.parent;return r&&("global"!==r.type&&"global"!==r.options.parent.type||(n.global=!0)),n.global&&(n.selector=e),null}function t(e){"style"===e.type&&(o(e),a(e))}return{onCreateRule:e,onProcessRule:t}}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=s;var c=n(127),h="@global",d="@global ",f=function(){function e(t,n,i){r(this,e),this.type="global",this.key=t,this.options=i,this.rules=new c.RuleList(l({},i,{parent:this}));for(var o in n)this.rules.add(o,n[o],{selector:o});this.rules.process()}return u(e,[{key:"getRule",value:function(e){return this.rules.get(e)}},{key:"addRule",value:function(e,t,n){var r=this.rules.add(e,t,n);return this.options.jss.plugins.onProcessRule(r),r}},{key:"indexOf",value:function(e){return this.rules.indexOf(e)}},{key:"toString",value:function(){return this.rules.toString()}}]),e}(),p=function(){function e(t,n,i){r(this,e),this.name=t,this.options=i;var o=t.substr(d.length);this.rule=i.jss.createRule(o,n,l({},i,{parent:this,selector:o}))}return u(e,[{key:"toString",value:function(e){return this.rule.toString(e)}}]),e}(),m=/\s*,\s*/g},function(e,t,n){"use strict";function r(e){var t=null;for(var n in e){var o=e[n],a="undefined"===typeof o?"undefined":i(o);if("function"===a)t||(t={}),t[n]=o;else if("object"===a&&null!==o&&!Array.isArray(o)){var s=r(o);s&&(t||(t={}),t[n]=s)}}return t}Object.defineProperty(t,"__esModule",{value:!0});var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(26),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(){r(this,e),this.sheets=[],this.refs=[],this.keys=[]}return i(e,[{key:"get",value:function(e){var t=this.keys.indexOf(e);return this.sheets[t]}},{key:"add",value:function(e,t){var n=this.sheets,r=this.refs,i=this.keys,o=n.indexOf(t);return-1!==o?o:(n.push(t),r.push(0),i.push(e),n.length-1)}},{key:"manage",value:function(e){var t=this.keys.indexOf(e),n=this.sheets[t];return 0===this.refs[t]&&n.attach(),this.refs[t]++,this.keys[t]||this.keys.splice(t,0,e),n}},{key:"unmanage",value:function(e){var t=this.keys.indexOf(e);if(-1===t)return void(0,a.default)(!1,"SheetsManager: can't find sheet to unmanage");this.refs[t]>0&&0===--this.refs[t]&&this.sheets[t].detach()}},{key:"size",get:function(){return this.keys.length}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){if(null==e)return e;var t="undefined"===typeof e?"undefined":i(e);if("string"===t||"number"===t||"function"===t)return e;if(s(e))return e.map(r);if((0,a.default)(e))return e;var n={};for(var o in e){var l=e[o];"object"!==("undefined"===typeof l?"undefined":i(l))?n[o]=l:n[o]=r(l)}return n}Object.defineProperty(t,"__esModule",{value:!0});var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r;var o=n(129),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=Array.isArray},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,r){var i,o=n(239);i="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:r;var a=Object(o.a)(i);t.default=a}.call(t,n(14),n(238)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"===typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}t.a=r},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});e.CSS;t.default=function(e){return e}}).call(t,n(14))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n="2f1acc6c3a606b082e5eef5e54414ffb";null==e[n]&&(e[n]=0),t.default=e[n]++}).call(t,n(14))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(55),u=r(l),c=n(132),h=r(c),d=n(243),f=r(d),p=n(244),m=r(p),v=n(250),g=r(v),y=n(251),_=r(y),b=n(80),w=r(b),x=n(33),E=r(x),S=n(131),T=r(S),M=n(54),k=r(M),P=n(252),C=r(P),A=n(253),O=r(A),I=m.default.concat([g.default,_.default]),R=0,L=function(){function e(t){i(this,e),this.id=R++,this.version="9.8.7",this.plugins=new f.default,this.options={createGenerateClassName:T.default,Renderer:u.default?C.default:O.default,plugins:[]},this.generateClassName=(0,T.default)(),this.use.apply(this,I),this.setup(t)}return s(e,[{key:"setup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.createGenerateClassName&&(this.options.createGenerateClassName=e.createGenerateClassName,this.generateClassName=e.createGenerateClassName()),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),(e.virtual||e.Renderer)&&(this.options.Renderer=e.Renderer||(e.virtual?O.default:C.default)),e.plugins&&this.use.apply(this,e.plugins),this}},{key:"createStyleSheet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.index;"number"!==typeof n&&(n=0===w.default.index?0:w.default.index+1);var r=new h.default(e,a({},t,{jss:this,generateClassName:t.generateClassName||this.generateClassName,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r}},{key:"removeStyleSheet",value:function(e){return e.detach(),w.default.remove(e),this}},{key:"createRule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===("undefined"===typeof e?"undefined":o(e))&&(n=t,t=e,e=void 0);var r=n;r.jss=this,r.Renderer=this.options.Renderer,r.generateClassName||(r.generateClassName=this.generateClassName),r.classes||(r.classes={});var i=(0,k.default)(e,t,r);return!r.selector&&i instanceof E.default&&(i.selector="."+r.generateClassName(i)),this.plugins.onProcessRule(i),i}},{key:"use",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){-1===e.options.plugins.indexOf(t)&&(e.options.plugins.push(t),e.plugins.use(t))}),this}}]),e}();t.default=L},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(26),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(){r(this,e),this.hooks={onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}}return i(e,[{key:"onCreateRule",value:function(e,t,n){for(var r=0;r<this.hooks.onCreateRule.length;r++){var i=this.hooks.onCreateRule[r](e,t,n);if(i)return i}return null}},{key:"onProcessRule",value:function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.hooks.onProcessRule.length;n++)this.hooks.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}}},{key:"onProcessStyle",value:function(e,t,n){for(var r=e,i=0;i<this.hooks.onProcessStyle.length;i++)r=this.hooks.onProcessStyle[i](r,t,n),t.style=r}},{key:"onProcessSheet",value:function(e){for(var t=0;t<this.hooks.onProcessSheet.length;t++)this.hooks.onProcessSheet[t](e)}},{key:"onUpdate",value:function(e,t,n){for(var r=0;r<this.hooks.onUpdate.length;r++)this.hooks.onUpdate[r](e,t,n)}},{key:"onChangeValue",value:function(e,t,n){for(var r=e,i=0;i<this.hooks.onChangeValue.length;i++)r=this.hooks.onChangeValue[i](r,t,n);return r}},{key:"use",value:function(e){for(var t in e)this.hooks[t]?this.hooks[t].push(e[t]):(0,a.default)(!1,'[JSS] Unknown hook "%s".',t)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(245),o=r(i),a=n(246),s=r(a),l=n(247),u=r(l),c=n(248),h=r(c),d=n(249),f=r(d),p={"@charset":o.default,"@import":o.default,"@namespace":o.default,"@keyframes":s.default,"@media":u.default,"@supports":u.default,"@font-face":h.default,"@viewport":f.default,"@-ms-viewport":f.default},m=Object.keys(p).map(function(e){var t=new RegExp("^"+e),n=p[e];return{onCreateRule:function(e,r,i){return t.test(e)?new n(e,r,i):null}}});t.default=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n,i){r(this,e),this.type="simple",this.isProcessed=!1,this.key=t,this.value=n,this.options=i}return i(e,[{key:"toString",value:function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(46),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(){function e(t,n,o){r(this,e),this.type="keyframes",this.isProcessed=!1,this.key=t,this.options=o,this.rules=new s.default(i({},o,{parent:this}));for(var a in n)this.rules.add(a,n[a],i({},this.options,{parent:this,selector:a}));this.rules.process()}return o(e,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{indent:1},t=this.rules.toString(e);return t&&(t+="\n"),this.key+" {\n"+t+"}"}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(46),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(){function e(t,n,o){r(this,e),this.type="conditional",this.isProcessed=!1,this.key=t,this.options=o,this.rules=new s.default(i({},o,{parent:this}));for(var a in n)this.rules.add(a,n[a]);this.rules.process()}return o(e,[{key:"getRule",value:function(e){return this.rules.get(e)}},{key:"indexOf",value:function(e){return this.rules.indexOf(e)}},{key:"addRule",value:function(e,t,n){var r=this.rules.add(e,t,n);return this.options.jss.plugins.onProcessRule(r),r}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{indent:1},t=this.rules.toString(e);return t?this.key+" {\n"+t+"\n}":""}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(79),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t,n,i){r(this,e),this.type="font-face",this.isProcessed=!1,this.key=t,this.style=n,this.options=i}return i(e,[{key:"toString",value:function(e){if(Array.isArray(this.style)){for(var t="",n=0;n<this.style.length;n++)t+=(0,a.default)(this.key,this.style[n]),this.style[n+1]&&(t+="\n");return t}return(0,a.default)(this.key,this.style,e)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(79),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t,n,i){r(this,e),this.type="viewport",this.isProcessed=!1,this.key=t,this.style=n,this.options=i}return i(e,[{key:"toString",value:function(e){return(0,a.default)(this.key,this.style,e)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(33),o=r(i),a=n(54),s=r(a),l=n(129),u=r(l);t.default={onCreateRule:function(e,t,n){if(!(0,u.default)(t))return null;var r=t,i=(0,s.default)(e,{},n);return r.subscribe(function(e){for(var t in e)i.prop(t,e[t])}),i},onProcessRule:function(e){if(e instanceof o.default){var t=e,n=t.style;for(var r in n){(function(e){var r=n[e];if(!(0,u.default)(r))return"continue";delete n[e],r.subscribe({next:function(n){t.prop(e,n)}})})(r)}}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(46),o=r(i),a=n(33),s=r(a),l=n(54),u=r(l),c=Date.now(),h="fnValues"+c,d="fnStyle"+ ++c;t.default={onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var r=(0,u.default)(e,{},n);return r[d]=t,r},onProcessStyle:function(e,t){var n={};for(var r in e){var i=e[r];"function"===typeof i&&(delete e[r],n[r]=i)}return t=t,t[h]=n,e},onUpdate:function(e,t){if(t.rules instanceof o.default)return void t.rules.update(e);if(t instanceof s.default){if(t=t,t[h])for(var n in t[h])t.prop(n,t[h][n](e));t=t;var r=t[d];if(r){var i=r(e);for(var a in i)t.prop(a,i[a])}}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){try{return e.style.getPropertyValue(t)}catch(e){return""}}function a(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=(0,x.default)(n,!0),"!important"===n[n.length-1]))return e.style.setProperty(t,r,"important"),!0;e.style.setProperty(t,r)}catch(e){return!1}return!0}function s(e,t){try{e.style.removeProperty(t)}catch(e){(0,v.default)(!1,'[JSS] DOMException "%s" was thrown. Tried to remove property "%s".',e.message,t)}}function l(e,t){return e.selectorText=t,e.selectorText===t}function u(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}function c(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}function h(e){for(var t=M(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}function d(e){var t=y.default.registry;if(t.length>0){var n=u(t,e);if(n)return n.renderer.element;if(n=c(t,e))return n.renderer.element.nextElementSibling}var r=e.insertionPoint;if(r&&"string"===typeof r){var i=h(r);if(i)return i.nextSibling;(0,v.default)("jss"===r,'[JSS] Insertion point "%s" not found.',r)}return null}function f(e,t){var n=t.insertionPoint,r=d(t);if(r){var i=r.parentNode;return void(i&&i.insertBefore(e,r))}if(n&&"number"===typeof n.nodeType){var o=n,a=o.parentNode;return void(a?a.insertBefore(e,o.nextSibling):(0,v.default)(!1,"[JSS] Insertion point is not in the DOM."))}M().insertBefore(e,r)}Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=n(26),v=r(m),g=n(80),y=r(g),_=n(33),b=r(_),w=n(53),x=r(w),E=function(e){var t=void 0;return function(){return t||(t=e()),t}},S={STYLE_RULE:1,KEYFRAMES_RULE:7},T=function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.substr(t,e.indexOf("{")-1)};return function(t){if(t.type===S.STYLE_RULE)return t.selectorText;if(t.type===S.KEYFRAMES_RULE){var n=t.name;if(n)return"@keyframes "+n;var r=t.cssText;return"@"+e(r,r.indexOf("keyframes"))}return e(t.cssText)}}(),M=E(function(){return document.head||document.getElementsByTagName("head")[0]}),k=function(){var e=void 0,t=!1;return function(n){var r={};e||(e=document.createElement("style"));for(var i=0;i<n.length;i++){var o=n[i];if(o instanceof b.default){var a=o.selector;if(a&&-1!==a.indexOf("\\")){t||(M().appendChild(e),t=!0),e.textContent=a+" {}";var s=e,l=s.sheet;if(l){var u=l.cssRules;u&&(r[u[0].selectorText]=o.key)}}}}return t&&(M().removeChild(e),t=!1),r}}(),P=E(function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null}),C=function(){function e(t){i(this,e),this.getPropertyValue=o,this.setProperty=a,this.removeProperty=s,this.setSelector=l,this.getKey=T,this.getUnescapedKeysMap=k,this.hasInsertedRules=!1,t&&y.default.add(t),this.sheet=t;var n=this.sheet?this.sheet.options:{},r=n.media,u=n.meta,c=n.element;this.element=c||document.createElement("style"),this.element.setAttribute("data-jss",""),r&&this.element.setAttribute("media",r),u&&this.element.setAttribute("data-meta",u);var h=P();h&&this.element.setAttribute("nonce",h)}return p(e,[{key:"attach",value:function(){!this.element.parentNode&&this.sheet&&(this.hasInsertedRules&&(this.deploy(),this.hasInsertedRules=!1),f(this.element,this.sheet.options))}},{key:"detach",value:function(){this.element.parentNode.removeChild(this.element)}},{key:"deploy",value:function(){this.sheet&&(this.element.textContent="\n"+this.sheet.toString()+"\n")}},{key:"insertRule",value:function(e,t){var n=this.element.sheet,r=n.cssRules,i=e.toString();if(t||(t=r.length),!i)return!1;try{n.insertRule(i,t)}catch(t){return(0,v.default)(!1,"[JSS] Can not insert an unsupported rule \n\r%s",e),!1}return this.hasInsertedRules=!0,r[t]}},{key:"deleteRule",value:function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),!0)}},{key:"indexOf",value:function(e){for(var t=this.element.sheet.cssRules,n=0;n<t.length;n++)if(e===t[n])return n;return-1}},{key:"replaceRule",value:function(e,t){var n=this.indexOf(e),r=this.insertRule(t,n);return this.element.sheet.deleteRule(n),r}},{key:"getRules",value:function(){return this.element.sheet.cssRules}}]),e}();t.default=C},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"setProperty",value:function(){return!0}},{key:"getPropertyValue",value:function(){return""}},{key:"removeProperty",value:function(){}},{key:"setSelector",value:function(){return!0}},{key:"getKey",value:function(){return""}},{key:"attach",value:function(){}},{key:"detach",value:function(){}},{key:"deploy",value:function(){}},{key:"insertRule",value:function(){return!1}},{key:"deleteRule",value:function(){return!0}},{key:"replaceRule",value:function(){return!1}},{key:"getRules",value:function(){}},{key:"indexOf",value:function(){return-1}}]),e}();t.default=o},function(e,t,n){"use strict";function r(){function e(e){return function(t,n){var r=e.getRule(n);return r?r.selector:((0,a.default)(!1,"[JSS] Could not find the referenced rule %s in %s.",n,e.options.meta||e),n)}}function t(e,t){for(var n=t.split(s),r=e.split(s),i="",a=0;a<n.length;a++)for(var u=n[a],c=0;c<r.length;c++){var h=r[c];i&&(i+=", "),i+=o(h)?h.replace(l,u):u+" "+h}return i}function n(e,t,n){if(n)return i({},n,{index:n.index+1});var r=e.options.nestingLevel;return r=void 0===r?1:r+1,i({},e.options,{nestingLevel:r,index:t.indexOf(e)+1})}function r(r,a){if("style"!==a.type)return r;var s=a.options.parent,l=void 0,c=void 0;for(var h in r){var d=o(h),f="@"===h[0];if(d||f){if(l=n(a,s,l),d){var p=t(h,a.selector);c||(c=e(s)),p=p.replace(u,c),s.addRule(p,r[h],i({},l,{selector:p}))}else f&&s.addRule(h,null,l).addRule(a.key,r[h],{selector:a.selector});delete r[h]}}return r}var o=function(e){return-1!==e.indexOf("&")};return{onProcessStyle:r}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(26),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=/\s*,\s*/g,l=/&/g,u=/\$([\w-]+)/g},function(e,t,n){"use strict";function r(e){var t={};for(var n in e)t[(0,a.default)(n)]=e[n];return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(r):t.fallbacks=r(e.fallbacks)),t}function i(){function e(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=r(e[t]);return e}return r(e)}function t(e,t,n){var r=(0,a.default)(t);return t===r?e:(n.prop(r,e),null)}return{onProcessStyle:e,onChangeValue:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(256),a=function(e){return e&&e.__esModule?e:{default:e}}(o)},function(e,t,n){"use strict";function r(e){return e in a?a[e]:a[e]=e.replace(i,"-$&").toLowerCase().replace(o,"-ms-")}var i=/[A-Z]/g,o=/^ms-/,a={};e.exports=r},function(e,t,n){"use strict";function r(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var i in e)r[i]=e[i],r[i.replace(t,n)]=e[i];return r}function i(e,t,n){if(!t)return t;var r=t,o="undefined"===typeof t?"undefined":a(t);switch("object"===o&&Array.isArray(t)&&(o="array"),o){case"object":if("fallbacks"===e){for(var s in t)t[s]=i(s,t[s],n);break}for(var l in t)t[l]=i(e+"-"+l,t[l],n);break;case"array":for(var c=0;c<t.length;c++)t[c]=i(e,t[c],n);break;case"number":0!==t&&(r=t+(n[e]||u[e]||""))}return r}function o(){function e(e,t){if("style"!==t.type)return e;for(var n in e)e[n]=i(n,e[n],o);return e}function t(e,t){return i(t,e,o)}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r(n);return{onProcessStyle:e,onChangeValue:t}}Object.defineProperty(t,"__esModule",{value:!0});var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=o;var s=n(258),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=r(l.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"animation-delay":"ms","animation-duration":"ms","background-position":"px","background-position-x":"px","background-position-y":"px","background-size":"px",border:"px","border-bottom":"px","border-bottom-left-radius":"px","border-bottom-right-radius":"px","border-bottom-width":"px","border-left":"px","border-left-width":"px","border-radius":"px","border-right":"px","border-right-width":"px","border-spacing":"px","border-top":"px","border-top-left-radius":"px","border-top-right-radius":"px","border-top-width":"px","border-width":"px","border-after-width":"px","border-before-width":"px","border-end-width":"px","border-horizontal-spacing":"px","border-start-width":"px","border-vertical-spacing":"px",bottom:"px","box-shadow":"px","column-gap":"px","column-rule":"px","column-rule-width":"px","column-width":"px","flex-basis":"px","font-size":"px","font-size-delta":"px",height:"px",left:"px","letter-spacing":"px","logical-height":"px","logical-width":"px",margin:"px","margin-after":"px","margin-before":"px","margin-bottom":"px","margin-left":"px","margin-right":"px","margin-top":"px","max-height":"px","max-width":"px","margin-end":"px","margin-start":"px","mask-position-x":"px","mask-position-y":"px","mask-size":"px","max-logical-height":"px","max-logical-width":"px","min-height":"px","min-width":"px","min-logical-height":"px","min-logical-width":"px",motion:"px","motion-offset":"px",outline:"px","outline-offset":"px","outline-width":"px",padding:"px","padding-bottom":"px","padding-left":"px","padding-right":"px","padding-top":"px","padding-after":"px","padding-before":"px","padding-end":"px","padding-start":"px","perspective-origin-x":"%","perspective-origin-y":"%",perspective:"px",right:"px","shape-margin":"px",size:"px","text-indent":"px","text-stroke":"px","text-stroke-width":"px",top:"px","transform-origin":"%","transform-origin-x":"%","transform-origin-y":"%","transform-origin-z":"%","transition-delay":"ms","transition-duration":"ms","vertical-align":"px",width:"px","word-spacing":"px","box-shadow-x":"px","box-shadow-y":"px","box-shadow-blur":"px","box-shadow-spread":"px","font-line-height":"px","text-shadow-x":"px","text-shadow-y":"px","text-shadow-blur":"px"}},function(e,t,n){"use strict";function r(){function e(e){"keyframes"===e.type&&(e.key="@"+o.prefix.css+e.key.substr(1))}function t(e,t){if("style"!==t.type)return e;for(var n in e){var r=e[n],i=!1,a=o.supportedProperty(n);a&&a!==n&&(i=!0);var s=!1,l=o.supportedValue(a,r);l&&l!==r&&(s=!0),(i||s)&&(i&&delete e[n],e[a||n]=l||r)}return e}function n(e,t){return o.supportedValue(t,e)}return{onProcessRule:e,onProcessStyle:t,onChangeValue:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(260),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.supportedValue=t.supportedProperty=t.prefix=void 0;var i=n(81),o=r(i),a=n(261),s=r(a),l=n(263),u=r(l);t.default={prefix:o.default,supportedProperty:s.default,supportedValue:u.default},t.prefix=o.default,t.supportedProperty=s.default,t.supportedValue=u.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return h?null!=d[e]?d[e]:((0,c.default)(e)in h.style?d[e]=e:l.default.js+(0,c.default)("-"+e)in h.style?d[e]=l.default.css+e:d[e]=!1,d[e]):e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(55),a=r(o),s=n(81),l=r(s),u=n(262),c=r(u),h=void 0,d={};if(a.default){h=document.createElement("p");var f=window.getComputedStyle(document.documentElement,"");for(var p in f)isNaN(p)||(d[f[p]]=f[p])}},function(e,t,n){"use strict";function r(e){return e.replace(o,i)}function i(e,t){return t?t.toUpperCase():""}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=/[-\s]+(.)?/g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!c)return t;if("string"!==typeof t||!isNaN(parseInt(t,10)))return t;var n=e+t;if(null!=u[n])return u[n];try{c.style[e]=t}catch(e){return u[n]=!1,!1}return""!==c.style[e]?u[n]=t:(t=l.default.css+t,"-ms-flex"===t&&(t="-ms-flexbox"),c.style[e]=t,""!==c.style[e]&&(u[n]=t)),u[n]||(u[n]=!1),c.style[e]="",u[n]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(55),a=r(o),s=n(81),l=r(s),u={},c=void 0;a.default&&(c=document.createElement("p"))},function(e,t,n){"use strict";function r(){function e(e,t){return e.length-t.length}function t(t,n){if("style"!==n.type)return t;var r={},i=Object.keys(t).sort(e);for(var o in i)r[i[o]]=t[i[o]];return r}return{onProcessStyle:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";var r=n(133),i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(8)),a=i(n(7)),s=i(n(9)),l=i(n(10)),u=i(n(11)),c=i(n(12)),h=i(n(1)),d=i(n(2)),f=(i(n(13)),i(n(269))),p=r(n(82)),m=(i(n(83)),function(e){function t(e,n){var r;return(0,s.default)(this,t),r=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r.broadcast=(0,f.default)(),r.unsubscribeId=null,r.outerTheme=null,r.outerTheme=p.default.initial(n),r.broadcast.setState(r.mergeOuterLocalTheme(r.props.theme)),r}return(0,c.default)(t,e),(0,l.default)(t,[{key:"getChildContext",value:function(){var e,t=this.props,n=t.sheetsManager,r=t.disableStylesGeneration,i=this.context.muiThemeProviderOptions||{};return void 0!==n&&(i.sheetsManager=n),void 0!==r&&(i.disableStylesGeneration=r),e={},(0,a.default)(e,p.CHANNEL,this.broadcast),(0,a.default)(e,"muiThemeProviderOptions",i),e}},{key:"componentDidMount",value:function(){var e=this;this.unsubscribeId=p.default.subscribe(this.context,function(t){e.outerTheme=t,e.broadcast.setState(e.mergeOuterLocalTheme(e.props.theme))})}},{key:"componentDidUpdate",value:function(e){this.props.theme!==e.theme&&this.broadcast.setState(this.mergeOuterLocalTheme(this.props.theme))}},{key:"componentWillUnmount",value:function(){null!==this.unsubscribeId&&p.default.unsubscribe(this.context,this.unsubscribeId)}},{key:"mergeOuterLocalTheme",value:function(e){return"function"===typeof e?e(this.outerTheme):this.outerTheme?(0,o.default)({},this.outerTheme,e):e}},{key:"render",value:function(){return this.props.children}}]),t}(h.default.Component));m.propTypes={},m.propTypes={},m.childContextTypes=(0,o.default)({},p.default.contextTypes,{muiThemeProviderOptions:d.default.object}),m.contextTypes=(0,o.default)({},p.default.contextTypes,{muiThemeProviderOptions:d.default.object});var v=m;t.default=v},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){"use strict";function r(){}var i=n(268);e.exports=function(){function e(e,t,n,r,o,a){if(a!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e){function t(){return s}function n(e){s=e;for(var t=Object.keys(o),n=0,r=t.length;n<r;n++)o[t[n]]&&o[t[n]](e)}function r(e){if("function"!==typeof e)throw new Error("listener must be a function.");var t=a;return o[t]=e,a+=1,t}function i(e){o[e]=void 0}var o={},a=1,s=e;return{getState:t,setState:n,subscribe:r,unsubscribe:i}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(2),a=n(135),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),l=n(272),u=function(e){return e&&e.__esModule?e:{default:e}}(l);t.default=(i={},r(i,s.jss,u.default.jss),r(i,s.sheetOptions,o.object),r(i,s.sheetsRegistry,u.default.registry),r(i,s.managers,o.object),i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.default={jss:(0,r.shape)({options:(0,r.shape)({createGenerateClassName:r.func.isRequired}).isRequired,createStyleSheet:r.func.isRequired,removeStyleSheet:r.func.isRequired}),registry:(0,r.shape)({add:r.func.isRequired,toString:r.func.isRequired})}},function(e,t,n){"use strict";function r(e,t){return t}function i(e){function t(t,i){var o=n?e(t):e;if(!i||!t.overrides||!t.overrides[i])return o;var l=t.overrides[i],u=(0,a.default)({},o);return Object.keys(l).forEach(function(e){u[e]=(0,s.default)(u[e],l[e],{arrayMerge:r})}),u}var n="function"===typeof e;return{create:t,options:{},themingEnabled:n}}var o=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(8)),s=(o(n(56)),o(n(13)),o(n(52))),l=i;t.default=l},function(e,t,n){"use strict";function r(e){var t=e.theme,n=e.name;return n&&t.props&&t.props[n]?t.props[n]:{}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r;t.default=i},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(276))},function(e,t,n){"use strict";function r(e){return-1!==["left","right"].indexOf(e.anchor)}function i(e){return"rtl"===e.theme.direction&&r(e)?x[e.anchor]:e.anchor}var o=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.isHorizontal=r,t.getAnchor=i,t.default=t.styles=void 0;var a=o(n(8)),s=o(n(4)),l=o(n(7)),u=o(n(3)),c=o(n(9)),h=o(n(10)),d=o(n(11)),f=o(n(12)),p=o(n(1)),m=(o(n(2)),o(n(6))),v=o(n(85)),g=o(n(5)),y=o(n(297)),_=o(n(20)),b=n(16),w=n(32),x={left:"right",right:"left",top:"down",bottom:"up"},E=function(e){return{docked:{flex:"0 0 auto"},paper:{overflowY:"auto",display:"flex",flexDirection:"column",height:"100vh",flex:"1 0 auto",zIndex:e.zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:"none"},paperAnchorLeft:{left:0,right:"auto"},paperAnchorRight:{left:"auto",right:0},paperAnchorTop:{top:0,left:0,bottom:"auto",right:0,height:"auto",maxHeight:"100vh"},paperAnchorBottom:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100vh"},paperAnchorDockedLeft:{borderRight:"1px solid ".concat(e.palette.divider)},paperAnchorDockedTop:{borderBottom:"1px solid ".concat(e.palette.divider)},paperAnchorDockedRight:{borderLeft:"1px solid ".concat(e.palette.divider)},paperAnchorDockedBottom:{borderTop:"1px solid ".concat(e.palette.divider)},modal:{}}};t.styles=E;var S=function(e){function t(){var e,n,r;(0,c.default)(this,t);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(0,d.default)(r,(n=r=(0,d.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.mounted=!1,n))}return(0,f.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"render",value:function(){var e=this.props,t=(e.anchor,e.children),n=e.classes,r=e.className,o=e.elevation,c=e.ModalProps;c=void 0===c?{}:c;var h=c.BackdropProps,d=(0,u.default)(c,["BackdropProps"]),f=e.onClose,g=e.open,w=e.PaperProps,E=e.SlideProps,S=(e.theme,e.transitionDuration),T=e.variant,M=(0,u.default)(e,["anchor","children","classes","className","elevation","ModalProps","onClose","open","PaperProps","SlideProps","theme","transitionDuration","variant"]),k=i(this.props),P=p.default.createElement(_.default,(0,s.default)({elevation:"temporary"===T?o:0,square:!0,className:(0,m.default)(n.paper,n["paperAnchor".concat((0,b.capitalize)(k))],(0,l.default)({},n["paperAnchorDocked".concat((0,b.capitalize)(k))],"temporary"!==T))},w),t);if("permanent"===T)return p.default.createElement("div",(0,s.default)({className:(0,m.default)(n.docked,r)},M),P);var C=p.default.createElement(y.default,(0,s.default)({in:g,direction:x[k],timeout:S,appear:this.mounted},E),P);return"persistent"===T?p.default.createElement("div",(0,s.default)({className:(0,m.default)(n.docked,r)},M),C):p.default.createElement(v.default,(0,s.default)({BackdropProps:(0,a.default)({},h,{transitionDuration:S}),className:(0,m.default)(n.modal,r),open:g,onClose:f},M,d),C)}}]),t}(p.default.Component);S.propTypes={},S.defaultProps={anchor:"left",elevation:16,open:!1,transitionDuration:{enter:w.duration.enteringScreen,exit:w.duration.leavingScreen},variant:"temporary"};var T=(0,g.default)(E,{name:"MuiDrawer",flip:!1,withTheme:!0})(S);t.default=T},function(e,t,n){"use strict";function r(e,t){return e="function"===typeof e?e():e,m.default.findDOMNode(e)||t}function i(e){return!!e.children&&e.children.props.hasOwnProperty("in")}var o=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=o(n(4)),s=o(n(7)),l=o(n(3)),u=o(n(9)),c=o(n(10)),h=o(n(11)),d=o(n(12)),f=o(n(57)),p=o(n(1)),m=o(n(18)),v=(o(n(2)),o(n(6))),g=(o(n(13)),o(n(34))),y=o(n(21)),_=o(n(278)),b=o(n(280)),w=n(16),x=o(n(5)),E=o(n(137)),S=o(n(293)),T=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}};t.styles=T;var M=function(e){function t(e){var n;return(0,u.default)(this,t),n=(0,h.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n.mountNode=null,n.modalRef=null,n.dialogRef=null,n.mounted=!1,n.handleRendered=function(){n.autoFocus(),n.modalRef.scrollTop=0,n.props.onRendered&&n.props.onRendered()},n.handleOpen=function(){var e=(0,y.default)(n.mountNode),t=r(n.props.container,e.body);n.props.manager.add((0,f.default)(n),t),e.addEventListener("keydown",n.handleDocumentKeyDown),e.addEventListener("focus",n.enforceFocus,!0)},n.handleClose=function(){n.props.manager.remove((0,f.default)(n));var e=(0,y.default)(n.mountNode);e.removeEventListener("keydown",n.handleDocumentKeyDown),e.removeEventListener("focus",n.enforceFocus,!0),n.restoreLastFocus()},n.handleExited=function(){n.setState({exited:!0}),n.handleClose()},n.handleBackdropClick=function(e){e.target===e.currentTarget&&(n.props.onBackdropClick&&n.props.onBackdropClick(e),!n.props.disableBackdropClick&&n.props.onClose&&n.props.onClose(e,"backdropClick"))},n.handleDocumentKeyDown=function(e){n.isTopModal()&&"esc"===(0,g.default)(e)&&(e.defaultPrevented||(n.props.onEscapeKeyDown&&n.props.onEscapeKeyDown(e),!n.props.disableEscapeKeyDown&&n.props.onClose&&n.props.onClose(e,"escapeKeyDown")))},n.checkForFocus=function(){n.lastFocus=(0,y.default)(n.mountNode).activeElement},n.enforceFocus=function(){if(!n.props.disableEnforceFocus&&n.mounted&&n.isTopModal()){var e=(0,y.default)(n.mountNode).activeElement;n.dialogRef&&!n.dialogRef.contains(e)&&n.dialogRef.focus()}},n.state={exited:!n.props.open},n}return(0,d.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.props.open&&this.handleOpen()}},{key:"componentDidUpdate",value:function(e){!e.open&&this.props.open&&this.checkForFocus(),!e.open||this.props.open||i(this.props)?!e.open&&this.props.open&&this.handleOpen():this.handleClose()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,(this.props.open||i(this.props)&&!this.state.exited)&&this.handleClose()}},{key:"autoFocus",value:function(){if(!this.props.disableAutoFocus){var e=(0,y.default)(this.mountNode).activeElement;this.dialogRef&&!this.dialogRef.contains(e)&&(this.lastFocus=e,this.dialogRef.hasAttribute("tabIndex")||this.dialogRef.setAttribute("tabIndex",-1),this.dialogRef.focus())}}},{key:"restoreLastFocus",value:function(){this.props.disableRestoreFocus||this.lastFocus&&(this.lastFocus.focus&&this.lastFocus.focus(),this.lastFocus=null)}},{key:"isTopModal",value:function(){return this.props.manager.isTopModal(this)}},{key:"render",value:function(){var e=this,t=this.props,n=t.BackdropComponent,r=t.BackdropProps,o=t.children,u=t.classes,c=t.className,h=t.container,d=(t.disableAutoFocus,t.disableBackdropClick,t.disableEnforceFocus,t.disableEscapeKeyDown,t.disablePortal),f=(t.disableRestoreFocus,t.hideBackdrop),m=t.keepMounted,g=(t.manager,t.onBackdropClick,t.onClose,t.onEscapeKeyDown,t.onRendered,t.open),y=(0,l.default)(t,["BackdropComponent","BackdropProps","children","classes","className","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),x=this.state.exited,E=i(this.props),S={};return m||g||E&&!x?(E&&(S.onExited=(0,w.createChainedFunction)(this.handleExited,o.props.onExited)),void 0===o.props.role&&(S.role=o.props.role||"document"),void 0===o.props.tabIndex&&(S.tabIndex=o.props.tabIndex||"-1"),p.default.createElement(b.default,{ref:function(t){e.mountNode=t?t.getMountNode():t},container:h,disablePortal:d,onRendered:this.handleRendered},p.default.createElement("div",(0,a.default)({ref:function(t){e.modalRef=t},className:(0,v.default)(u.root,c,(0,s.default)({},u.hidden,x))},y),f?null:p.default.createElement(n,(0,a.default)({open:g,onClick:this.handleBackdropClick},r)),p.default.createElement(_.default,{rootRef:function(t){e.dialogRef=t}},p.default.cloneElement(o,S))))):null}}],[{key:"getDerivedStateFromProps",value:function(e){return e.open?{exited:!1}:i(e)?null:{exited:!0}}}]),t}(p.default.Component);M.propTypes={},M.defaultProps={disableAutoFocus:!1,disableBackdropClick:!1,disableEnforceFocus:!1,disableEscapeKeyDown:!1,disablePortal:!1,disableRestoreFocus:!1,hideBackdrop:!1,keepMounted:!1,manager:new E.default,BackdropComponent:S.default};var k=(0,x.default)(T,{flip:!1,name:"MuiModal"})(M);t.default=k},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(279))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(10)),a=r(n(11)),s=r(n(12)),l=r(n(1)),u=r(n(18)),c=(r(n(2)),r(n(83)),function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.rootRef,t=u.default.findDOMNode(this);"function"===typeof e?e(t):e&&(e.current=t)}},{key:"componentWillUnmount",value:function(){var e=this.props.rootRef;"function"===typeof e?e(null):e&&(e.current=null)}},{key:"render",value:function(){return this.props.children}}]),t}(l.default.Component));c.propTypes={},c.propTypes={};var h=c;t.default=h},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(281))},function(e,t,n){"use strict";function r(e,t){return e="function"===typeof e?e():e,h.default.findDOMNode(e)||t}function i(e){return(0,d.default)(h.default.findDOMNode(e))}var o=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(9)),s=o(n(10)),l=o(n(11)),u=o(n(12)),c=o(n(1)),h=o(n(18)),d=(o(n(2)),o(n(21))),f=(o(n(83)),function(e){function t(){var e,n,r;(0,a.default)(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(0,l.default)(r,(n=r=(0,l.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.getMountNode=function(){return r.mountNode},n))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.setMountNode(this.props.container),this.props.disablePortal||this.forceUpdate(this.props.onRendered)}},{key:"componentDidUpdate",value:function(e){e.container===this.props.container&&e.disablePortal===this.props.disablePortal||(this.setMountNode(this.props.container),this.props.disablePortal||this.forceUpdate(this.props.onRendered))}},{key:"componentWillUnmount",value:function(){this.mountNode=null}},{key:"setMountNode",value:function(e){if(this.props.disablePortal)return void(this.mountNode=h.default.findDOMNode(this).parentElement);this.mountNode=r(e,i(this).body)}},{key:"render",value:function(){var e=this.props,t=e.children;return e.disablePortal?t:this.mountNode?h.default.createPortal(t,this.mountNode):null}}]),t}(c.default.Component));f.propTypes={},f.defaultProps={disablePortal:!1},f.propTypes={};var p=f;t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var r="",i="",o=t;if("string"===typeof t){if(void 0===n)return e.style[(0,a.default)(t)]||(0,c.default)(e).getPropertyValue((0,l.default)(t));(o={})[t]=n}Object.keys(o).forEach(function(t){var n=o[t];n||0===n?(0,m.default)(t)?i+=t+"("+n+") ":r+=(0,l.default)(t)+": "+n+";":(0,d.default)(e,(0,l.default)(t))}),i&&(r+=f.transform+": "+i+";"),e.style.cssText+=";"+r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(138),a=r(o),s=n(284),l=r(s),u=n(286),c=r(u),h=n(287),d=r(h),f=n(288),p=n(289),m=r(p);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e.replace(i,function(e,t){return t.toUpperCase()})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=/-(.)/g;e.exports=t.default},function(e,t,n){"use strict";function r(e){return(0,o.default)(e).replace(a,"-ms-")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(285),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=/^ms-/;e.exports=t.default},function(e,t,n){"use strict";function r(e){return e.replace(i,"-$1").toLowerCase()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=/([A-Z])/g;e.exports=t.default},function(e,t,n){"use strict";function r(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(t){var n=e.style;"float"==(t=(0,o.default)(t))&&(t="styleFloat");var r=e.currentStyle[t]||null;if(null==r&&n&&n[t]&&(r=n[t]),s.test(r)&&!a.test(t)){var i=n.left,l=e.runtimeStyle,u=l&&l.left;u&&(l.left=e.currentStyle.left),n.left="fontSize"===t?"1em":r,r=n.pixelLeft+"px",n.left=i,u&&(l.left=u)}return r}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(138),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=/^(top|right|bottom|left)$/,s=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;e.exports=t.default},function(e,t,n){"use strict";function r(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var r=n(139),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o="transform",a=void 0,s=void 0,l=void 0,u=void 0,c=void 0,h=void 0,d=void 0,f=void 0,p=void 0,m=void 0,v=void 0;if(i.default){var g=function(){for(var e=document.createElement("div").style,t={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},n=Object.keys(t),r=void 0,i=void 0,o="",a=0;a<n.length;a++){var s=n[a];if(s+"TransitionProperty"in e){o="-"+s.toLowerCase(),r=t[s]("TransitionEnd"),i=t[s]("AnimationEnd");break}}return!r&&"transitionProperty"in e&&(r="transitionend"),!i&&"animationName"in e&&(i="animationend"),e=null,{animationEnd:i,transitionEnd:r,prefix:o}}();a=g.prefix,t.transitionEnd=s=g.transitionEnd,t.animationEnd=l=g.animationEnd,t.transform=o=a+"-"+o,t.transitionProperty=u=a+"-transition-property",t.transitionDuration=c=a+"-transition-duration",t.transitionDelay=d=a+"-transition-delay",t.transitionTiming=h=a+"-transition-timing-function",t.animationName=f=a+"-animation-name",t.animationDuration=p=a+"-animation-duration",t.animationTiming=m=a+"-animation-delay",t.animationDelay=v=a+"-animation-timing-function"}t.transform=o,t.transitionProperty=u,t.transitionTiming=h,t.transitionDelay=d,t.transitionDuration=c,t.transitionEnd=s,t.animationName=f,t.animationDuration=p,t.animationTiming=m,t.animationDelay=v,t.animationEnd=l,t.default={transform:o,end:s,property:u,timing:h,delay:d,duration:c}},function(e,t,n){"use strict";function r(e){return!(!e||!i.test(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&"body"===e.tagName.toLowerCase()}function i(e){var t=(0,s.default)(e),n=(0,l.default)(t);if(!(0,a.default)(t)&&!r(e))return e.scrollHeight>e.clientHeight;var i=n.getComputedStyle(t.body),o=parseInt(i.getPropertyValue("margin-left"),10),u=parseInt(i.getPropertyValue("margin-right"),10);return o+t.body.clientWidth+u<n.innerWidth}var o=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.isBody=r,t.default=i;var a=o(n(291)),s=o(n(21)),l=o(n(60))},function(e,t,n){"use strict";function r(e){return e===e.window?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return 1===e.nodeType&&-1===l.indexOf(e.tagName.toLowerCase())}function i(e,t,n){t=[].concat(t),[].forEach.call(e.children,function(e){-1===t.indexOf(e)&&r(e)&&n(e)})}function o(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}function a(e,t){i(e,t,function(e){return o(!0,e)})}function s(e,t){i(e,t,function(e){return o(!1,e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.ariaHidden=o,t.hideSiblings=a,t.showSiblings=s;var l=["template","script","style"]},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(294))},function(e,t,n){"use strict";function r(e){var t=e.classes,n=e.className,r=e.invisible,i=e.open,c=e.transitionDuration,d=(0,s.default)(e,["classes","className","invisible","open","transitionDuration"]);return l.default.createElement(h.default,(0,o.default)({appear:!0,in:i,timeout:c},d),l.default.createElement("div",{className:(0,u.default)(t.root,(0,a.default)({},t.invisible,r),n),"aria-hidden":"true"}))}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(7)),s=i(n(3)),l=i(n(1)),u=(i(n(2)),i(n(6))),c=i(n(5)),h=i(n(141)),d={root:{zIndex:-1,width:"100%",height:"100%",position:"fixed",top:0,left:0,WebkitTapHighlightColor:"transparent",backgroundColor:"rgba(0, 0, 0, 0.5)"},invisible:{backgroundColor:"transparent"}};t.styles=d,r.propTypes={},r.defaultProps={invisible:!1};var f=(0,c.default)(d,{name:"MuiBackdrop"})(r);t.default=f},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4)),o=r(n(8)),a=r(n(3)),s=r(n(9)),l=r(n(10)),u=r(n(11)),c=r(n(12)),h=r(n(1)),d=(r(n(2)),r(n(47))),f=n(32),p=r(n(59)),m=n(61),v={entering:{opacity:1},entered:{opacity:1}},g=function(e){function t(){var e,n,r;(0,s.default)(this,t);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(0,u.default)(r,(n=r=(0,u.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleEnter=function(e){var t=r.props.theme;(0,m.reflow)(e);var n=(0,m.getTransitionProps)(r.props,{mode:"enter"});e.style.webkitTransition=t.transitions.create("opacity",n),e.style.transition=t.transitions.create("opacity",n),r.props.onEnter&&r.props.onEnter(e)},r.handleExit=function(e){var t=r.props.theme,n=(0,m.getTransitionProps)(r.props,{mode:"exit"});e.style.webkitTransition=t.transitions.create("opacity",n),e.style.transition=t.transitions.create("opacity",n),r.props.onExit&&r.props.onExit(e)},n))}return(0,c.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=(e.onEnter,e.onExit,e.style),r=(e.theme,(0,a.default)(e,["children","onEnter","onExit","style","theme"])),s=(0,o.default)({},n,h.default.isValidElement(t)?t.props.style:{});return h.default.createElement(d.default,(0,i.default)({appear:!0,onEnter:this.handleEnter,onExit:this.handleExit},r),function(e,n){return h.default.cloneElement(t,(0,o.default)({style:(0,o.default)({opacity:0,willChange:"opacity"},v[e],s)},n))})}}]),t}(h.default.Component);g.propTypes={},g.defaultProps={timeout:{enter:f.duration.enteringScreen,exit:f.duration.leavingScreen}};var y=(0,p.default)()(g);t.default=y},function(e,t,n){"use strict";function r(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!==typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}}t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0,t.transitionTimeout=r;var i=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.timeoutsShape=o.default.oneOfType([o.default.number,o.default.shape({enter:o.default.number,exit:o.default.number}).isRequired]),t.classNamesShape=o.default.oneOfType([o.default.string,o.default.shape({enter:o.default.string,exit:o.default.string,active:o.default.string}),o.default.shape({enter:o.default.string,enterDone:o.default.string,enterActive:o.default.string,exit:o.default.string,exitDone:o.default.string,exitActive:o.default.string})])},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(298))},function(e,t,n){"use strict";function r(e,t){var n,r=e.direction,i=t.getBoundingClientRect();if(t.fakeTransform)n=t.fakeTransform;else{var o=(0,y.default)(t).getComputedStyle(t);n=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("transform")}var a=0,s=0;if(n&&"none"!==n&&"string"===typeof n){var l=n.split("(")[1].split(")")[0].split(",");a=parseInt(l[4],10),s=parseInt(l[5],10)}return"left"===r?"translateX(100vw) translateX(-".concat(i.left-a,"px)"):"right"===r?"translateX(-".concat(i.left+i.width+x-a,"px)"):"up"===r?"translateY(100vh) translateY(-".concat(i.top-s,"px)"):"translateY(-".concat(i.top+i.height+x-s,"px)")}function i(e,t){var n=r(e,t);n&&(t.style.webkitTransform=n,t.style.transform=n)}var o=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.setTranslateValue=i,t.default=void 0;var a=o(n(4)),s=o(n(3)),l=o(n(8)),u=o(n(9)),c=o(n(10)),h=o(n(11)),d=o(n(12)),f=o(n(1)),p=(o(n(2)),o(n(18))),m=o(n(86)),v=o(n(87)),g=o(n(47)),y=o(n(60)),_=o(n(59)),b=n(32),w=n(61),x=24,E=function(e){function t(){var e,n,r;(0,u.default)(this,t);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(0,h.default)(r,(n=r=(0,h.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.mounted=!1,r.transition=null,r.handleResize=(0,v.default)(function(){r.props.in||"down"===r.props.direction||"right"===r.props.direction||r.transitionRef&&i(r.props,r.transitionRef)},166),r.handleEnter=function(e){i(r.props,e),(0,w.reflow)(e),r.props.onEnter&&r.props.onEnter(e)},r.handleEntering=function(e){var t=r.props.theme,n=(0,w.getTransitionProps)(r.props,{mode:"enter"});e.style.webkitTransition=t.transitions.create("-webkit-transform",(0,l.default)({},n,{easing:t.transitions.easing.easeOut})),e.style.transition=t.transitions.create("transform",(0,l.default)({},n,{easing:t.transitions.easing.easeOut})),e.style.webkitTransform="translate(0, 0)",e.style.transform="translate(0, 0)",r.props.onEntering&&r.props.onEntering(e)},r.handleExit=function(e){var t=r.props.theme,n=(0,w.getTransitionProps)(r.props,{mode:"exit"});e.style.webkitTransition=t.transitions.create("-webkit-transform",(0,l.default)({},n,{easing:t.transitions.easing.sharp})),e.style.transition=t.transitions.create("transform",(0,l.default)({},n,{easing:t.transitions.easing.sharp})),i(r.props,e),r.props.onExit&&r.props.onExit(e)},r.handleExited=function(e){e.style.webkitTransition="",e.style.transition="",r.props.onExited&&r.props.onExited(e)},n))}return(0,d.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.props.in||this.updatePosition(),this.mounted=!0}},{key:"componentDidUpdate",value:function(e){e.direction===this.props.direction||this.props.in||this.updatePosition()}},{key:"componentWillUnmount",value:function(){this.handleResize.clear()}},{key:"updatePosition",value:function(){this.transitionRef&&(this.transitionRef.style.visibility="inherit",i(this.props,this.transitionRef))}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=(t.onEnter,t.onEntering,t.onExit,t.onExited,t.style),i=(t.theme,(0,s.default)(t,["children","onEnter","onEntering","onExit","onExited","style","theme"])),o={};return this.props.in||this.mounted||(o.visibility="hidden"),o=(0,l.default)({},o,r,f.default.isValidElement(n)?n.props.style:{}),f.default.createElement(m.default,{target:"window",onResize:this.handleResize},f.default.createElement(g.default,(0,a.default)({onEnter:this.handleEnter,onEntering:this.handleEntering,onExit:this.handleExit,onExited:this.handleExited,appear:!0,style:o,ref:function(t){e.transitionRef=p.default.findDOMNode(t)}},i),n))}}]),t}(f.default.Component);E.propTypes={},E.defaultProps={direction:"down",timeout:{enter:b.duration.enteringScreen,exit:b.duration.leavingScreen}};var S=(0,_.default)()(E);t.default=S},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";function r(e){var t=e.classes,n=e.className,r=e.component,i=e.square,l=e.elevation,h=(0,s.default)(e,["classes","className","component","square","elevation"]),d=(0,c.default)(t.root,t["elevation".concat(l)],(0,a.default)({},t.rounded,!i),n);return u.default.createElement(r,(0,o.default)({className:d},h))}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(7)),s=i(n(3)),l=i(n(8)),u=i(n(1)),c=(i(n(2)),i(n(6))),h=(i(n(13)),i(n(5))),d=function(e){var t={};return e.shadows.forEach(function(e,n){t["elevation".concat(n)]={boxShadow:e}}),(0,l.default)({root:{backgroundColor:e.palette.background.paper},rounded:{borderRadius:e.shape.borderRadius}},t)};t.styles=d,r.propTypes={},r.defaultProps={component:"div",elevation:2,square:!1};var f=(0,h.default)(d,{name:"MuiPaper"})(r);t.default=f},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(302))},function(e,t,n){"use strict";function r(e){var t,n=e.children,r=e.classes,i=e.className,c=e.color,f=e.position,p=(0,s.default)(e,["children","classes","className","color","position"]),m=(0,u.default)(r.root,r["position".concat((0,h.capitalize)(f))],(t={},(0,a.default)(t,r["color".concat((0,h.capitalize)(c))],"inherit"!==c),(0,a.default)(t,"mui-fixed","fixed"===f),t),i);return l.default.createElement(d.default,(0,o.default)({square:!0,component:"header",elevation:4,className:m},p),n)}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(7)),s=i(n(3)),l=i(n(1)),u=(i(n(2)),i(n(6))),c=i(n(5)),h=n(16),d=i(n(20)),f=function(e){var t="light"===e.palette.type?e.palette.grey[100]:e.palette.grey[900];return{root:{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",zIndex:e.zIndex.appBar,flexShrink:0},positionFixed:{position:"fixed",top:0,left:"auto",right:0},positionAbsolute:{position:"absolute",top:0,left:"auto",right:0},positionSticky:{position:"sticky",top:0,left:"auto",right:0},positionStatic:{position:"static"},colorDefault:{backgroundColor:t,color:e.palette.getContrastText(t)},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText}}};t.styles=f,r.propTypes={},r.defaultProps={color:"primary",position:"fixed"};var p=(0,c.default)(f,{name:"MuiAppBar"})(r);t.default=p},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(304))},function(e,t,n){"use strict";function r(e){var t=e.children,n=e.classes,r=e.className,i=e.disableGutters,c=e.variant,h=(0,s.default)(e,["children","classes","className","disableGutters","variant"]),d=(0,u.default)(n.root,n[c],(0,a.default)({},n.gutters,!i),r);return l.default.createElement("div",(0,o.default)({className:d},h),t)}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(7)),s=i(n(3)),l=i(n(1)),u=(i(n(2)),i(n(6))),c=i(n(5)),h=function(e){return{root:{position:"relative",display:"flex",alignItems:"center"},gutters:e.mixins.gutters(),regular:e.mixins.toolbar,dense:{minHeight:48}}};t.styles=h,r.propTypes={},r.defaultProps={disableGutters:!1,variant:"regular"};var d=(0,c.default)(h,{name:"MuiToolbar"})(r);t.default=d},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var i=r(n(4)),o=r(n(7)),a=r(n(3)),s=r(n(9)),l=r(n(10)),u=r(n(11)),c=r(n(12)),h=r(n(1)),d=r(n(2)),f=r(n(6)),p=r(n(5)),m={root:{listStyle:"none",margin:0,padding:0,position:"relative"},padding:{paddingTop:8,paddingBottom:8},dense:{paddingTop:4,paddingBottom:4},subheader:{paddingTop:0}};t.styles=m;var v=function(e){function t(){return(0,s.default)(this,t),(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,l.default)(t,[{key:"getChildContext",value:function(){return{dense:this.props.dense}}},{key:"render",value:function(){var e,t=this.props,n=t.children,r=t.classes,s=t.className,l=t.component,u=t.dense,c=t.disablePadding,d=t.subheader,p=(0,a.default)(t,["children","classes","className","component","dense","disablePadding","subheader"]),m=(0,f.default)(r.root,(e={},(0,o.default)(e,r.dense,u&&!c),(0,o.default)(e,r.padding,!c),(0,o.default)(e,r.subheader,d),e),s);return h.default.createElement(l,(0,i.default)({className:m},p),d,n)}}]),t}(h.default.Component);v.propTypes={},v.defaultProps={component:"ul",dense:!1,disablePadding:!1},v.childContextTypes={dense:d.default.bool};var g=(0,p.default)(m,{name:"MuiList"})(v);t.default=g},function(e,t,n){"use strict";function r(e){var t,n=e.align,r=e.classes,i=e.className,c=e.component,d=e.color,f=e.gutterBottom,p=e.headlineMapping,m=e.noWrap,v=e.paragraph,g=e.variant,y=(0,s.default)(e,["align","classes","className","component","color","gutterBottom","headlineMapping","noWrap","paragraph","variant"]),_=(0,u.default)(r.root,r[g],(t={},(0,a.default)(t,r["color".concat((0,h.capitalize)(d))],"default"!==d),(0,a.default)(t,r.noWrap,m),(0,a.default)(t,r.gutterBottom,f),(0,a.default)(t,r.paragraph,v),(0,a.default)(t,r["align".concat((0,h.capitalize)(n))],"inherit"!==n),t),i),b=c||(v?"p":p[g])||"span";return l.default.createElement(b,(0,o.default)({className:_},y))}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(7)),s=i(n(3)),l=i(n(1)),u=(i(n(2)),i(n(6))),c=i(n(5)),h=n(16),d=function(e){return{root:{display:"block",margin:0},display4:e.typography.display4,display3:e.typography.display3,display2:e.typography.display2,display1:e.typography.display1,headline:e.typography.headline,title:e.typography.title,subheading:e.typography.subheading,body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main}}};t.styles=d,r.propTypes={},r.defaultProps={align:"inherit",color:"default",gutterBottom:!1,headlineMapping:{display4:"h1",display3:"h1",display2:"h1",display1:"h1",headline:"h1",title:"h2",subheading:"h3",body2:"aside",body1:"p"},noWrap:!1,paragraph:!1,variant:"body1"};var f=(0,c.default)(d,{name:"MuiTypography"})(r);t.default=f},function(e,t,n){"use strict";function r(e){var t,n=e.absolute,r=e.classes,i=e.className,c=e.component,h=e.inset,d=e.light,f=(0,s.default)(e,["absolute","classes","className","component","inset","light"]),p=(0,u.default)(r.root,(t={},(0,a.default)(t,r.absolute,n),(0,a.default)(t,r.inset,h),(0,a.default)(t,r.light,d),t),i);return l.default.createElement(c,(0,o.default)({className:p},f))}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(7)),s=i(n(3)),l=i(n(1)),u=(i(n(2)),i(n(6))),c=i(n(5)),h=n(31),d=function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:(0,h.fade)(e.palette.divider,.08)}}};t.styles=d,r.propTypes={},r.defaultProps={absolute:!1,component:"hr",inset:!1,light:!1};var f=(0,c.default)(d,{name:"MuiDivider"})(r);t.default=f},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(15)),a=(0,o.default)(i.default.createElement("g",null,i.default.createElement("path",{d:"M5 2c0-.55-.45-1-1-1s-1 .45-1 1v4H1v6h6V6H5V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2H9v2zm-8 0c0 1.3.84 2.4 2 2.82V23h2v-4.18C6.16 18.4 7 17.3 7 16v-2H1v2zM21 6V2c0-.55-.45-1-1-1s-1 .45-1 1v4h-2v6h6V6h-2zm-8-4c0-.55-.45-1-1-1s-1 .45-1 1v4H9v6h6V6h-2V2zm4 14c0 1.3.84 2.4 2 2.82V23h2v-4.18c1.16-.41 2-1.51 2-2.82v-2h-6v2z"})),"SettingsInputComposite");t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(310),o=r(i),a=n(311),s=r(a),l=n(340),u=r(l),c=n(1),h=n(156),d=(r(h),n(58)),f=(r(d),function(e){return function(t){var n=(0,c.createFactory)(t),r=function(t){function r(){return(0,o.default)(this,r),(0,s.default)(this,t.apply(this,arguments))}return(0,u.default)(r,t),r.prototype.shouldComponentUpdate=function(t){return e(this.props,t)},r.prototype.render=function(){return n(this.props)},r}(c.Component);return r}});t.default=f},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(145),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":(0,i.default)(t))&&"function"!==typeof t?e:t}},function(e,t,n){e.exports={default:n(313),__esModule:!0}},function(e,t,n){n(314),n(326),e.exports=n(98).f("iterator")},function(e,t,n){"use strict";var r=n(315)(!0);n(146)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(88),i=n(89);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),l=r(n),u=s.length;return l<0||l>=u?e?"":void 0:(o=s.charCodeAt(l),o<55296||o>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r=n(92),i=n(65),o=n(97),a={};n(36)(a,n(41)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(37),i=n(50),o=n(93);e.exports=n(39)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,l=0;s>l;)r.f(e,n=a[l++],t[n]);return e}},function(e,t,n){var r=n(152);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(40),i=n(321),o=n(322);e.exports=function(e){return function(t,n,a){var s,l=r(t),u=i(l.length),c=o(a,u);if(e&&n!=n){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var r=n(88),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(88),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(22).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(27),i=n(325),o=n(94)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(89);e.exports=function(e){return Object(r(e))}},function(e,t,n){n(327);for(var r=n(22),i=n(36),o=n(91),a=n(41)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],c=r[u],h=c&&c.prototype;h&&!h[a]&&i(h,a,u),o[u]=o.Array}},function(e,t,n){"use strict";var r=n(328),i=n(329),o=n(91),a=n(40);e.exports=n(146)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={default:n(331),__esModule:!0}},function(e,t,n){n(332),n(337),n(338),n(339),e.exports=n(35).Symbol},function(e,t,n){"use strict";var r=n(22),i=n(27),o=n(39),a=n(63),s=n(150),l=n(333).KEY,u=n(64),c=n(95),h=n(97),d=n(66),f=n(41),p=n(98),m=n(99),v=n(334),g=n(335),y=n(50),_=n(38),b=n(40),w=n(90),x=n(65),E=n(92),S=n(336),T=n(155),M=n(37),k=n(93),P=T.f,C=M.f,A=S.f,O=r.Symbol,I=r.JSON,R=I&&I.stringify,L=f("_hidden"),D=f("toPrimitive"),N={}.propertyIsEnumerable,F=c("symbol-registry"),U=c("symbols"),z=c("op-symbols"),B=Object.prototype,j="function"==typeof O,H=r.QObject,V=!H||!H.prototype||!H.prototype.findChild,G=o&&u(function(){return 7!=E(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=P(B,t);r&&delete B[t],C(e,t,n),r&&e!==B&&C(B,t,r)}:C,W=function(e){var t=U[e]=E(O.prototype);return t._k=e,t},q=j&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},X=function(e,t,n){return e===B&&X(z,t,n),y(e),t=w(t,!0),y(n),i(U,t)?(n.enumerable?(i(e,L)&&e[L][t]&&(e[L][t]=!1),n=E(n,{enumerable:x(0,!1)})):(i(e,L)||C(e,L,x(1,{})),e[L][t]=!0),G(e,t,n)):C(e,t,n)},Y=function(e,t){y(e);for(var n,r=v(t=b(t)),i=0,o=r.length;o>i;)X(e,n=r[i++],t[n]);return e},Z=function(e,t){return void 0===t?E(e):Y(E(e),t)},J=function(e){var t=N.call(this,e=w(e,!0));return!(this===B&&i(U,e)&&!i(z,e))&&(!(t||!i(this,e)||!i(U,e)||i(this,L)&&this[L][e])||t)},K=function(e,t){if(e=b(e),t=w(t,!0),e!==B||!i(U,t)||i(z,t)){var n=P(e,t);return!n||!i(U,t)||i(e,L)&&e[L][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=A(b(e)),r=[],o=0;n.length>o;)i(U,t=n[o++])||t==L||t==l||r.push(t);return r},$=function(e){for(var t,n=e===B,r=A(n?z:b(e)),o=[],a=0;r.length>a;)!i(U,t=r[a++])||n&&!i(B,t)||o.push(U[t]);return o};j||(O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===B&&t.call(z,n),i(this,L)&&i(this[L],e)&&(this[L][e]=!1),G(this,e,x(1,n))};return o&&V&&G(B,e,{configurable:!0,set:t}),W(e)},s(O.prototype,"toString",function(){return this._k}),T.f=K,M.f=X,n(154).f=S.f=Q,n(100).f=J,n(153).f=$,o&&!n(62)&&s(B,"propertyIsEnumerable",J,!0),p.f=function(e){return W(f(e))}),a(a.G+a.W+a.F*!j,{Symbol:O});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)f(ee[te++]);for(var ne=k(f.store),re=0;ne.length>re;)m(ne[re++]);a(a.S+a.F*!j,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=O(e)},keyFor:function(e){if(!q(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!j,"Object",{create:Z,defineProperty:X,defineProperties:Y,getOwnPropertyDescriptor:K,getOwnPropertyNames:Q,getOwnPropertySymbols:$}),I&&a(a.S+a.F*(!j||u(function(){var e=O();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(_(t)||void 0!==e)&&!q(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!q(t))return t}),r[1]=t,R.apply(I,r)}}),O.prototype[D]||n(36)(O.prototype,D,O.prototype.valueOf),h(O,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(e,t,n){var r=n(66)("meta"),i=n(38),o=n(27),a=n(37).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(64)(function(){return l(Object.preventExtensions({}))}),c=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},h=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[r].i},d=function(e,t){if(!o(e,r)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[r].w},f=function(e){return u&&p.NEED&&l(e)&&!o(e,r)&&c(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:h,getWeak:d,onFreeze:f}},function(e,t,n){var r=n(93),i=n(153),o=n(100);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),l=o.f,u=0;s.length>u;)l.call(e,a=s[u++])&&t.push(a);return t}},function(e,t,n){var r=n(152);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(40),i=n(154).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(r(e))}},function(e,t){},function(e,t,n){n(99)("asyncIterator")},function(e,t,n){n(99)("observable")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(341),o=r(i),a=n(345),s=r(a),l=n(145),u=r(l);t.default=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":(0,u.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},function(e,t,n){e.exports={default:n(342),__esModule:!0}},function(e,t,n){n(343),e.exports=n(35).Object.setPrototypeOf},function(e,t,n){var r=n(63);r(r.S,"Object",{setPrototypeOf:n(344).set})},function(e,t,n){var r=n(38),i=n(50),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(147)(Function.call,n(155).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){e.exports={default:n(346),__esModule:!0}},function(e,t,n){n(347);var r=n(35).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(63);r(r.S,"Object",{create:n(92)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return function(n){return n[e]=t,n}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(123),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=i.default},function(e,t,n){"use strict";function r(e){var t,n=e.children,r=e.classes,i=e.className,c=e.color,d=e.component,f=e.fontSize,p=e.nativeColor,m=e.titleAccess,v=e.viewBox,g=(0,s.default)(e,["children","classes","className","color","component","fontSize","nativeColor","titleAccess","viewBox"]),y=(0,u.default)(r.root,(t={},(0,a.default)(t,r.fontSizeInherit,"inherit"===f),(0,a.default)(t,r["color".concat((0,h.capitalize)(c))],"inherit"!==c),t),i);return l.default.createElement(d,(0,o.default)({className:y,focusable:"false",viewBox:v,color:p,"aria-hidden":m?"false":"true"},g),n,m?l.default.createElement("title",null,m):null)}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(7)),s=i(n(3)),l=i(n(1)),u=(i(n(2)),i(n(6))),c=i(n(5)),h=n(16),d=function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:24,transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"}}};t.styles=d,r.propTypes={},r.defaultProps={color:"inherit",component:"svg",fontSize:"default",viewBox:"0 0 24 24"},r.muiName="SvgIcon";var f=(0,c.default)(d,{name:"MuiSvgIcon"})(r);t.default=f},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(15)),a=(0,o.default)(i.default.createElement("g",null,i.default.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})),"Create");t.default=a},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(15)),a=(0,o.default)(i.default.createElement("g",null,i.default.createElement("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"})),"FileUpload");t.default=a},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(15)),a=(0,o.default)(i.default.createElement("g",null,i.default.createElement("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})),"Share");t.default=a},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(15)),a=(0,o.default)(i.default.createElement("g",null,i.default.createElement("path",{d:"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"})),"Code");t.default=a},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(15)),a=(0,o.default)(i.default.createElement("g",null,i.default.createElement("path",{d:"M14 4l2.29 2.29-2.88 2.88 1.42 1.42 2.88-2.88L20 10V4zm-4 0H4v6l2.29-2.29 4.71 4.7V20h2v-8.41l-5.29-5.3z"})),"CallSplit");t.default=a},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(15)),a=(0,o.default)(i.default.createElement("g",null,i.default.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM7.5 18c-.83 0-1.5-.67-1.5-1.5S6.67 15 7.5 15s1.5.67 1.5 1.5S8.33 18 7.5 18zm0-9C6.67 9 6 8.33 6 7.5S6.67 6 7.5 6 9 6.67 9 7.5 8.33 9 7.5 9zm4.5 4.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4.5 4.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm0-9c-.83 0-1.5-.67-1.5-1.5S15.67 6 16.5 6s1.5.67 1.5 1.5S17.33 9 16.5 9z"})),"Casino");t.default=a},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(15)),a=(0,o.default)(i.default.createElement("g",null,i.default.createElement("path",{d:"M9.64 7.64c.23-.5.36-1.05.36-1.64 0-2.21-1.79-4-4-4S2 3.79 2 6s1.79 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1L9.64 7.64zM6 8c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm0 12c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2zm6-7.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5zM19 3l-6 6 2 2 7-7V3z"})),"ContentCut");t.default=a},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(359))},function(e,t,n){"use strict";function r(e){var t,n=e.classes,r=e.className,i=e.color,c=e.component,d=e.disableSticky,f=e.inset,p=(0,s.default)(e,["classes","className","color","component","disableSticky","inset"]);return l.default.createElement(c,(0,o.default)({className:(0,u.default)(n.root,(t={},(0,a.default)(t,n["color".concat((0,h.capitalize)(i))],"default"!==i),(0,a.default)(t,n.inset,f),(0,a.default)(t,n.sticky,!d),t),r)},p))}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(7)),s=i(n(3)),l=i(n(1)),u=(i(n(2)),i(n(6))),c=i(n(5)),h=n(16),d=function(e){return{root:e.mixins.gutters({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:e.palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)}),colorPrimary:{color:e.palette.primary.main},colorInherit:{color:"inherit"},inset:{paddingLeft:72},sticky:{position:"sticky",top:0,zIndex:1,backgroundColor:"inherit"}}};t.styles=d,r.propTypes={},r.defaultProps={color:"default",component:"li",disableSticky:!1,inset:!1},r.muiName="ListSubheader";var f=(0,c.default)(d,{name:"MuiListSubheader"})(r);t.default=f},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var i=r(n(4)),o=r(n(8)),a=r(n(7)),s=r(n(3)),l=r(n(9)),u=r(n(10)),c=r(n(11)),h=r(n(12)),d=r(n(1)),f=r(n(2)),p=r(n(6)),m=r(n(5)),v=r(n(67)),g=n(68),y=function(e){return{root:{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",paddingTop:12,paddingBottom:12},container:{position:"relative"},focusVisible:{backgroundColor:e.palette.action.hover},default:{},dense:{paddingTop:8,paddingBottom:8},disabled:{opacity:.5},divider:{borderBottom:"1px solid ".concat(e.palette.divider),backgroundClip:"padding-box"},gutters:e.mixins.gutters(),button:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},secondaryAction:{paddingRight:32}}};t.styles=y;var _=function(e){function t(){return(0,l.default)(this,t),(0,c.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,u.default)(t,[{key:"getChildContext",value:function(){return{dense:this.props.dense||this.context.dense||!1}}},{key:"render",value:function(){var e,t=this.props,n=t.button,r=t.children,l=t.classes,u=t.className,c=t.component,h=t.ContainerComponent,f=t.ContainerProps;f=void 0===f?{}:f;var m=f.className,y=(0,s.default)(f,["className"]),_=t.dense,b=t.disabled,w=t.disableGutters,x=t.divider,E=t.focusVisibleClassName,S=(0,s.default)(t,["button","children","classes","className","component","ContainerComponent","ContainerProps","dense","disabled","disableGutters","divider","focusVisibleClassName"]),T=_||this.context.dense||!1,M=d.default.Children.toArray(r),k=M.some(function(e){return(0,g.isMuiElement)(e,["ListItemAvatar"])}),P=M.length&&(0,g.isMuiElement)(M[M.length-1],["ListItemSecondaryAction"]),C=(0,p.default)(l.root,l.default,(e={},(0,a.default)(e,l.dense,T||k),(0,a.default)(e,l.gutters,!w),(0,a.default)(e,l.divider,x),(0,a.default)(e,l.disabled,b),(0,a.default)(e,l.button,n),(0,a.default)(e,l.secondaryAction,P),e),u),A=(0,o.default)({className:C,disabled:b},S),O=c||"li";return n&&(A.component=c||"div",A.focusVisibleClassName=(0,p.default)(l.focusVisible,E),O=v.default),P?(O=A.component||c?O:"div","li"===h&&("li"===O?O="div":"li"===A.component&&(A.component="div")),d.default.createElement(h,(0,i.default)({className:(0,p.default)(l.container,m)},y),d.default.createElement(O,A,M),M.pop())):d.default.createElement(O,A,M)}}]),t}(d.default.Component);_.propTypes={},_.defaultProps={button:!1,ContainerComponent:"li",dense:!1,disabled:!1,disableGutters:!1,divider:!1},_.contextTypes={dense:f.default.bool},_.childContextTypes={dense:f.default.bool};var b=(0,m.default)(y,{name:"MuiListItem"})(_);t.default=b},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var i=r(n(4)),o=r(n(7)),a=r(n(3)),s=r(n(9)),l=r(n(10)),u=r(n(11)),c=r(n(12)),h=r(n(57)),d=r(n(1)),f=(r(n(2)),r(n(18))),p=r(n(6)),m=r(n(34)),v=r(n(60)),g=r(n(5)),y=n(362),_=r(n(363)),b=r(n(370)),w={root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:"none",border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"}},disabled:{},focusVisible:{}};t.styles=w;var x=function(e){function t(){var e,n,r;(0,s.default)(this,t);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(0,u.default)(r,(n=r=(0,u.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.ripple=null,r.keyDown=!1,r.button=null,r.focusVisibleTimeout=null,r.focusVisibleCheckTime=50,r.focusVisibleMaxCheckTimes=5,r.handleMouseDown=(0,b.default)((0,h.default)(r),"MouseDown","start",function(){clearTimeout(r.focusVisibleTimeout),r.state.focusVisible&&r.setState({focusVisible:!1})}),r.handleMouseUp=(0,b.default)((0,h.default)(r),"MouseUp","stop"),r.handleMouseLeave=(0,b.default)((0,h.default)(r),"MouseLeave","stop",function(e){r.state.focusVisible&&e.preventDefault()}),r.handleTouchStart=(0,b.default)((0,h.default)(r),"TouchStart","start"),r.handleTouchEnd=(0,b.default)((0,h.default)(r),"TouchEnd","stop"),r.handleTouchMove=(0,b.default)((0,h.default)(r),"TouchMove","stop"),r.handleBlur=(0,b.default)((0,h.default)(r),"Blur","stop",function(){clearTimeout(r.focusVisibleTimeout),r.state.focusVisible&&r.setState({focusVisible:!1})}),r.state={},r.onRippleRef=function(e){r.ripple=e},r.onFocusVisibleHandler=function(e){r.keyDown=!1,r.setState({focusVisible:!0}),r.props.onFocusVisible&&r.props.onFocusVisible(e)},r.handleKeyDown=function(e){var t=r.props,n=t.component,i=t.focusRipple,o=t.onKeyDown,a=t.onClick,s=(0,m.default)(e);i&&!r.keyDown&&r.state.focusVisible&&r.ripple&&"space"===s&&(r.keyDown=!0,e.persist(),r.ripple.stop(e,function(){r.ripple.start(e)})),o&&o(e),e.target!==e.currentTarget||!n||"button"===n||"space"!==s&&"enter"!==s||"A"===r.button.tagName&&r.button.href||(e.preventDefault(),a&&a(e))},r.handleKeyUp=function(e){r.props.focusRipple&&"space"===(0,m.default)(e)&&r.ripple&&r.state.focusVisible&&(r.keyDown=!1,e.persist(),r.ripple.stop(e,function(){r.ripple.pulsate(e)})),r.props.onKeyUp&&r.props.onKeyUp(e)},r.handleFocus=function(e){r.props.disabled||(r.button||(r.button=e.currentTarget),e.persist(),(0,y.detectFocusVisible)((0,h.default)(r),r.button,function(){r.onFocusVisibleHandler(e)}),r.props.onFocus&&r.props.onFocus(e))},n))}return(0,c.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.button=f.default.findDOMNode(this),(0,y.listenForFocusKeys)((0,v.default)(this.button)),this.props.action&&this.props.action({focusVisible:function(){e.setState({focusVisible:!0}),e.button.focus()}})}},{key:"componentDidUpdate",value:function(e,t){this.props.focusRipple&&!this.props.disableRipple&&!t.focusVisible&&this.state.focusVisible&&this.ripple.pulsate()}},{key:"componentWillUnmount",value:function(){this.button=null,clearTimeout(this.focusVisibleTimeout)}},{key:"render",value:function(){var e,t=this.props,n=(t.action,t.buttonRef),r=t.centerRipple,s=t.children,l=t.classes,u=t.className,c=t.component,h=t.disabled,f=t.disableRipple,m=(t.disableTouchRipple,t.focusRipple,t.focusVisibleClassName),v=(t.onBlur,t.onFocus,t.onFocusVisible,t.onKeyDown,t.onKeyUp,t.onMouseDown,t.onMouseLeave,t.onMouseUp,t.onTouchEnd,t.onTouchMove,t.onTouchStart,t.tabIndex),g=t.TouchRippleProps,y=t.type,b=(0,a.default)(t,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","type"]),w=(0,p.default)(l.root,(e={},(0,o.default)(e,l.disabled,h),(0,o.default)(e,l.focusVisible,this.state.focusVisible),(0,o.default)(e,m,this.state.focusVisible),e),u),x={},E=c;return"button"===E&&b.href&&(E="a"),"button"===E?(x.type=y||"button",x.disabled=h):x.role="button",d.default.createElement(E,(0,i.default)({onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onMouseDown:this.handleMouseDown,onMouseLeave:this.handleMouseLeave,onMouseUp:this.handleMouseUp,onTouchEnd:this.handleTouchEnd,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,tabIndex:h?"-1":v,className:w,ref:n},x,b),s,f||h?null:d.default.createElement(_.default,(0,i.default)({innerRef:this.onRippleRef,center:r},g)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"undefined"===typeof t.focusVisible?{focusVisible:!1,lastDisabled:e.disabled}:!t.prevState&&e.disabled&&t.focusVisible?{focusVisible:!1,lastDisabled:e.disabled}:{lastDisabled:e.disabled}}}]),t}(d.default.Component);x.propTypes={},x.defaultProps={centerRipple:!1,component:"button",disableRipple:!1,disableTouchRipple:!1,focusRipple:!1,tabIndex:"0",type:"button"};var E=(0,g.default)(w,{name:"MuiButtonBase"})(x);t.default=E},function(e,t,n){"use strict";function r(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;e.focusVisibleTimeout=setTimeout(function(){var o=(0,l.default)(t);u.focusKeyPressed&&(o.activeElement===t||t.contains(o.activeElement))?n():i<e.focusVisibleMaxCheckTimes&&r(e,t,n,i+1)},e.focusVisibleCheckTime)}function i(e){return c.indexOf((0,s.default)(e))>-1}function o(e){e.addEventListener("keyup",h)}var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.detectFocusVisible=r,t.listenForFocusKeys=o;var s=a(n(34)),l=(a(n(13)),a(n(21))),u={focusKeyPressed:!1,keyUpEventTimeout:-1},c=["tab","enter","space","esc","up","down","left","right"],h=function(e){i(e)&&(u.focusKeyPressed=!0,clearTimeout(u.keyUpEventTimeout),u.keyUpEventTimeout=setTimeout(function(){u.focusKeyPressed=!1},1e3))}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=t.DELAY_RIPPLE=void 0;var i=r(n(4)),o=r(n(3)),a=r(n(158)),s=r(n(9)),l=r(n(10)),u=r(n(11)),c=r(n(12)),h=r(n(57)),d=r(n(1)),f=(r(n(2)),r(n(18))),p=r(n(367)),m=r(n(6)),v=r(n(5)),g=r(n(369)),y=550,_=80;t.DELAY_RIPPLE=_;var b=function(e){return{root:{display:"block",position:"absolute",overflow:"hidden",borderRadius:"inherit",width:"100%",height:"100%",left:0,top:0,pointerEvents:"none",zIndex:0},ripple:{width:50,height:50,left:0,top:0,opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"mui-ripple-enter ".concat(y,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"mui-ripple-exit ".concat(y,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"mui-ripple-pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes mui-ripple-enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes mui-ripple-exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes mui-ripple-pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}};t.styles=b;var w=function(e){function t(){var e,n,r;(0,s.default)(this,t);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(0,u.default)(r,(n=r=(0,u.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.ignoringMouseDown=!1,r.startTimer=null,r.startTimerCommit=null,r.state={nextKey:0,ripples:[]},r.pulsate=function(){r.start({},{pulsate:!0})},r.start=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=t.pulsate,o=void 0!==i&&i,a=t.center,s=void 0===a?r.props.center||t.pulsate:a,l=t.fakeElement,u=void 0!==l&&l;if("mousedown"===e.type&&r.ignoringMouseDown)return void(r.ignoringMouseDown=!1);"touchstart"===e.type&&(r.ignoringMouseDown=!0);var c,d,p,m=u?null:f.default.findDOMNode((0,h.default)(r)),v=m?m.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(v.width/2),d=Math.round(v.height/2);else{var g=e.clientX?e.clientX:e.touches[0].clientX,y=e.clientY?e.clientY:e.touches[0].clientY;c=Math.round(g-v.left),d=Math.round(y-v.top)}if(s)(p=Math.sqrt((2*Math.pow(v.width,2)+Math.pow(v.height,2))/3))%2===0&&(p+=1);else{var b=2*Math.max(Math.abs((m?m.clientWidth:0)-c),c)+2,w=2*Math.max(Math.abs((m?m.clientHeight:0)-d),d)+2;p=Math.sqrt(Math.pow(b,2)+Math.pow(w,2))}e.touches?(r.startTimerCommit=function(){r.startCommit({pulsate:o,rippleX:c,rippleY:d,rippleSize:p,cb:n})},r.startTimer=setTimeout(function(){r.startTimerCommit&&(r.startTimerCommit(),r.startTimerCommit=null)},_)):r.startCommit({pulsate:o,rippleX:c,rippleY:d,rippleSize:p,cb:n})},r.startCommit=function(e){var t=e.pulsate,n=e.rippleX,i=e.rippleY,o=e.rippleSize,s=e.cb;r.setState(function(e){return{nextKey:e.nextKey+1,ripples:(0,a.default)(e.ripples).concat([d.default.createElement(g.default,{key:e.nextKey,classes:r.props.classes,timeout:{exit:y,enter:y},pulsate:t,rippleX:n,rippleY:i,rippleSize:o})])}},s)},r.stop=function(e,t){clearTimeout(r.startTimer);var n=r.state.ripples;if("touchend"===e.type&&r.startTimerCommit)return e.persist(),r.startTimerCommit(),r.startTimerCommit=null,void(r.startTimer=setTimeout(function(){r.stop(e,t)},0));r.startTimerCommit=null,n&&n.length&&r.setState({ripples:n.slice(1)},t)},n))}return(0,c.default)(t,e),(0,l.default)(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.startTimer)}},{key:"render",value:function(){var e=this.props,t=(e.center,e.classes),n=e.className,r=(0,o.default)(e,["center","classes","className"]);return d.default.createElement(p.default,(0,i.default)({component:"span",enter:!0,exit:!0,className:(0,m.default)(t.root,n)},r),this.state.ripples)}}]),t}(d.default.PureComponent);w.propTypes={},w.defaultProps={center:!1};var x=(0,v.default)(b,{flip:!1,name:"MuiTouchRipple"})(w);t.default=x},function(e,t){function n(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}e.exports=n},function(e,t){function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}e.exports=n},function(e,t){function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(2),c=r(u),h=n(1),d=r(h),f=n(142),p=n(368),m=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},v=(c.default.any,c.default.node,c.default.bool,c.default.bool,c.default.bool,c.default.func,{component:"div",childFactory:function(e){return e}}),g=function(e){function t(n,r){o(this,t);var i=a(this,e.call(this,n,r)),s=i.handleExited.bind(i);return i.state={handleExited:s,firstRender:!0},i}return s(t,e),t.prototype.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},t.prototype.componentDidMount=function(){this.appeared=!0},t.getDerivedStateFromProps=function(e,t){var n=t.children,r=t.handleExited;return{children:t.firstRender?(0,p.getInitialChildMapping)(e,r):(0,p.getNextChildMapping)(e,n,r),firstRender:!1}},t.prototype.handleExited=function(e,t){var n=(0,p.getChildMapping)(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.setState(function(t){var n=l({},t.children);return delete n[e.key],{children:n}}))},t.prototype.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=i(e,["component","childFactory"]),o=m(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?o:d.default.createElement(t,r,o)},t}(d.default.Component);g.childContextTypes={transitionGroup:c.default.object.isRequired},g.propTypes={},g.defaultProps=v,t.default=(0,f.polyfill)(g),e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=function(e){return t&&(0,l.isValidElement)(e)?t(e):e},r=Object.create(null);return e&&l.Children.map(e,function(e){return e}).forEach(function(e){r[e.key]=n(e)}),r}function i(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r=Object.create(null),i=[];for(var o in e)o in t?i.length&&(r[o]=i,i=[]):i.push(o);var a=void 0,s={};for(var l in t){if(r[l])for(a=0;a<r[l].length;a++){var u=r[l][a];s[r[l][a]]=n(u)}s[l]=n(l)}for(a=0;a<i.length;a++)s[i[a]]=n(i[a]);return s}function o(e,t,n){return null!=n[t]?n[t]:e.props[t]}function a(e,t){return r(e.children,function(n){return(0,l.cloneElement)(n,{onExited:t.bind(null,n),in:!0,appear:o(n,"appear",e),enter:o(n,"enter",e),exit:o(n,"exit",e)})})}function s(e,t,n){var a=r(e.children),s=i(t,a);return Object.keys(s).forEach(function(r){var i=s[r];if((0,l.isValidElement)(i)){var u=r in t,c=r in a,h=t[r],d=(0,l.isValidElement)(h)&&!h.props.in;!c||u&&!d?c||!u||d?c&&u&&(0,l.isValidElement)(h)&&(s[r]=(0,l.cloneElement)(i,{onExited:n.bind(null,i),in:h.props.in,exit:o(i,"exit",e),enter:o(i,"enter",e)})):s[r]=(0,l.cloneElement)(i,{in:!1}):s[r]=(0,l.cloneElement)(i,{onExited:n.bind(null,i),in:!0,exit:o(i,"exit",e),enter:o(i,"enter",e)})}}),s}t.__esModule=!0,t.getChildMapping=r,t.mergeChildMappings=i,t.getInitialChildMapping=a,t.getNextChildMapping=s;var l=n(1)},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4)),o=r(n(7)),a=r(n(3)),s=r(n(9)),l=r(n(10)),u=r(n(11)),c=r(n(12)),h=r(n(1)),d=(r(n(2)),r(n(6))),f=r(n(47)),p=function(e){function t(){var e,n,r;(0,s.default)(this,t);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(0,u.default)(r,(n=r=(0,u.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={visible:!1,leaving:!1},r.handleEnter=function(){r.setState({visible:!0})},r.handleExit=function(){r.setState({leaving:!0})},n))}return(0,c.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e,t,n=this.props,r=n.classes,s=n.className,l=n.pulsate,u=n.rippleX,c=n.rippleY,p=n.rippleSize,m=(0,a.default)(n,["classes","className","pulsate","rippleX","rippleY","rippleSize"]),v=this.state,g=v.visible,y=v.leaving,_=(0,d.default)(r.ripple,(e={},(0,o.default)(e,r.rippleVisible,g),(0,o.default)(e,r.ripplePulsate,l),e),s),b={width:p,height:p,top:-p/2+c,left:-p/2+u},w=(0,d.default)(r.child,(t={},(0,o.default)(t,r.childLeaving,y),(0,o.default)(t,r.childPulsate,l),t));return h.default.createElement(f.default,(0,i.default)({onEnter:this.handleEnter,onExit:this.handleExit},m),h.default.createElement("span",{className:_,style:b},h.default.createElement("span",{className:w})))}}]),t}(h.default.Component);p.propTypes={},p.defaultProps={pulsate:!1};var m=p;t.default=m},function(e,t,n){"use strict";function r(e,t,n,r){return function(i){r&&r.call(e,i);var o=!1;return i.defaultPrevented&&(o=!0),e.props.disableTouchRipple&&"Blur"!==t&&(o=!0),!o&&e.ripple&&e.ripple[n](i),"function"===typeof e.props["on".concat(t)]&&e.props["on".concat(t)](i),!0}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r;t.default=i},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(372))},function(e,t,n){"use strict";function r(e){var t=e.children,n=e.classes,r=e.className,i=(0,a.default)(e,["children","classes","className"]);return s.default.cloneElement(t,(0,o.default)({className:(0,l.default)(n.root,r,t.props.className)},i))}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(8)),a=i(n(3)),s=i(n(1)),l=(i(n(2)),i(n(6))),u=i(n(5)),c=function(e){return{root:{marginRight:16,color:e.palette.action.active,flexShrink:0}}};t.styles=c,r.propTypes={};var h=(0,u.default)(c,{name:"MuiListItemIcon"})(r);t.default=h},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(374))},function(e,t,n){"use strict";function r(e,t){var n,r=e.children,i=e.classes,u=e.className,h=e.disableTypography,f=e.inset,p=e.primary,m=e.primaryTypographyProps,v=e.secondary,g=e.secondaryTypographyProps,y=(0,s.default)(e,["children","classes","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"]),_=t.dense,b=null!=p?p:r;null==b||b.type===d.default||h||(b=l.default.createElement(d.default,(0,o.default)({variant:"subheading",className:(0,c.default)(i.primary,(0,a.default)({},i.textDense,_)),component:"span"},m),b));var w=v;return null==w||w.type===d.default||h||(w=l.default.createElement(d.default,(0,o.default)({variant:"body1",className:(0,c.default)(i.secondary,(0,a.default)({},i.textDense,_)),color:"textSecondary"},g),w)),l.default.createElement("div",(0,o.default)({className:(0,c.default)(i.root,(n={},(0,a.default)(n,i.dense,_),(0,a.default)(n,i.inset,f),n),u)},y),b,w)}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(7)),s=i(n(3)),l=i(n(1)),u=i(n(2)),c=i(n(6)),h=i(n(5)),d=i(n(48)),f=function(e){return{root:{flex:"1 1 auto",minWidth:0,padding:"0 16px","&:first-child":{paddingLeft:0}},inset:{"&:first-child":{paddingLeft:56}},dense:{fontSize:e.typography.pxToRem(13)},primary:{"&$textDense":{fontSize:"inherit"}},secondary:{"&$textDense":{fontSize:"inherit"}},textDense:{}}};t.styles=f,r.propTypes={},r.defaultProps={disableTypography:!1,inset:!1},r.contextTypes={dense:u.default.bool};var p=(0,h.default)(f,{name:"MuiListItemText"})(r);t.default=p},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var i=r(n(4)),o=r(n(8)),a=r(n(7)),s=r(n(3)),l=r(n(9)),u=r(n(10)),c=r(n(11)),h=r(n(12)),d=r(n(1)),f=r(n(6)),p=(r(n(2)),r(n(47))),m=r(n(5)),v=n(32),g=n(61),y=function(e){return{container:{height:0,overflow:"hidden",transition:e.transitions.create("height")},entered:{height:"auto"},wrapper:{display:"flex"},wrapperInner:{width:"100%"}}};t.styles=y;var _=function(e){function t(){var e,n,r;(0,l.default)(this,t);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(0,c.default)(r,(n=r=(0,c.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.wrapper=null,r.autoTransitionDuration=null,r.timer=null,r.handleEnter=function(e){e.style.height=r.props.collapsedHeight,r.props.onEnter&&r.props.onEnter(e)},r.handleEntering=function(e){var t=r.props,n=t.timeout,i=t.theme,o=r.wrapperRef?r.wrapperRef.clientHeight:0,a=(0,g.getTransitionProps)(r.props,{mode:"enter"}),s=a.duration;if("auto"===n){var l=i.transitions.getAutoHeightDuration(o);e.style.transitionDuration="".concat(l,"ms"),r.autoTransitionDuration=l}else e.style.transitionDuration="string"===typeof s?s:"".concat(s,"ms");e.style.height="".concat(o,"px"),r.props.onEntering&&r.props.onEntering(e)},r.handleEntered=function(e){e.style.height="auto",r.props.onEntered&&r.props.onEntered(e)},r.handleExit=function(e){var t=r.wrapperRef?r.wrapperRef.clientHeight:0;e.style.height="".concat(t,"px"),r.props.onExit&&r.props.onExit(e)},r.handleExiting=function(e){var t=r.props,n=t.timeout,i=t.theme,o=r.wrapperRef?r.wrapperRef.clientHeight:0,a=(0,g.getTransitionProps)(r.props,{mode:"exit"}),s=a.duration;if("auto"===n){var l=i.transitions.getAutoHeightDuration(o);e.style.transitionDuration="".concat(l,"ms"),r.autoTransitionDuration=l}else e.style.transitionDuration="string"===typeof s?s:"".concat(s,"ms");e.style.height=r.props.collapsedHeight,r.props.onExiting&&r.props.onExiting(e)},r.addEndListener=function(e,t){"auto"===r.props.timeout&&(r.timer=setTimeout(t,r.autoTransitionDuration||0))},n))}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.classes,l=t.className,u=t.collapsedHeight,c=t.component,h=(t.onEnter,t.onEntered,t.onEntering,t.onExit,t.onExiting,t.style),m=(t.theme,t.timeout),v=(0,s.default)(t,["children","classes","className","collapsedHeight","component","onEnter","onEntered","onEntering","onExit","onExiting","style","theme","timeout"]);return d.default.createElement(p.default,(0,i.default)({onEnter:this.handleEnter,onEntered:this.handleEntered,onEntering:this.handleEntering,onExit:this.handleExit,onExiting:this.handleExiting,addEndListener:this.addEndListener,timeout:"auto"===m?null:m},v),function(t,s){return d.default.createElement(c,(0,i.default)({className:(0,f.default)(r.container,(0,a.default)({},r.entered,"entered"===t),l),style:(0,o.default)({},h,{minHeight:u})},s),d.default.createElement("div",{className:r.wrapper,ref:function(t){e.wrapperRef=t}},d.default.createElement("div",{className:r.wrapperInner},n)))})}}]),t}(d.default.Component);_.propTypes={},_.defaultProps={collapsedHeight:"0px",component:"div",timeout:v.duration.standard},_.muiSupportAuto=!0;var b=(0,m.default)(y,{withTheme:!0,name:"MuiCollapse"})(_);t.default=b},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(15)),a=(0,o.default)(i.default.createElement("g",null,i.default.createElement("path",{d:"M21.99 8c0-.72-.37-1.35-.94-1.7L12 1 2.95 6.3C2.38 6.65 2 7.28 2 8v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2l-.01-10zM12 13L3.74 7.84 12 3l8.26 4.84L12 13z"})),"Drafts");t.default=a},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(15)),a=(0,o.default)(i.default.createElement("g",null,i.default.createElement("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"})),"KeyboardArrowRight");t.default=a},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(379))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var i=r(n(4)),o=r(n(3)),a=r(n(9)),s=r(n(10)),l=r(n(11)),u=r(n(12)),c=r(n(1)),h=r(n(2)),d=r(n(6)),f=r(n(5)),p=function(e){return{root:{display:"table",fontFamily:e.typography.fontFamily,width:"100%",borderCollapse:"collapse",borderSpacing:0}}};t.styles=p;var m=function(e){function t(){return(0,a.default)(this,t),(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"getChildContext",value:function(){return{table:{}}}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,r=e.component,a=(0,o.default)(e,["classes","className","component"]);return c.default.createElement(r,(0,i.default)({className:(0,d.default)(t.root,n)},a))}}]),t}(c.default.Component);m.propTypes={},m.defaultProps={component:"table"},m.childContextTypes={table:h.default.object};var v=(0,f.default)(p,{name:"MuiTable"})(m);t.default=v},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(381))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var i=r(n(4)),o=r(n(3)),a=r(n(9)),s=r(n(10)),l=r(n(11)),u=r(n(12)),c=r(n(1)),h=r(n(2)),d=r(n(6)),f=r(n(5)),p={root:{display:"table-row-group"}};t.styles=p;var m=function(e){function t(){return(0,a.default)(this,t),(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"getChildContext",value:function(){return{table:{body:!0}}}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,r=e.component,a=(0,o.default)(e,["classes","className","component"]);return c.default.createElement(r,(0,i.default)({className:(0,d.default)(t.root,n)},a))}}]),t}(c.default.Component);m.propTypes={},m.defaultProps={component:"tbody"},m.childContextTypes={table:h.default.object};var v=(0,f.default)(p,{name:"MuiTableBody"})(m);t.default=v},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(383))},function(e,t,n){"use strict";function r(e,t){var n,r,i=e.children,u=e.classes,h=e.className,f=e.component,p=e.sortDirection,m=e.numeric,v=e.padding,g=e.scope,y=e.variant,_=(0,s.default)(e,["children","classes","className","component","sortDirection","numeric","padding","scope","variant"]),b=t.table;r=f||(b&&b.head?"th":"td");var w=g;!w&&b&&b.head&&(w="col");var x=(0,c.default)(u.root,(n={},(0,a.default)(n,u.head,y?"head"===y:b&&b.head),(0,a.default)(n,u.body,y?"body"===y:b&&b.body),(0,a.default)(n,u.footer,y?"footer"===y:b&&b.footer),(0,a.default)(n,u.numeric,m),(0,a.default)(n,u["padding".concat((0,d.capitalize)(v))],"default"!==v),n),h),E=null;return p&&(E="asc"===p?"ascending":"descending"),l.default.createElement(r,(0,o.default)({className:x,"aria-sort":E,scope:w},_),i)}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(7)),s=i(n(3)),l=i(n(1)),u=i(n(2)),c=i(n(6)),h=i(n(5)),d=n(16),f=n(31),p=function(e){return{root:{display:"table-cell",verticalAlign:"inherit",borderBottom:"1px solid\n    ".concat("light"===e.palette.type?(0,f.lighten)((0,f.fade)(e.palette.divider,1),.88):(0,f.darken)((0,f.fade)(e.palette.divider,1),.8)),textAlign:"left",padding:"4px 56px 4px 24px","&:last-child":{paddingRight:24}},head:{color:e.palette.text.secondary,fontSize:e.typography.pxToRem(12),fontWeight:e.typography.fontWeightMedium},body:{color:e.palette.text.primary,fontSize:e.typography.pxToRem(13),fontWeight:e.typography.fontWeightRegular},footer:{borderBottom:0,color:e.palette.text.secondary,fontSize:e.typography.pxToRem(12)},numeric:{textAlign:"right",flexDirection:"row-reverse"},paddingDense:{paddingRight:24},paddingCheckbox:{padding:"0 12px","&:last-child":{paddingRight:12}},paddingNone:{padding:0,"&:last-child":{padding:0}}}};t.styles=p,r.propTypes={},r.defaultProps={numeric:!1,padding:"default"},r.contextTypes={table:u.default.object.isRequired};var m=(0,h.default)(p,{name:"MuiTableCell"})(r);t.default=m},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(385))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var i=r(n(4)),o=r(n(3)),a=r(n(9)),s=r(n(10)),l=r(n(11)),u=r(n(12)),c=r(n(1)),h=r(n(2)),d=r(n(6)),f=r(n(5)),p={root:{display:"table-header-group"}};t.styles=p;var m=function(e){function t(){return(0,a.default)(this,t),(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"getChildContext",value:function(){return{table:{head:!0}}}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,r=e.component,a=(0,o.default)(e,["classes","className","component"]);return c.default.createElement(r,(0,i.default)({className:(0,d.default)(t.root,n)},a))}}]),t}(c.default.Component);m.propTypes={},m.defaultProps={component:"thead"},m.childContextTypes={table:h.default.object};var v=(0,f.default)(p,{name:"MuiTableHead"})(m);t.default=v},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(387))},function(e,t,n){"use strict";function r(e,t){var n,r=e.classes,i=e.className,u=e.component,h=e.hover,d=e.selected,f=(0,s.default)(e,["classes","className","component","hover","selected"]),p=t.table,m=(0,c.default)(r.root,(n={},(0,a.default)(n,r.head,p&&p.head),(0,a.default)(n,r.footer,p&&p.footer),(0,a.default)(n,r.hover,p&&h),(0,a.default)(n,r.selected,p&&d),n),i);return l.default.createElement(u,(0,o.default)({className:m},f))}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(7)),s=i(n(3)),l=i(n(1)),u=i(n(2)),c=i(n(6)),h=i(n(5)),d=function(e){return{root:{color:"inherit",display:"table-row",height:48,verticalAlign:"middle",outline:"none","&$selected":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.04)":"rgba(255, 255, 255, 0.08)"},"&$hover:hover":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.07)":"rgba(255, 255, 255, 0.14)"}},selected:{},hover:{},head:{height:56},footer:{height:56}}};t.styles=d,r.propTypes={},r.defaultProps={component:"tr",hover:!1,selected:!1},r.contextTypes={table:u.default.object};var f=(0,h.default)(d,{name:"MuiTableRow"})(r);t.default=f},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(1),u=n.n(l),c=n(2),h=n.n(c),d=n(45),f=(n.n(d),n(389)),p=n.n(f),m=n(391),v=n.n(m),g=n(392),y=n.n(g),_=n(411),b=n.n(_),w=n(413),x=n.n(w),E=n(415),S=n.n(E),T=n(419),M=n.n(T),k=n(48),P=n.n(k),C=n(159),A=n.n(C),O=n(103),I=n.n(O),R=n(144),L=n.n(R),D=n(422),N=n.n(D),F=n(426),U=n.n(F),z=n(104),B=n.n(z),j=n(428),H=n.n(j),V=n(430),G=n.n(V),W=n(432),q=n.n(W),X=n(434),Y=n.n(X),Z=n(445),J=n.n(Z),K=n(446),Q=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),$=function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},column:{flexBasis:"33.33%"},input:{display:"none"},heading:{fontSize:e.typography.pxToRem(15)},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},icon:{verticalAlign:"bottom",height:20,width:20},progress:{margin:2*e.spacing.unit},details:{alignItems:"center"},helper:{borderLeft:"2px solid "+e.palette.divider,padding:e.spacing.unit+"px "+2*e.spacing.unit+"px"},alert:{color:"red",fontSize:"5"},gridList:{flexWrap:"nowrap",transform:"translateZ(0)"},chip:{margin:e.spacing.unit},avatar:{backgroundColor:e.palette.primary.dark},avatarIcon:{color:e.palette.primary.contrastText},formControl:{textAlign:"center",margin:e.spacing.unit,minWidth:120},button:{margin:e.spacing.unit},rightIcon:{marginLeft:e.spacing.unit},title:{color:e.palette.primary.light},titleBar:{background:"linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)"}}},ee=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){var t;n.setState((t={},i(t,e.target.name,e.target.value),i(t,"toSearch",e.target.value),i(t,"results",[]),t)),fetch("http://localhost/list_dir/explorer_get.cgi?folder="+e.target.value+"/input").then(function(e){return e.json()}).then(function(t){n.setState({searchInput:t.files,selectedFolder:e.target.value})})},n.handleUpload=function(e){n.setState({upload:!1});var t=[],r=e.target.files;new FormData;if(0===r.length)console.log("No files currently selected for upload");else{for(var i=0;i<r.length;i++)t.push({filename:r[i].name});n.setState({upload:!0,searchInput:t,uploadedFiles:r[0]})}},n.handleDeleteInput=function(e){return function(){n.setState(function(t){var n=[].concat(r(t.searchInput)),i=n.indexOf(e);return n.splice(i,1),{searchInput:n}})}},n.handleDeleteResults=function(e){return function(){n.setState(function(t){var n=[].concat(r(t.results)),i=n.indexOf(e);return n.splice(i,1),{results:n}})}},n.showPreview=function(e){return function(){}},n.openImage=function(e){return function(){console.log(e),n.setState({showDialog:!0,imageToOpen:e.filename,folderToOpen:e.folder})}},n.handleClosed=function(){n.setState({showDialog:!1,imageToOpen:"",folderToOpen:""})},n.runSplitVolume=function(e){return function(){if(e.length<=0)return void n.setState({alert:"No Image selected to process"});n.setState({isProcessed:!0,results:[]}),n.setState(function(t){var i=[t.selectedFolder],o=t.upload,a=[t.uploadedFiles],s=new FormData;s.append("selectedFile",a),console.log("http://localhost/algorithms/handleUploadFiles.cgi?input="+a),o?y.a.post("http://localhost/algorithms/handleUploadFiles.cgi?input=",s).then(function(e){return console.log(e)}):fetch("http://localhost/algorithms/runSplitVolumes.cgi?input="+JSON.stringify(e)+"&folder="+i).then(function(e){return e.json()}).then(function(e){n.setState(function(t){[].concat(r(t.selectedFolder));return{results:e.files,isProcessed:!1}})})})}},n.state={subjectList:[],isLoaded:!1,inputImages:[],selectedFolder:"",uploadedFiles:"",upload:!1,searchInput:[],alert:"",isProcessed:!1,response:"",results:[],showDialog:!1,imageToOpen:"",folderToOpen:""},n}return s(t,e),Q(t,[{key:"componentWillMount",value:function(){var e=this;fetch("/subjectslist").then(function(e){return e.json()}).then(function(t){e.setState({isLoaded:!0,subjectList:t})})}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state,r=(n.isLoaded,n.subjectList),i=(n.inputImages,n.selectedFolder,n.searchInput),o=n.alert,a=n.isProcessed,s=n.results,l=(n.upload,n.showDialog),c=n.imageToOpen,h=n.folderToOpen;return u.a.createElement("div",null,u.a.createElement(K.a,{open:l,onClose:this.handleClosed,imageToOpen:c,folderToOpen:h}),u.a.createElement(b.a,{defaultExpanded:!0},u.a.createElement(S.a,{expandIcon:u.a.createElement(A.a,null)},u.a.createElement("div",{className:t.column},u.a.createElement(P.a,{alignLeft:!0,className:t.heading},"Split Volumes ",a?u.a.createElement(p.a,{className:t.progress,thickness:7,size:30}):null," "),u.a.createElement(P.a,{className:t.alert},o))),u.a.createElement(x.a,{className:t.details},u.a.createElement("div",{className:t.column,style:{borderRight:"0.01em solid black",padding:"0.5em"}},u.a.createElement(q.a,{className:t.formControl},u.a.createElement("input",{accept:"application/x-gzip",className:t.input,id:"flat-button-file",multiple:!0,type:"file",onChange:this.handleUpload}),u.a.createElement("label",{htmlFor:"flat-button-file"},u.a.createElement(I.a,{component:"span",variant:"contained",color:"primary",className:t.button},"Upload your own Images",u.a.createElement(v.a,{className:t.rightIcon}))),u.a.createElement(P.a,null,"-or-"),u.a.createElement(Y.a,{value:this.state.subject,onChange:this.handleChange,input:u.a.createElement(B.a,{name:"subject",id:"subject-helper"})},r.map(function(e,t){return u.a.createElement(H.a,{value:e.inputfolder,key:e.index},e.inputfolder)})),u.a.createElement(G.a,null,"Select a subject"))),u.a.createElement("div",{className:t.column,style:{borderRight:"0.01em solid black",padding:"0.5em"}},i.map(function(n,r){return u.a.createElement(N.a,{label:n.filename,className:t.chip,avatar:u.a.createElement(U.a,{className:t.avatar,onClick:e.openImage(n)},u.a.createElement(J.a,{className:t.avatarIcon})),onDelete:e.handleDeleteInput(n)})})),u.a.createElement("div",{className:t.column},s?u.a.createElement(P.a,null,s.map(function(n){return u.a.createElement(N.a,{label:n.filename,className:t.chip,avatar:u.a.createElement(U.a,{button:!0,onHover:e.showPreview(n.filename),onClick:e.openImage(n)},u.a.createElement(J.a,null)),onDelete:e.handleDeleteResults(n)})})):null)),u.a.createElement(L.a,null),u.a.createElement(M.a,null,u.a.createElement(I.a,{size:"small"},"Cancel"),u.a.createElement(I.a,{size:"small",color:"primary",onClick:this.runSplitVolume(this.state.searchInput),helperText:"tezt"},"Run SplitVolumes"))))}}]),t}(u.a.Component);ee.propTypes={classes:h.a.object.isRequired},t.a=Object(d.withStyles)($)(ee)},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(390))},function(e,t,n){"use strict";function r(e,t,n){return(Math.min(Math.max(t,e),n)-t)/(n-t)}function i(e){return e=r(e,0,1),e=(e-=1)*e*e+1}function o(e){return e*e}function a(e){var t,n,r=e.classes,a=e.className,s=e.color,p=e.size,g=e.style,y=e.thickness,_=e.value,b=e.variant,w=(0,h.default)(e,["classes","className","color","size","style","thickness","value","variant"]),x={},E={},S={};if("determinate"===b||"static"===b){var T=2*Math.PI*((v-y)/2);x.strokeDasharray=T.toFixed(3),S["aria-valuenow"]=Math.round(_),"static"===b?(x.strokeDashoffset="".concat(((100-_)/100*T).toFixed(3),"px"),E.transform="rotate(-90deg)"):(x.strokeDashoffset="".concat((o((100-_)/100)*T).toFixed(3),"px"),E.transform="rotate(".concat((270*i(_/70)).toFixed(3),"deg)"))}return d.default.createElement("div",(0,l.default)({className:(0,f.default)(r.root,(t={},(0,c.default)(t,r["color".concat((0,m.capitalize)(s))],"inherit"!==s),(0,c.default)(t,r.indeterminate,"indeterminate"===b),(0,c.default)(t,r.static,"static"===b),t),a),style:(0,u.default)({width:p,height:p},E,g),role:"progressbar"},S,w),d.default.createElement("svg",{className:r.svg,viewBox:"".concat(v/2," ").concat(v/2," ").concat(v," ").concat(v)},d.default.createElement("circle",{className:(0,f.default)(r.circle,(n={},(0,c.default)(n,r.circleIndeterminate,"indeterminate"===b),(0,c.default)(n,r.circleStatic,"static"===b),n)),style:x,cx:v,cy:v,r:(v-y)/2,fill:"none",strokeWidth:y})))}var s=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var l=s(n(4)),u=s(n(8)),c=s(n(7)),h=s(n(3)),d=s(n(1)),f=(s(n(2)),s(n(6))),p=s(n(5)),m=n(16),v=44,g=function(e){return{root:{display:"inline-block",lineHeight:1},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"mui-progress-circular-rotate 1.4s linear infinite"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"mui-progress-circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},"@keyframes mui-progress-circular-rotate":{"100%":{transform:"rotate(360deg)"}},"@keyframes mui-progress-circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-120px"}}}};t.styles=g,a.propTypes={},a.defaultProps={color:"primary",size:40,thickness:3.6,value:0,variant:"indeterminate"};var y=(0,p.default)(g,{name:"MuiCircularProgress",flip:!1})(a);t.default=y},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(15)),a=(0,o.default)(i.default.createElement("g",null,i.default.createElement("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"})),"CloudUpload");t.default=a},function(e,t,n){e.exports=n(393)},function(e,t,n){"use strict";function r(e){var t=new a(e),n=o(a.prototype.request,t);return i.extend(n,a.prototype,t),i.extend(n,t),n}var i=n(17),o=n(160),a=n(395),s=n(102),l=r(s);l.Axios=a,l.create=function(e){return r(i.merge(s,e))},l.Cancel=n(164),l.CancelToken=n(409),l.isCancel=n(163),l.all=function(e){return Promise.all(e)},l.spread=n(410),e.exports=l,e.exports.default=l},function(e,t){function n(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&n(e.slice(0,0))}e.exports=function(e){return null!=e&&(n(e)||r(e)||!!e._isBuffer)}},function(e,t,n){"use strict";function r(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var i=n(102),o=n(17),a=n(404),s=n(405);r.prototype.request=function(e){"string"===typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),e=o.merge(i,{method:"get"},this.defaults,e),e.method=e.method.toLowerCase();var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},o.forEach(["delete","get","head","options"],function(e){r.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=r},function(e,t,n){"use strict";var r=n(17);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(162);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(17);e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var a=[];i.forEach(t,function(e,t){null!==e&&"undefined"!==typeof e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),o=a.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},function(e,t,n){"use strict";var r=n(17),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}}),a):a}},function(e,t,n){"use strict";var r=n(17);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(n){var i=r.isString(n)?e(n):n;return i.protocol===t.protocol&&i.host===t.host}}():function(){return function(){return!0}}()},function(e,t,n){"use strict";function r(){this.message="String contains an invalid character"}function i(e){for(var t,n,i=String(e),a="",s=0,l=o;i.charAt(0|s)||(l="=",s%1);a+=l.charAt(63&t>>8-s%1*8)){if((n=i.charCodeAt(s+=.75))>255)throw new r;t=t<<8|n}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",e.exports=i},function(e,t,n){"use strict";var r=n(17);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function r(){this.handlers=[]}var i=n(17);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){"use strict";function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var i=n(17),o=n(406),a=n(163),s=n(102),l=n(407),u=n(408);e.exports=function(e){return r(e),e.baseURL&&!l(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return r(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return a(t)||(r(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(17);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";function r(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new i(e),t(n.reason))})}var i=n(164);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(412))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var i=r(n(4)),o=r(n(7)),a=r(n(3)),s=r(n(9)),l=r(n(10)),u=r(n(11)),c=r(n(12)),h=r(n(8)),d=r(n(1)),f=(r(n(2)),r(n(6))),p=(r(n(13)),r(n(101))),m=r(n(20)),v=r(n(5)),g=n(68),y="undefined"!==typeof window&&/jsdom/.test(window.navigator.userAgent)?{}:{"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}},_=function(e){var t={duration:e.transitions.duration.shortest};return{root:{position:"relative",transition:e.transitions.create(["margin"],t),"&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:e.palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-child":{borderTopLeftRadius:2,borderTopRightRadius:2,"&:before":{display:"none"}},"&:last-child":(0,h.default)({borderBottomLeftRadius:2,borderBottomRightRadius:2},y),"&$expanded + &":{"&:before":{display:"none"}}},expanded:{margin:"16px 0","&:first-child":{marginTop:0},"&:last-child":{marginBottom:0},"&:before":{opacity:0}},disabled:{backgroundColor:e.palette.action.disabledBackground}}};t.styles=_;var b=function(e){function t(e){var n;return(0,s.default)(this,t),n=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n.isControlled=null,n.state={},n.handleChange=function(e){var t=n.isControlled?n.props.expanded:n.state.expanded;n.isControlled||n.setState({expanded:!t}),n.props.onChange&&n.props.onChange(e,!t)},n.isControlled=null!=e.expanded,n.isControlled||(n.state.expanded=void 0!==e.defaultExpanded&&e.defaultExpanded),n}return(0,c.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e,t=this,n=this.props,r=n.children,s=n.classes,l=n.className,u=n.CollapseProps,c=(n.defaultExpanded,n.disabled),h=n.expanded,v=(n.onChange,(0,a.default)(n,["children","classes","className","CollapseProps","defaultExpanded","disabled","expanded","onChange"])),y=this.isControlled?h:this.state.expanded,_=(0,f.default)(s.root,(e={},(0,o.default)(e,s.expanded,y),(0,o.default)(e,s.disabled,c),e),l),b=null,w=d.default.Children.map(r,function(e){return d.default.isValidElement(e)?(0,g.isMuiElement)(e,["ExpansionPanelSummary"])?(b=d.default.cloneElement(e,{disabled:c,expanded:y,onChange:t.handleChange}),null):e:null}),x=y?null:{"aria-hidden":"true"};return d.default.createElement(m.default,(0,i.default)({className:_,elevation:1,square:!0},v),b,d.default.createElement(p.default,(0,i.default)({in:y,timeout:"auto"},x,u),w))}}]),t}(d.default.Component);b.propTypes={},b.defaultProps={defaultExpanded:!1,disabled:!1};var w=(0,v.default)(_,{name:"MuiExpansionPanel"})(b);t.default=w},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(414))},function(e,t,n){"use strict";function r(e){var t=e.classes,n=e.children,r=e.className,i=(0,a.default)(e,["classes","children","className"]);return s.default.createElement("div",(0,o.default)({className:(0,l.default)(t.root,r)},i),n)}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(3)),s=i(n(1)),l=(i(n(2)),i(n(6))),u=i(n(5)),c={root:{display:"flex",padding:"8px 24px 24px"}};t.styles=c,r.propTypes={};var h=(0,u.default)(c,{name:"MuiExpansionPanelDetails"})(r);t.default=h},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(416))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var i=r(n(4)),o=r(n(7)),a=r(n(3)),s=r(n(9)),l=r(n(10)),u=r(n(11)),c=r(n(12)),h=r(n(1)),d=(r(n(2)),r(n(6))),f=r(n(67)),p=r(n(417)),m=r(n(5)),v=function(e){var t={duration:e.transitions.duration.shortest};return{root:{display:"flex",minHeight:48,transition:e.transitions.create(["min-height","background-color"],t),padding:"0 24px 0 24px","&:hover:not($disabled)":{cursor:"pointer"},"&$expanded":{minHeight:64},"&$focused":{backgroundColor:e.palette.grey[300]},"&$disabled":{opacity:.38}},expanded:{},focused:{},disabled:{},content:{display:"flex",flexGrow:1,transition:e.transitions.create(["margin"],t),margin:"12px 0","& > :last-child":{paddingRight:32},"&$expanded":{margin:"20px 0"}},expandIcon:{position:"absolute",top:"50%",right:8,transform:"translateY(-50%) rotate(0deg)",transition:e.transitions.create("transform",t),"&:hover":{backgroundColor:"transparent"},"&$expanded":{transform:"translateY(-50%) rotate(180deg)"}}}};t.styles=v;var g=function(e){function t(){var e,n,r;(0,s.default)(this,t);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(0,u.default)(r,(n=r=(0,u.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={focused:!1},r.handleFocus=function(){r.setState({focused:!0})},r.handleBlur=function(){r.setState({focused:!1})},r.handleChange=function(e){var t=r.props,n=t.onChange,i=t.onClick;n&&n(e),i&&i(e)},n))}return(0,c.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e,t=this.props,n=t.children,r=t.classes,s=t.className,l=t.disabled,u=t.expanded,c=t.expandIcon,m=t.IconButtonProps,v=(t.onChange,(0,a.default)(t,["children","classes","className","disabled","expanded","expandIcon","IconButtonProps","onChange"])),g=this.state.focused;return h.default.createElement(f.default,(0,i.default)({focusRipple:!1,disableRipple:!0,disabled:l,component:"div","aria-expanded":u,className:(0,d.default)(r.root,(e={},(0,o.default)(e,r.disabled,l),(0,o.default)(e,r.expanded,u),(0,o.default)(e,r.focused,g),e),s)},v,{onFocusVisible:this.handleFocus,onBlur:this.handleBlur,onClick:this.handleChange}),h.default.createElement("div",{className:(0,d.default)(r.content,(0,o.default)({},r.expanded,u))},n),c&&h.default.createElement(p.default,(0,i.default)({disabled:l,className:(0,d.default)(r.expandIcon,(0,o.default)({},r.expanded,u)),component:"div",tabIndex:-1,"aria-hidden":"true"},m),c))}}]),t}(h.default.Component);g.propTypes={},g.defaultProps={disabled:!1},g.muiName="ExpansionPanelSummary";var y=(0,m.default)(v,{name:"MuiExpansionPanelSummary"})(g);t.default=y},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(418))},function(e,t,n){"use strict";function r(e){var t,n=e.children,r=e.classes,i=e.className,c=e.color,h=e.disabled,p=(0,s.default)(e,["children","classes","className","color","disabled"]);return l.default.createElement(d.default,(0,o.default)({className:(0,u.default)(r.root,(t={},(0,a.default)(t,r["color".concat((0,f.capitalize)(c))],"default"!==c),(0,a.default)(t,r.disabled,h),t),i),centerRipple:!0,focusRipple:!0,disabled:h},p),l.default.createElement("span",{className:r.label},n))}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(7)),s=i(n(3)),l=i(n(1)),u=(i(n(2)),i(n(6))),c=i(n(5)),h=n(31),d=i(n(67)),f=n(16),p=function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),width:48,height:48,padding:0,borderRadius:"50%",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:(0,h.fade)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,h.fade)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,h.fade)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}};t.styles=p,r.propTypes={},r.defaultProps={color:"default",disabled:!1};var m=(0,c.default)(p,{name:"MuiIconButton"})(r);t.default=m},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(420))},function(e,t,n){"use strict";function r(e){var t=e.children,n=e.classes,r=e.className,i=(0,a.default)(e,["children","classes","className"]);return s.default.createElement("div",(0,o.default)({className:(0,l.default)(n.root,r)},i),(0,c.cloneChildrenWithClassName)(t,n.action))}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(3)),s=i(n(1)),l=(i(n(2)),i(n(6))),u=i(n(5)),c=n(68);n(103);var h={root:{display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"16px 8px"},action:{marginLeft:8}};t.styles=h,r.propTypes={};var d=(0,u.default)(h,{name:"MuiExpansionPanelActions"})(r);t.default=d},function(e,t,n){"use strict";function r(e){var t,n=e.children,r=e.classes,i=e.className,l=e.color,h=e.disabled,d=e.disableFocusRipple,m=e.fullWidth,v=e.focusVisibleClassName,g=e.mini,y=e.size,_=e.variant,b=(0,s.default)(e,["children","classes","className","color","disabled","disableFocusRipple","fullWidth","focusVisibleClassName","mini","size","variant"]),w="fab"===_||"extendedFab"===_,x="contained"===_||"raised"===_,E="text"===_||"flat"===_||"outlined"===_,S=(0,c.default)(r.root,(t={},(0,a.default)(t,r.fab,w),(0,a.default)(t,r.mini,w&&g),(0,a.default)(t,r.extendedFab,"extendedFab"===_),(0,a.default)(t,r.text,E),(0,a.default)(t,r.textPrimary,E&&"primary"===l),(0,a.default)(t,r.textSecondary,E&&"secondary"===l),(0,a.default)(t,r.flat,"text"===_||"flat"===_),(0,a.default)(t,r.flatPrimary,("text"===_||"flat"===_)&&"primary"===l),(0,a.default)(t,r.flatSecondary,("text"===_||"flat"===_)&&"secondary"===l),(0,a.default)(t,r.contained,x||w),(0,a.default)(t,r.containedPrimary,(x||w)&&"primary"===l),(0,a.default)(t,r.containedSecondary,(x||w)&&"secondary"===l),(0,a.default)(t,r.raised,x||w),(0,a.default)(t,r.raisedPrimary,(x||w)&&"primary"===l),(0,a.default)(t,r.raisedSecondary,(x||w)&&"secondary"===l),(0,a.default)(t,r.outlined,"outlined"===_),(0,a.default)(t,r["size".concat((0,p.capitalize)(y))],"medium"!==y),(0,a.default)(t,r.disabled,h),(0,a.default)(t,r.fullWidth,m),(0,a.default)(t,r.colorInherit,"inherit"===l),t),i);return u.default.createElement(f.default,(0,o.default)({className:S,disabled:h,focusRipple:!d,focusVisibleClassName:(0,c.default)(r.focusVisible,v)},b),u.default.createElement("span",{className:r.label},n))}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(7)),s=i(n(3)),l=i(n(8)),u=i(n(1)),c=(i(n(2)),i(n(6))),h=i(n(5)),d=n(31),f=i(n(67)),p=n(16),m=function(e){return{root:(0,l.default)({},e.typography.button,{lineHeight:"1.4em",boxSizing:"border-box",minWidth:64,minHeight:36,padding:"8px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:(0,d.fade)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,d.fade)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,d.fade)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},flat:{},flatPrimary:{},flatSecondary:{},outlined:{border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground},"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},raised:{},raisedPrimary:{},raisedSecondary:{},fab:{borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]}},extendedFab:{borderRadius:24,padding:"0 16px",width:"auto",minWidth:48,height:48},focusVisible:{},disabled:{},colorInherit:{color:"inherit"},mini:{width:40,height:40},sizeSmall:{padding:"7px 8px",minWidth:64,minHeight:32,fontSize:e.typography.pxToRem(13)},sizeLarge:{padding:"8px 24px",minWidth:112,minHeight:40,fontSize:e.typography.pxToRem(15)},fullWidth:{width:"100%"}}};t.styles=m,r.propTypes={},r.defaultProps={color:"default",component:"button",disabled:!1,disableFocusRipple:!1,fullWidth:!1,mini:!1,size:"medium",type:"button",variant:"text"};var v=(0,h.default)(m,{name:"MuiButton"})(r);t.default=v},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(423))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var i=r(n(4)),o=r(n(7)),a=r(n(3)),s=r(n(9)),l=r(n(10)),u=r(n(11)),c=r(n(12)),h=r(n(1)),d=(r(n(2)),r(n(6))),f=r(n(34)),p=r(n(424)),m=r(n(5)),v=n(31);r(n(425));n(165);var g=function(e){var t="light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],n=(0,v.fade)(e.palette.text.primary,.26);return{root:{fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:e.palette.getContrastText(t),backgroundColor:t,borderRadius:16,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:"none",textDecoration:"none",border:"none",padding:0},clickable:{WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover, &:focus":{backgroundColor:(0,v.emphasize)(t,.08)},"&:active":{boxShadow:e.shadows[1],backgroundColor:(0,v.emphasize)(t,.12)}},deletable:{"&:focus":{backgroundColor:(0,v.emphasize)(t,.08)}},avatar:{marginRight:-4,width:32,height:32,color:"light"===e.palette.type?e.palette.grey[700]:e.palette.grey[300],fontSize:e.typography.pxToRem(16)},avatarChildren:{width:19,height:19},label:{display:"flex",alignItems:"center",paddingLeft:12,paddingRight:12,userSelect:"none",whiteSpace:"nowrap",cursor:"inherit"},deleteIcon:{WebkitTapHighlightColor:"transparent",color:n,cursor:"pointer",height:"auto",margin:"0 4px 0 -8px","&:hover":{color:(0,v.fade)(n,.4)}}}};t.styles=g;var y=function(e){function t(){var e,n,r;(0,s.default)(this,t);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(0,u.default)(r,(n=r=(0,u.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.chipRef=null,r.handleDeleteIconClick=function(e){e.stopPropagation();var t=r.props.onDelete;t&&t(e)},r.handleKeyDown=function(e){if(e.currentTarget===e.target){var t=r.props,n=t.onClick,i=t.onDelete,o=t.onKeyDown,a=(0,f.default)(e);!n||"space"!==a&&"enter"!==a?i&&"backspace"===a?(e.preventDefault(),i(e)):"esc"===a&&(e.preventDefault(),r.chipRef&&r.chipRef.blur()):(e.preventDefault(),n(e)),o&&o(e)}},n))}return(0,c.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.avatar,r=t.classes,s=t.className,l=t.clickable,u=t.component,c=t.deleteIcon,f=t.label,m=t.onClick,v=t.onDelete,g=(t.onKeyDown,t.tabIndex),y=(0,a.default)(t,["avatar","classes","className","clickable","component","deleteIcon","label","onClick","onDelete","onKeyDown","tabIndex"]),_=(0,d.default)(r.root,(0,o.default)({},r.clickable,m||l),(0,o.default)({},r.deletable,v),s),b=null;v&&(b=c&&h.default.isValidElement(c)?h.default.cloneElement(c,{className:(0,d.default)(c.props.className,r.deleteIcon),onClick:this.handleDeleteIconClick}):h.default.createElement(p.default,{className:r.deleteIcon,onClick:this.handleDeleteIconClick}));var w=null;n&&h.default.isValidElement(n)&&(w=h.default.cloneElement(n,{className:(0,d.default)(r.avatar,n.props.className),childrenClassName:(0,d.default)(r.avatarChildren,n.props.childrenClassName)}));var x=g;return x||(x=m||v||l?0:-1),h.default.createElement(u,(0,i.default)({role:"button",className:_,tabIndex:x,onClick:m,onKeyDown:this.handleKeyDown,ref:function(t){e.chipRef=t}},y),w,h.default.createElement("span",{className:r.label},f),b)}}]),t}(h.default.Component);y.propTypes={},y.defaultProps={clickable:!1,component:"div"};var _=(0,m.default)(g,{name:"MuiChip"})(y);t.default=_},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(49)),a=r(n(42)),s=i.default.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),l=function(e){return i.default.createElement(a.default,e,s)};l=(0,o.default)(l),l.muiName="SvgIcon";var u=l;t.default=u},function(e,t,n){"use strict";function r(e,t,n,r,i){return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r;t.default=i},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(165))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var i=r(n(4)),o=r(n(3)),a=r(n(9)),s=r(n(10)),l=r(n(11)),u=r(n(12)),c=r(n(1)),h=(r(n(2)),r(n(6))),d=r(n(87)),f=r(n(86)),p=r(n(5)),m=19,v={root:{position:"relative",width:"100%"},textarea:{width:"100%",height:"100%",resize:"none",font:"inherit",padding:0,cursor:"inherit",boxSizing:"border-box",lineHeight:"inherit",border:"none",outline:"none",background:"transparent"},shadow:{overflow:"hidden",visibility:"hidden",position:"absolute",height:"auto",whiteSpace:"pre-wrap"}};t.styles=v;var g=function(e){function t(e){var n;return(0,a.default)(this,t),n=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n.isControlled=null!=n.props.value,n.shadowRef=null,n.singlelineShadowRef=null,n.inputRef=null,n.value=null,n.handleResize=(0,d.default)(function(){n.syncHeightWithShadow()},166),n.state={height:null},n.handleRefInput=function(e){n.inputRef=e;var t=n.props.textareaRef;t&&("function"===typeof t?t(e):t.current=e)},n.handleRefSinglelineShadow=function(e){n.singlelineShadowRef=e},n.handleRefShadow=function(e){n.shadowRef=e},n.handleChange=function(e){n.value=e.target.value,n.isControlled||(n.shadowRef.value=n.value,n.syncHeightWithShadow()),n.props.onChange&&n.props.onChange(e)},n.value=e.value||e.defaultValue||"",n.state={height:Number(e.rows)*m},n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.syncHeightWithShadow()}},{key:"componentDidUpdate",value:function(){this.syncHeightWithShadow()}},{key:"componentWillUnmount",value:function(){this.handleResize.clear()}},{key:"syncHeightWithShadow",value:function(){var e=this.props;this.isControlled&&(this.shadowRef.value=null==e.value?"":String(e.value));var t=this.singlelineShadowRef.scrollHeight,n=this.shadowRef.scrollHeight;void 0!==n&&(Number(e.rowsMax)>=Number(e.rows)&&(n=Math.min(Number(e.rowsMax)*t,n)),n=Math.max(n,t),Math.abs(this.state.height-n)>1&&this.setState({height:n}))}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,r=e.defaultValue,a=(e.onChange,e.rows),s=(e.rowsMax,e.textareaRef,e.value),l=(0,o.default)(e,["classes","className","defaultValue","onChange","rows","rowsMax","textareaRef","value"]);return c.default.createElement("div",{className:t.root,style:{height:this.state.height}},c.default.createElement(f.default,{target:"window",onResize:this.handleResize}),c.default.createElement("textarea",{"aria-hidden":"true",className:(0,h.default)(t.textarea,t.shadow),readOnly:!0,ref:this.handleRefSinglelineShadow,rows:"1",tabIndex:-1,value:""}),c.default.createElement("textarea",{"aria-hidden":"true",className:(0,h.default)(t.textarea,t.shadow),defaultValue:r,readOnly:!0,ref:this.handleRefShadow,rows:a,tabIndex:-1,value:s}),c.default.createElement("textarea",(0,i.default)({rows:a,className:(0,h.default)(t.textarea,n),defaultValue:r,value:s,onChange:this.handleChange,ref:this.handleRefInput},l)))}}]),t}(c.default.Component);g.propTypes={},g.defaultProps={rows:1};var y=(0,p.default)(v)(g);t.default=y},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(429))},function(e,t,n){"use strict";function r(e){var t=e.classes,n=e.className,r=e.component,i=e.selected,l=e.role,h=(0,s.default)(e,["classes","className","component","selected","role"]);return u.default.createElement(d.default,(0,o.default)({button:!0,role:l,tabIndex:-1,className:(0,c.default)(t.root,(0,a.default)({},t.selected,i),n),component:r},h))}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(7)),s=i(n(3)),l=i(n(8)),u=i(n(1)),c=(i(n(2)),i(n(6))),h=i(n(5)),d=i(n(157)),f=function(e){return{root:(0,l.default)({},e.typography.subheading,{height:24,boxSizing:"content-box",width:"auto",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",paddingLeft:16,paddingRight:16,"&$selected":{backgroundColor:e.palette.action.selected}}),selected:{}}};t.styles=f,r.propTypes={},r.defaultProps={component:"li",role:"menuitem",selected:!1};var p=(0,h.default)(f,{name:"MuiMenuItem"})(r);t.default=p},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(431))},function(e,t,n){"use strict";function r(e,t){var n,r=e.classes,i=e.className,u=e.disabled,h=e.error,d=e.margin,f=e.component,p=(0,s.default)(e,["classes","className","disabled","error","margin","component"]),m=t.muiFormControl,v=u,g=h,y=d;m&&("undefined"===typeof v&&(v=m.disabled),"undefined"===typeof g&&(g=m.error),"undefined"===typeof y&&(y=m.margin));var _=(0,c.default)(r.root,(n={},(0,a.default)(n,r.disabled,v),(0,a.default)(n,r.error,g),(0,a.default)(n,r.marginDense,"dense"===y),n),i);return l.default.createElement(f,(0,o.default)({className:_},p))}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(7)),s=i(n(3)),l=i(n(1)),u=i(n(2)),c=i(n(6)),h=i(n(5)),d=function(e){return{root:{color:e.palette.text.secondary,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(12),textAlign:"left",marginTop:8,lineHeight:"1em",minHeight:"1em",margin:0,"&$error":{color:e.palette.error.main},"&$disabled":{color:e.palette.text.disabled}},error:{},disabled:{},marginDense:{marginTop:4}}};t.styles=d,r.propTypes={},r.defaultProps={component:"p"},r.contextTypes={muiFormControl:u.default.object};var f=(0,h.default)(d,{name:"MuiFormHelperText"})(r);t.default=f},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(433))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var i=r(n(4)),o=r(n(7)),a=r(n(3)),s=r(n(9)),l=r(n(10)),u=r(n(11)),c=r(n(12)),h=r(n(1)),d=r(n(2)),f=r(n(6)),p=r(n(5)),m=n(105),v=n(16),g=n(68),y={root:{display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0},marginNormal:{marginTop:16,marginBottom:8},marginDense:{marginTop:8,marginBottom:4},fullWidth:{width:"100%"}};t.styles=y;var _=function(e){function t(e){var n;(0,s.default)(this,t),n=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n.state={adornedStart:!1,filled:!1,focused:!1},n.handleFocus=function(){n.setState(function(e){return e.focused?null:{focused:!0}})},n.handleBlur=function(){n.setState(function(e){return e.focused?{focused:!1}:null})},n.handleDirty=function(){n.state.filled||n.setState({filled:!0})},n.handleClean=function(){n.state.filled&&n.setState({filled:!1})};var r=n.props.children;return r&&h.default.Children.forEach(r,function(e){if((0,g.isMuiElement)(e,["Input","Select","NativeSelect"])){(0,m.isFilled)(e.props,!0)&&(n.state.filled=!0);var t=(0,g.isMuiElement)(e,["Select","NativeSelect"])?e.props.input:e;t&&(0,m.isAdornedStart)(t.props)&&(n.state.adornedStart=!0)}}),n}return(0,c.default)(t,e),(0,l.default)(t,[{key:"getChildContext",value:function(){var e=this.props,t=e.disabled,n=e.error,r=e.required,i=e.margin,o=this.state;return{muiFormControl:{adornedStart:o.adornedStart,disabled:t,error:n,filled:o.filled,focused:o.focused,margin:i,onBlur:this.handleBlur,onEmpty:this.handleClean,onFilled:this.handleDirty,onFocus:this.handleFocus,required:r}}}},{key:"render",value:function(){var e,t=this.props,n=t.classes,r=t.className,s=t.component,l=(t.disabled,t.error,t.fullWidth),u=t.margin,c=(t.required,(0,a.default)(t,["classes","className","component","disabled","error","fullWidth","margin","required"]));return h.default.createElement(s,(0,i.default)({className:(0,f.default)(n.root,(e={},(0,o.default)(e,n["margin".concat((0,v.capitalize)(u))],"none"!==u),(0,o.default)(e,n.fullWidth,l),e),r)},c))}}]),t}(h.default.Component);_.propTypes={},_.defaultProps={component:"div",disabled:!1,error:!1,fullWidth:!1,margin:"none",required:!1},_.childContextTypes={muiFormControl:d.default.object};var b=(0,p.default)(y,{name:"MuiFormControl"})(_);t.default=b},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(435))},function(e,t,n){"use strict";function r(e){var t=e.autoWidth,n=e.children,i=e.classes,u=e.displayEmpty,h=e.IconComponent,d=e.input,f=e.inputProps,m=e.MenuProps,v=e.multiple,g=e.native,y=e.onClose,_=e.onOpen,b=e.open,w=e.renderValue,x=e.SelectDisplayProps,E=(0,a.default)(e,["autoWidth","children","classes","displayEmpty","IconComponent","input","inputProps","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps"]),S=g?p.default:l.default;return s.default.cloneElement(d,(0,o.default)({inputComponent:S,inputProps:(0,o.default)({children:n,IconComponent:h,type:void 0},g?{}:{autoWidth:t,displayEmpty:u,MenuProps:m,multiple:v,onClose:y,onOpen:_,open:b,renderValue:w,SelectDisplayProps:x},f,{classes:f?(0,c.default)({baseClasses:i,newClasses:f.classes,Component:r}):i},d?d.props.inputProps:{})},E))}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(8)),a=i(n(3)),s=i(n(1)),l=(i(n(2)),i(n(436))),u=i(n(5)),c=i(n(136)),h=i(n(166)),d=i(n(104)),f=n(444),p=i(n(167)),m=f.styles;t.styles=m,r.propTypes={},r.defaultProps={autoWidth:!1,displayEmpty:!1,IconComponent:h.default,input:s.default.createElement(d.default,null),multiple:!1,native:!1},r.muiName="Select";var v=(0,u.default)(f.styles,{name:"MuiSelect"})(r);t.default=v},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(8)),o=r(n(4)),a=r(n(7)),s=r(n(3)),l=r(n(158)),u=r(n(9)),c=r(n(10)),h=r(n(11)),d=r(n(12)),f=r(n(1)),p=(r(n(2)),r(n(6))),m=r(n(34)),v=(r(n(13)),r(n(437))),g=n(105),y=function(e){function t(){var e,n,r;(0,u.default)(this,t);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(0,h.default)(r,(n=r=(0,h.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.ignoreNextBlur=!1,r.displayRef=null,r.isOpenControlled=void 0!==r.props.open,r.state={menuMinWidth:null,open:!1},r.update=function(e){var t=e.event,n=e.open;if(r.isOpenControlled)return void(n?r.props.onOpen(t):r.props.onClose(t));r.setState({menuMinWidth:r.props.autoWidth?null:r.displayRef.clientWidth,open:n})},r.handleClick=function(e){r.ignoreNextBlur=!0,r.update({open:!0,event:e})},r.handleClose=function(e){r.update({open:!1,event:e})},r.handleItemClick=function(e){return function(t){r.props.multiple||r.update({open:!1,event:t});var n=r.props,i=n.onChange,o=n.name;if(i){var a;if(r.props.multiple){a=Array.isArray(r.props.value)?(0,l.default)(r.props.value):[];var s=a.indexOf(e.props.value);-1===s?a.push(e.props.value):a.splice(s,1)}else a=e.props.value;t.persist(),t.target={value:a,name:o},i(t,e)}}},r.handleBlur=function(e){if(!0===r.ignoreNextBlur)return e.stopPropagation(),void(r.ignoreNextBlur=!1);r.props.onBlur&&r.props.onBlur(e)},r.handleKeyDown=function(e){r.props.readOnly||-1!==["space","up","down"].indexOf((0,m.default)(e))&&(e.preventDefault(),r.ignoreNextBlur=!0,r.update({open:!0,event:e}))},r.handleDisplayRef=function(e){r.displayRef=e},r.handleInputRef=function(e){var t=r.props.inputRef;if(t){var n={node:e,value:r.props.value};"function"===typeof t?t(n):t.current=n}},n))}return(0,d.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.isOpenControlled&&this.props.open&&(this.displayRef.focus(),this.forceUpdate()),this.props.autoFocus&&this.displayRef.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.autoWidth,r=t.children,l=t.classes,u=t.className,c=t.disabled,h=t.displayEmpty,d=t.IconComponent,m=(t.inputRef,t.MenuProps),y=void 0===m?{}:m,_=t.multiple,b=t.name,w=(t.onBlur,t.onChange,t.onClose,t.onFocus),x=(t.onOpen,t.open),E=t.readOnly,S=t.renderValue,T=(t.required,t.SelectDisplayProps),M=t.tabIndex,k=t.type,P=void 0===k?"hidden":k,C=t.value,A=(0,s.default)(t,["autoWidth","children","classes","className","disabled","displayEmpty","IconComponent","inputRef","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","required","SelectDisplayProps","tabIndex","type","value"]),O=this.isOpenControlled&&this.displayRef?x:this.state.open;delete A["aria-invalid"];var I,R="",L=[],D=!1;((0,g.isFilled)(this.props)||h)&&(S?I=S(C):D=!0);var N=f.default.Children.map(r,function(t){if(!f.default.isValidElement(t))return null;var n;if(_){if(!Array.isArray(C))throw new Error("Material-UI: the `value` property must be an array when using the `Select` component with `multiple`.");n=-1!==C.indexOf(t.props.value),n&&D&&L.push(t.props.children)}else(n=C===t.props.value)&&D&&(R=t.props.children);return f.default.cloneElement(t,{onClick:e.handleItemClick(t),role:"option",selected:n,value:void 0,"data-value":t.props.value})});D&&(I=_?L.join(", "):R);var F=this.state.menuMinWidth;!n&&this.isOpenControlled&&this.displayRef&&(F=this.displayRef.clientWidth);var U;return U="undefined"!==typeof M?M:c?null:0,f.default.createElement("div",{className:l.root},f.default.createElement("div",(0,o.default)({className:(0,p.default)(l.select,l.selectMenu,(0,a.default)({},l.disabled,c),u),ref:this.handleDisplayRef,"aria-pressed":O?"true":"false",tabIndex:U,role:"button","aria-owns":O?"menu-".concat(b||""):null,"aria-haspopup":"true",onKeyDown:this.handleKeyDown,onBlur:this.handleBlur,onClick:c||E?null:this.handleClick,onFocus:w},T),I||f.default.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})),f.default.createElement("input",(0,o.default)({value:Array.isArray(C)?C.join(","):C,name:b,ref:this.handleInputRef,type:P},A)),f.default.createElement(d,{className:l.icon}),f.default.createElement(v.default,(0,o.default)({id:"menu-".concat(b||""),anchorEl:this.displayRef,open:O,onClose:this.handleClose},y,{MenuListProps:(0,i.default)({role:"listbox"},y.MenuListProps),PaperProps:(0,i.default)({},y.PaperProps,{style:(0,i.default)({minWidth:F},null!=y.PaperProps?y.PaperProps.style:null)})}),N))}}]),t}(f.default.Component);y.propTypes={};var _=y;t.default=_},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var i=r(n(4)),o=r(n(8)),a=r(n(3)),s=r(n(9)),l=r(n(10)),u=r(n(11)),c=r(n(12)),h=r(n(1)),d=(r(n(2)),r(n(18))),f=r(n(140)),p=r(n(5)),m=r(n(438)),v=r(n(442)),g={vertical:"top",horizontal:"right"},y={vertical:"top",horizontal:"left"},_={paper:{maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}};t.styles=_;var b=function(e){function t(){var e,n,r;(0,s.default)(this,t);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(0,u.default)(r,(n=r=(0,u.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.menuListRef=null,r.getContentAnchorEl=function(){return r.menuListRef&&r.menuListRef.selectedItemRef?d.default.findDOMNode(r.menuListRef.selectedItemRef):d.default.findDOMNode(r.menuListRef).firstChild},r.focus=function(){if(r.menuListRef&&r.menuListRef.selectedItemRef)return void d.default.findDOMNode(r.menuListRef.selectedItemRef).focus();var e=d.default.findDOMNode(r.menuListRef);e&&e.firstChild&&e.firstChild.focus()},r.handleEnter=function(e){var t=r.props,n=t.disableAutoFocusItem,i=t.theme,o=d.default.findDOMNode(r.menuListRef);if(!0!==n&&r.focus(),o&&e.clientHeight<o.clientHeight&&!o.style.width){var a="".concat((0,f.default)(),"px");o.style["rtl"===i.direction?"paddingLeft":"paddingRight"]=a,o.style.width="calc(100% + ".concat(a,")")}r.props.onEnter&&r.props.onEnter(e)},r.handleListKeyDown=function(e,t){"tab"===t&&(e.preventDefault(),r.props.onClose&&r.props.onClose(e))},n))}return(0,c.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.props.open&&!0!==this.props.disableAutoFocusItem&&this.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.classes,s=(t.disableAutoFocusItem,t.MenuListProps),l=(t.onEnter,t.PaperProps),u=void 0===l?{}:l,c=t.PopoverClasses,d=t.theme,f=(0,a.default)(t,["children","classes","disableAutoFocusItem","MenuListProps","onEnter","PaperProps","PopoverClasses","theme"]);return h.default.createElement(m.default,(0,i.default)({getContentAnchorEl:this.getContentAnchorEl,classes:c,onEnter:this.handleEnter,anchorOrigin:"rtl"===d.direction?g:y,transformOrigin:"rtl"===d.direction?g:y,PaperProps:(0,o.default)({},u,{classes:(0,o.default)({},u.classes,{root:r.paper})})},f),h.default.createElement(v.default,(0,i.default)({onKeyDown:this.handleListKeyDown},s,{ref:function(t){e.menuListRef=t}}),n))}}]),t}(h.default.Component);b.propTypes={},b.defaultProps={disableAutoFocusItem:!1,transitionDuration:"auto"};var w=(0,p.default)(_,{name:"MuiMenu",withTheme:!0})(b);t.default=w},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(439))},function(e,t,n){"use strict";function r(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function i(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function o(e){return[e.horizontal,e.vertical].map(function(e){return"number"===typeof e?"".concat(e,"px"):e}).join(" ")}function a(e,t){for(var n=t,r=0;n&&n!==e;)n=n.parentNode,r+=n.scrollTop;return r}function s(e){return"function"===typeof e?e():e}var l=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var u=l(n(4)),c=l(n(3)),h=l(n(9)),d=l(n(10)),f=l(n(11)),p=l(n(12)),m=l(n(1)),v=(l(n(2)),l(n(18))),g=(l(n(13)),l(n(87))),y=l(n(86)),_=l(n(21)),b=l(n(60)),w=l(n(5)),x=l(n(85)),E=l(n(440)),S=l(n(20)),T={paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:"none"}};t.styles=T;var M=function(e){function t(){var e,n,a;(0,h.default)(this,t);for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return(0,f.default)(a,(n=a=(0,f.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.paperRef=null,a.handleGetOffsetTop=r,a.handleGetOffsetLeft=i,a.handleResize=(0,g.default)(function(){a.setPositioningStyles(a.paperRef)},166),a.componentWillUnmount=function(){a.handleResize.clear()},a.setPositioningStyles=function(e){if(e&&e.style){var t=a.getPositioningStyle(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}},a.getPositioningStyle=function(e){var t=a.props,n=t.anchorEl,r=t.anchorReference,i=t.marginThreshold,l=a.getContentAnchorOffset(e),u={width:e.clientWidth,height:e.clientHeight},c=a.getTransformOrigin(u,l);if("none"===r)return{top:null,left:null,transformOrigin:o(c)};var h=a.getAnchorOffset(l),d=h.top-c.vertical,f=h.left-c.horizontal,p=d+u.height,m=f+u.width,v=(0,b.default)(s(n)),g=v.innerHeight-i,y=v.innerWidth-i;if(d<i){var _=d-i;d-=_,c.vertical+=_}else if(p>g){var w=p-g;d-=w,c.vertical+=w}if(f<i){var x=f-i;f-=x,c.horizontal+=x}else if(m>y){var E=m-y;f-=E,c.horizontal+=E}return{top:"".concat(d,"px"),left:"".concat(f,"px"),transformOrigin:o(c)}},a.handleEnter=function(e){a.props.onEnter&&a.props.onEnter(e),a.setPositioningStyles(e)},n))}return(0,p.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.props.action&&this.props.action({updatePosition:this.handleResize})}},{key:"getAnchorOffset",value:function(e){var t=this.props,n=t.anchorEl,r=t.anchorOrigin,i=t.anchorReference,o=t.anchorPosition;if("anchorPosition"===i)return o;var a=s(n)||(0,_.default)(this.paperRef).body,l=a.getBoundingClientRect(),u=0===e?r.vertical:"center";return{top:l.top+this.handleGetOffsetTop(l,u),left:l.left+this.handleGetOffsetLeft(l,r.horizontal)}}},{key:"getContentAnchorOffset",value:function(e){var t=this.props,n=t.getContentAnchorEl,r=t.anchorReference,i=0;if(n&&"anchorEl"===r){var o=n(e);if(o&&e.contains(o)){var s=a(e,o);i=o.offsetTop+o.clientHeight/2-s||0}}return i}},{key:"getTransformOrigin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.props.transformOrigin;return{vertical:this.handleGetOffsetTop(e,n.vertical)+t,horizontal:this.handleGetOffsetLeft(e,n.horizontal)}}},{key:"render",value:function(){var e=this,t=this.props,n=(t.action,t.anchorEl),r=(t.anchorOrigin,t.anchorPosition,t.anchorReference,t.children),i=t.classes,o=t.container,a=t.elevation,l=(t.getContentAnchorEl,t.marginThreshold,t.onEnter,t.onEntered),h=t.onEntering,d=t.onExit,f=t.onExited,p=t.onExiting,g=t.open,b=t.PaperProps,w=t.role,E=(t.transformOrigin,t.TransitionComponent),T=t.transitionDuration,M=t.TransitionProps,k=(0,c.default)(t,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","role","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),P=T;"auto"!==T||E.muiSupportAuto||(P=void 0);var C=o||(n?(0,_.default)(s(n)).body:void 0);return m.default.createElement(x.default,(0,u.default)({container:C,open:g,BackdropProps:{invisible:!0}},k),m.default.createElement(E,(0,u.default)({appear:!0,in:g,onEnter:this.handleEnter,onEntered:l,onEntering:h,onExit:d,onExited:f,onExiting:p,role:w,timeout:P},M),m.default.createElement(S.default,(0,u.default)({className:i.paper,elevation:a,ref:function(t){e.paperRef=v.default.findDOMNode(t)}},b),m.default.createElement(y.default,{target:"window",onResize:this.handleResize}),r)))}}]),t}(m.default.Component);M.propTypes={},M.defaultProps={anchorReference:"anchorEl",anchorOrigin:{vertical:"top",horizontal:"left"},elevation:8,marginThreshold:16,transformOrigin:{vertical:"top",horizontal:"left"},TransitionComponent:E.default,transitionDuration:"auto"};var k=(0,w.default)(T,{name:"MuiPopover"})(M);t.default=k},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(441))},function(e,t,n){"use strict";function r(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(4)),a=i(n(8)),s=i(n(3)),l=i(n(9)),u=i(n(10)),c=i(n(11)),h=i(n(12)),d=i(n(1)),f=(i(n(2)),i(n(47))),p=i(n(59)),m=n(61),v={entering:{opacity:1,transform:r(1)},entered:{opacity:1,transform:"".concat(r(1)," translateZ(0)")}},g=function(e){function t(){var e,n,i;(0,l.default)(this,t);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(0,c.default)(i,(n=i=(0,c.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),i.autoTimeout=null,i.timer=null,i.handleEnter=function(e){var t=i.props,n=t.theme,r=t.timeout;(0,m.reflow)(e);var o=(0,m.getTransitionProps)(i.props,{mode:"enter"}),a=o.duration,s=o.delay,l=0;"auto"===r?(l=n.transitions.getAutoHeightDuration(e.clientHeight),i.autoTimeout=l):l=a,e.style.transition=[n.transitions.create("opacity",{duration:l,delay:s}),n.transitions.create("transform",{duration:.666*l,delay:s})].join(","),i.props.onEnter&&i.props.onEnter(e)},i.handleExit=function(e){var t=i.props,n=t.theme,o=t.timeout,a=0,s=(0,m.getTransitionProps)(i.props,{mode:"exit"}),l=s.duration,u=s.delay;"auto"===o?(a=n.transitions.getAutoHeightDuration(e.clientHeight),i.autoTimeout=a):a=l,e.style.transition=[n.transitions.create("opacity",{duration:a,delay:u}),n.transitions.create("transform",{duration:.666*a,delay:u||.333*a})].join(","),e.style.opacity="0",e.style.transform=r(.75),i.props.onExit&&i.props.onExit(e)},i.addEndListener=function(e,t){"auto"===i.props.timeout&&(i.timer=setTimeout(t,i.autoTimeout||0))},n))}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){var e=this.props,t=e.children,n=(e.onEnter,e.onExit,e.style),i=(e.theme,e.timeout),l=(0,s.default)(e,["children","onEnter","onExit","style","theme","timeout"]),u=(0,a.default)({},n,d.default.isValidElement(t)?t.props.style:{});return d.default.createElement(f.default,(0,o.default)({appear:!0,onEnter:this.handleEnter,onExit:this.handleExit,addEndListener:this.addEndListener,timeout:"auto"===i?null:i},l),function(e,n){return d.default.cloneElement(t,(0,a.default)({style:(0,a.default)({opacity:0,transform:r(.75)},v[e],u)},n))})}}]),t}(d.default.Component);g.propTypes={},g.defaultProps={timeout:"auto"},g.muiSupportAuto=!0;var y=(0,p.default)()(g);t.default=y},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(443))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4)),o=r(n(3)),a=r(n(9)),s=r(n(10)),l=r(n(11)),u=r(n(12)),c=r(n(1)),h=(r(n(2)),r(n(18))),d=r(n(34)),f=(r(n(13)),r(n(21))),p=r(n(143)),m=function(e){function t(){var e,n,r;(0,a.default)(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(0,l.default)(r,(n=r=(0,l.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.listRef=null,r.selectedItemRef=null,r.blurTimer=null,r.state={currentTabIndex:null},r.handleBlur=function(e){r.blurTimer=setTimeout(function(){if(r.listRef){var e=r.listRef,t=(0,f.default)(e).activeElement;e.contains(t)||r.resetTabIndex()}},30),r.props.onBlur&&r.props.onBlur(e)},r.handleKeyDown=function(e){var t=r.listRef,n=(0,d.default)(e),i=(0,f.default)(t).activeElement;"up"!==n&&"down"!==n||i&&(!i||t.contains(i))?"down"===n?(e.preventDefault(),i.nextElementSibling&&i.nextElementSibling.focus()):"up"===n&&(e.preventDefault(),i.previousElementSibling&&i.previousElementSibling.focus()):r.selectedItemRef?r.selectedItemRef.focus():t.firstChild.focus(),r.props.onKeyDown&&r.props.onKeyDown(e,n)},r.handleItemFocus=function(e){var t=r.listRef;if(t)for(var n=0;n<t.children.length;n+=1)if(t.children[n]===e.currentTarget){r.setTabIndex(n);break}},n))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.resetTabIndex()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.blurTimer)}},{key:"setTabIndex",value:function(e){this.setState({currentTabIndex:e})}},{key:"focus",value:function(){var e=this.state.currentTabIndex,t=this.listRef;t&&t.children&&t.firstChild&&(e&&e>=0?t.children[e].focus():t.firstChild.focus())}},{key:"resetTabIndex",value:function(){for(var e=this.listRef,t=(0,f.default)(e).activeElement,n=[],r=0;r<e.children.length;r+=1)n.push(e.children[r]);var i=n.indexOf(t);return-1!==i?this.setTabIndex(i):this.selectedItemRef?this.setTabIndex(n.indexOf(this.selectedItemRef)):this.setTabIndex(0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.className,a=(t.onBlur,t.onKeyDown,(0,o.default)(t,["children","className","onBlur","onKeyDown"]));return c.default.createElement(p.default,(0,i.default)({role:"menu",ref:function(t){e.listRef=h.default.findDOMNode(t)},className:r,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur},a),c.default.Children.map(n,function(t,n){return c.default.isValidElement(t)?c.default.cloneElement(t,{tabIndex:n===e.state.currentTabIndex?0:-1,ref:t.props.selected?function(t){e.selectedItemRef=h.default.findDOMNode(t)}:void 0,onFocus:e.handleItemFocus}):null}))}}]),t}(c.default.Component);m.propTypes={};var v=m;t.default=v},function(e,t,n){"use strict";function r(e){var t=e.children,n=e.classes,r=e.IconComponent,i=e.input,u=e.inputProps,c=(0,a.default)(e,["children","classes","IconComponent","input","inputProps"]);return s.default.cloneElement(i,(0,o.default)({inputComponent:l.default,inputProps:(0,o.default)({children:t,classes:n,IconComponent:r,type:void 0},u,i?i.props.inputProps:{})},c))}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(8)),a=i(n(3)),s=i(n(1)),l=(i(n(2)),i(n(167))),u=i(n(5)),c=i(n(166)),h=i(n(104)),d=function(e){return{root:{position:"relative",width:"100%"},select:{"-moz-appearance":"none","-webkit-appearance":"none",userSelect:"none",paddingRight:32,width:"calc(100% - 32px)",minWidth:16,cursor:"pointer","&:focus":{background:"light"===e.palette.type?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&:-moz-focusring":{color:"transparent",textShadow:"0 0 0 #000"},"&::-ms-expand":{display:"none"},"&$disabled":{cursor:"default"}},selectMenu:{width:"auto",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minHeight:"1.1875em"},disabled:{},icon:{position:"absolute",right:0,top:"calc(50% - 12px)",color:e.palette.action.active,"pointer-events":"none"}}};t.styles=d,r.propTypes={},r.defaultProps={IconComponent:c.default,input:s.default.createElement(h.default,null)},r.muiName="NativeSelect";var f=(0,u.default)(d,{name:"MuiNativeSelect"})(r);t.default=f},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(15)),a=(0,o.default)(i.default.createElement("g",null,i.default.createElement("path",{d:"M7 19h10V4H7v15zm-5-2h4V6H2v11zM18 6v11h4V6h-4z"})),"ViewCarousel");t.default=a},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(1),l=n.n(s),u=n(2),c=n.n(u),h=n(447),d=n.n(h),f=n(449),p=n(169),m=n(45),v=(n.n(m),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),g=function(e){return{root:{margin:2*e.spacing.unit,width:1600}}},y=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleClose=function(){n.props.onClose()},n}return a(t,e),v(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=(e.onClose,e.selectedValue,r(e,["classes","onClose","selectedValue"]));return console.log(t.root),l.a.createElement(d.a,Object.assign({maxWidth:"100%",onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},n),l.a.createElement("div",{className:t.root},l.a.createElement("div",null,l.a.createElement(f.a,null),l.a.createElement(p.a,{image:this.props.folderToOpen+"/"+this.props.imageToOpen}))))}}]),t}(l.a.Component);y.propTypes={classes:c.a.object.isRequired,onClose:c.a.func,selectedValue:c.a.string},t.a=Object(m.withStyles)(g)(y)},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(448))},function(e,t,n){"use strict";function r(e){var t,n=e.BackdropProps,r=e.children,i=e.classes,h=e.className,p=e.disableBackdropClick,m=e.disableEscapeKeyDown,g=e.fullScreen,y=e.fullWidth,_=e.maxWidth,b=e.onBackdropClick,w=e.onClose,x=e.onEnter,E=e.onEntered,S=e.onEntering,T=e.onEscapeKeyDown,M=e.onExit,k=e.onExited,P=e.onExiting,C=e.open,A=e.PaperProps,O=e.scroll,I=e.TransitionComponent,R=e.transitionDuration,L=e.TransitionProps,D=(0,s.default)(e,["BackdropProps","children","classes","className","disableBackdropClick","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","onEnter","onEntered","onEntering","onEscapeKeyDown","onExit","onExited","onExiting","open","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"]);return u.default.createElement(f.default,(0,o.default)({className:(0,c.default)(i.root,i["scroll".concat((0,d.capitalize)(O))],h),BackdropProps:(0,a.default)({transitionDuration:R},n),disableBackdropClick:p,disableEscapeKeyDown:m,onBackdropClick:b,onEscapeKeyDown:T,onClose:w,open:C,role:"dialog"},D),u.default.createElement(I,(0,o.default)({appear:!0,in:C,timeout:R,onEnter:x,onEntering:S,onEntered:E,onExit:M,onExiting:P,onExited:k},L),u.default.createElement(v.default,(0,o.default)({elevation:24,className:(0,c.default)(i.paper,i["paperScroll".concat((0,d.capitalize)(O))],(t={},(0,l.default)(t,i["paperWidth".concat(_?(0,d.capitalize)(_):"")],_),(0,l.default)(t,i.paperFullScreen,g),(0,l.default)(t,i.paperFullWidth,y),t))},A),r)))}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(8)),s=i(n(3)),l=i(n(7)),u=i(n(1)),c=(i(n(2)),i(n(6))),h=i(n(5)),d=n(16),f=i(n(85)),p=i(n(141)),m=n(32),v=i(n(20)),g=function(e){return{root:{},scrollPaper:{display:"flex",justifyContent:"center",alignItems:"center"},scrollBody:{overflowY:"auto",overflowX:"hidden"},paper:{display:"flex",flexDirection:"column",margin:48,position:"relative",overflowY:"auto",outline:"none"},paperScrollPaper:{flex:"0 1 auto",maxHeight:"calc(100% - 96px)"},paperScrollBody:{margin:"48px auto"},paperWidthXs:{maxWidth:Math.max(e.breakpoints.values.xs,360),"&$paperScrollBody":(0,l.default)({},e.breakpoints.down(Math.max(e.breakpoints.values.xs,360)+96),{margin:48})},paperWidthSm:{maxWidth:e.breakpoints.values.sm,"&$paperScrollBody":(0,l.default)({},e.breakpoints.down(e.breakpoints.values.sm+96),{margin:48})},paperWidthMd:{maxWidth:e.breakpoints.values.md,"&$paperScrollBody":(0,l.default)({},e.breakpoints.down(e.breakpoints.values.md+96),{margin:48})},paperFullWidth:{width:"100%"},paperFullScreen:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0}}};t.styles=g,r.propTypes={},r.defaultProps={disableBackdropClick:!1,disableEscapeKeyDown:!1,fullScreen:!1,fullWidth:!1,maxWidth:"sm",scroll:"paper",TransitionComponent:p.default,transitionDuration:{enter:m.duration.enteringScreen,exit:m.duration.leavingScreen}};var y=(0,h.default)(g,{name:"MuiDialog"})(r);t.default=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(1),s=n.n(a),l=n(2),u=n.n(l),c=n(45),h=(n.n(c),n(20)),d=n.n(h),f=n(450),p=n.n(f),m=(n(453),n(19),n(169),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),v=function(e){return{root:{flexGrow:1},paper:{height:400,textAlign:"center",color:e.palette.text.secondary,backgroundColor:"black",position:"relative"},viewer:{width:"100%",height:"100%",display:"flex",backgroundColor:"black",flexWrap:"wrap"},guicontainer:{backgroundColor:"black",height:400}}},g=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),m(t,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement("div",null,s.a.createElement("div",{className:e.root},s.a.createElement(p.a,{container:!0,spacing:24},s.a.createElement(p.a,{item:!0,xs:2},s.a.createElement("div",{id:"gui-container",className:e.guicontainer})),s.a.createElement(p.a,{item:!0,xs:10},s.a.createElement(p.a,{container:!0,spacing:12},s.a.createElement(p.a,{item:!0,xs:4},s.a.createElement(d.a,{id:"view1",className:e.paper},"Coronal")),s.a.createElement(p.a,{item:!0,xs:4},s.a.createElement(d.a,{id:"view2",className:e.paper},"Coronal")),s.a.createElement(p.a,{item:!0,xs:4},s.a.createElement(d.a,{id:"view3",className:e.paper},"Sagital")))))))}}]),t}(s.a.Component);g.propTypes={classes:u.a.object.isRequired},t.a=Object(c.withStyles)(v)(g)},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(451))},function(e,t,n){"use strict";function r(e,t,n){var r={};v.forEach(function(e){var t="grid-".concat(n,"-").concat(e);if(!0===e)return void(r[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"});if("auto"===e)return void(r[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"});var i="".concat(Math.round(e/12*1e7)/1e5,"%");r[t]={flexBasis:i,flexGrow:0,maxWidth:i}}),"xs"===n?(0,c.default)(e,r):e[t.breakpoints.up(n)]=r}function i(e,t){var n={};return m.forEach(function(e,r){0!==r&&(n["spacing-".concat(t,"-").concat(e)]={margin:-e/2,width:"calc(100% + ".concat(e,"px)"),"& > $item":{padding:e/2}})}),n}function o(e){var t,n=e.alignContent,r=e.alignItems,i=e.classes,a=e.className,u=e.component,f=e.container,p=e.direction,m=e.item,v=e.justify,g=e.lg,y=e.md,_=e.sm,b=e.spacing,w=e.wrap,x=e.xl,E=e.xs,S=e.zeroMinWidth,T=(0,l.default)(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),M=(0,d.default)((t={},(0,s.default)(t,i.container,f),(0,s.default)(t,i.item,m),(0,s.default)(t,i.zeroMinWidth,S),(0,s.default)(t,i["spacing-xs-".concat(String(b))],f&&0!==b),(0,s.default)(t,i["direction-xs-".concat(String(p))],p!==o.defaultProps.direction),(0,s.default)(t,i["wrap-xs-".concat(String(w))],w!==o.defaultProps.wrap),(0,s.default)(t,i["align-items-xs-".concat(String(r))],r!==o.defaultProps.alignItems),(0,s.default)(t,i["align-content-xs-".concat(String(n))],n!==o.defaultProps.alignContent),(0,s.default)(t,i["justify-xs-".concat(String(v))],v!==o.defaultProps.justify),(0,s.default)(t,i["grid-xs-".concat(String(E))],!1!==E),(0,s.default)(t,i["grid-sm-".concat(String(_))],!1!==_),(0,s.default)(t,i["grid-md-".concat(String(y))],!1!==y),(0,s.default)(t,i["grid-lg-".concat(String(g))],!1!==g),(0,s.default)(t,i["grid-xl-".concat(String(x))],!1!==x),t),a);return h.default.createElement(u,(0,c.default)({className:M},T))}var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var s=a(n(7)),l=a(n(3)),u=a(n(8)),c=a(n(4)),h=a(n(1)),d=(a(n(2)),a(n(6))),f=a(n(5)),p=n(125),m=(a(n(452)),[0,8,16,24,32,40]),v=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],g=function(e){return(0,u.default)({container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-xs-center":{justifyContent:"center"},"justify-xs-flex-end":{justifyContent:"flex-end"},"justify-xs-space-between":{justifyContent:"space-between"},"justify-xs-space-around":{justifyContent:"space-around"},"justify-xs-space-evenly":{justifyContent:"space-evenly"}},i(e,"xs"),p.keys.reduce(function(t,n){return r(t,e,n),t},{}))};t.styles=g,o.propTypes={},o.defaultProps={alignContent:"stretch",alignItems:"stretch",component:"div",container:!1,direction:"row",item:!1,justify:"flex-start",lg:!1,md:!1,sm:!1,spacing:0,wrap:"wrap",xl:!1,xs:!1,zeroMinWidth:!1};var y=(0,f.default)(g,{name:"MuiGrid"})(o),_=y;t.default=_},function(e,t,n){"use strict";function r(e){return function(){return null}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r;t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=(n(19),n(1)),s=n.n(a),l=(n(168),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());!function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}o(t,e),l(t,[{key:"render",value:function(){return console.log("Test"),s.a.createElement("div",null)}}])}(s.a.Component)},function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&u.isObject(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}function o(e){return u.isString(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)}function a(e,t){return i(e,!1,!0).resolve(t)}function s(e,t){return e?i(e,!1,!0).resolveObject(t):t}var l=n(455),u=n(456);t.parse=i,t.resolve=a,t.resolveObject=s,t.format=o,t.Url=r;var c=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,d=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["<",">",'"',"`"," ","\r","\n","\t"],p=["{","}","|","\\","^","`"].concat(f),m=["'"].concat(p),v=["%","/","?",";","#"].concat(m),g=["/","?","#"],y=/^[+a-z0-9A-Z_-]{0,63}$/,_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,b={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},E=n(457);r.prototype.parse=function(e,t,n){if(!u.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(i),a=/\\/g;o[0]=o[0].replace(a,"/"),e=o.join(i);var s=e;if(s=s.trim(),!n&&1===e.split("#").length){var h=d.exec(s);if(h)return this.path=s,this.href=s,this.pathname=h[1],h[2]?(this.search=h[2],this.query=t?E.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var f=c.exec(s);if(f){f=f[0];var p=f.toLowerCase();this.protocol=p,s=s.substr(f.length)}if(n||f||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===s.substr(0,2);!S||f&&w[f]||(s=s.substr(2),this.slashes=!0)}if(!w[f]&&(S||f&&!x[f])){for(var T=-1,M=0;M<g.length;M++){var k=s.indexOf(g[M]);-1!==k&&(-1===T||k<T)&&(T=k)}var P,C;C=-1===T?s.lastIndexOf("@"):s.lastIndexOf("@",T),-1!==C&&(P=s.slice(0,C),s=s.slice(C+1),this.auth=decodeURIComponent(P)),T=-1;for(var M=0;M<v.length;M++){var k=s.indexOf(v[M]);-1!==k&&(-1===T||k<T)&&(T=k)}-1===T&&(T=s.length),this.host=s.slice(0,T),s=s.slice(T),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var O=this.hostname.split(/\./),M=0,I=O.length;M<I;M++){var R=O[M];if(R&&!R.match(y)){for(var L="",D=0,N=R.length;D<N;D++)R.charCodeAt(D)>127?L+="x":L+=R[D];if(!L.match(y)){var F=O.slice(0,M),U=O.slice(M+1),z=R.match(_);z&&(F.push(z[1]),U.unshift(z[2])),U.length&&(s="/"+U.join(".")+s),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=l.toASCII(this.hostname));var B=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+B,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!b[p])for(var M=0,I=m.length;M<I;M++){var H=m[M];if(-1!==s.indexOf(H)){var V=encodeURIComponent(H);V===H&&(V=escape(H)),s=s.split(H).join(V)}}var G=s.indexOf("#");-1!==G&&(this.hash=s.substr(G),s=s.slice(0,G));var W=s.indexOf("?");if(-1!==W?(this.search=s.substr(W),this.query=s.substr(W+1),t&&(this.query=E.parse(this.query)),s=s.slice(0,W)):t&&(this.search="",this.query={}),s&&(this.pathname=s),x[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",q=this.search||"";this.path=B+q}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&u.isObject(this.query)&&Object.keys(this.query).length&&(o=E.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||x[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+n+a+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(u.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),l=0;l<s.length;l++){var c=s[l];"protocol"!==c&&(n[c]=e[c])}return x[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!x[e.protocol]){for(var h=Object.keys(e),d=0;d<h.length;d++){var f=h[d];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||w[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",v=n.search||"";n.path=m+v}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),_=y||g||n.host&&e.pathname,b=_,E=n.pathname&&n.pathname.split("/")||[],p=e.pathname&&e.pathname.split("/")||[],S=n.protocol&&!x[n.protocol];if(S&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),_=_&&(""===p[0]||""===E[0])),y)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,E=p;else if(p.length)E||(E=[]),E.pop(),E=E.concat(p),n.search=e.search,n.query=e.query;else if(!u.isNullOrUndefined(e.search)){if(S){n.hostname=n.host=E.shift();var T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");T&&(n.auth=T.shift(),n.host=n.hostname=T.shift())}return n.search=e.search,n.query=e.query,u.isNull(n.pathname)&&u.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var M=E.slice(-1)[0],k=(n.host||e.host||E.length>1)&&("."===M||".."===M)||""===M,P=0,C=E.length;C>=0;C--)M=E[C],"."===M?E.splice(C,1):".."===M?(E.splice(C,1),P++):P&&(E.splice(C,1),P--);if(!_&&!b)for(;P--;P)E.unshift("..");!_||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),k&&"/"!==E.join("/").substr(-1)&&E.push("");var A=""===E[0]||E[0]&&"/"===E[0].charAt(0);if(S){n.hostname=n.host=A?"":E.length?E.shift():"";var T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");T&&(n.auth=T.shift(),n.host=n.hostname=T.shift())}return _=_||n.host&&E.length,_&&!A&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),u.isNull(n.pathname)&&u.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=h.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){(function(e,r){var i;!function(o){function a(e){throw new RangeError(I[e])}function s(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function l(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(O,"."),r+s(e.split("."),t).join(".")}function u(e){for(var t,n,r=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function c(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=D(e>>>10&1023|55296),e=56320|1023&e),t+=D(e)}).join("")}function h(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:w}function d(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function f(e,t,n){var r=0;for(e=n?L(e/T):e>>1,e+=L(e/t);e>R*E>>1;r+=w)e=L(e/R);return L(r+(R+1)*e/(e+S))}function p(e){var t,n,r,i,o,s,l,u,d,p,m=[],v=e.length,g=0,y=k,_=M;for(n=e.lastIndexOf(P),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&a("not-basic"),m.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<v;){for(o=g,s=1,l=w;i>=v&&a("invalid-input"),u=h(e.charCodeAt(i++)),(u>=w||u>L((b-g)/s))&&a("overflow"),g+=u*s,d=l<=_?x:l>=_+E?E:l-_,!(u<d);l+=w)p=w-d,s>L(b/p)&&a("overflow"),s*=p;t=m.length+1,_=f(g-o,t,0==o),L(g/t)>b-y&&a("overflow"),y+=L(g/t),g%=t,m.splice(g++,0,y)}return c(m)}function m(e){var t,n,r,i,o,s,l,c,h,p,m,v,g,y,_,S=[];for(e=u(e),v=e.length,t=k,n=0,o=M,s=0;s<v;++s)(m=e[s])<128&&S.push(D(m));for(r=i=S.length,i&&S.push(P);r<v;){for(l=b,s=0;s<v;++s)(m=e[s])>=t&&m<l&&(l=m);for(g=r+1,l-t>L((b-n)/g)&&a("overflow"),n+=(l-t)*g,t=l,s=0;s<v;++s)if(m=e[s],m<t&&++n>b&&a("overflow"),m==t){for(c=n,h=w;p=h<=o?x:h>=o+E?E:h-o,!(c<p);h+=w)_=c-p,y=w-p,S.push(D(d(p+_%y,0))),c=L(_/y);S.push(D(d(c,0))),o=f(n,g,r==i),n=0,++r}++n,++t}return S.join("")}function v(e){return l(e,function(e){return C.test(e)?p(e.slice(4).toLowerCase()):e})}function g(e){return l(e,function(e){return A.test(e)?"xn--"+m(e):e})}var y=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof r&&r);var _,b=2147483647,w=36,x=1,E=26,S=38,T=700,M=72,k=128,P="-",C=/^xn--/,A=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=w-x,L=Math.floor,D=String.fromCharCode;_={version:"1.4.1",ucs2:{decode:u,encode:c},decode:p,encode:m,toASCII:g,toUnicode:v},void 0!==(i=function(){return _}.call(t,n,t,e))&&(e.exports=i)}()}).call(t,n(69)(e),n(14))},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"===typeof e},isObject:function(e){return"object"===typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(458),t.encode=t.stringify=n(459)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!==typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var l=1e3;o&&"number"===typeof o.maxKeys&&(l=o.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var h,d,f,p,m=e[c].replace(s,"%20"),v=m.indexOf(n);v>=0?(h=m.substr(0,v),d=m.substr(v+1)):(h=m,d=""),f=decodeURIComponent(h),p=decodeURIComponent(d),r(a,f)?i(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===typeof e?r(a(e),function(a){var s=encodeURIComponent(i(a))+n;return o(e[a])?r(e[a],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[a]))}).join(t):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.THREE;if(void 0===e||void 0===e.BoxGeometry)return null;var t=e.BoxGeometry;(function(t){function n(t){r(this,n);var o=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,1,1,1));return o._location=t,o.applyMatrix((new e.Matrix4).makeTranslation(o._location.x,o._location.y,o._location.z)),o.verticesNeedUpdate=!0,o}o(n,t),a(n,[{key:"resetVertices",value:function(){this.vertices[0].set(.5,.5,.5),this.vertices[1].set(.5,.5,-.5),this.vertices[2].set(.5,-.5,.5),this.vertices[3].set(.5,-.5,-.5),this.vertices[4].set(-.5,.5,-.5),this.vertices[5].set(-.5,.5,.5),this.vertices[6].set(-.5,-.5,-.5),this.vertices[7].set(-.5,-.5,.5)}},{key:"location",set:function(t){this._location=t,this.vertices[0].set(.5,.5,.5),this.vertices[1].set(.5,.5,-.5),this.vertices[2].set(.5,-.5,.5),this.vertices[3].set(.5,-.5,-.5),this.vertices[4].set(-.5,.5,-.5),this.vertices[5].set(-.5,.5,.5),this.vertices[6].set(-.5,-.5,-.5),this.vertices[7].set(-.5,-.5,.5),this.applyMatrix((new e.Matrix4).makeTranslation(this._location.x,this._location.y,this._location.z)),this.verticesNeedUpdate=!0},get:function(){return this._location}}])})(t)}()},function(e,t){var n=function(){var e=Date.now(),t=e,n=0,r=1/0,i=0,o=0,a=1/0,s=0,l=0,u=0,c=document.createElement("div");c.id="stats",c.addEventListener("mousedown",function(e){e.preventDefault(),y(++u%2)},!1),c.style.cssText="width:80px;opacity:0.9;cursor:pointer";var h=document.createElement("div");h.id="fps",h.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",c.appendChild(h);var d=document.createElement("div");d.id="fpsText",d.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",d.innerHTML="FPS",h.appendChild(d);var f=document.createElement("div");for(f.id="fpsGraph",f.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",h.appendChild(f);74>f.children.length;){var p=document.createElement("span");p.style.cssText="width:1px;height:30px;float:left;background-color:#113",f.appendChild(p)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",c.appendChild(m);var v=document.createElement("div");v.id="msText",v.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",v.innerHTML="MS",m.appendChild(v);var g=document.createElement("div");for(g.id="msGraph",g.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(g);74>g.children.length;)p=document.createElement("span"),p.style.cssText="width:1px;height:30px;float:left;background-color:#131",g.appendChild(p);var y=function(e){switch(u=e){case 0:h.style.display="block",m.style.display="none";break;case 1:h.style.display="none",m.style.display="block"}};return{REVISION:12,domElement:c,setMode:y,begin:function(){e=Date.now()},end:function(){var u=Date.now();n=u-e,r=Math.min(r,n),i=Math.max(i,n),v.textContent=n+" MS ("+r+"-"+i+")";var c=Math.min(30,30-n/200*30);return g.appendChild(g.firstChild).style.height=c+"px",l++,u>t+1e3&&(o=Math.round(1e3*l/(u-t)),a=Math.min(a,o),s=Math.max(s,o),d.textContent=o+" FPS ("+a+"-"+s+")",c=Math.min(30,30-o/100*30),f.appendChild(f.firstChild).style.height=c+"px",t=u,l=0),u},update:function(){e=this.end()}}};"object"===typeof e&&(e.exports=n)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(107),s=n(108),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.THREE;if(void 0===e||void 0===e.OrthographicCamera)return null;var t=e.OrthographicCamera;return function(t){function n(t,o,a,s,l,u){r(this,n);var c=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,o,a,s,l,u));return c._front=null,c._back=null,c._directions=[new e.Vector3(1,0,0),new e.Vector3(0,1,0),new e.Vector3(0,0,1)],c._directionsLabel=["A","P","L","R","I","S"],c._orientation="default",c._convention="radio",c._stackOrientation=0,c._right=null,c._up=null,c._direction=null,c._controls=null,c._box=null,c._canvas={width:null,height:null},c._fromFront=!0,c._angle=0,c}return o(n,t),l(n,[{key:"init",value:function(t,n,r,i,o,l){if(window.console.warn("cameras.orthographic.init(...) is deprecated.\n        Use .cosines, .controls, .box and .canvas instead."),!(s.a.vector3(t)&&s.a.vector3(n)&&s.a.vector3(r)&&s.a.box(o)&&i))return window.console.log("Invalid input provided."),!1;this._right=t,this._up=this._adjustTopDirection(t,n),this._direction=(new e.Vector3).crossVectors(this._right,this._up),this._controls=i,this._box=o,this._canvas=l;var u={position:this._box.center,direction:this._direction},c=this._orderIntersections(a.a.rayBox(u,this._box),this._direction);this._front=c[0],this._back=c[1],this.up.set(this._up.x,this._up.y,this._up.z),this._updateCanvas(),this._updatePositionAndTarget(this._front,this._back),this._updateMatrices(),this._updateDirections()}},{key:"update",value:function(){if("default"===this._orientation)switch(this._getMaxIndex(this._directions[2])){case 0:this._orientation="sagittal";break;case 1:this._orientation="coronal";break;case 2:this._orientation="axial";break;default:this._orientation="free"}if("free"===this._orientation)this._right=this._directions[0],this._up=this._directions[1],this._direction=this._directions[2];else{var e=this.leftDirection(),t=this._directions[e],n=this.posteriorDirection(),r=this._directions[n],i=this.superiorDirection(),o=this._directions[i];if("radio"===this._convention)switch(this._orientation){case"axial":r.y>0&&r.negate(),o.z<0&&o.negate(),this._right=t,this._up=r,this._direction=o;break;case"coronal":o.z<0&&o.negate(),r.y<0&&r.negate(),this._right=t,this._up=o,this._direction=r;break;case"sagittal":o.z<0&&o.negate(),t.x>0&&t.negate(),this._right=r,this._up=o,this._direction=t;break;default:window.console.warn('"'+this._orientation+'" orientation is not valid.\n                  (choices: axial, coronal, sagittal)')}else if("neuro"===this._convention)switch(this._orientation){case"axial":r.y>0&&r.negate(),o.z>0&&o.negate(),this._right=t,this._up=r,this._direction=o;break;case"coronal":o.z<0&&o.negate(),r.y>0&&r.negate(),this._right=t,this._up=o,this._direction=r;break;case"sagittal":o.z<0&&o.negate(),t.x>0&&t.negate(),this._right=r,this._up=o,this._direction=t;break;default:window.console.warn('"'+this._orientation+'" orientation is not valid.\n                  (choices: axial, coronal, sagittal)')}else window.console.warn(this._convention+" is not valid (choices: radio, neuro)")}var s={position:this._box.center,direction:this._direction},l=this._orderIntersections(a.a.rayBox(s,this._box),this._direction);this._front=l[0],this._back=l[1],this.up.set(this._up.x,this._up.y,this._up.z),this._updateCanvas(),this._updatePositionAndTarget(this._front,this._back),this._updateMatrices(),this._updateDirections()}},{key:"leftDirection",value:function(){return this._findMaxIndex(this._directions,0)}},{key:"posteriorDirection",value:function(){return this._findMaxIndex(this._directions,1)}},{key:"superiorDirection",value:function(){return this._findMaxIndex(this._directions,2)}},{key:"invertRows",value:function(){this.up.multiplyScalar(-1),this.invertColumns(),this._updateDirections()}},{key:"invertColumns",value:function(){this.center();var e=this._oppositePosition(this.position);this._updatePositionAndTarget(e,this.position.clone()),this._updateMatrices(),this._fromFront=!this._fromFront,this._angle%=360,this._angle=360-this._angle,this._updateDirections()}},{key:"center",value:function(){this._fromFront?this._updatePositionAndTarget(this._front,this._back):this._updatePositionAndTarget(this._back,this._front),this._updateMatrices(),this._updateDirections()}},{key:"rotate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.center();var n=90,r=1;this._fromFront||(r=-1),null===t?(n*=-r,this._angle+=90):(n=360-r*(t-this._angle),this._angle=t),this._angle%=360;var i=(new e.Matrix4).makeRotationAxis(this._direction,n*Math.PI/180);this.up.applyMatrix4(i),this._updateMatrices(),this._updateDirections()}},{key:"fitBox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5,n=1;switch(e){case 0:n=t*this._computeZoom(this._canvas.width,this._right);break;case 1:n=t*this._computeZoom(this._canvas.height,this._up);break;case 2:n=t*Math.min(this._computeZoom(this._canvas.width,this._right),this._computeZoom(this._canvas.height,this._up))}if(!n)return!1;this.zoom=n,this.center()}},{key:"_adjustTopDirection",value:function(e,t){var n=this._getMaxIndex(t);return(2===n&&t.getComponent(n)<0||1===n&&t.getComponent(n)>0||0===n&&t.getComponent(n)>0)&&t.negate(),t}},{key:"_getMaxIndex",value:function(e){var t=Math.abs(e.x),n=0;return Math.abs(e.y)>t&&(t=Math.abs(e.y),n=1),Math.abs(e.z)>t&&(n=2),n}},{key:"_findMaxIndex",value:function(e,t){for(var n=this._getMaxIndices(e),r=0;r<n.length;r++)if(n[r]===t)return r}},{key:"_getMaxIndices",value:function(e){var t=[];return t.push(this._getMaxIndex(e[0])),t.push(this._getMaxIndex(e[1])),t.push(this._getMaxIndex(e[2])),t}},{key:"_orderIntersections",value:function(e,t){return e[0].dot(t)<e[1].dot(t)?e:[e[1],e[0]]}},{key:"_updateCanvas",value:function(){this.left=-this._canvas.width/2,this.right=this._canvas.width/2,this.top=this._canvas.height/2,this.bottom=-this._canvas.height/2,this._updateMatrices(),this.controls.handleResize()}},{key:"_oppositePosition",value:function(t){var n=t.clone();n.sub(this._box.center);var r=(new e.Matrix4).makeRotationAxis(this.up,Math.PI);return n.applyMatrix4(r),n.add(this._box.center),n}},{key:"_computeZoom",value:function(e,t){if(!(e&&e>0))return window.console.log("Invalid dimension provided."),window.console.log(e),!1;var n={position:this._box.center.clone(),direction:t},r=a.a.rayBox(n,this._box);return r.length<2?(window.console.log("Can not adjust the camera ( < 2 intersections)."),window.console.log(n),window.console.log(this._box),!1):e/r[0].distanceTo(r[1])}},{key:"_updatePositionAndTarget",value:function(e,t){this.position.set(e.x,e.y,e.z),this.lookAt(t.x,t.y,t.z),this._controls.target.set(t.x,t.y,t.z)}},{key:"_updateMatrices",value:function(){this._controls.update(),this.updateProjectionMatrix(),this.updateMatrixWorld()}},{key:"_updateLabels",value:function(){this._directionsLabel=[this._vector2Label(this._up),this._vector2Label(this._up.clone().negate()),this._vector2Label(this._right),this._vector2Label(this._right.clone().negate()),this._vector2Label(this._direction),this._vector2Label(this._direction.clone().negate())]}},{key:"_vector2Label",value:function(e){for(var t=this._getMaxIndex(e),n=e.clone().divideScalar(Math.abs(e.getComponent(t))),r="",i=0;i<3;i++)0===i&&(n.getComponent(i)+.2>=1?r+="L":n.getComponent(i)-.2<=-1&&(r+="R")),1===i&&(n.getComponent(i)+.2>=1?r+="P":n.getComponent(i)-.2<=-1&&(r+="A")),2===i&&(n.getComponent(i)+.2>=1?r+="S":n.getComponent(i)-.2<=-1&&(r+="I"));return r}},{key:"_updateDirections",value:function(){this._up=this.up.clone();var t=new e.Vector3(0,0,-1),n=t.applyMatrix4(this.matrixWorld);this._direction=n.sub(this.position).normalize(),this._right=(new e.Vector3).crossVectors(this._direction,this.up),this._updateLabels()}},{key:"controls",set:function(e){this._controls=e},get:function(){return this._controls}},{key:"box",set:function(e){this._box=e},get:function(){return this._box}},{key:"canvas",set:function(e){this._canvas=e,this._updateCanvas()},get:function(){return this._canvas}},{key:"angle",set:function(e){this.rotate(e)},get:function(){return this._angle}},{key:"directions",set:function(e){this._directions=e},get:function(){return this._directions}},{key:"convention",set:function(e){this._convention=e},get:function(){return this._convention}},{key:"orientation",set:function(e){this._orientation=e},get:function(){return this._orientation}},{key:"directionsLabel",set:function(e){this._directionsLabel=e},get:function(){return this._directionsLabel}},{key:"stackOrientation",set:function(e){if(this._stackOrientation=e,0===this._stackOrientation)this._orientation="default";else{var t=this._getMaxIndex(this._directions[(this._stackOrientation+2)%3]);0===t?this._orientation="sagittal":1===t?this._orientation="coronal":2===t&&(this._orientation="axial")}},get:function(){if("default"===this._orientation)this._stackOrientation=0;else{var e=this._getMaxIndex(this._direction);e===this._getMaxIndex(this._directions[2])?this._stackOrientation=0:e===this._getMaxIndex(this._directions[0])?this._stackOrientation=1:e===this._getMaxIndex(this._directions[1])&&(this._stackOrientation=2)}return this._stackOrientation}}]),n}(t)}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.THREE;if(void 0===e||void 0===e.EventDispatcher)return null;var t=e.EventDispatcher;return function(t){function n(t,o){function a(e){!1!==y.enabled&&(window.removeEventListener("keydown",a),x=w,w===_.NONE&&(e.keyCode!==y.keys[_.ROTATE]||y.noRotate?e.keyCode!==y.keys[_.ZOOM]||y.noZoom?e.keyCode!==y.keys[_.PAN]||y.noPan||(w=_.PAN):w=_.ZOOM:w=_.ROTATE))}function s(e){!1!==y.enabled&&(w=x,window.addEventListener("keydown",a,!1))}function l(e){!1!==y.enabled&&(e.preventDefault(),e.stopPropagation(),w===_.NONE&&(w=e.button),(w!==_.ROTATE||y.noRotate)&&(w!==_.ZOOM||y.noZoom?w!==_.PAN||y.noPan||(P.copy(R(e.pageX,e.pageY)),C.copy(P)):(S.copy(R(e.pageX,e.pageY)),T.copy(S))),document.addEventListener("mousemove",u,!1),document.addEventListener("mouseup",c,!1),y.dispatchEvent(O))}function u(e){!1!==y.enabled&&(e.preventDefault(),e.stopPropagation(),(w!==_.ROTATE||y.noRotate)&&(w!==_.ZOOM||y.noZoom?w!==_.PAN||y.noPan||C.copy(R(e.pageX,e.pageY)):T.copy(R(e.pageX,e.pageY))))}function c(e){!1!==y.enabled&&(e.preventDefault(),e.stopPropagation(),w=_.NONE,document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",c),y.dispatchEvent(I))}function h(e){if(!1!==y.enabled){e.preventDefault(),e.stopPropagation();var t=0;e.wheelDelta?t=e.wheelDelta/40:e.detail&&(t=-e.detail/3),y.dispatchEvent({type:"OnScroll",delta:t}),y.dispatchEvent(O),y.dispatchEvent(I)}}function d(e){if(!1!==y.enabled){switch(e.touches.length){case 1:w=_.TOUCH_ROTATE;break;case 2:w=_.TOUCH_ZOOM_PAN;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;k=M=Math.sqrt(t*t+n*n);var r=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;P.copy(R(r,i)),C.copy(P);break;default:w=_.NONE}y.dispatchEvent(O)}}function f(e){if(!1!==y.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:break;case 2:var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;k=Math.sqrt(t*t+n*n);var r=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;C.copy(R(r,i));break;default:w=_.NONE}}function p(e){if(!1!==y.enabled){switch(e.touches.length){case 1:break;case 2:M=k=0;var t=(e.touches[0].pageX+e.touches[1].pageX)/2,n=(e.touches[0].pageY+e.touches[1].pageY)/2;C.copy(R(t,n)),P.copy(C)}w=_.NONE,y.dispatchEvent(I)}}function m(e){e.preventDefault()}var v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{NONE:-1,ROTATE:1,ZOOM:2,PAN:0,SCROLL:4,TOUCH_ROTATE:4,TOUCH_ZOOM_PAN:5};r(this,n);var g=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),y=g,_=v;g.object=t,g.domElement=void 0!==o?o:document,g.enabled=!0,g.screen={left:0,top:0,width:0,height:0},g.radius=0,g.zoomSpeed=1.2,g.noZoom=!1,g.noPan=!1,g.staticMoving=!1,g.dynamicDampingFactor=.2,g.keys=[65,83,68],g.target=new e.Vector3;var b=!0,w=_.NONE,x=_.NONE,E=new e.Vector3,S=new e.Vector2,T=new e.Vector2,M=0,k=0,P=new e.Vector2,C=new e.Vector2;g.target0=g.target.clone(),g.position0=g.object.position.clone(),g.up0=g.object.up.clone(),g.left0=g.object.left,g.right0=g.object.right,g.top0=g.object.top,g.bottom0=g.object.bottom;var A={type:"change"},O={type:"start"},I={type:"end"};g.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}this.radius=.5*Math.min(this.screen.width,this.screen.height),this.left0=this.object.left,this.right0=this.object.right,this.top0=this.object.top,this.bottom0=this.object.bottom},g.handleEvent=function(e){"function"==typeof this[e.type]&&this[e.type](e)};var R=function(){var t=new e.Vector2;return function(e,n){return t.set((e-y.screen.left)/y.screen.width,(n-y.screen.top)/y.screen.height),t}}();return g.zoomCamera=function(){if(w===_.TOUCH_ZOOM_PAN){var e=k/M;M=k,y.object.zoom*=e,b=!0}else{var e=1+(T.y-S.y)*y.zoomSpeed;Math.abs(e-1)>1e-6&&e>0&&(y.object.zoom/=e,y.staticMoving?S.copy(T):S.y+=(T.y-S.y)*this.dynamicDampingFactor,b=!0)}},g.panCamera=function(){var t=new e.Vector2,n=new e.Vector3,r=new e.Vector3;return function(){if(t.copy(C).sub(P),t.lengthSq()){var e=(y.object.right-y.object.left)/y.object.zoom,i=(y.object.top-y.object.bottom)/y.object.zoom;t.x*=e,t.y*=i,r.copy(E).cross(y.object.up).setLength(t.x),r.add(n.copy(y.object.up).setLength(t.y)),y.object.position.add(r),y.target.add(r),y.staticMoving?P.copy(C):P.add(t.subVectors(C,P).multiplyScalar(y.dynamicDampingFactor)),b=!0}}}(),g.update=function(){E.subVectors(y.object.position,y.target),y.noZoom||(y.zoomCamera(),b&&y.object.updateProjectionMatrix()),y.noPan||y.panCamera(),y.object.position.addVectors(y.target,E),y.object.lookAt(y.target),b&&(y.dispatchEvent(A),b=!1)},g.reset=function(){w=_.NONE,x=_.NONE,y.target.copy(y.target0),y.object.position.copy(y.position0),y.object.up.copy(y.up0),E.subVectors(y.object.position,y.target),y.object.left=y.left0,y.object.right=y.right0,y.object.top=y.top0,y.object.bottom=y.bottom0,y.object.lookAt(y.target),y.dispatchEvent(A),b=!1},g.dispose=function(){this.domElement.removeEventListener("contextmenu",m,!1),this.domElement.removeEventListener("mousedown",l,!1),this.domElement.removeEventListener("wheel",h,!1),this.domElement.removeEventListener("touchstart",d,!1),this.domElement.removeEventListener("touchend",p,!1),this.domElement.removeEventListener("touchmove",f,!1),window.removeEventListener("keydown",a,!1),window.removeEventListener("keyup",s,!1)},g.domElement.addEventListener("contextmenu",m,!1),g.domElement.addEventListener("mousedown",l,!1),g.domElement.addEventListener("wheel",h,!1),g.domElement.addEventListener("touchstart",d,!1),g.domElement.addEventListener("touchend",p,!1),g.domElement.addEventListener("touchmove",f,!1),window.addEventListener("keydown",a,!1),window.addEventListener("keyup",s,!1),g.handleResize(),g.update(),g}return o(n,t),n}(t)}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(465),s=n(466),l=n(467),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.THREE;if(void 0===e||void 0===e.Object3D)return null;var t=e.Object3D;return function(t){function n(e,t,o){r(this,n);var u=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return u._stack=e,u._textureToFilter=o,u._contourWidth=1,u._contourOpacity=1,u._canvasWidth=0,u._canvasHeight=0,u._shadersFragment=l.a,u._shadersVertex=s.a,u._uniforms=a.a.uniforms(),u._material=null,u._geometry=t,u._create(),u}return o(n,t),u(n,[{key:"_create",value:function(){this._prepareMaterial(),this._mesh=new e.Mesh(this._geometry,this._material),this._mesh.applyMatrix(this._stack._ijk2LPS),this.add(this._mesh)}},{key:"_prepareMaterial",value:function(){if(!this._material){this._uniforms.uWidth.value=this._contourWidth,this._uniforms.uOpacity.value=this._contourOpacity,this._uniforms.uCanvasWidth.value=this._canvasWidth,this._uniforms.uCanvasHeight.value=this._canvasHeight;var t=new l.a(this._uniforms),n=new s.a;this._material=new e.ShaderMaterial({side:e.DoubleSide,uniforms:this._uniforms,vertexShader:n.compute(),fragmentShader:t.compute(),transparent:!0})}}},{key:"update",value:function(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh=null),this._create()}},{key:"dispose",value:function(){null!==this._textureToFilter&&(this._textureToFilter.dispose(),this._textureToFilter=null),this._shadersFragment=null,this._shadersVertex=null,this._uniforms=null,this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,this._stack=null}},{key:"geometry",get:function(){return this._geometry},set:function(e){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh=null,this._geometry.dispose(),this._geometry=null),this._geometry=e,this._create()}},{key:"textureToFilter",get:function(){return this._textureToFilter},set:function(e){this._textureToFilter=e,this._uniforms.uTextureFilled.value=e,this._material.needsUpdate=!0}},{key:"contourOpacity",get:function(){return this._contourOpacity},set:function(e){this._contourOpacity=e,this._uniforms.uOpacity.value=this._contourOpacity}},{key:"contourWidth",get:function(){return this._contourWidth},set:function(e){this._contourWidth=e,this._uniforms.uWidth.value=this._contourWidth}},{key:"canvasWidth",get:function(){return this._canvasWidth},set:function(e){this._canvasWidth=e,this._uniforms.uCanvasWidth.value=this._canvasWidth}},{key:"canvasHeight",get:function(){return this._canvasHeight},set:function(e){this._canvasHeight=e,this._uniforms.uCanvasHeight.value=this._canvasHeight}}]),n}(t)}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"uniforms",value:function(){return{uCanvasWidth:{type:"f",value:0,typeGLSL:"float"},uCanvasHeight:{type:"f",value:0,typeGLSL:"float"},uWidth:{type:"f",value:1,typeGLSL:"float"},uOpacity:{type:"f",value:1,typeGLSL:"float"},uTextureFilled:{type:"t",value:[],typeGLSL:"sampler2D"}}}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"compute",value:function(){return"\nvarying vec4 vProjectedCoords;\n\n//\n// main\n//\nvoid main() {\n\n  vec4 vPos = modelMatrix * vec4(position, 1.0 );\n  mat4 vProjectionViewMatrix = projectionMatrix * viewMatrix;\n  vProjectedCoords =  projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n\n}\n        "}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this._uniforms=t,this._functions={},this._main=""}return i(e,[{key:"functions",value:function(){""===this._main&&this.main();var e="";for(var t in this._functions)e+=this._functions[t]+"\n";return e}},{key:"uniforms",value:function(){var e="";for(var t in this._uniforms){var n=this._uniforms[t];e+="uniform "+n.typeGLSL+" "+t,n&&n.length&&(e+="["+n.length+"]"),e+=";\n"}return e}},{key:"main",value:function(){this._main="\n\nfloat luma (vec3 rgb) {\n  return (rgb.r + rgb.g + rgb.b)/3.0;\n}\n\nconst float T = 0.04;\nconst float M = 1.0;\nconst float L = 0.002;\n\nvoid main(void) {\n\n  vec2 texCoord = vec2(((vProjectedCoords.x / vProjectedCoords.w) + 1.0 ) / 2.0,\n                ((vProjectedCoords.y / vProjectedCoords.w) + 1.0 ) / 2.0 );\n\n  float borderWidth = uWidth; // in px\n  float step_u = borderWidth * 1.0 / uCanvasWidth;\n  float step_v = borderWidth * 1.0 / uCanvasHeight;\n  vec4 centerPixel = texture2D(uTextureFilled, texCoord);\n\n  vec4 rightPixel  = texture2D(uTextureFilled, texCoord + vec2(step_u, 0.0));\n  vec4 bottomPixel = texture2D(uTextureFilled, texCoord + vec2(0.0, step_v));\n\n  // now manually compute the derivatives\n  float _dFdX = length(rightPixel - centerPixel) / step_u;\n  float _dFdY = length(bottomPixel - centerPixel) / step_v;\n\n  // gl_FragColor.r = _dFdX;\n  // gl_FragColor.g = _dFdY;\n  gl_FragColor.r = max(max(centerPixel.r, rightPixel.r), bottomPixel.r);\n  gl_FragColor.g = max(max(centerPixel.g, rightPixel.g), bottomPixel.g);\n  gl_FragColor.b = max(max(centerPixel.b, rightPixel.b), bottomPixel.b);\n  float maxDerivative = max(_dFdX, _dFdY);\n  float clampedDerivative = clamp(maxDerivative, 0., 1.);\n  gl_FragColor.a = uOpacity * clampedDerivative;\n\n  return;\n  // float h = 1./uCanvasHeight;\n  // float w = 1./uCanvasWidth;\n  // vec4 n[9];\n  // n[0] = texture2D(uTextureFilled, vProjectedTextCoords + vec2( -w, -h));\n  // n[1] = texture2D(uTextureFilled, vProjectedTextCoords + vec2(0.0, -h));\n  // n[2] = texture2D(uTextureFilled, vProjectedTextCoords + vec2(  w, -h));\n  // n[3] = texture2D(uTextureFilled, vProjectedTextCoords + vec2( -w, 0.0));\n  // n[4] = texture2D(uTextureFilled, vProjectedTextCoords);\n  // n[5] = texture2D(uTextureFilled, texCoord + vec2(  w, 0.0));\n  // n[6] = texture2D(uTextureFilled, texCoord + vec2( -w, h));\n  // n[7] = texture2D(uTextureFilled, texCoord + vec2(0.0, h));\n  // n[8] = texture2D(uTextureFilled, texCoord + vec2(  w, h));\n  // vec4 sobel_horizEdge = n[2] + (2.0*n[5]) + n[8] - (n[0] + (2.0*n[3]) + n[6]);\n  // vec4 sobel_vertEdge  = n[0] + (2.0*n[1]) + n[2] - (n[6] + (2.0*n[7]) + n[8]);\n  // vec3 sobel = sqrt((sobel_horizEdge.rgb * sobel_horizEdge.rgb) + (sobel_vertEdge.rgb * sobel_vertEdge.rgb));\n  // gl_FragColor = vec4( sobel, max(max(sobel.r, sobel.g), sobel.b) );\n\n  // return;\n}\n   "}},{key:"compute",value:function(){return"\n// uniforms\n"+this.uniforms()+"\n\n// varying (should fetch it from vertex directly)\nvarying vec4      vProjectedCoords;\n\n// tailored functions\n"+this.functions()+"\n\n// main loop\n"+this._main+"\n      "}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(469),s=n(470),l=n(471),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.THREE;if(void 0===e||void 0===e.Object3D)return null;var t=e.Object3D;return function(t){function n(e,t,o){r(this,n);var u=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return u._stack=e,u._referencePlane=o,u._plane1=null,u._color1=null,u._plane2=null,u._color2=null,u._plane3=null,u._color3=null,u._canvasWidth=0,u._canvasHeight=0,u._shadersFragment=l.a,u._shadersVertex=s.a,u._uniforms=a.a.uniforms(),u._material=null,u._geometry=t,u._create(),u}return o(n,t),u(n,[{key:"_create",value:function(){this._prepareMaterial(),this._mesh=new e.Mesh(this._geometry,this._material),this._mesh.applyMatrix(this._stack._ijk2LPS),this.add(this._mesh)}},{key:"_prepareMaterial",value:function(){if(!this._material){this._uniforms.uSlice.value=this._referencePlane,this._plane1&&(this._uniforms.uPlane1.value=this._plane1,this._uniforms.uPlaneColor1.value=this._color1),this._plane2&&(this._uniforms.uPlane2.value=this._plane2,this._uniforms.uPlaneColor2.value=this._color2),this._plane3&&(this._uniforms.uPlane3.value=this._plane3,this._uniforms.uPlaneColor3.value=this._color3),this._uniforms.uCanvasWidth.value=this._canvasWidth,this._uniforms.uCanvasHeight.value=this._canvasHeight;var t=new l.a(this._uniforms),n=new s.a;this._material=new e.ShaderMaterial({side:e.DoubleSide,uniforms:this._uniforms,vertexShader:n.compute(),fragmentShader:t.compute()}),this._material.transparent=!0}}},{key:"update",value:function(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh=null),this._create()}},{key:"dispose",value:function(){this._referencePlane=null,this._plane1=null,this._color1=null,this._plane2=null,this._color2=null,this._plane3=null,this._color3=null,this._shadersFragment=null,this._shadersVertex=null,this._uniforms=null,this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,this._stack=null}},{key:"geometry",get:function(){return this._geometry},set:function(e){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh=null,this._geometry.dispose(),this._geometry=null),this._geometry=e,this._create()}},{key:"referencePlane",get:function(){return this._referencePlane},set:function(e){this._referencePlane=e,this._uniforms.uSlice.value=this._referencePlane}},{key:"plane1",get:function(){return this._plane1},set:function(e){this._plane1=e,this._uniforms.uPlane1.value=this._plane1}},{key:"color1",get:function(){return this._color1},set:function(e){this._color1=e,this._uniforms.uPlaneColor1.value=this._color1}},{key:"plane2",get:function(){return this._plane2},set:function(e){this._plane2=e,this._uniforms.uPlane2.value=this._plane2}},{key:"color2",get:function(){return this._color2},set:function(e){this._color2=e,this._uniforms.uPlaneColor2.value=this._color2}},{key:"plane3",get:function(){return this._plane3},set:function(e){this._plane3=e,this._uniforms.uPlane3.value=this._plane3}},{key:"color3",get:function(){return this._color3},set:function(e){this._color3=e,this._uniforms.uPlaneColor3.value=this._color3}},{key:"canvasWidth",get:function(){return this._canvasWidth},set:function(e){this._canvasWidth=e,this._uniforms.uCanvasWidth.value=this._canvasWidth}},{key:"canvasHeight",get:function(){return this._canvasHeight},set:function(e){this._canvasHeight=e,this._uniforms.uCanvasHeight.value=this._canvasHeight}}]),n}(t)}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"uniforms",value:function(){return{uCanvasWidth:{type:"f",value:0,typeGLSL:"float"},uCanvasHeight:{type:"f",value:0,typeGLSL:"float"},uSlice:{type:"v4",value:[0,0,0,0],typeGLSL:"vec4"},uPlane1:{type:"v4",value:[0,0,0,0],typeGLSL:"vec4"},uPlaneColor1:{type:"v3",value:[1,1,0],typeGLSL:"vec3"},uPlane2:{type:"v4",value:[0,0,0,0],typeGLSL:"vec4"},uPlaneColor2:{type:"v3",value:[1,1,0],typeGLSL:"vec3"},uPlane3:{type:"v4",value:[0,0,0,0],typeGLSL:"vec4"},uPlaneColor3:{type:"v3",value:[1,1,0],typeGLSL:"vec3"}}}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"compute",value:function(){return"\nvarying vec4 vPos;\nvarying mat4 vProjectionViewMatrix;\n\n//\n// main\n//\nvoid main() {\n\n  vPos = modelMatrix * vec4(position, 1.0 );\n  vProjectionViewMatrix = projectionMatrix * viewMatrix;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n\n}\n        "}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this._uniforms=t,this._functions={},this._main=""}return i(e,[{key:"functions",value:function(){""===this._main&&this.main();var e="";for(var t in this._functions)e+=this._functions[t]+"\n";return e}},{key:"uniforms",value:function(){var e="";for(var t in this._uniforms){var n=this._uniforms[t];e+="uniform "+n.typeGLSL+" "+t,n&&n.length&&(e+="["+n.length+"]"),e+=";\n"}return e}},{key:"main",value:function(){this._main="\nvoid intersectionProjection(\n  in vec4 plane,\n  in vec4 slice,\n  out vec3 intersectionProjection){\n\n      vec3 intersectionDirection = normalize(cross(plane.xyz, slice.xyz));\n      vec3 intersectionPoint = \n        cross(intersectionDirection,slice.xyz) * plane.w +\n        cross(plane.xyz, intersectionDirection) * slice.w;\n\n      intersectionProjection =\n        intersectionPoint.xyz +\n        (dot(vPos.xyz - intersectionPoint, intersectionDirection)\n          * intersectionDirection);\n\n}\n\nvoid main(void) {\n      vec4 c1 = vec4(0., 0., 0., 0.);\n      vec4 c2 = vec4(0., 0., 0., 0.);\n      vec4 c3 = vec4(0., 0., 0., 0.);\n\n      // localizer #1\n      // must be normalized!\n      if(length(uPlane1.xyz) > 0.5) {\n        vec3 projection1 = vec3(1.);\n        intersectionProjection(\n          uPlane1,\n          uSlice,\n          projection1\n        );\n\n        vec4 projInter1 = (vProjectionViewMatrix * vec4(projection1, 1.));\n        vec3 ndc1 = projInter1.xyz / projInter1.w;\n        vec2 screenSpace1 = (ndc1.xy * .5 + .5) * vec2(uCanvasWidth, uCanvasHeight);\n\n        float d1 = distance(gl_FragCoord.xy, screenSpace1.xy);\n        c1 = vec4(uPlaneColor1, 1. - smoothstep(.5, .7, d1));\n      }\n\n      // localizer #2\n      if(length(uPlane2.xyz) > 0.5) {\n        vec3 projection2 = vec3(1.);\n        intersectionProjection(\n          uPlane2,\n          uSlice,\n          projection2\n        );\n\n        vec4 projInter2 = (vProjectionViewMatrix * vec4(projection2, 1.));\n        vec3 ndc2 = projInter2.xyz / projInter2.w;\n        vec2 screenSpace2 = (ndc2.xy * .5 + .5) * vec2(uCanvasWidth, uCanvasHeight);\n\n        float d2 = distance(gl_FragCoord.xy, screenSpace2.xy);\n        c2 = vec4(uPlaneColor2, 1. - smoothstep(.5, .7, d2));\n      }\n\n      // localizer #3\n      if(length(uPlane3.xyz) > 0.5) {\n        vec3 projection3 = vec3(1.);\n        intersectionProjection(\n          uPlane3,\n          uSlice,\n          projection3\n        );\n\n        vec4 projInter3 = (vProjectionViewMatrix * vec4(projection3, 1.));\n        vec3 ndc3 = projInter3.xyz / projInter3.w;\n        vec2 screenSpace3 = (ndc3.xy * .5 + .5) * vec2(uCanvasWidth, uCanvasHeight);\n\n        float d3 = distance(gl_FragCoord.xy, screenSpace3.xy);\n        c3 = vec4(uPlaneColor3, 1. - smoothstep(.5, .7, d3));\n      }\n\n      // float uBorderDashLength = 10.0;\n      // float uBorderWidth = 2.0;\n      // float valueX = mod(gl_FragCoord.x, 2. * uBorderDashLength);\n      // float valueY = mod(gl_FragCoord.y, 2. * uBorderDashLength);\n      // if( valueX < uBorderDashLength || valueY < uBorderDashLength ){\n        vec3 colorMix = c1.xyz*c1.w + c2.xyz*c2.w + c3.xyz*c3.w;\n        gl_FragColor = vec4(colorMix, max(max(c1.w, c2.w),c3.w)*0.5);\n        return;\n      // }\n      \n      // gl_FragColor = vec4(0., 0., 0., 0.);\n      // return;\n}\n   "}},{key:"compute",value:function(){return"\n// uniforms\n"+this.uniforms()+"\n\n// varying (should fetch it from vertex directly)\nvarying vec4 vPos;\nvarying mat4 vProjectionViewMatrix;\n\n// tailored functions\n"+this.functions()+"\n\n// main loop\n"+this._main+"\n      "}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(473),s=n(170),l=n(474),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.THREE;if(void 0===e||void 0===e.Object3D)return null;var t=e.Object3D;return function(t){function n(e){r(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t._stack=e,t._bBox=null,t._slice=null,t._border=null,t._dummy=null,t._orientation=0,t._index=0,t._uniforms=null,t._autoWindowLevel=!1,t._outOfBounds=!1,t._orientationMaxIndex=0,t._canvasWidth=0,t._canvasHeight=0,t._borderColor=null,t._create(),t}return o(n,t),u(n,[{key:"_create",value:function(){this._stack?(this._prepareStack(),this._prepareBBox(),this._prepareSlice(),this._prepareBorder()):window.console.log("no stack to be prepared...")}},{key:"_computeOrientationMaxIndex",value:function(){var e=this._stack.dimensionsIJK;switch(this._orientationMaxIndex=0,this._orientation){case 0:this._orientationMaxIndex=e.z-1;break;case 1:this._orientationMaxIndex=e.x-1;break;case 2:this._orientationMaxIndex=e.y-1}}},{key:"_isIndexOutOfBounds",value:function(){this._computeOrientationMaxIndex(),this._index>=this._orientationMaxIndex||this._index<0?this._outOfBounds=!0:this._outOfBounds=!1}},{key:"_prepareStack",value:function(){this._stack.prepared||this._stack.prepare(),this._stack.packed||this._stack.pack()}},{key:"_prepareBBox",value:function(){var t=Object(s.b)(e);this._bBox=new t(this._stack),this.add(this._bBox)}},{key:"_prepareBorder",value:function(){var t=Object(a.a)(e);this._border=new t(this._slice),this.add(this._border)}},{key:"_prepareSlice",value:function(){var t=this._stack.halfDimensionsIJK;this._index=this._prepareSliceIndex(t);var n=this._prepareSlicePosition(t,this._index),r=this._prepareDirection(this._orientation),i=Object(l.a)(e);this._slice=new i(this._stack,this._index,n,r),this.add(this._slice)}},{key:"_prepareSliceIndex",value:function(e){var t=0;switch(this._orientation){case 0:t=Math.floor(e.z);break;case 1:t=Math.floor(e.x);break;case 2:t=Math.floor(e.y)}return t}},{key:"_prepareSlicePosition",value:function(t,n){var r=new e.Vector3(0,0,0);switch(this._orientation){case 0:r=new e.Vector3(Math.floor(t.x),Math.floor(t.y),n);break;case 1:r=new e.Vector3(n,Math.floor(t.y),Math.floor(t.z));break;case 2:r=new e.Vector3(Math.floor(t.x),n,Math.floor(t.z))}return r}},{key:"_prepareDirection",value:function(t){var n=new e.Vector3(0,0,1);switch(t){case 0:n=new e.Vector3(0,0,1);break;case 1:n=new e.Vector3(1,0,0);break;case 2:n=new e.Vector3(0,1,0)}return n}},{key:"dispose",value:function(){this.remove(this._slice),this._slice.dispose(),this._slice=null,this._bBox.dispose(),this._bBox=null,this._border.dispose(),this._border=null}},{key:"stack",get:function(){return this._stack},set:function(e){this._stack=e}},{key:"bbox",get:function(){return this._bBox}},{key:"slice",get:function(){return this._slice}},{key:"border",get:function(){return this._border}},{key:"index",get:function(){return this._index},set:function(e){this._index=e,this._slice.index=e;var t=this._stack.halfDimensionsIJK;this._slice.planePosition=this._prepareSlicePosition(t,this._index),this._border.helpersSlice=this._slice,this._isIndexOutOfBounds()}},{key:"orientation",set:function(e){this._orientation=e,this._computeOrientationMaxIndex(),this._slice.planeDirection=this._prepareDirection(this._orientation),this._border.helpersSlice=this._slice},get:function(){return this._orientation}},{key:"outOfBounds",set:function(e){this._outOfBounds=e},get:function(){return this._outOfBounds}},{key:"orientationMaxIndex",set:function(e){this._orientationMaxIndex=e},get:function(){return this._orientationMaxIndex}},{key:"canvasWidth",set:function(e){this._canvasWidth=e,this._slice.canvasWidth=this._canvasWidth},get:function(){return this._canvasWidth}},{key:"canvasHeight",set:function(e){this._canvasHeight=e,this._slice.canvasHeight=this._canvasHeight},get:function(){return this._canvasHeight}},{key:"borderColor",set:function(e){this._borderColor=e,this._border.color=e,this._slice.borderColor=this._borderColor},get:function(){return this._borderColor}}]),n}(t)}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return s});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.THREE;if(void 0===e||void 0===e.Object3D)return null;var t=e.Object3D;return function(t){function n(e){r(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t._helpersSlice=e,t._visible=!0,t._color=16711680,t._material=null,t._geometry=null,t._mesh=null,t._create(),t}return o(n,t),a(n,[{key:"_create",value:function(){if(this._material||(this._material=new e.LineBasicMaterial({color:this._color,linewidth:1})),this._helpersSlice.geometry.vertices){this._geometry=new e.Geometry;for(var t=0;t<this._helpersSlice.geometry.vertices.length;t++)this._geometry.vertices.push(this._helpersSlice.geometry.vertices[t]);this._geometry.vertices.push(this._helpersSlice.geometry.vertices[0]),this._mesh=new e.Line(this._geometry,this._material),"IJK"===this._helpersSlice.aabbSpace&&this._mesh.applyMatrix(this._helpersSlice.stack.ijk2LPS),this._mesh.visible=this._visible,this.add(this._mesh)}}},{key:"_update",value:function(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh=null),this._create()}},{key:"dispose",value:function(){this._mesh.material.dispose(),this._mesh.material=null,this._geometry.dispose(),this._geometry=null,this._material.dispose(),this._material=null}},{key:"helpersSlice",set:function(e){this._helpersSlice=e,this._update()},get:function(){return this._helpersSlice}},{key:"visible",set:function(e){this._visible=e,this._mesh&&(this._mesh.visible=this._visible)},get:function(){return this._visible}},{key:"color",set:function(e){this._color=e,this._material&&this._material.color.set(this._color)},get:function(){return this._color}}]),n}(t)};s()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return d});var a=n(106),s=n(475),l=n(476),u=n(477),c=n(482),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.THREE;if(void 0===e||void 0===e.Object3D)return null;var t=Object(c.a)(e);return function(t){function n(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new e.Vector3(0,0,0),c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new e.Vector3(0,0,1),h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"IJK";r(this,n);var d=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return d._stack=t,d._invert=d._stack.invert,d._lut="none",d._lutTexture=null,d._intensityAuto=!0,d._interpolation=1,d._index=o,d._windowWidth=null,d._windowCenter=null,d._rescaleSlope=null,d._rescaleIntercept=null,d._lowerThreshold=null,d._upperThreshold=null,d._canvasWidth=0,d._canvasHeight=0,d._borderColor=null,d._planePosition=a,d._planeDirection=c,d._aaBBspace=h,d._material=null,d._textures=[],d._shadersFragment=u.a,d._shadersVertex=l.a,d._uniforms=s.a.uniforms(),d._geometry=null,d._mesh=null,d._visible=!0,d._init(),d._create(),d}return o(n,t),h(n,[{key:"_init",value:function(){if(this._stack&&this._stack._prepared&&this._stack._packed)if("IJK"===this._aaBBspace)this._halfDimensions=this._stack.halfDimensionsIJK,this._center=new e.Vector3(this._stack.halfDimensionsIJK.x-.5,this._stack.halfDimensionsIJK.y-.5,this._stack.halfDimensionsIJK.z-.5),this._toAABB=new e.Matrix4;else{var t=this._stack.AABBox();this._halfDimensions=t.clone().multiplyScalar(.5),this._center=this._stack.centerAABBox(),this._toAABB=this._stack.lps2AABB}}},{key:"_create",value:function(){if(this._stack&&this._stack.prepared&&this._stack.packed){try{var t=Object(a.a)(e);this._geometry=new t(this._halfDimensions,this._center,this._planePosition,this._planeDirection,this._toAABB)}catch(e){return window.console.log(e),void window.console.log("invalid slice geometry - exiting...")}this._geometry.vertices&&(this._material||(this._uniforms.uTextureSize.value=this._stack.textureSize,this._uniforms.uDataDimensions.value=[this._stack.dimensionsIJK.x,this._stack.dimensionsIJK.y,this._stack.dimensionsIJK.z],this._uniforms.uWorldToData.value=this._stack.lps2IJK,this._uniforms.uNumberOfChannels.value=this._stack.numberOfChannels,this._uniforms.uPixelType.value=this._stack.pixelType,this._uniforms.uBitsAllocated.value=this._stack.bitsAllocated,this._uniforms.uPackedPerPixel.value=this._stack.packedPerPixel,this._prepareTexture(),this._uniforms.uTextureContainer.value=this._textures,this._createMaterial({side:e.DoubleSide})),this.updateIntensitySettings(),this.updateIntensitySettingsUniforms(),this._mesh=new e.Mesh(this._geometry,this._material),"IJK"===this._aaBBspace&&this._mesh.applyMatrix(this._stack.ijk2LPS),this._mesh.visible=this._visible,this.add(this._mesh))}}},{key:"updateIntensitySettings",value:function(){this._intensityAuto?(this.updateIntensitySetting("windowCenter"),this.updateIntensitySetting("windowWidth"),this.updateIntensitySetting("rescaleSlope"),this.updateIntensitySetting("rescaleIntercept")):(null===this._windowCenter&&(this._windowCenter=this._stack.windowCenter),null===this._windowWidth&&(this._windowWidth=this._stack.windowWidth),null===this._rescaleSlope&&(this._rescaleSlope=this._stack.rescaleSlope),null===this._rescaleIntercept&&(this._rescaleIntercept=this._stack.rescaleIntercept)),null===this._upperThreshold&&(this._upperThreshold=this._stack._minMax[1]),null===this._lowerThreshold&&(this._lowerThreshold=this._stack._minMax[0])}},{key:"updateIntensitySettingsUniforms",value:function(){var e=0;this._stack._minMax[0]<0&&(e-=this._stack._minMax[0]),this._uniforms.uRescaleSlopeIntercept.value=[this._rescaleSlope,this._rescaleIntercept],this._uniforms.uWindowCenterWidth.value=[e+this._windowCenter,this._windowWidth],this._uniforms.uLowerUpperThreshold.value=[e+this._lowerThreshold,e+this._upperThreshold],this._uniforms.uInvert.value=!0===this._invert?1:0,this._uniforms.uInterpolation.value=this._interpolation,"none"===this._lut?this._uniforms.uLut.value=0:(this._uniforms.uLut.value=1,this._uniforms.uTextureLUT.value=this._lutTexture)}},{key:"updateIntensitySetting",value:function(e){this._stack.frame[this._index]&&this._stack.frame[this._index][e]?this["_"+e]=this._stack.frame[this._index][e]:this["_"+e]=this._stack[e]}},{key:"_update",value:function(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh=null),this._create()}},{key:"dispose",value:function(){for(var e=0;e<this._textures.length;e++)this._textures[e].dispose(),this._textures[e]=null;this._textures=null,this._shadersFragment=null,this._shadersVertex=null,this._uniforms=null,this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,this._stack=null}},{key:"cartesianEquation",value:function(){if(!this._geometry||!this._geometry.vertices||this._geometry.vertices.length<3)return new e.Vector4;var t=this._geometry.vertices,n=this._stack.ijk2LPS,r=new e.Vector3(t[0].x,t[0].y,t[0].z).applyMatrix4(n),i=new e.Vector3(t[1].x,t[1].y,t[1].z).applyMatrix4(n),o=new e.Vector3(t[2].x,t[2].y,t[2].z).applyMatrix4(n),a=new e.Vector3,s=new e.Vector3,l=a.subVectors(o,i).cross(s.subVectors(r,i)).normalize();return new e.Vector4(l.x,l.y,l.z,-l.dot(r))}},{key:"stack",get:function(){return this._stack},set:function(e){this._stack=e}},{key:"windowWidth",get:function(){return this._windowWidth},set:function(e){this._windowWidth=e,this.updateIntensitySettingsUniforms()}},{key:"windowCenter",get:function(){return this._windowCenter},set:function(e){this._windowCenter=e,this.updateIntensitySettingsUniforms()}},{key:"upperThreshold",get:function(){return this._upperThreshold},set:function(e){this._upperThreshold=e,this.updateIntensitySettingsUniforms()}},{key:"lowerThreshold",get:function(){return this._lowerThreshold},set:function(e){this._lowerThreshold=e,this.updateIntensitySettingsUniforms()}},{key:"rescaleSlope",get:function(){return this._rescaleSlope},set:function(e){this._rescaleSlope=e,this.updateIntensitySettingsUniforms()}},{key:"rescaleIntercept",get:function(){return this._rescaleIntercept},set:function(e){this._rescaleIntercept=e,this.updateIntensitySettingsUniforms()}},{key:"invert",get:function(){return this._invert},set:function(e){this._invert=e,this.updateIntensitySettingsUniforms()}},{key:"lut",get:function(){return this._lut},set:function(e){this._lut=e}},{key:"lutTexture",get:function(){return this._lutTexture},set:function(e){this._lutTexture=e,this.updateIntensitySettingsUniforms()}},{key:"intensityAuto",get:function(){return this._intensityAuto},set:function(e){this._intensityAuto=e,this.updateIntensitySettings(),this.updateIntensitySettingsUniforms()}},{key:"interpolation",get:function(){return this._interpolation},set:function(e){this._interpolation=e,this.updateIntensitySettingsUniforms(),this._updateMaterial()}},{key:"index",get:function(){return this._index},set:function(e){this._index=e,this._update()}},{key:"planePosition",set:function(e){this._planePosition=e,this._update()},get:function(){return this._planePosition}},{key:"planeDirection",set:function(e){this._planeDirection=e,this._update()},get:function(){return this._planeDirection}},{key:"halfDimensions",set:function(e){this._halfDimensions=e},get:function(){return this._halfDimensions}},{key:"center",set:function(e){this._center=e},get:function(){return this._center}},{key:"aabbSpace",set:function(e){this._aaBBspace=e,this._init()},get:function(){return this._aaBBspace}},{key:"mesh",set:function(e){this._mesh=e},get:function(){return this._mesh}},{key:"geometry",set:function(e){this._geometry=e},get:function(){return this._geometry}},{key:"canvasWidth",set:function(e){this._canvasWidth=e,this._uniforms.uCanvasWidth.value=this._canvasWidth},get:function(){return this._canvasWidth}},{key:"canvasHeight",set:function(e){this._canvasHeight=e,this._uniforms.uCanvasHeight.value=this._canvasHeight},get:function(){return this._canvasHeight}},{key:"borderColor",set:function(t){this._borderColor=t,this._uniforms.uBorderColor.value=new e.Color(t)},get:function(){return this._borderColor}}]),n}(t)};d()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(19),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return o(e,null,[{key:"uniforms",value:function(){return{uTextureSize:{type:"i",value:0,typeGLSL:"int"},uTextureContainer:{type:"tv",value:[],typeGLSL:"sampler2D",length:7},uDataDimensions:{type:"iv",value:[0,0,0],typeGLSL:"ivec3"},uWorldToData:{type:"m4",value:new i.h,typeGLSL:"mat4"},uWindowCenterWidth:{type:"fv1",value:[0,0],typeGLSL:"float",length:2},uLowerUpperThreshold:{type:"fv1",value:[0,0],typeGLSL:"float",length:2},uRescaleSlopeIntercept:{type:"fv1",value:[0,0],typeGLSL:"float",length:2},uNumberOfChannels:{type:"i",value:1,typeGLSL:"int"},uBitsAllocated:{type:"i",value:8,typeGLSL:"int"},uInvert:{type:"i",value:0,typeGLSL:"int"},uLut:{type:"i",value:0,typeGLSL:"int"},uTextureLUT:{type:"t",value:[],typeGLSL:"sampler2D"},uLutSegmentation:{type:"i",value:0,typeGLSL:"int"},uTextureLUTSegmentation:{type:"t",value:[],typeGLSL:"sampler2D"},uPixelType:{type:"i",value:0,typeGLSL:"int"},uPackedPerPixel:{type:"i",value:1,typeGLSL:"int"},uInterpolation:{type:"i",value:1,typeGLSL:"int"},uCanvasWidth:{type:"f",value:0,typeGLSL:"float"},uCanvasHeight:{type:"f",value:0,typeGLSL:"float"},uBorderColor:{type:"v3",value:[1,0,.5],typeGLSL:"vec3"},uBorderWidth:{type:"f",value:2,typeGLSL:"float"},uBorderMargin:{type:"f",value:2,typeGLSL:"float"},uBorderDashLength:{type:"f",value:10,typeGLSL:"float"}}}}]),e}();t.a=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"compute",value:function(){return"\nvarying vec4 vPos;\n\n//\n// main\n//\nvoid main() {\n\n  vPos = modelMatrix * vec4(position, 1.0 );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n\n}\n        "}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(478),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){r(this,e),this._uniforms=t,this._functions={},this._main=""}return o(e,[{key:"functions",value:function(){""===this._main&&this.main();var e="";for(var t in this._functions)e+=this._functions[t]+"\n";return e}},{key:"uniforms",value:function(){var e="";for(var t in this._uniforms){var n=this._uniforms[t];e+="uniform "+n.typeGLSL+" "+t,n&&n.length&&(e+="["+n.length+"]"),e+=";\n"}return e}},{key:"main",value:function(){this._main="\nvoid main(void) {\n\n  // draw border if slice is cropped\n  // float uBorderDashLength = 10.;\n\n  if( uCanvasWidth > 0. &&\n      ((gl_FragCoord.x > uBorderMargin && (gl_FragCoord.x - uBorderMargin) < uBorderWidth) ||\n       (gl_FragCoord.x < (uCanvasWidth - uBorderMargin) && (gl_FragCoord.x + uBorderMargin) > (uCanvasWidth - uBorderWidth) ))){\n    float valueY = mod(gl_FragCoord.y, 2. * uBorderDashLength);\n    if( valueY < uBorderDashLength && gl_FragCoord.y > uBorderMargin && gl_FragCoord.y < (uCanvasHeight - uBorderMargin) ){\n      gl_FragColor = vec4(uBorderColor, 1.);\n      return;\n    }\n  }\n\n  if( uCanvasHeight > 0. &&\n      ((gl_FragCoord.y > uBorderMargin && (gl_FragCoord.y - uBorderMargin) < uBorderWidth) ||\n       (gl_FragCoord.y < (uCanvasHeight - uBorderMargin) && (gl_FragCoord.y + uBorderMargin) > (uCanvasHeight - uBorderWidth) ))){\n    float valueX = mod(gl_FragCoord.x, 2. * uBorderDashLength);\n    if( valueX < uBorderDashLength && gl_FragCoord.x > uBorderMargin && gl_FragCoord.x < (uCanvasWidth - uBorderMargin) ){\n      gl_FragColor = vec4(uBorderColor, 1.);\n      return;\n    }\n  }\n\n  // get texture coordinates of current pixel\n  vec4 dataCoordinates = uWorldToData * vPos;\n  vec3 currentVoxel = dataCoordinates.xyz;\n  vec4 dataValue = vec4(0., 0., 0., 0.);\n  vec3 gradient = vec3(0., 0., 0.);\n  "+Object(i.a)(this,"currentVoxel","dataValue","gradient")+"\n\n  if(uNumberOfChannels == 1){\n    // rescale/slope\n    float realIntensity = dataValue.r * uRescaleSlopeIntercept[0] + uRescaleSlopeIntercept[1];\n  \n    // threshold\n    if (realIntensity < uLowerUpperThreshold[0] || realIntensity > uLowerUpperThreshold[1]) {\n      discard;\n    }\n  \n    // normalize\n    float windowMin = uWindowCenterWidth[0] - uWindowCenterWidth[1] * 0.5;\n    float normalizedIntensity =\n      ( realIntensity - windowMin ) / uWindowCenterWidth[1];\n    dataValue.r = dataValue.g = dataValue.b = normalizedIntensity;\n    dataValue.a = 1.;\n\n    // apply LUT\n    if(uLut == 1){\n      // should opacity be grabbed there?\n      dataValue = texture2D( uTextureLUT, vec2( normalizedIntensity , 1.0) );\n    }\n  \n    // apply segmentation\n    if(uLutSegmentation == 1){\n      // should opacity be grabbed there?\n      //\n      float textureWidth = 256.;\n      float textureHeight = 128.;\n      float min = 0.;\n      // start at 0!\n      int adjustedIntensity = int(floor(realIntensity + 0.5));\n  \n      // Get row and column in the texture\n      int colIndex = int(mod(float(adjustedIntensity), textureWidth));\n      int rowIndex = int(floor(float(adjustedIntensity)/textureWidth));\n  \n      float texWidth = 1./textureWidth;\n      float texHeight = 1./textureHeight;\n    \n      // Map row and column to uv\n      vec2 uv = vec2(0,0);\n      uv.x = 0.5 * texWidth + (texWidth * float(colIndex));\n      uv.y = 1. - (0.5 * texHeight + float(rowIndex) * texHeight);\n  \n      dataValue = texture2D( uTextureLUTSegmentation, uv );\n    }\n  }\n\n  if(uInvert == 1){\n    dataValue = vec4(1.) - dataValue;\n    // how do we deal with that and opacity?\n    dataValue.a = 1.;\n  }\n\n  gl_FragColor = dataValue;\n}\n   "}},{key:"compute",value:function(){return"\n// uniforms\n"+this.uniforms()+"\n\n// varying (should fetch it from vertex directly)\nvarying vec4      vPos;\n\n// tailored functions\n"+this.functions()+"\n\n// main loop\n"+this._main+"\n      "}}]),e}();t.a=a},function(e,t,n){"use strict";function r(e,t,n,r){switch(e._uniforms.uInterpolation.value){case 0:return i.a.api(e,t,n);case 1:return o.a.api(e,t,n,r);default:return i.a.api(e,t,n)}}var i=n(171),o=n(481);t.a=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(70),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="unpack",e._packedData="packedData",e._offset="offset",e._unpackedData="unpackedData",e._base._uniforms={uNumberOfChannels:{value:1},uBitsAllocated:{value:16},uPixelType:{value:0}},e}return o(t,e),s(t,[{key:"api",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._base,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._packedData,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._offset,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._unpackedData;return this._base=e,this.compute(t,n,r)}},{key:"compute",value:function(e,t,n){return this.computeDefinition(),this._base._functions[this._name]=this._definition,this._name+"("+e+", "+t+", "+n+");"}},{key:"computeDefinition",value:function(){var e="";if(1===this._base._uniforms.uNumberOfChannels.value)switch(this._base._uniforms.uBitsAllocated.value){case 1:case 8:e=this.upack8();break;case 16:e=this.upack16();break;case 32:e=this.upack32();break;default:e=this.upackIdentity()}else e=this.upackIdentity();this._definition="\nvoid "+this._name+"(in vec4 packedData, in int offset, out vec4 unpackedData){\n\n"+e+"\n\n}  \n    "}},{key:"upack8",value:function(){return this._base._functions.uInt8=this.uInt8(),"\nuInt8(\n  step( abs( float(offset - 0) ), 0.0 ) * packedData.r +\n  step( abs( float(offset - 1) ), 0.0 ) * packedData.g +\n  step( abs( float(offset - 2) ), 0.0 ) * packedData.b +\n  step( abs( float(offset - 3) ), 0.0 ) * packedData.a\n  ,\n  unpackedData.x);\n    "}},{key:"upack16",value:function(){return this._base._functions.uInt16=this.uInt16(),"\nuInt16(\n  packedData.r * float( 1 - offset) + packedData.b * float(offset),\n  packedData.g * float( 1 - offset) + packedData.a * float(offset),\n  unpackedData.x);\n    "}},{key:"upack32",value:function(){return 0===this._base._uniforms.uPixelType.value?(this._base._functions.uInt32=this.uInt32(),"\nuInt32(\n  packedData.r,\n  packedData.g,\n  packedData.b,\n  packedData.a,\n  unpackedData.x);\n      "):(this._base._functions.uFloat32=this.uFloat32(),"\nuFloat32(\n  packedData.r,\n  packedData.g,\n  packedData.b,\n  packedData.a,\n  unpackedData.x);\n      ")}},{key:"upackIdentity",value:function(){return"\nunpackedData = packedData;\n      "}},{key:"uInt8",value:function(){return"\nvoid uInt8(in float r, out float value){\n  value = r * 255.;\n}\n    "}},{key:"uInt16",value:function(){return"\nvoid uInt16(in float r, in float a, out float value){\n  value = r * 255. + a * 255. * 256.;\n}\n    "}},{key:"uInt32",value:function(){return"\nvoid uInt32(in float r, in float g, in float b, in float a, out float value){\n  value = r * 255. + g * 255. * 256. + b * 255. * 256. * 256. + a * 255. * 256. * 256. * 256.;\n  // value = r * 255. + g * 65025. + b * 16581375. + a * 4228250625.;\n}\n    "}},{key:"uFloat32",value:function(){return"\nvoid uFloat32(in float r, in float g, in float b, in float a, out float value){\n\n  // create arrays containing bits for rgba values\n  // value between 0 and 255\n  value = r * 255.;\n  int bytemeR[8];\n  bytemeR[0] = int(floor(value / 128.));\n  value -= float(bytemeR[0] * 128);\n  bytemeR[1] = int(floor(value / 64.));\n  value -= float(bytemeR[1] * 64);\n  bytemeR[2] = int(floor(value / 32.));\n  value -= float(bytemeR[2] * 32);\n  bytemeR[3] = int(floor(value / 16.));\n  value -= float(bytemeR[3] * 16);\n  bytemeR[4] = int(floor(value / 8.));\n  value -= float(bytemeR[4] * 8);\n  bytemeR[5] = int(floor(value / 4.));\n  value -= float(bytemeR[5] * 4);\n  bytemeR[6] = int(floor(value / 2.));\n  value -= float(bytemeR[6] * 2);\n  bytemeR[7] = int(floor(value));\n\n  value = g * 255.;\n  int bytemeG[8];\n  bytemeG[0] = int(floor(value / 128.));\n  value -= float(bytemeG[0] * 128);\n  bytemeG[1] = int(floor(value / 64.));\n  value -= float(bytemeG[1] * 64);\n  bytemeG[2] = int(floor(value / 32.));\n  value -= float(bytemeG[2] * 32);\n  bytemeG[3] = int(floor(value / 16.));\n  value -= float(bytemeG[3] * 16);\n  bytemeG[4] = int(floor(value / 8.));\n  value -= float(bytemeG[4] * 8);\n  bytemeG[5] = int(floor(value / 4.));\n  value -= float(bytemeG[5] * 4);\n  bytemeG[6] = int(floor(value / 2.));\n  value -= float(bytemeG[6] * 2);\n  bytemeG[7] = int(floor(value));\n\n  value = b * 255.;\n  int bytemeB[8];\n  bytemeB[0] = int(floor(value / 128.));\n  value -= float(bytemeB[0] * 128);\n  bytemeB[1] = int(floor(value / 64.));\n  value -= float(bytemeB[1] * 64);\n  bytemeB[2] = int(floor(value / 32.));\n  value -= float(bytemeB[2] * 32);\n  bytemeB[3] = int(floor(value / 16.));\n  value -= float(bytemeB[3] * 16);\n  bytemeB[4] = int(floor(value / 8.));\n  value -= float(bytemeB[4] * 8);\n  bytemeB[5] = int(floor(value / 4.));\n  value -= float(bytemeB[5] * 4);\n  bytemeB[6] = int(floor(value / 2.));\n  value -= float(bytemeB[6] * 2);\n  bytemeB[7] = int(floor(value));\n\n  value = a * 255.;\n  int bytemeA[8];\n  bytemeA[0] = int(floor(value / 128.));\n  value -= float(bytemeA[0] * 128);\n  bytemeA[1] = int(floor(value / 64.));\n  value -= float(bytemeA[1] * 64);\n  bytemeA[2] = int(floor(value / 32.));\n  value -= float(bytemeA[2] * 32);\n  bytemeA[3] = int(floor(value / 16.));\n  value -= float(bytemeA[3] * 16);\n  bytemeA[4] = int(floor(value / 8.));\n  value -= float(bytemeA[4] * 8);\n  bytemeA[5] = int(floor(value / 4.));\n  value -= float(bytemeA[5] * 4);\n  bytemeA[6] = int(floor(value / 2.));\n  value -= float(bytemeA[6] * 2);\n  bytemeA[7] = int(floor(value));\n\n  // compute float32 value from bit arrays\n\n  // sign\n  int issigned = 1 - 2 * bytemeR[0];\n  //   issigned = int(pow(-1., float(bytemeR[0])));\n\n  // exponent\n  int exponent = 0;\n\n  exponent += bytemeR[1] * int(pow(2., 7.));\n  exponent += bytemeR[2] * int(pow(2., 6.));\n  exponent += bytemeR[3] * int(pow(2., 5.));\n  exponent += bytemeR[4] * int(pow(2., 4.));\n  exponent += bytemeR[5] * int(pow(2., 3.));\n  exponent += bytemeR[6] * int(pow(2., 2.));\n  exponent += bytemeR[7] * int(pow(2., 1.));\n\n  exponent += bytemeG[0];\n\n\n  // fraction\n  float fraction = 0.;\n\n  fraction = float(bytemeG[1]) * pow(2., -1.);\n  fraction += float(bytemeG[2]) * pow(2., -2.);\n  fraction += float(bytemeG[3]) * pow(2., -3.);\n  fraction += float(bytemeG[4]) * pow(2., -4.);\n  fraction += float(bytemeG[5]) * pow(2., -5.);\n  fraction += float(bytemeG[6]) * pow(2., -6.);\n  fraction += float(bytemeG[7]) * pow(2., -7.);\n\n  fraction += float(bytemeB[0]) * pow(2., -8.);\n  fraction += float(bytemeB[1]) * pow(2., -9.);\n  fraction += float(bytemeB[2]) * pow(2., -10.);\n  fraction += float(bytemeB[3]) * pow(2., -11.);\n  fraction += float(bytemeB[4]) * pow(2., -12.);\n  fraction += float(bytemeB[5]) * pow(2., -13.);\n  fraction += float(bytemeB[6]) * pow(2., -14.);\n  fraction += float(bytemeB[7]) * pow(2., -15.);\n\n  fraction += float(bytemeA[0]) * pow(2., -16.);\n  fraction += float(bytemeA[1]) * pow(2., -17.);\n  fraction += float(bytemeA[2]) * pow(2., -18.);\n  fraction += float(bytemeA[3]) * pow(2., -19.);\n  fraction += float(bytemeA[4]) * pow(2., -20.);\n  fraction += float(bytemeA[5]) * pow(2., -21.);\n  fraction += float(bytemeA[6]) * pow(2., -22.);\n  fraction += float(bytemeA[7]) * pow(2., -23.);\n\n  value = float(issigned) * pow( 2., float(exponent - 127)) * (1. + fraction);\n}\n    "}}]),t}(a.a);t.a=new l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(70),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="texture3d",e._dataCoordinates="dataCoordinates",e._dataValue="dataValue",e._offset="offset",e}return o(t,e),s(t,[{key:"api",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._base,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._dataCoordinates,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._dataValue,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._offset;return this._base=e,this.compute(t,n,r)}},{key:"compute",value:function(e,t,n){return this.computeDefinition(),this._base._functions[this._name]=this._definition,this._name+"("+e+", "+t+", "+n+");"}},{key:"computeDefinition",value:function(){this._definition="\nvoid "+this._name+"(in ivec3 dataCoordinates, out vec4 dataValue, out int offset){\n    \n  int index = dataCoordinates.x\n            + dataCoordinates.y * uDataDimensions.x\n            + dataCoordinates.z * uDataDimensions.y * uDataDimensions.x;\n  int indexP = int(index/uPackedPerPixel);\n  offset = index - int(uPackedPerPixel)*indexP;\n\n  // Map data index to right sampler2D texture\n  int voxelsPerTexture = uTextureSize*uTextureSize;\n  int textureIndex = int(floor(float(indexP) / float(voxelsPerTexture)));\n  // modulo seems incorrect sometimes...\n  // int inTextureIndex = int(mod(float(index), float(textureSize*textureSize)));\n  int inTextureIndex = indexP - voxelsPerTexture*textureIndex;\n  float textureIndexF = float(textureIndex);\n\n  // Get row and column in the texture\n  int colIndex = int(mod(float(inTextureIndex), float(uTextureSize)));\n  int rowIndex = int(floor(float(inTextureIndex)/float(uTextureSize)));\n\n  // Map row and column to uv\n  vec2 uv = vec2(0,0);\n  uv.x = (0.5 + float(colIndex)) / float(uTextureSize);\n  uv.y = 1. - (0.5 + float(rowIndex)) / float(uTextureSize);\n\n  // get rid of if statements\n  dataValue = vec4(0.) +\n    step( abs( textureIndexF - 0.0 ), 0.0 ) * texture2D(uTextureContainer[0], uv) +\n    step( abs( textureIndexF - 1.0 ), 0.0 ) * texture2D(uTextureContainer[1], uv) +\n    step( abs( textureIndexF - 2.0 ), 0.0 ) * texture2D(uTextureContainer[2], uv) +\n    step( abs( textureIndexF - 3.0 ), 0.0 ) * texture2D(uTextureContainer[3], uv) +\n    step( abs( textureIndexF - 4.0 ), 0.0 ) * texture2D(uTextureContainer[4], uv) +\n    step( abs( textureIndexF - 5.0 ), 0.0 ) * texture2D(uTextureContainer[5], uv) +\n    step( abs( textureIndexF - 6.0 ), 0.0 ) * texture2D(uTextureContainer[6], uv);\n\n}\n    "}}]),t}(a.a);t.a=new l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(70),s=n(171),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="interpolationTrilinear",e._currentVoxel="currentVoxel",e._dataValue="dataValue",e._gradient="gradient",e}return o(t,e),l(t,[{key:"api",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._base,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._currentVoxel,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._dataValue,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._gradient;return this._base=e,this.compute(t,n,r)}},{key:"compute",value:function(e,t,n){return this.computeDefinition(),this._base._functions[this._name]=this._definition,this._name+"("+e+", "+t+", "+n+");"}},{key:"computeDefinition",value:function(){this._definition="\nvoid trilinearInterpolation(\n  in vec3 normalizedPosition,\n  out vec4 interpolatedValue,\n  in vec4 v000, in vec4 v100,\n  in vec4 v001, in vec4 v101,\n  in vec4 v010, in vec4 v110,\n  in vec4 v011, in vec4 v111) {\n  // https://en.wikipedia.org/wiki/Trilinear_interpolation\n  vec4 c00 = v000 * ( 1.0 - normalizedPosition.x ) + v100 * normalizedPosition.x;\n  vec4 c01 = v001 * ( 1.0 - normalizedPosition.x ) + v101 * normalizedPosition.x;\n  vec4 c10 = v010 * ( 1.0 - normalizedPosition.x ) + v110 * normalizedPosition.x;\n  vec4 c11 = v011 * ( 1.0 - normalizedPosition.x ) + v111 * normalizedPosition.x;\n\n  // c0 and c1\n  vec4 c0 = c00 * ( 1.0 - normalizedPosition.y) + c10 * normalizedPosition.y;\n  vec4 c1 = c01 * ( 1.0 - normalizedPosition.y) + c11 * normalizedPosition.y;\n\n  // c\n  vec4 c = c0 * ( 1.0 - normalizedPosition.z) + c1 * normalizedPosition.z;\n  interpolatedValue = c;\n}\n\nvoid "+this._name+"(in vec3 currentVoxel, out vec4 dataValue, out vec3 gradient){\n\n  vec3 lower_bound = floor(currentVoxel);\n  lower_bound = max(vec3(0.), lower_bound);\n  \n  vec3 higher_bound = lower_bound + vec3(1.);\n\n  vec3 normalizedPosition = (currentVoxel - lower_bound);\n  normalizedPosition =  max(vec3(0.), normalizedPosition);\n\n  vec4 interpolatedValue = vec4(0.);\n\n  //\n  // fetch values required for interpolation\n  //\n  vec4 v000 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c000 = vec3(lower_bound.x, lower_bound.y, lower_bound.z);\n  "+s.a.api(this._base,"c000","v000")+"\n\n  //\n  vec4 v100 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c100 = vec3(higher_bound.x, lower_bound.y, lower_bound.z);\n  "+s.a.api(this._base,"c100","v100")+"\n\n  //\n  vec4 v001 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c001 = vec3(lower_bound.x, lower_bound.y, higher_bound.z);\n  "+s.a.api(this._base,"c001","v001")+"\n\n  //\n  vec4 v101 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c101 = vec3(higher_bound.x, lower_bound.y, higher_bound.z);\n  "+s.a.api(this._base,"c101","v101")+"\n  \n  //\n  vec4 v010 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c010 = vec3(lower_bound.x, higher_bound.y, lower_bound.z);\n  "+s.a.api(this._base,"c010","v010")+"\n\n  vec4 v110 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c110 = vec3(higher_bound.x, higher_bound.y, lower_bound.z);\n  "+s.a.api(this._base,"c110","v110")+"\n\n  //\n  vec4 v011 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c011 = vec3(lower_bound.x, higher_bound.y, higher_bound.z);\n  "+s.a.api(this._base,"c011","v011")+"\n\n  vec4 v111 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c111 = vec3(higher_bound.x, higher_bound.y, higher_bound.z);\n  "+s.a.api(this._base,"c111","v111")+"\n\n  // compute interpolation at position\n  trilinearInterpolation(normalizedPosition, interpolatedValue ,v000, v100, v001, v101, v010,v110, v011,v111);\n  dataValue = interpolatedValue;\n\n  // compute gradient\n  float gradientStep = 0.005;\n\n  // x axis\n  vec3 g100 = vec3(1., 0., 0.);\n  vec3 ng100 = normalizedPosition + g100 * gradientStep;\n  ng100.x = min(1., ng100.x);\n\n  vec4 vg100 = vec4(0.);\n  trilinearInterpolation(ng100, vg100 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  vec3 go100 = -g100;\n  vec3 ngo100 = normalizedPosition + go100 * gradientStep;\n  ngo100.x = max(0., ngo100.x);\n\n  vec4 vgo100 = vec4(0.);\n  trilinearInterpolation(ngo100, vgo100 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  gradient.x = (g100.x * vg100.x + go100.x * vgo100.x);\n\n  // y axis\n  vec3 g010 = vec3(0., 1., 0.);\n  vec3 ng010 = normalizedPosition + g010 * gradientStep;\n  ng010.y = min(1., ng010.y);\n\n  vec4 vg010 = vec4(0.);\n  trilinearInterpolation(ng010, vg010 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  vec3 go010 = -g010;\n  vec3 ngo010 = normalizedPosition + go010 * gradientStep;\n  ngo010.y = max(0., ngo010.y);\n\n  vec4 vgo010 = vec4(0.);\n  trilinearInterpolation(ngo010, vgo010 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  gradient.y = (g010.y * vg010.x + go010.y * vgo010.x);\n\n  // z axis\n  vec3 g001 = vec3(0., 0., 1.);\n  vec3 ng001 = normalizedPosition + g001 * gradientStep;\n  ng001.z = min(1., ng001.z);\n\n  vec4 vg001 = vec4(0.);\n  trilinearInterpolation(ng001, vg001 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  vec3 go001 = -g001;\n  vec3 ngo001 = normalizedPosition + go001 * gradientStep;\n  ngo001.z = max(0., ngo001.z);\n\n  vec4 vgo001 = vec4(0.);\n  trilinearInterpolation(ngo001, vgo001 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  gradient.z = (g001.z * vg001.x + go001.z * vgo001.x);\n\n  // normalize gradient\n  // +0.0001  instead of if?\n  float gradientMagnitude = length(gradient);\n  if (gradientMagnitude > 0.0) {\n    gradient = -(1. / gradientMagnitude) * gradient;\n  }\n}\n    "}}]),t}(a.a);t.a=new u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return s});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.THREE;if(void 0===e||void 0===e.Object3D)return null;var t=e.Object3D;return function(t){function n(){return r(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,t),a(n,[{key:"_createMaterial",value:function(t){var n=new this._shadersFragment(this._uniforms),r=new this._shadersVertex,i={uniforms:this._uniforms,vertexShader:r.compute(),fragmentShader:n.compute()},o=Object.assign(t,i);this._material=new e.ShaderMaterial(o),this._material.needsUpdate=!0}},{key:"_updateMaterial",value:function(){var e=new this._shadersFragment(this._uniforms),t=new this._shadersVertex;this._material.vertexShader=t.compute(),this._material.fragmentShader=e.compute(),this._material.needsUpdate=!0}},{key:"_prepareTexture",value:function(){this._textures=[];for(var t=0;t<this._stack._rawData.length;t++){var n=new e.DataTexture(this._stack.rawData[t],this._stack.textureSize,this._stack.textureSize,this._stack.textureType,e.UnsignedByteType,e.UVMapping,e.ClampToEdgeWrapping,e.ClampToEdgeWrapping,e.NearestFilter,e.NearestFilter);n.needsUpdate=!0,n.flipY=!0,this._textures.push(n)}}}]),n}(t)};s()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.THREE;if(void 0===e||void 0===e.EventDispatcher)return null;var t=e.EventDispatcher;return function(t){function n(t,o){function a(e){!1!==g.enabled&&(window.removeEventListener("keydown",a),w=b,b===y.NONE&&(e.keyCode!==g.keys[y.ROTATE]||g.noRotate?e.keyCode!==g.keys[y.ZOOM]||g.noZoom?e.keyCode!==g.keys[y.PAN]||g.noPan||(b=y.PAN):b=y.ZOOM:b=y.ROTATE))}function s(e){!1!==g.enabled&&(b=w,window.addEventListener("keydown",a,!1))}function l(e){!1!==g.enabled&&(e.preventDefault(),e.stopPropagation(),b===y.NONE&&(b=e.button),b!==y.ROTATE||g.noRotate?b!==y.ZOOM||g.noZoom?b!==y.PAN||g.noPan?b!==y.CUSTOM||g.noCustom||(R.copy(U(e.pageX,e.pageY)),L.copy(O)):(O.copy(U(e.pageX,e.pageY)),I.copy(O)):(k.copy(U(e.pageX,e.pageY)),P.copy(k)):(S.copy(z(e.pageX,e.pageY)),E.copy(S)),document.addEventListener("mousemove",u,!1),document.addEventListener("mouseup",c,!1),g.dispatchEvent(N))}function u(e){!1!==g.enabled&&(e.preventDefault(),e.stopPropagation(),b!==y.ROTATE||g.noRotate?b!==y.ZOOM||g.noZoom?b!==y.PAN||g.noPan?b!==y.CUSTOM||g.noCustom||L.copy(U(e.pageX,e.pageY)):I.copy(U(e.pageX,e.pageY)):P.copy(U(e.pageX,e.pageY)):(E.copy(S),S.copy(z(e.pageX,e.pageY))))}function c(e){!1!==g.enabled&&(e.preventDefault(),e.stopPropagation(),-1===g.forceState&&(b=y.NONE),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",c),g.dispatchEvent(F))}function h(e){if(!1!==g.enabled){e.preventDefault(),e.stopPropagation();var t=0;e.wheelDelta?t=e.wheelDelta/40:e.detail&&(t=-e.detail/3),b!==y.CUSTOM?k.y+=.01*t:b===y.CUSTOM&&(R.y+=.01*t),g.dispatchEvent(N),g.dispatchEvent(F)}}function d(e){if(!1!==g.enabled){if(-1===g.forceState)switch(e.touches.length){case 1:b=y.TOUCH_ROTATE,S.copy(z(e.touches[0].pageX,e.touches[0].pageY)),E.copy(S);break;case 2:b=y.TOUCH_ZOOM;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;A=C=Math.sqrt(t*t+n*n);var r=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;O.copy(U(r,i)),I.copy(O);break;default:b=y.NONE}else switch(b){case 0:b=y.TOUCH_ROTATE,S.copy(z(e.touches[0].pageX,e.touches[0].pageY)),E.copy(S);break;case 1:case 4:if(e.touches.length>=2){b=y.TOUCH_ZOOM;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;A=C=Math.sqrt(t*t+n*n)}else b=y.ZOOM,k.copy(U(e.touches[0].pageX,e.touches[0].pageY)),P.copy(k);break;case 2:case 5:if(e.touches.length>=2){b=y.TOUCH_PAN;var r=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;O.copy(U(r,i)),I.copy(O)}else b=y.PAN,O.copy(U(e.touches[0].pageX,e.touches[0].pageY)),I.copy(O);break;case 99:b=y.CUSTOM;var r=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;R.copy(U(r,i)),L.copy(R);break;default:b=y.NONE}g.dispatchEvent(N)}}function f(e){if(!1!==g.enabled)if(e.preventDefault(),e.stopPropagation(),-1===g.forceState)switch(e.touches.length){case 1:E.copy(S),S.copy(z(e.touches[0].pageX,e.touches[0].pageY));break;case 2:var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;A=Math.sqrt(t*t+n*n);var r=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;I.copy(U(r,i));break;default:b=y.NONE}else switch(b){case 0:E.copy(S),S.copy(z(e.touches[0].pageX,e.touches[0].pageY));break;case 1:P.copy(U(e.touches[0].pageX,e.touches[0].pageY));break;case 2:I.copy(U(e.touches[0].pageX,e.touches[0].pageY));break;case 4:var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;A=Math.sqrt(t*t+n*n);break;case 5:var r=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;I.copy(U(r,i));break;case 99:var r=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;L.copy(U(r,i));break;default:b=y.NONE}}function p(e){if(!1!==g.enabled){if(-1===g.forceState){switch(e.touches.length){case 1:E.copy(S),S.copy(z(e.touches[0].pageX,e.touches[0].pageY));break;case 2:C=A=0;var t=(e.touches[0].pageX+e.touches[1].pageX)/2,n=(e.touches[0].pageY+e.touches[1].pageY)/2;I.copy(U(t,n)),O.copy(I)}b=y.NONE}else switch(b){case 0:E.copy(S),S.copy(z(e.touches[0].pageX,e.touches[0].pageY));break;case 1:case 2:break;case 4:C=A=0,b=y.ZOOM;break;case 5:if(e.touches.length>=2){var t=(e.touches[0].pageX+e.touches[1].pageX)/2,n=(e.touches[0].pageY+e.touches[1].pageY)/2;I.copy(U(t,n)),O.copy(I)}b=y.PAN;break;case 99:var t=(e.touches[0].pageX+e.touches[1].pageX)/2,n=(e.touches[0].pageY+e.touches[1].pageY)/2;L.copy(U(t,n)),R.copy(L);break;default:b=y.NONE}g.dispatchEvent(F)}}function m(e){e.preventDefault()}r(this,n);var v=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),g=v,y={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM:4,TOUCH_PAN:5,CUSTOM:99};v.object=t,v.domElement=void 0!==o?o:document,v.enabled=!0,v.screen={left:0,top:0,width:0,height:0},v.rotateSpeed=1,v.zoomSpeed=1.2,v.panSpeed=.3,v.noRotate=!1,v.noZoom=!1,v.noPan=!1,v.noCustom=!1,v.forceState=-1,v.staticMoving=!1,v.dynamicDampingFactor=.2,v.minDistance=0,v.maxDistance=1/0,v.keys=[65,83,68],v.target=new e.Vector3;var _=new e.Vector3,b=y.NONE,w=y.NONE,x=new e.Vector3,E=new e.Vector2,S=new e.Vector2,T=new e.Vector3,M=0,k=new e.Vector2,P=new e.Vector2,C=0,A=0,O=new e.Vector2,I=new e.Vector2,R=new e.Vector2,L=new e.Vector2;v.target0=v.target.clone(),v.position0=v.object.position.clone(),v.up0=v.object.up.clone();var D={type:"change"},N={type:"start"},F={type:"end"};v.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}},v.handleEvent=function(e){"function"==typeof this[e.type]&&this[e.type](e)};var U=function(){var t=new e.Vector2;return function(e,n){return t.set((e-g.screen.left)/g.screen.width,(n-g.screen.top)/g.screen.height),t}}(),z=function(){var t=new e.Vector2;return function(e,n){return t.set((e-.5*g.screen.width-g.screen.left)/(.5*g.screen.width),(g.screen.height+2*(g.screen.top-n))/g.screen.width),t}}();return v.rotateCamera=function(){var t=new e.Vector3,n=new e.Quaternion,r=new e.Vector3,i=new e.Vector3,o=new e.Vector3,a=new e.Vector3,s=void 0;return function(){a.set(S.x-E.x,S.y-E.y,0),s=a.length(),s?(x.copy(g.object.position).sub(g.target),r.copy(x).normalize(),i.copy(g.object.up).normalize(),o.crossVectors(i,r).normalize(),i.setLength(S.y-E.y),o.setLength(S.x-E.x),a.copy(i.add(o)),t.crossVectors(a,x).normalize(),s*=g.rotateSpeed,n.setFromAxisAngle(t,s),x.applyQuaternion(n),g.object.up.applyQuaternion(n),T.copy(t),M=s):!g.staticMoving&&M&&(M*=Math.sqrt(1-g.dynamicDampingFactor),x.copy(g.object.position).sub(g.target),n.setFromAxisAngle(T,M),x.applyQuaternion(n),g.object.up.applyQuaternion(n)),E.copy(S)}}(),v.zoomCamera=function(){var e=void 0;b===y.TOUCH_ZOOM?(e=C/A,C=A,x.multiplyScalar(e)):1!==(e=1+(P.y-k.y)*g.zoomSpeed)&&e>0&&(x.multiplyScalar(e),g.staticMoving?k.copy(P):k.y+=(P.y-k.y)*this.dynamicDampingFactor)},v.panCamera=function(){var t=new e.Vector2,n=new e.Vector3,r=new e.Vector3;return function(){t.copy(I).sub(O),t.lengthSq()&&(t.multiplyScalar(x.length()*g.panSpeed),r.copy(x).cross(g.object.up).setLength(t.x),r.add(n.copy(g.object.up).setLength(t.y)),g.object.position.add(r),g.target.add(r),g.staticMoving?O.copy(I):O.add(t.subVectors(I,O).multiplyScalar(g.dynamicDampingFactor)))}}(),v.checkDistances=function(){g.noZoom&&g.noPan||(x.lengthSq()>g.maxDistance*g.maxDistance&&g.object.position.addVectors(g.target,x.setLength(g.maxDistance)),x.lengthSq()<g.minDistance*g.minDistance&&g.object.position.addVectors(g.target,x.setLength(g.minDistance)))},v.update=function(){x.subVectors(g.object.position,g.target),g.noRotate||g.rotateCamera(),g.noZoom||g.zoomCamera(),g.noPan||g.panCamera(),g.noCustom||g.custom(R,L),g.object.position.addVectors(g.target,x),g.checkDistances(),g.object.lookAt(g.target),_.distanceToSquared(g.object.position)>1e-6&&(g.dispatchEvent(D),_.copy(g.object.position))},v.reset=function(){b=y.NONE,w=y.NONE,g.target.copy(g.target0),g.object.position.copy(g.position0),g.object.up.copy(g.up0),x.subVectors(g.object.position,g.target),g.object.lookAt(g.target),g.dispatchEvent(D),_.copy(g.object.position)},v.setState=function(e){g.forceState=e,w=e,b=e},v.custom=function(e,t){},v.dispose=function(){this.domElement.removeEventListener("contextmenu",m,!1),this.domElement.removeEventListener("mousedown",l,!1),this.domElement.removeEventListener("wheel",h,!1),this.domElement.removeEventListener("touchstart",d,!1),this.domElement.removeEventListener("touchend",p,!1),this.domElement.removeEventListener("touchmove",f,!1),window.removeEventListener("keydown",a,!1),window.removeEventListener("keyup",s,!1)},v.domElement.addEventListener("contextmenu",m,!1),v.domElement.addEventListener("mousedown",l,!1),v.domElement.addEventListener("wheel",h,!1),v.domElement.addEventListener("touchstart",d,!1),v.domElement.addEventListener("touchend",p,!1),v.domElement.addEventListener("touchmove",f,!1),window.addEventListener("keydown",a,!1),window.addEventListener("keyup",s,!1),v.handleResize(),v.update(),v}return o(n,t),n}(t)}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(485),s=n(28),l=n(487),u=n(488),c=n(500),h=n(501),d=n(532),f=n(533),p=n(545),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(546),g=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),m(t,[{key:"parse",value:function(e){var t=this;return this.emit("parse-start",{file:e.url,time:new Date}),this._progressBar&&this._progressBar.update(0,100,"parse",e.url),new Promise(function(n,r){window.setTimeout(function(){n(new Promise(function(n,r){var i=e;if(Array.isArray(i)||(i=[i]),i.forEach(function(e){t._preprocess(e)}),1===i.length)i=i[0];else{var o=i.filter(t._filterByExtension.bind(null,"MHD")),a=i.filter(t._filterByExtension.bind(null,"RAW"));2===i.length&&1===o.length&&1===a.length&&(i.url=o[0].url,i.extension=o[0].extension,i.mhdBuffer=o[0].buffer,i.rawBuffer=a[0].buffer)}var s=t._parser(i.extension);s||(t.emit("parse-error",{file:e.url,time:new Date,error:i.filename+"can not be parsed."}),r(i.filename+" can not be parsed."));var c=null;try{c=new s(i,0)}catch(n){window.console.log(n),t.emit("parse-error",{file:e.url,time:new Date,error:n}),r(n)}var h=new l.a;h.seriesInstanceUID=c.seriesInstanceUID(),h.transferSyntaxUID=c.transferSyntaxUID(),h.seriesDate=c.seriesDate(),h.seriesDescription=c.seriesDescription(),h.studyDate=c.studyDate(),h.studyDescription=c.studyDescription(),h.numberOfFrames=c.numberOfFrames(),h.numberOfFrames||(h.numberOfFrames=1),h.numberOfChannels=c.numberOfChannels(),h.modality=c.modality(),"SEG"===h.modality&&(h.segmentationType=c.segmentationType(),h.segmentationSegments=c.segmentationSegments()),h.patientID=c.patientID(),h.patientName=c.patientName(),h.patientAge=c.patientAge(),h.patientBirthdate=c.patientBirthdate(),h.patientSex=c.patientSex();var d=new u.a;d.numberOfChannels=c.numberOfChannels(),d.pixelRepresentation=c.pixelRepresentation(),d.pixelType=c.pixelType(),d.invert=c.invert(),d.spacingBetweenSlices=c.spacingBetweenSlices(),d.modality=h.modality,"SEG"===d.modality&&(d.segmentationType=h.segmentationType,d.segmentationSegments=h.segmentationSegments),h.stack.push(d),setTimeout(t.parseFrame(h,d,e.url,0,c,n,r),0)}))},10)})}},{key:"parseFrame",value:function(e,t,n,r,i,o,a){var s=new c.a;s.sopInstanceUID=i.sopInstanceUID(r),s.url=n,s.index=r,s.invert=t.invert,s.frameTime=i.frameTime(r),s.rows=i.rows(r),s.columns=i.columns(r),s.numberOfChannels=t.numberOfChannels,s.pixelPaddingValue=i.pixelPaddingValue(r),s.pixelRepresentation=t.pixelRepresentation,s.pixelType=t.pixelType,s.pixelData=i.extractPixelData(r),s.pixelSpacing=i.pixelSpacing(r),s.spacingBetweenSlices=i.spacingBetweenSlices(r),s.sliceThickness=i.sliceThickness(r),s.imageOrientation=i.imageOrientation(r),s.rightHanded=i.rightHanded(),t.rightHanded=s.rightHanded,null===s.imageOrientation&&(s.imageOrientation=[1,0,0,0,1,0]),s.imagePosition=i.imagePosition(r),s.dimensionIndexValues=i.dimensionIndexValues(r),s.bitsAllocated=i.bitsAllocated(r),s.instanceNumber=i.instanceNumber(r),s.windowCenter=i.windowCenter(r),s.windowWidth=i.windowWidth(r),s.rescaleSlope=i.rescaleSlope(r),s.rescaleIntercept=i.rescaleIntercept(r),s.minMax=i.minMaxPixelData(s.pixelData),"SEG"===e.modality&&(s.referencedSegmentNumber=i.referencedSegmentNumber(r)),t.frame.push(s),this._parsed=r+1,this._totalParsed=e.numberOfFrames,this._progressBar&&this._progressBar.update(this._parsed,this._totalParsed,"parse",n),this.emit("parsing",{file:n,total:this._totalParsed,parsed:this._parsed,time:new Date}),this._parsed===this._totalParsed?(this.emit("parse-success",{file:n,total:this._totalParsed,parsed:this._parsed,time:new Date}),o(e)):setTimeout(this.parseFrame(e,t,n,this._parsed,i,o,a),0)}},{key:"_parser",value:function(e){var t=null;switch(e.toUpperCase()){case"NII":case"NII_":t=f.a;break;case"DCM":case"DICOM":case"IMA":case"":t=h.a;break;case"MHD":t=d.a;break;case"MGH":case"MGZ":t=p.a;break;default:return window.console.log("unsupported extension: "+e),!1}return t}},{key:"_preprocess",value:function(e){var t=s.a.parseUrl(e.url);if(e.filename=t.filename,e.extension=t.extension,e.pathname=t.pathname,e.query=t.query,"gz"===e.extension?(e.gzcompressed=!0,e.extension=e.filename.split(".gz").shift().split(".").pop()):"mgz"===e.extension?(e.gzcompressed=!0,e.extension="mgh"):"zraw"===e.extension?(e.gzcompressed=!0,e.extension="raw"):e.gzcompressed=!1,e.gzcompressed){var n=v.inflate(e.buffer);e.buffer=n.buffer}}},{key:"_filterByExtension",value:function(e,t){return t.extension.toUpperCase()===e.toUpperCase()}}]),t}(a.a);t.a=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(486),s=n(71),l=n.n(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.a;r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o._loaded=-1,o._totalLoaded=-1,o._parsed=-1,o._totalParsed=-1,o._data=[],o._container=e,o._progressBar=null,o._container&&n&&(o._progressBar=new n(o._container)),o}return o(t,e),u(t,[{key:"free",value:function(){this._data=[],this._container=null,this._progressBar&&(this._progressBar.free(),this._progressBar=null)}},{key:"fetch",value:function(e,t){var n=this;return new Promise(function(r,i){var o=new XMLHttpRequest;o.open("GET",e),o.crossOrigin=!0,o.responseType="arraybuffer",o.onloadstart=function(t){n.emit("fetch-start",{file:e,time:new Date})},o.onload=function(t){if(200===o.status||0===o.status){n._loaded=t.loaded,n._totalLoaded=t.total,n._progressBar&&n._progressBar.update(n._loaded,n._totalLoaded,"load",e);var a=o.response,s={url:e,buffer:a};n.emit("fetch-success",{file:e,time:new Date,totalLoaded:t.total}),r(s)}else i(o.statusText)},o.onerror=function(){n.emit("fetch-error",{file:e,time:new Date}),i(o.statusText)},o.onabort=function(t){n.emit("fetch-abort",{file:e,time:new Date}),i(o.statusText||"Aborted")},o.ontimeout=function(){n.emit("fetch-timeout",{file:e,time:new Date}),i(o.statusText)},o.onprogress=function(t){n._loaded=t.loaded,n._totalLoaded=t.total,n.emit("fetch-progress",{file:e,total:t.total,loaded:t.loaded,time:new Date}),n._progressBar&&n._progressBar.update(n._loaded,n._totalLoaded,"load",e)},o.onloadend=function(t){n.emit("fetch-end",{file:e,time:new Date})},t instanceof Map&&t.set(e,o),o.send()})}},{key:"parse",value:function(e){return new Promise(function(t,n){t(e)})}},{key:"loadSequenceGroup",value:function(e,t){var n=this,r=[];return e.forEach(function(e){r.push(n.fetch(e,t))}),Promise.all(r).then(function(e){return n.parse(e)}).then(function(e){return n._data.push(e),e}).catch(function(e){"Aborted"!==e&&(window.console.log("oops... something went wrong..."),window.console.log(e))})}},{key:"loadSequence",value:function(e,t){var n=this;return this.fetch(e,t).then(function(e){return n.parse(e)}).then(function(e){return n._data.push(e),e}).catch(function(e){"Aborted"!==e&&(window.console.log("oops... something went wrong..."),window.console.log(e))})}},{key:"load",value:function(e,t){var n=this;Array.isArray(e)||(e=[e]),this._progressBar&&(this._progressBar.totalFiles=e.length,this._progressBar.requests=t),this.emit("load-start",{files:e,time:new Date});var r=[];return e.forEach(function(e){Array.isArray(e)?r.push(n.loadSequenceGroup(e,t)):r.push(n.loadSequence(e,t))}),Promise.all(r)}},{key:"data",set:function(e){this._data=e},get:function(){return this._data}}]),t}(l.a);t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this._container=t,this._modes={load:{name:"load",color:"#FFF56F"},parse:{name:"parse",color:"#2196F3"}},this.requestAnimationFrameID=null,this._mode=null,this._value=null,this._total=null,this._totalFiles=null,this.init()}return i(e,[{key:"free",value:function(){var e=this._container.getElementsByClassName("progress container");e.length>0&&e[0].parentNode.removeChild(e[0]),e=null,window.cancelAnimationFrame(this.requestAnimationFrameID)}},{key:"init",value:function(){var e=this._domContainer();for(var t in this._modes)if(this._modes.hasOwnProperty(t)){var n=this._domBar(this._modes[t]);e.appendChild(n),n=null}this._container.appendChild(e),e=null,this.updateUI()}},{key:"update",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._mode=n,this._value=e,0===t?(this._total=e,this._value=Math.random()*e):this._total=t}},{key:"updateUI",value:function(){var e=this;if(this.requestAnimationFrameID=requestAnimationFrame(function(){e.updateUI()}),!(this._modes.hasOwnProperty(this._mode)&&this._modes[this._mode].hasOwnProperty("name")&&this._modes[this._mode].hasOwnProperty("color")))return!1;var t=Math.round(this._value/this._total*100),n=this._modes[this._mode].color,r=this._container.getElementsByClassName("progress "+this._modes[this._mode].name);r.length>0&&(r[0].style.borderColor=n,r[0].style.width=t+"%"),r=null}},{key:"_domContainer",value:function(){var e=document.createElement("div");return e.classList.add("progress"),e.classList.add("container"),e.style.width="100%",e.style.height="8px",e.style.position="absolute",e.style.backgroundColor="rgba(158, 158, 158, 0.5)",e.style.top="0",e.style.zIndex="1",e}},{key:"_domBar",value:function(e){if(!e.hasOwnProperty("name")||!e.hasOwnProperty("color"))return window.console.log("Invalid mode provided."),window.console.log(e),!1;var t=document.createElement("div");return t.classList.add(e.name),t.classList.add("progress"),t.style.border="2px solid "+e.color,t.style.width="0%",t}},{key:"totalFiles",set:function(e){this._totalFiles=e},get:function(){return this._totalFiles}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(109),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._concatenationUID=-1,e._seriesInstanceUID=-1,e._transferSyntaxUID="",e._seriesNumber=-1,e._seriesDescription="",e._seriesDate="",e._studyDescription="",e._studyDate="",e._accessionNumber=-1,e._modality="Modality not set",e._dimensionIndexSequence=[],e._numberOfFrames=0,e._numberOfChannels=1,e._patientID="",e._patientName="",e._patientAge="",e._patientBirthdate="",e._patientSex="",e._segmentationType=null,e._segmentationSegments=[],e._stack=[],e}return o(t,e),s(t,[{key:"validate",value:function(e){return!!(l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"validate",this).call(this,e)&&"function"===typeof e.mergeSeries&&e.hasOwnProperty("_seriesInstanceUID")&&e.hasOwnProperty("_numberOfFrames")&&e.hasOwnProperty("_numberOfChannels")&&e.hasOwnProperty("_stack")&&"undefined"!==typeof e._stack&&Array===e._stack.constructor)}},{key:"merge",value:function(e){return!!this.validate(e)&&(this._seriesInstanceUID===e.seriesInstanceUID&&(e.stack[0]&&(0===this._stack[0]._numberOfFrames&&this._stack[0].computeNumberOfFrames(),this._stack[0].computeCosines(),0===e.stack[0]._numberOfFrames&&e.stack[0].computeNumberOfFrames(),e.stack[0].computeCosines()),this.mergeModels(this._stack,e.stack)))}},{key:"mergeSeries",value:function(e){var t=[this];return this.mergeModels(t,e),t}},{key:"seriesInstanceUID",set:function(e){this._seriesInstanceUID=e},get:function(){return this._seriesInstanceUID}},{key:"transferSyntaxUID",set:function(e){this._transferSyntaxUID=e},get:function(){return this._transferSyntaxUID}},{key:"transferSyntaxUIDLabel",get:function(){switch(this._transferSyntaxUID){case"1.2.840.10008.1.2.4.90":return"JPEG 2000 Lossless";case"1.2.840.10008.1.2.4.91":return"JPEG 2000 Lossy";case"1.2.840.10008.1.2.4.57":return"JPEG Lossless, Nonhierarchical (Processes 14)";case"1.2.840.10008.1.2.4.70":return"JPEG Lossless, Nonhierarchical (Processes 14 [Selection 1])";case"1.2.840.10008.1.2.4.50":return"JPEG Baseline lossy process 1 (8 bit)";case"1.2.840.10008.1.2.4.51":return"JPEG Baseline lossy process 2 & 4 (12 bit)";case"1.2.840.10008.1.2":return"Implicit VR Little Endian";case"1.2.840.10008.1.2.1":return"Explicit VR Little Endian";case"1.2.840.10008.1.2.2":return"Explicit VR Big Endian";default:return"Unknown transfersyntax: "+this._transferSyntaxUID}}},{key:"studyDate",set:function(e){this._studyDate=e},get:function(){return this._studyDate}},{key:"studyDescription",set:function(e){this._studyDescription=e},get:function(){return this._studyDescription}},{key:"seriesDate",set:function(e){this._seriesDate=e},get:function(){return this._seriesDate}},{key:"seriesDescription",set:function(e){this._seriesDescription=e},get:function(){return this._seriesDescription}},{key:"patientID",set:function(e){this._patientID=e},get:function(){return this._patientID}},{key:"patientName",set:function(e){this._patientName=e},get:function(){return this._patientName}},{key:"patientAge",set:function(e){this._patientAge=e},get:function(){return this._patientAge}},{key:"patientBirthdate",set:function(e){this._patientBirthdate=e},get:function(){return this._patientBirthdate}},{key:"patientSex",set:function(e){this._patientSex=e},get:function(){return this._patientSex}},{key:"numberOfFrames",set:function(e){this._numberOfFrames=e},get:function(){return this._numberOfFrames}},{key:"numberOfChannels",set:function(e){this._numberOfChannels=e},get:function(){return this._numberOfChannels}},{key:"stack",set:function(e){this._stack=e},get:function(){return this._stack}},{key:"modality",set:function(e){this._modality=e},get:function(){return this._modality}},{key:"segmentationType",set:function(e){this._segmentationType=e},get:function(){return this._segmentationType}},{key:"segmentationSegments",set:function(e){this._segmentationSegments=e},get:function(){return this._segmentationSegments}}]),t}(a.a);t.a=u},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(19),l=n(489),u=n(28),c=n(109),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(490),f=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._uid=null,e._stackID=-1,e._frame=[],e._numberOfFrames=0,e._rows=0,e._columns=0,e._numberOfChannels=1,e._bitsAllocated=8,e._pixelType=0,e._pixelRepresentation=0,e._textureSize=4096,e._nbTextures=7,e._rawData=[],e._windowCenter=0,e._windowWidth=0,e._rescaleSlope=1,e._rescaleIntercept=0,e._minMax=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],e._regMatrix=new s.h,e._ijk2LPS=null,e._lps2IJK=null,e._aabb2LPS=null,e._lps2AABB=null,e._dimensionsIJK=null,e._halfDimensionsIJK=null,e._spacing=new s.q(1,1,1),e._spacingBetweenSlices=0,e._sliceThickness=0,e._origin=null,e._rightHanded=!0,e._xCosine=new s.q(1,0,0),e._yCosine=new s.q(0,1,0),e._zCosine=new s.q(0,0,1),e._prepared=!1,e._packed=!1,e._packedPerPixel=1,e._modality="Modality not set",e._segmentationType=null,e._segmentationSegments=[],e._segmentationDefaultColor=[63,174,128],e._frameSegment=[],e._segmentationLUT=[],e._segmentationLUTO=[],e._invert=!1,e}return a(t,e),h(t,[{key:"prepareSegmentation",value:function(){this._frameSegment=this._frame;var e=[];this.computeCosines(),this._frame.map(this._computeDistanceArrayMap.bind(null,this._zCosine)),this._frame.sort(this._sortDistanceArraySort);for(var t=-1,n=0;n<this._frame.length;n++){if(e[t]&&e[t]._dist==this._frame[n]._dist)for(var i=0;i<e[t]._rows*e[t]._columns;i++)e[t]._pixelData[i]+=this._frame[n].pixelData[i]*this._frame[n]._referencedSegmentNumber;else{e.push(this._frame[n]),t++;for(var o=0;o<e[t]._rows*e[t]._columns;o++)e[t]._pixelData[o]*=this._frame[n]._referencedSegmentNumber}e[t].minMax=u.a.minMax(e[t]._pixelData)}for(var a={},s=0,c=0;c<this._segmentationSegments.length;c++){s=Math.max(s,parseInt(this._segmentationSegments[c].segmentNumber,10));var h=this._segmentationSegments[c].recommendedDisplayCIELab;a[this._segmentationSegments[c].segmentNumber]=null===h?this._segmentationDefaultColor:l.a.cielab2RGB.apply(l.a,r(h))}for(var d=0;d<=s;d++){var f=d/s,p=d?1:0,m=[0,0,0];a.hasOwnProperty(d.toString())&&(m=a[d.toString()]),m[0]/=255,m[1]/=255,m[2]/=255,this._segmentationLUT.push([f].concat(r(m))),this._segmentationLUTO.push([f,p])}this._frame=e}},{key:"prepare",value:function(){"SEG"===this._modality&&this.prepareSegmentation(),this.computeNumberOfFrames(),this._rows=this._frame[0].rows,this._columns=this._frame[0].columns,this._dimensionsIJK=new s.q(this._columns,this._rows,this._numberOfFrames),this._halfDimensionsIJK=new s.q(this._dimensionsIJK.x/2,this._dimensionsIJK.y/2,this._dimensionsIJK.z/2),this._spacingBetweenSlices=this._frame[0].spacingBetweenSlices,this._sliceThickness=this._frame[0].sliceThickness,this.computeCosines(),this._numberOfFrames>1&&this.orderFrames(),this.computeSpacing(),this._frame[0].imagePosition||(this._frame[0].imagePosition=[0,0,0]),this._frame[0].imageOrientation||(this._frame[0].imageOrientation=[1,0,0,0,1,0]),this._origin=this._arrayToVector3(this._frame[0].imagePosition,0),this.computeIJK2LPS(),this.computeLPS2AABB();var e=Math.floor(this._frame.length/2),t=this._frame[e];this._rescaleSlope=t.rescaleSlope||1,this._rescaleIntercept=t.rescaleIntercept||0,this.computeMinMaxIntensities(),this._minMax[0]=u.a.rescaleSlopeIntercept(this._minMax[0],this._rescaleSlope,this._rescaleIntercept),this._minMax[1]=u.a.rescaleSlopeIntercept(this._minMax[1],this._rescaleSlope,this._rescaleIntercept),this._windowWidth=t.windowWidth||this._minMax[1]-this._minMax[0],this._windowCenter=t.windowCenter||this._minMax[0]+this._windowWidth/2,this._bitsAllocated=t.bitsAllocated,this._prepared=!0}},{key:"packEchos",value:function(){for(var e=[],t=0;t<this._frame.length;t+=4){for(var n=this._frame[t],r=0;r<this._rows*this._columns;r++){for(var i=1;i<4;i++)n.pixelData[r]+=this._frame[t+i].pixelData[r];n.pixelData[r]/=4}e.push(n)}this._frame=e,this._numberOfFrames=this._frame.length,this._dimensionsIJK=new s.q(this._columns,this._rows,this._numberOfFrames),this._halfDimensionsIJK=new s.q(this._dimensionsIJK.x/2,this._dimensionsIJK.y/2,this._dimensionsIJK.z/2)}},{key:"computeNumberOfFrames",value:function(){if(!(this._frame&&this._frame.length>0))return window.console.warn("_frame doesn't contain anything...."),window.console.warn(this._frame),!1;this._numberOfFrames=this._frame.length}},{key:"computeCosines",value:function(){if(this._frame&&this._frame[0]){var e=this._frame[0].cosines();this._xCosine=e[0],this._yCosine=e[1],this._zCosine=e[2]}}},{key:"orderFrames",value:function(){this._frame[0].dimensionIndexValues?this._frame.sort(this._orderFrameOnDimensionIndicesArraySort):this._frame[0].imagePosition&&this._frame[0].imageOrientation&&this._frame[1]&&this._frame[1].imagePosition&&this._frame[1].imageOrientation&&this._frame[0].imagePosition.join()!==this._frame[1].imagePosition.join()?(this._frame.map(this._computeDistanceArrayMap.bind(null,this._zCosine)),this._frame.sort(this._sortDistanceArraySort)):null!==this._frame[0].instanceNumber&&this._frame[1]&&null!==this._frame[1].instanceNumber&&this._frame[0].instanceNumber!==this._frame[1].instanceNumber?this._frame.sort(this._sortInstanceNumberArraySort):this._frame[0].sopInstanceUID&&this._frame[1]&&this._frame[1].sopInstanceUID&&this._frame[0].sopInstanceUID!==this._frame[1].sopInstanceUID?this._frame.sort(this._sortSopInstanceUIDArraySort):this._frame[0].imagePosition&&window.console.warn("do not know how to order the frames...")}},{key:"computeSpacing",value:function(){this.xySpacing(),this.zSpacing()}},{key:"zSpacing",value:function(){this._numberOfFrames>1&&(this._frame[0].pixelSpacing&&this._frame[0].pixelSpacing[2]?this._spacing.z=this._frame[0].pixelSpacing[2]:(this._frame.map(this._computeDistanceArrayMap.bind(null,this._zCosine)),this._frame[1].dist!==this._frame[0].dist?(this._frame.sort(this._sortDistanceArraySort),this._spacing.z=this._frame[1].dist-this._frame[0].dist):this._spacingBetweenSlices?this._spacing.z=this._spacingBetweenSlices:this._frame[0].sliceThickness&&(this._spacing.z=this._frame[0].sliceThickness))),0===this._spacing.z&&(this._spacing.z=1)}},{key:"xySpacing",value:function(){if(this._frame&&this._frame[0]){var e=this._frame[0].spacingXY();this._spacing.x=e[0],this._spacing.y=e[1]}}},{key:"computeMinMaxIntensities",value:function(){for(var e=0;e<this._frame.length;e++){var t=this._frame[e].minMax[0];Number.isNaN(t)||(this._minMax[0]=Math.min(this._minMax[0],t));var n=this._frame[e].minMax[1];Number.isNaN(n)||(this._minMax[1]=Math.max(this._minMax[1],n))}}},{key:"computeIJK2LPS",value:function(){this._ijk2LPS=u.a.ijk2LPS(this._xCosine,this._yCosine,this._zCosine,this._spacing,this._origin,this._regMatrix),this._lps2IJK=new s.h,this._lps2IJK.getInverse(this._ijk2LPS)}},{key:"computeLPS2AABB",value:function(){this._aabb2LPS=u.a.aabb2LPS(this._xCosine,this._yCosine,this._zCosine,this._origin),this._lps2AABB=new s.h,this._lps2AABB.getInverse(this._aabb2LPS)}},{key:"merge",value:function(e){return!!(this._stackID===e.stackID&&1===this._numberOfFrames&&1===e._numberOfFrames&&this._frame[0].columns===e.frame[0].columns&&this._frame[0].rows===e.frame[0].rows&&this._xCosine.equals(e.xCosine)&&this._yCosine.equals(e.yCosine)&&this._zCosine.equals(e.zCosine))&&this.mergeModels(this._frame,e.frame)}},{key:"pack",value:function(){var e=this._dimensionsIJK.x*this._dimensionsIJK.y*this._dimensionsIJK.z;(8===this._bitsAllocated&&1===this._numberOfChannels||1===this._bitsAllocated)&&(this._packedPerPixel=4),16===this._bitsAllocated&&1===this._numberOfChannels&&(this._packedPerPixel=2);var t=this._textureSize*this._textureSize,n=Math.ceil(e/(t*this._packedPerPixel)),r=0,i=this._packedPerPixel*t;i>e&&(i=e);for(var o=0;o<n;o++){var a=this._packTo8Bits(this._numberOfChannels,this._frame,this._textureSize,r,i);this._textureType=a.textureType,this._rawData.push(a.data),r+=this._packedPerPixel*t,i+=this._packedPerPixel*t,i>e&&(i=e)}this._packed=!0}},{key:"_packTo8Bits",value:function(e,t,n,r,i){var o={textureType:null,data:null},a=t[0].bitsAllocated,l=t[0].pixelType,u=0;this._minMax[0]<0&&(u-=this._minMax[0]);var c=0,h=0,f=0,p=t[0].rows*t[0].columns;if(8===a&&1===e||1===a){for(var m=new Uint8Array(n*n*4),v=0,g=0,y=r;y<i;y++){h=~~(y/p),f=y%p;var _=t[h].pixelData[f]+u;Number.isNaN(_)||(m[4*v+g]=_),c++,v=Math.floor(c/4),g=c%4}o.textureType=s.l,o.data=m}else if(16===a&&1===e){for(var b=new Uint8Array(n*n*4),w=0,x=0,E=r;E<i;E++){h=~~(E/p),f=E%p;var S=t[h].pixelData[f]+u;Number.isNaN(S)||(b[4*w+2*x]=255&S,b[4*w+2*x+1]=S>>>8&255),c++,w=Math.floor(c/2),x=c%2}o.textureType=s.l,o.data=b}else if(32===a&&1===e&&0===l){for(var T=new Uint8Array(n*n*4),M=r;M<i;M++){h=~~(M/p),f=M%p;var k=t[h].pixelData[f]+u;Number.isNaN(k)||(T[4*c]=255&k,T[4*c+1]=k>>>8&255,T[4*c+2]=k>>>16&255,T[4*c+3]=k>>>24&255),c++}o.textureType=s.l,o.data=T}else if(32===a&&1===e&&1===l){for(var P=new Uint8Array(n*n*4),C=r;C<i;C++){h=~~(C/p),f=C%p;var A=t[h].pixelData[f]+u;if(!Number.isNaN(A)){var O=d(A),I=O.match(/.{1,8}/g);P[4*c]=parseInt(I[0],2),P[4*c+1]=parseInt(I[1],2),P[4*c+2]=parseInt(I[2],2),P[4*c+3]=parseInt(I[3],2)}c++}o.textureType=s.l,o.data=P}else if(8===a&&3===e){for(var R=new Uint8Array(n*n*3),L=r;L<i;L++)h=~~(L/p),f=L%p,R[3*c]=t[h].pixelData[3*f],R[3*c+1]=t[h].pixelData[3*f+1],R[3*c+2]=t[h].pixelData[3*f+2],c++;o.textureType=s.m,o.data=R}return o}},{key:"worldCenter",value:function(){return this._halfDimensionsIJK.clone().addScalar(-.5).applyMatrix4(this._ijk2LPS)}},{key:"worldBoundingBox",value:function(){for(var e=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],t=this._dimensionsIJK,n=0;n<=t.x;n+=t.x)for(var r=0;r<=t.y;r+=t.y)for(var i=0;i<=t.z;i+=t.z){var o=new s.q(n,r,i).applyMatrix4(this._ijk2LPS);e=[Math.min(e[0],o.x),Math.max(e[1],o.x),Math.min(e[2],o.y),Math.max(e[3],o.y),Math.min(e[4],o.z),Math.max(e[5],o.z)]}return e}},{key:"AABBox",value:function(){var e=(new s.q).addScalar(-.5).applyMatrix4(this._ijk2LPS).applyMatrix4(this._lps2AABB),t=this._dimensionsIJK.clone().addScalar(-.5).applyMatrix4(this._ijk2LPS).applyMatrix4(this._lps2AABB);return new s.q(Math.abs(e.x-t.x),Math.abs(e.y-t.y),Math.abs(e.z-t.z))}},{key:"centerAABBox",value:function(){var e=this.worldCenter();return e.applyMatrix4(this._lps2AABB),e}},{key:"_arrayToVector3",value:function(e,t){return new s.q(e[t],e[t+1],e[t+2])}},{key:"_orderFrameOnDimensionIndicesArraySort",value:function(e,t){if("dimensionIndexValues"in e&&"[object Array]"===Object.prototype.toString.call(e.dimensionIndexValues)&&"dimensionIndexValues"in t&&"[object Array]"===Object.prototype.toString.call(t.dimensionIndexValues))for(var n=0;n<e.dimensionIndexValues.length;n++){if(parseInt(e.dimensionIndexValues[n],10)>parseInt(t.dimensionIndexValues[n],10))return 1;if(parseInt(e.dimensionIndexValues[n],10)<parseInt(t.dimensionIndexValues[n],10))return-1}else window.console.warn("One of the frames doesn't have a dimensionIndexValues array."),window.console.warn(e),window.console.warn(t);return 0}},{key:"_computeDistanceArrayMap",value:function(e,t){return t.imagePosition&&(t.dist=t.imagePosition[0]*e.x+t.imagePosition[1]*e.y+t.imagePosition[2]*e.z),t}},{key:"_sortDistanceArraySort",value:function(e,t){return e.dist-t.dist}},{key:"_sortInstanceNumberArraySort",value:function(e,t){return e.instanceNumber-t.instanceNumber}},{key:"_sortSopInstanceUIDArraySort",value:function(e,t){return e.sopInstanceUID-t.sopInstanceUID}},{key:"numberOfChannels",set:function(e){this._numberOfChannels=e},get:function(){return this._numberOfChannels}},{key:"frame",set:function(e){this._frame=e},get:function(){return this._frame}},{key:"prepared",set:function(e){this._prepared=e},get:function(){return this._prepared}},{key:"packed",set:function(e){this._packed=e},get:function(){return this._packed}},{key:"packedPerPixel",set:function(e){this._packedPerPixel=e},get:function(){return this._packedPerPixel}},{key:"dimensionsIJK",set:function(e){this._dimensionsIJK=e},get:function(){return this._dimensionsIJK}},{key:"halfDimensionsIJK",set:function(e){this._halfDimensionsIJK=e},get:function(){return this._halfDimensionsIJK}},{key:"regMatrix",set:function(e){this._regMatrix=e},get:function(){return this._regMatrix}},{key:"ijk2LPS",set:function(e){this._ijk2LPS=e},get:function(){return this._ijk2LPS}},{key:"lps2IJK",set:function(e){this._lps2IJK=e},get:function(){return this._lps2IJK}},{key:"lps2AABB",set:function(e){this._lps2AABB=e},get:function(){return this._lps2AABB}},{key:"textureSize",set:function(e){this._textureSize=e},get:function(){return this._textureSize}},{key:"textureType",set:function(e){this._textureType=e},get:function(){return this._textureType}},{key:"bitsAllocated",set:function(e){this._bitsAllocated=e},get:function(){return this._bitsAllocated}},{key:"rawData",set:function(e){this._rawData=e},get:function(){return this._rawData}},{key:"windowWidth",get:function(){return this._windowWidth},set:function(e){this._windowWidth=e}},{key:"windowCenter",get:function(){return this._windowCenter},set:function(e){this._windowCenter=e}},{key:"rescaleSlope",get:function(){return this._rescaleSlope},set:function(e){this._rescaleSlope=e}},{key:"rescaleIntercept",get:function(){return this._rescaleIntercept},set:function(e){this._rescaleIntercept=e}},{key:"xCosine",get:function(){return this._xCosine},set:function(e){this._xCosine=e}},{key:"yCosine",get:function(){return this._yCosine},set:function(e){this._yCosine=e}},{key:"zCosine",get:function(){return this._zCosine},set:function(e){this._zCosine=e}},{key:"minMax",get:function(){return this._minMax},set:function(e){this._minMax=e}},{key:"stackID",get:function(){return this._stackID},set:function(e){this._stackID=e}},{key:"pixelType",get:function(){return this._pixelType},set:function(e){this._pixelType=e}},{key:"pixelRepresentation",get:function(){return this._pixelRepresentation},set:function(e){this._pixelRepresentation=e}},{key:"invert",set:function(e){this._invert=e},get:function(){return this._invert}},{key:"modality",set:function(e){this._modality=e},get:function(){return this._modality}},{key:"rightHanded",get:function(){return this._rightHanded},set:function(e){this._rightHanded=e}},{key:"spacingBetweenSlices",get:function(){return this._spacingBetweenSlices},set:function(e){this._spacingBetweenSlices=e}},{key:"segmentationSegments",set:function(e){this._segmentationSegments=e},get:function(){return this._segmentationSegments}},{key:"segmentationType",set:function(e){this._segmentationType=e},get:function(){return this._segmentationType}},{key:"segmentationLUT",set:function(e){this._segmentationLUT=e},get:function(){return this._segmentationLUT}},{key:"segmentationLUTO",set:function(e){this._segmentationLUTO=e},get:function(){return this._segmentationLUTO}}],[{key:"indexInDimensions",value:function(e,t){return e.x>=0&&e.y>=0&&e.z>=0&&e.x<t.x&&e.y<t.y&&e.z<t.z}},{key:"value",value:function(e,t){return window.console.warn("models.stack.value is deprecated.\n       Please use core.utils.value instead."),u.a.value(e,t)}},{key:"valueRescaleSlopeIntercept",value:function(e,t,n){return window.console.warn("models.stack.valueRescaleSlopeIntercept is deprecated.\n       Please use core.utils.rescaleSlopeIntercept instead."),u.a.rescaleSlopeIntercept(e,t,n)}},{key:"worldToData",value:function(e,t){return window.console.warn("models.stack.worldToData is deprecated.\n       Please use core.utils.worldToData instead."),u.a.worldToData(e._lps2IJK,t)}}]),t}(c.a);t.a=f},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){i(this,e)}return o(e,null,[{key:"cielab2XYZ",value:function(e,t,n){var r=(e+16)/116,i=t/500+r,o=r-n/200;return r=Math.pow(r,3)>.008856?Math.pow(r,3):(r-16/116)/7.787,i=Math.pow(i,3)>.008856?Math.pow(i,3):(i-16/116)/7.787,o=Math.pow(o,3)>.008856?Math.pow(o,3):(o-16/116)/7.787,[95.047*i,100*r,108.883*o]}},{key:"xyz2RGB",value:function(e,t,n){e/=100,t/=100,n/=100;var r=3.2406*e+-1.5372*t+-.4986*n,i=-.9689*e+1.8758*t+.0415*n,o=.0557*e+-.204*t+1.057*n;return r>.0031308?r=1.055*Math.pow(r,1/2.4)-.055:r*=12.92,i>.0031308?i=1.055*Math.pow(i,1/2.4)-.055:i*=12.92,o>.0031308?o=1.055*Math.pow(o,1/2.4)-.055:o*=12.92,r*=255,i*=255,o*=255,[r,i,o]}},{key:"cielab2RGB",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(e>=0&&e<=100))return null;var i=this.cielab2XYZ(e,t,n);return this.xyz2RGB.apply(this,r(i))}}]),e}();t.a=a},function(e,t,n){"use strict";function r(e){var t,n,r,p,m,v,g;if(n=e<0||1/e===o?"1":"0",e===i||e===o)return p=c("1",8),r=c("0",23),n+p+r;if(e!==e)return p=c("1",8),r="1"+c("0",22),n+p+r;if(0===e)return p=c("0",8),r=c("0",23),n+p+r;if(e=a(e),m=s(e),v=e-m,m=h(m),v=d(v),m)p=m.length-1;else{for(g=0;g<v.length;g++)if("1"===v[g]){t=g+1;break}p=-t}return r=m+v,p<0?(p<=-f&&(t=f-1),r=r.substring(t)):r=r.substring(1),p=h(p+f),p=u(p,8,"0"),r=l(r,23,"0").substring(0,23),n+p+r}var i=n(491),o=n(492),a=n(493),s=n(172),l=n(494),u=n(497),c=n(112),h=n(498),d=n(499),f=127;e.exports=r},function(e,t,n){"use strict";var r=new Float32Array(1);new Uint32Array(r.buffer)[0]=2139095040,e.exports=r[0]},function(e,t,n){"use strict";var r=new Float32Array(1);new Uint32Array(r.buffer)[0]=4286578688,e.exports=r[0]},function(e,t,n){"use strict";function r(e){return e<0?-e:0===e?0:e}e.exports=r},function(e,t,n){"use strict";function r(e,t,n){var r,u;if(!i(e))throw new TypeError("invalid input argument. First argument must be a string. Value: `"+e+"`.");if(!o(t))throw new TypeError("invalid input argument. Second argument must be a nonnegative integer. Value: `"+t+"`.");if(arguments.length>2){if(u=n,!i(u))throw new TypeError("invalid input argument. Third argument must be a string. Value: `"+u+"`.");if(0===u.length)throw new RangeError("invalid input argument. Pad string must not be an empty string.")}else u=" ";if(t>l)throw new RangeError("invalid input argument. Output string length exceeds maximum allowed string length.");return(r=(t-e.length)/u.length)<=0?e:(r=a(r),e+s(u,r))}var i=n(110),o=n(111),a=n(173),s=n(112),l=9007199254740991;e.exports=r},function(e,t,n){"use strict";function r(e){return i(e)&&e%1===0}var i=n(496);e.exports=r},function(e,t,n){"use strict";function r(e){return("number"===typeof e||"[object Number]"===Object.prototype.toString.call(e))&&e.valueOf()===e.valueOf()}e.exports=r},function(e,t,n){"use strict";function r(e,t,n){var r,u;if(!i(e))throw new TypeError("invalid input argument. First argument must be a string. Value: `"+e+"`.");if(!o(t))throw new TypeError("invalid input argument. Second argument must be a nonnegative integer. Value: `"+t+"`.");if(arguments.length>2){if(u=n,!i(u))throw new TypeError("invalid input argument. Third argument must be a string. Value: `"+u+"`.");if(0===u.length)throw new RangeError("invalid input argument. Pad string must not be an empty string.")}else u=" ";if(t>l)throw new RangeError("invalid input argument. Output string length exceeds maximum allowed string length.");return(r=(t-e.length)/u.length)<=0?e:(r=a(r),s(u,r)+e)}var i=n(110),o=n(111),a=n(173),s=n(112),l=9007199254740991;e.exports=r},function(e,t,n){"use strict";function r(e){for(var t,n="";e>0;)t=e/2,e=i(t),n=t===e?"0"+n:"1"+n;return n}var i=n(172);e.exports=r},function(e,t,n){"use strict";function r(e){var t,n,r,a;if(t="",0===e)return t;for(a=i,r=0;r<i&&(n=2*e,n>=1?(e=n-1,t+="1",a===i&&(a=r)):(e=n,t+="0"),!(1===n||r-a>o));r++);return t}var i=149,o=24;e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(109),s=n(19),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._sopInstanceUID=null,e._url=null,e._stackID=-1,e._invert=!1,e._frameTime=null,e._rows=0,e._columns=0,e._dimensionIndexValues=[],e._imagePosition=null,e._imageOrientation=null,e._rightHanded=!0,e._sliceThickness=1,e._spacingBetweenSlices=null,e._pixelPaddingValue=null,e._pixelRepresentation=0,e._pixelType=0,e._pixelSpacing=null,e._pixelAspectRatio=null,e._pixelData=null,e._instanceNumber=null,e._windowCenter=null,e._windowWidth=null,e._rescaleSlope=null,e._rescaleIntercept=null,e._bitsAllocated=8,e._numberOfChannels=1,e._minMax=null,e._dist=null,e._index=-1,e._referencedSegmentNumber=-1,e}return o(t,e),l(t,[{key:"validate",value:function(e){return!!(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"validate",this).call(this,e)&&"function"===typeof e.cosines&&"function"===typeof e.spacingXY&&e.hasOwnProperty("_sopInstanceUID")&&e.hasOwnProperty("_dimensionIndexValues")&&e.hasOwnProperty("_imageOrientation")&&e.hasOwnProperty("_imagePosition"))}},{key:"merge",value:function(e){return!!this.validate(e)&&!!(this._compareArrays(this._dimensionIndexValues,e.dimensionIndexValues)&&this._compareArrays(this._imageOrientation,e.imageOrientation)&&this._compareArrays(this._imagePosition,e.imagePosition)&&this._instanceNumber===e.instanceNumber&&this._sopInstanceUID===e.sopInstanceUID)}},{key:"cosines",value:function(){var e=[new s.q(1,0,0),new s.q(0,1,0),new s.q(0,0,1)];if(this._imageOrientation&&6===this._imageOrientation.length){var t=new s.q(this._imageOrientation[0],this._imageOrientation[1],this._imageOrientation[2]),n=new s.q(this._imageOrientation[3],this._imageOrientation[4],this._imageOrientation[5]);t.length()>0&&n.length()>0&&(e[0]=t,e[1]=n,e[2]=new s.q(0,0,0).crossVectors(e[0],e[1]).normalize())}else window.console.log("No valid image orientation for frame"),window.console.log(this),window.console.log("Returning default orientation.");return this._rightHanded||e[2].negate(),e}},{key:"spacingXY",value:function(){var e=[1,1];return this.pixelSpacing?(e[0]=this.pixelSpacing[0],e[1]=this.pixelSpacing[1]):this.pixelAspectRatio&&(e[0]=1,e[1]=1*this.pixelAspectRatio[1]/this.pixelAspectRatio[0]),e}},{key:"getPixelData",value:function(e,t){return e>=0&&e<this._columns&&t>=0&&t<this._rows?this.pixelData[e+this._columns*t]:null}},{key:"setPixelData",value:function(e,t,n){this.pixelData[e+this._columns*t]=n}},{key:"getImageDataUrl",value:function(){var e=document.createElement("canvas");e.width=this._columns,e.height=this._rows;var t=e.getContext("2d"),n=t.createImageData(e.width,e.height);return n.data.set(this._frameToCanvas()),t.putImageData(n,0,0),e.toDataURL()}},{key:"_frameToCanvas",value:function(){var e=this._columns*this._rows,t={invert:this._invert,min:this._minMax[0],padding:this._pixelPaddingValue},n=new Uint8Array(4*e);if(null!==t.padding){t.min=this._minMax[1];for(var r=0,i=this._pixelData.length;r<i;r++)this._pixelData[r]!==t.padding&&(t.min=Math.min(t.min,this._pixelData[r]))}if(this._windowWidth&&null!==this._windowCenter){var o=this._rescaleIntercept||0,a=this._rescaleSlope||1;t.min=Math.max((this._windowCenter-this._windowWidth/2-o)/a,t.min),t.max=Math.min((this._windowCenter+this._windowWidth/2-o)/a,this._minMax[1])}else t.max=this._minMax[1];if(t.range=t.max-t.min||255,1===this._numberOfChannels)for(var s=0;s<e;s++){var l=this._pixelTo8Bit(this._pixelData[s],t);n[4*s]=l,n[4*s+1]=l,n[4*s+2]=l,n[4*s+3]=255}else if(3===this._numberOfChannels)for(var u=0;u<e;u++)n[4*u]=this._pixelTo8Bit(this._pixelData[3*u],t),n[4*u+1]=this._pixelTo8Bit(this._pixelData[3*u+1],t),n[4*u+2]=this._pixelTo8Bit(this._pixelData[3*u+2],t),n[4*u+3]=255;return n}},{key:"_pixelTo8Bit",value:function(e,t){var n=e<=t.min||e===t.padding?0:255;return e>t.min&&e<t.max&&(n=Math.round(255*(e-t.min)/t.range)),Number.isNaN(n)?0:t.invert?255-n:n}},{key:"_compareArrays",value:function(e,t){return e===t||!(!e||!t||e.join()!==t.join())}},{key:"frameTime",get:function(){return this._frameTime},set:function(e){this._frameTime=e}},{key:"rows",get:function(){return this._rows},set:function(e){this._rows=e}},{key:"columns",get:function(){return this._columns},set:function(e){this._columns=e}},{key:"spacingBetweenSlices",get:function(){return this._spacingBetweenSlices},set:function(e){this._spacingBetweenSlices=e}},{key:"sliceThickness",get:function(){return this._sliceThickness},set:function(e){this._sliceThickness=e}},{key:"imagePosition",get:function(){return this._imagePosition},set:function(e){this._imagePosition=e}},{key:"imageOrientation",get:function(){return this._imageOrientation},set:function(e){this._imageOrientation=e}},{key:"windowWidth",get:function(){return this._windowWidth},set:function(e){this._windowWidth=e}},{key:"windowCenter",get:function(){return this._windowCenter},set:function(e){this._windowCenter=e}},{key:"rescaleSlope",get:function(){return this._rescaleSlope},set:function(e){this._rescaleSlope=e}},{key:"rescaleIntercept",get:function(){return this._rescaleIntercept},set:function(e){this._rescaleIntercept=e}},{key:"bitsAllocated",get:function(){return this._bitsAllocated},set:function(e){this._bitsAllocated=e}},{key:"dist",get:function(){return this._dist},set:function(e){this._dist=e}},{key:"pixelSpacing",get:function(){return this._pixelSpacing},set:function(e){this._pixelSpacing=e}},{key:"pixelAspectRatio",get:function(){return this._pixelAspectRatio},set:function(e){this._pixelAspectRatio=e}},{key:"minMax",get:function(){return this._minMax},set:function(e){this._minMax=e}},{key:"dimensionIndexValues",get:function(){return this._dimensionIndexValues},set:function(e){this._dimensionIndexValues=e}},{key:"instanceNumber",get:function(){return this._instanceNumber},set:function(e){this._instanceNumber=e}},{key:"pixelData",get:function(){return this._pixelData},set:function(e){this._pixelData=e}},{key:"sopInstanceUID",set:function(e){this._sopInstanceUID=e},get:function(){return this._sopInstanceUID}},{key:"pixelPaddingValue",get:function(){return this._pixelPaddingValue},set:function(e){this._pixelPaddingValue=e}},{key:"pixelRepresentation",get:function(){return this._pixelRepresentation},set:function(e){this._pixelRepresentation=e}},{key:"pixelType",get:function(){return this._pixelType},set:function(e){this._pixelType=e}},{key:"url",get:function(){return this._url},set:function(e){this._url=e}},{key:"referencedSegmentNumber",get:function(){return this._referencedSegmentNumber},set:function(e){this._referencedSegmentNumber=e}},{key:"rightHanded",get:function(){return this._rightHanded},set:function(e){this._rightHanded=e}},{key:"index",get:function(){return this._index},set:function(e){this._index=e}},{key:"invert",get:function(){return this._invert},set:function(e){this._invert=e}},{key:"numberOfChannels",get:function(){return this._numberOfChannels},set:function(e){this._numberOfChannels=e}}]),t}(a.a);t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(72),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(502),u=n(528),c=n(530),h=n(531),d=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));o._id=n,o._arrayBuffer=e.buffer;var a=new Uint8Array(o._arrayBuffer);o._dataSet=null;try{o._dataSet=l.parseDicom(a)}catch(e){window.console.log(e);var s=new Error("parsers.dicom could not parse the file");throw s}return o}return o(t,e),s(t,[{key:"seriesInstanceUID",value:function(){return this._dataSet.string("x0020000e")}},{key:"studyInstanceUID",value:function(){return this._dataSet.string("x0020000d")}},{key:"modality",value:function(){return this._dataSet.string("x00080060")}},{key:"segmentationType",value:function(){return this._dataSet.string("x00620001")}},{key:"segmentationSegments",value:function(){var e=[],t=this._dataSet.elements.x00620002;if(!t)return e;for(var n=0;n<t.items.length;n++){var r=this._recommendedDisplayCIELab(t.items[n]),i=this._segmentationCode(t.items[n]),o=t.items[n].dataSet.uint16("x00620004"),a=t.items[n].dataSet.string("x00620005"),s=t.items[n].dataSet.string("x00620008");e.push({recommendedDisplayCIELab:r,segmentationCodeDesignator:i.segmentationCodeDesignator,segmentationCodeValue:i.segmentationCodeValue,segmentationCodeMeaning:i.segmentationCodeMeaning,segmentNumber:o,segmentLabel:a,segmentAlgorithmType:s})}return e}},{key:"_segmentationCode",value:function(e){var t="unknown",n="unknown",r="unknown",i=e.dataSet.elements.x00082218;return i&&i.items&&i.items.length>0&&(t=i.items[0].dataSet.string("x00080102"),n=i.items[0].dataSet.string("x00080100"),r=i.items[0].dataSet.string("x00080104")),{segmentationCodeDesignator:t,segmentationCodeValue:n,segmentationCodeMeaning:r}}},{key:"_recommendedDisplayCIELab",value:function(e){if(!e.dataSet.elements.x0062000d)return null;for(var t=e.dataSet.elements.x0062000d.dataOffset,n=e.dataSet.elements.x0062000d.length,r=e.dataSet.byteArray.slice(t,t+n),i=new Uint16Array(n/2),o=0;o<n/2;o++)i[o]=(r[2*o+1]<<8)+r[2*o];return[i[0]/65535*100,i[1]/65535*255-128,i[2]/65535*255-128]}},{key:"sopInstanceUID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._findStringEverywhere("x2005140f","x00080018",e)}},{key:"transferSyntaxUID",value:function(){return this._dataSet.string("x00020010")}},{key:"studyDate",value:function(){return this._dataSet.string("x00080020")}},{key:"studyDescription",value:function(){return this._dataSet.string("x00081030")}},{key:"seriesDate",value:function(){return this._dataSet.string("x00080021")}},{key:"seriesDescription",value:function(){return this._dataSet.string("x0008103e")}},{key:"patientName",value:function(){return this._dataSet.string("x00100010")}},{key:"patientID",value:function(){return this._dataSet.string("x00100020")}},{key:"patientBirthdate",value:function(){return this._dataSet.string("x00100030")}},{key:"patientSex",value:function(){return this._dataSet.string("x00100040")}},{key:"patientAge",value:function(){return this._dataSet.string("x00101010")}},{key:"photometricInterpretation",value:function(){return this._dataSet.string("x00280004")}},{key:"planarConfiguration",value:function(){var e=this._dataSet.uint16("x00280006");return"undefined"===typeof e&&(e=null),e}},{key:"samplesPerPixel",value:function(){return this._dataSet.uint16("x00280002")}},{key:"numberOfFrames",value:function(){var e=this._dataSet.intString("x00280008");return"undefined"===typeof e&&(e=null),e}},{key:"numberOfChannels",value:function(){var e=1,t=this.photometricInterpretation();return"RGB"!==t&&"PALETTE COLOR"!==t&&"YBR_FULL"!==t&&"YBR_FULL_422"!==t&&"YBR_PARTIAL_422"!==t&&"YBR_PARTIAL_420"!==t&&"YBR_RCT"!==t||(e=3),e}},{key:"invert",value:function(){return"MONOCHROME1"===this.photometricInterpretation()}},{key:"imageOrientation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._findStringEverywhere("x00209116","x00200037",e);return t&&(t=t.split("\\").map(Number)),t}},{key:"referencedSegmentNumber",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=-1,n=this._findInGroupSequence("x52009230","x0062000a",e);return null!==n&&(t=n.uint16("x0062000b")),t}},{key:"pixelAspectRatio",value:function(){var e=[this._dataSet.intString("x00280034",0),this._dataSet.intString("x00280034",1)];return"undefined"===typeof e[0]&&(e=null),e}},{key:"imagePosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._findStringEverywhere("x00209113","x00200032",e);return t&&(t=t.split("\\").map(Number)),t}},{key:"instanceNumber",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=null,n=this._dataSet.elements.x52009230;if("undefined"!==typeof n)if(n.items[e].dataSet.elements.x2005140f){var r=n.items[e].dataSet.elements.x2005140f.items[0].dataSet;t=r.intString("x00200013")}else t=this._dataSet.intString("x00200013"),"undefined"===typeof t&&(t=null);else t=this._dataSet.intString("x00200013"),"undefined"===typeof t&&(t=null);return t}},{key:"pixelSpacing",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._findStringEverywhere("x00289110","x00280030",e);return null===t&&(t=this._dataSet.string("x00181164")),t&&(t=t.split("\\").map(Number)),"undefined"===typeof t&&(t=null),t}},{key:"frameTime",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],this._dataSet.uint16("x00280009",1)),t=this._dataSet.intString("x00082144"),n=void 0;return"number"===typeof e&&(e=e.toString(16),n=this._dataSet.floatString("x0018"+e)),"undefined"===typeof n&&"number"===typeof t&&(n=1e3/t),"undefined"===typeof n&&(n=null),n}},{key:"rows",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],this._dataSet.uint16("x00280010"));return"undefined"===typeof e&&(e=null),e}},{key:"columns",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],this._dataSet.uint16("x00280011"));return"undefined"===typeof e&&(e=null),e}},{key:"pixelType",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return 0}},{key:"pixelRepresentation",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._dataSet.uint16("x00280103")}},{key:"pixelPaddingValue",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],this._dataSet.int16("x00280120"));return"undefined"===typeof e&&(e=null),e}},{key:"bitsAllocated",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._dataSet.uint16("x00280100")}},{key:"highBit",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._dataSet.uint16("x00280102")}},{key:"rescaleIntercept",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._findFloatStringInFrameGroupSequence("x00289145","x00281052",e)}},{key:"rescaleSlope",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._findFloatStringInFrameGroupSequence("x00289145","x00281053",e)}},{key:"windowCenter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._findFloatStringInFrameGroupSequence("x00289132","x00281050",e)}},{key:"windowWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._findFloatStringInFrameGroupSequence("x00289132","x00281051",e)}},{key:"sliceThickness",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._findFloatStringInFrameGroupSequence("x00289110","x00180050",e)}},{key:"spacingBetweenSlices",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],this._dataSet.floatString("x00180088"));return"undefined"===typeof e&&(e=null),e}},{key:"dimensionIndexValues",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=null,n=this._dataSet.elements.x52009230;if("undefined"!==typeof n){var r=n.items[e].dataSet.elements.x00209111;if(void 0!==r&&null!==r){r=r.items[0].dataSet;var i=r.elements.x00209157;if(void 0!==i&&null!==i){var o=i.length/4;t=[];for(var a=0;a<o;a++)t.push(r.uint32("x00209157",a))}}}return t}},{key:"inStackPositionNumber",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=null,n=this._dataSet.elements.x52009230;if("undefined"!==typeof n){t=n.items[e].dataSet.elements.x00209111.items[0].dataSet.uint32("x00209057")}else t=null;return t}},{key:"stackID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=null,n=this._dataSet.elements.x52009230;if("undefined"!==typeof n){t=n.items[e].dataSet.elements.x00209111.items[0].dataSet.intString("x00209056")}else t=null;return t}},{key:"extractPixelData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._decodePixelData(e);return this.numberOfChannels()>1?this._convertColorSpace(t):t}},{key:"_findInGroupSequence",value:function(e,t,n){var r=this._dataSet.elements[e];if("undefined"!==typeof r){var i=r.items[n].dataSet.elements[t];if("undefined"!==typeof i)return i.items[0].dataSet}return null}},{key:"_findStringInGroupSequence",value:function(e,t,n,r){var i=this._findInGroupSequence(e,t,r);return null!==i?i.string(n):null}},{key:"_findStringInFrameGroupSequence",value:function(e,t,n){return this._findStringInGroupSequence("x52009229",e,t,0)||this._findStringInGroupSequence("x52009230",e,t,n)}},{key:"_findStringEverywhere",value:function(e,t,n){var r=this._findStringInFrameGroupSequence(e,t,n);if(null===r){r=this._findStringInSequence("x00540022",t)}return null===r&&(r=this._dataSet.string(t)),"undefined"===typeof r&&(r=null),r}},{key:"_findStringInSequence",value:function(e,t,n){var r=this._dataSet.elements[e],i=void 0;return r&&(i=r.items[0].dataSet.string(t)),"undefined"===typeof i&&(i=null),null}},{key:"_findFloatStringInGroupSequence",value:function(e,t,n,r){var i=this._dataSet.floatString(n);return"undefined"===typeof i?(i=this._findInGroupSequence(e,t,r),null!==i?i.floatString(n):null):i}},{key:"_findFloatStringInFrameGroupSequence",value:function(e,t,n){return this._findFloatStringInGroupSequence("x52009229",e,t,0)||this._findFloatStringInGroupSequence("x52009230",e,t,n)}},{key:"_decodePixelData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.transferSyntaxUID();if("1.2.840.10008.1.2.4.90"===t||"1.2.840.10008.1.2.4.91"===t)return this._decodeJ2K(e);if("1.2.840.10008.1.2.4.57"===t||"1.2.840.10008.1.2.4.70"===t)return this._decodeJPEGLossless(e);if("1.2.840.10008.1.2.4.50"===t||"1.2.840.10008.1.2.4.51"===t)return this._decodeJPEGBaseline(e);if("1.2.840.10008.1.2"===t||"1.2.840.10008.1.2.1"===t)return this._decodeUncompressed(e);if("1.2.840.10008.1.2.2"===t){var n=this._decodeUncompressed(e);return this._swapFrame(n)}throw{error:"no decoder for transfer syntax "+t}}},{key:"framesAreFragmented",value:function(){return this._dataSet.intString("x00280008")!==this._dataSet.elements.x7fe00010.fragments.length}},{key:"getEncapsulatedImageFrame",value:function(e){return this._dataSet.elements.x7fe00010&&this._dataSet.elements.x7fe00010.basicOffsetTable.length?l.readEncapsulatedImageFrame(this._dataSet,this._dataSet.elements.x7fe00010,e):this.framesAreFragmented()?l.readEncapsulatedImageFrame(this._dataSet,this._dataSet.elements.x7fe00010,e,l.createJPEGBasicOffsetTable(this._dataSet,this._dataSet.elements.x7fe00010)):l.readEncapsulatedPixelDataFromFragments(this._dataSet,this._dataSet.elements.x7fe00010,e)}},{key:"_decodeJ2K",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.getEncapsulatedImageFrame(e),n=new h;if(n.parse(t),1!==n.componentsCount)throw new Error("JPEG2000 decoder returned a componentCount of ${componentsCount}, when 1 is expected");if(1!==n.tiles.length)throw new Error("JPEG2000 decoder returned a tileCount of ${tileCount}, when 1 is expected");return n.tiles[0].items}},{key:"_decodeJPEGLossless",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.getEncapsulatedImageFrame(e),n=this.pixelRepresentation(e),r=this.bitsAllocated(e),i=r<=8?1:2,o=new u.lossless.Decoder,a=o.decode(t.buffer,t.byteOffset,t.length,i);return 0===n?2===i?new Uint16Array(a.buffer):new Uint8Array(a.buffer):new Int16Array(a.buffer)}},{key:"_decodeJPEGBaseline",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.getEncapsulatedImageFrame(e),n=this.rows(e),r=this.columns(e),i=this.bitsAllocated(e),o=new c;return o.parse(t),8===i?o.getData(r,n):16===i?o.getData16(r,n):void 0}},{key:"_decodeUncompressed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.pixelRepresentation(e),n=this.bitsAllocated(e),r=this._dataSet.elements.x7fe00010,i=r.dataOffset,o=this.numberOfChannels(),a=this.rows(e)*this.columns(e)*o,s=0,l=this._dataSet.byteArray.buffer;if(0===t&&8===n)return s=i+e*a,new Uint8Array(l,s,a);if(0===t&&16===n)return s=i+e*a*2,new Uint16Array(l,s,a);if(1===t&&16===n)return s=i+e*a*2,new Int16Array(l,s,a);if(0===t&&32===n)return s=i+e*a*4,new Uint32Array(l,s,a);if(0===t&&1===n){var u=new ArrayBuffer(a),c=new Uint8Array(u);s=i+e*a;for(var h=0,d=e*a,f=e*a+a,p=Math.floor(d/8),m=d-8*p,v=Math.ceil(f/8),g=new Uint8Array(l,i),y=p;y<=v;y++){for(;m<8;){switch(m){case 0:c[h]=1&g[y];break;case 1:c[h]=g[y]>>>1&1;break;case 2:c[h]=g[y]>>>2&1;break;case 3:c[h]=g[y]>>>3&1;break;case 4:c[h]=g[y]>>>4&1;break;case 5:c[h]=g[y]>>>5&1;break;case 6:c[h]=g[y]>>>6&1;break;case 7:c[h]=g[y]>>>7&1}if(m++,++h>=a)return c}m=0}}}},{key:"_interpretAsRGB",value:function(e){return-1!==["RGB","YBR_RCT","YBR_ICT","YBR_FULL_422"].indexOf(e)}},{key:"_convertColorSpace",value:function(e){var t=null,n=this.photometricInterpretation(),r=this.planarConfiguration(),i=this._interpretAsRGB(n);if(i&&0===r)t=e;else if(i&&1===r){if(e instanceof Int8Array)t=new Int8Array(e.length);else if(e instanceof Uint8Array)t=new Uint8Array(e.length);else if(e instanceof Int16Array)t=new Int16Array(e.length);else{if(!(e instanceof Uint16Array)){var o=new Error("unsuported typed array: "+e);throw o}t=new Uint16Array(e.length)}for(var a=e.length/3,s=0,l=0,u=a,c=2*a,h=0;h<a;h++)t[s++]=e[l++],t[s++]=e[u++],t[s++]=e[c++]}else{if("YBR_FULL"!==n){var d=new Error("photometric interpolation not supported: "+n);throw d}if(e instanceof Int8Array)t=new Int8Array(e.length);else if(e instanceof Uint8Array)t=new Uint8Array(e.length);else if(e instanceof Int16Array)t=new Int16Array(e.length);else{if(!(e instanceof Uint16Array)){var f=new Error("unsuported typed array: "+e);throw f}t=new Uint16Array(e.length)}for(var p=e.length/3,m=0,v=0,g=0;g<p;g++){var y=e[m++],_=e[m++],b=e[m++];t[v++]=y+1.402*(b-128),t[v++]=y-.34414*(_-128)-.71414*(b-128),t[v++]=y+1.772*(_-128)}}return t}},{key:"_swapFrame",value:function(e){var t=this.bitsAllocated();if(16===t)for(var n=0;n<e.length;n++)e[n]=this._swap16(e[n]);else if(32===t)for(var r=0;r<e.length;r++)e[r]=this._swap32(e[r]);return e}}]),t}(a.a);t.a=d},function(e,t,n){(function(e,r){var i,o,a;!function(n,r){"undefined"!==typeof e&&e.exports?e.exports=r():(o=[],i=r,void 0!==(a="function"===typeof i?i.apply(t,o):i)&&(e.exports=a))}(0,function(){var t=function(t){return void 0===t&&(t={}),t.parseDicom=function(r,i){function o(e){if(void 0===e.elements.x00020010)throw"dicomParser.parseDicom: missing required meta header attribute 0002,0010";var n=e.elements.x00020010;return t.readFixedString(r,n.dataOffset,n.length)}function a(e){return"1.2.840.10008.1.2"!==e}function s(o,a){if("1.2.840.10008.1.2.1.99"===o){if(i&&i.inflater){var s=i.inflater(r,a);return new t.ByteStream(t.littleEndianByteArrayParser,s,0)}if("undefined"!==typeof e&&this.module!==e){var l=n(505),u=t.sharedCopy(r,a,r.length-a),c=l.inflateRawSync(u),h=t.alloc(r,c.length+a);return r.copy(h,0,0,a),c.copy(h,a),new t.ByteStream(t.littleEndianByteArrayParser,h,0)}if("undefined"!==typeof pako){var d=r.slice(a),f=pako.inflateRaw(d),p=t.alloc(r,f.length+a);return p.set(r.slice(0,a),0),p.set(f,a),new t.ByteStream(t.littleEndianByteArrayParser,p,0)}throw"dicomParser.parseDicom: no inflater available to handle deflate transfer syntax"}return"1.2.840.10008.1.2.2"===o?new t.ByteStream(t.bigEndianByteArrayParser,r,a):new t.ByteStream(t.littleEndianByteArrayParser,r,a)}function l(e,t){for(var n in e.elements)e.elements.hasOwnProperty(n)&&(t.elements[n]=e.elements[n]);return void 0!==e.warnings&&(t.warnings=e.warnings.concat(t.warnings)),t}function u(e){var n=o(e),r=a(n),l=s(n,e.position),u={},c=new t.DataSet(l.byteArrayParser,l.byteArray,u);c.warnings=l.warnings;try{r?t.parseDicomDataSetExplicit(c,l,l.byteArray.length,i):t.parseDicomDataSetImplicit(c,l,l.byteArray.length,i)}catch(e){var h={exception:e,dataSet:c};throw h}return c}if(void 0===r)throw"dicomParser.parseDicom: missing required parameter 'byteArray'";return function(){var e=t.readPart10Header(r,i);return l(e,u(e))}()},t}(t),t=function(e){"use strict";function t(e,t){return 255===e.byteArray[t]&&217===e.byteArray[t+1]}function n(e,n,r){var i=n.fragments[r];return!(!t(e,i.position+i.length-2)&&!t(e,i.position+i.length-3))}function r(e,t,r){for(var i=r;i<t.fragments.length;i++)if(n(e,t,i))return i}return void 0===e&&(e={}),e.createJPEGBasicOffsetTable=function(e,t,n){if(void 0===e)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter dataSet";if(void 0===t)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter pixelDataElement";if("x7fe00010"!==t.tag)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010'";if(!0!==t.encapsulatedPixelData)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.basicOffsetTable)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.fragments)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(t.fragments.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(n&&n.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'fragments' must not be zero length";n=n||t.fragments;for(var i=[],o=0;;){i.push(t.fragments[o].offset);var a=r(e,t,o);if(void 0===a||a===t.fragments.length-1)return i;o=a+1}},e}(t),t=function(e){"use strict";return void 0===e&&(e={}),e.explicitDataSetToJS=function(t,n){if(void 0===t)throw"dicomParser.explicitDataSetToJS: missing required parameter dataSet";n=n||{omitPrivateAttibutes:!0,maxElementLength:128};var r={};for(var i in t.elements){var o=t.elements[i];if(!0!==n.omitPrivateAttibutes||!e.isPrivateTag(i))if(o.items){for(var a=[],s=0;s<o.items.length;s++)a.push(e.explicitDataSetToJS(o.items[s].dataSet,n));r[i]=a}else{var l;l=void 0,o.length<n.maxElementLength&&(l=e.explicitElementToString(t,o)),r[i]=void 0!==l?l:{dataOffset:o.dataOffset,length:o.length}}}return r},e}(t),t=function(e){"use strict";return void 0===e&&(e={}),e.explicitElementToString=function(t,n){function r(e,n){for(var r="",i=0;i<e;i++)0!==i&&(r+="/"),r+=n.call(t,a,i).toString();return r}if(void 0===t||void 0===n)throw"dicomParser.explicitElementToString: missing required parameters";if(void 0===n.vr)throw"dicomParser.explicitElementToString: cannot convert implicit element to string";var i,o=n.vr,a=n.tag;if(!0===e.isStringVr(o))i=t.string(a);else{if("AT"==o){var s=t.uint32(a);if(void 0===s)return;return s<0&&(s=4294967295+s+1),"x"+s.toString(16).toUpperCase()}"US"==o?i=r(n.length/2,t.uint16):"SS"===o?i=r(n.length/2,t.int16):"UL"==o?i=r(n.length/4,t.uint32):"SL"===o?i=r(n.length/4,t.int32):"FD"==o?i=r(n.length/8,t.double):"FL"==o&&(i=r(n.length/4,t.float))}return i},e}(t),t=function(e){"use strict";function t(e,t){switch(e){case 2:return t%4==0&&t%100||t%400==0?29:28;case 9:case 4:case 6:case 11:return 30;default:return 31}}function n(e,n,r){return!isNaN(r)&&(n>0&&n<=12&&e>0&&e<=t(n,r))}return void 0===e&&(e={}),e.parseDA=function(e,t){if(e&&8===e.length){var r=parseInt(e.substring(0,4),10),i=parseInt(e.substring(4,6),10),o=parseInt(e.substring(6,8),10);if(t&&!0!==n(o,i,r))throw"invalid DA '"+e+"'";return{year:r,month:i,day:o}}if(t)throw"invalid DA '"+e+"'"},e}(t),t=function(e){"use strict";return void 0===e&&(e={}),e.parseTM=function(e,t){if(e.length>=2){var n=parseInt(e.substring(0,2),10),r=e.length>=4?parseInt(e.substring(2,4),10):void 0,i=e.length>=6?parseInt(e.substring(4,6),10):void 0,o=e.length>=8?parseInt(e.substring(7,13),10):void 0;if(t&&(isNaN(n)||void 0!==r&&isNaN(r)||void 0!==i&&isNaN(i)||void 0!==o&&isNaN(o)||n<0||n>23||r&&(r<0||r>59)||i&&(i<0||i>59)||o&&(o<0||o>999999)))throw"invalid TM '"+e+"'";return{hours:n,minutes:r,seconds:i,fractionalSeconds:o}}if(t)throw"invalid TM '"+e+"'"},e}(t),t=function(e){"use strict";void 0===e&&(e={});var t={AE:!0,AS:!0,AT:!1,CS:!0,DA:!0,DS:!0,DT:!0,FL:!1,FD:!1,IS:!0,LO:!0,LT:!0,OB:!1,OD:!1,OF:!1,OW:!1,PN:!0,SH:!0,SL:!1,SQ:!1,SS:!1,ST:!0,TM:!0,UI:!0,UL:!1,UN:void 0,UR:!0,US:!1,UT:!0};return e.isStringVr=function(e){return t[e]},e.isPrivateTag=function(e){return parseInt(e[4])%2===1},e.parsePN=function(e){if(void 0!==e){var t=e.split("^");return{familyName:t[0],givenName:t[1],middleName:t[2],prefix:t[3],suffix:t[4]}}},e}(t),t=function(e){"use strict";void 0===e&&(e={});var t=!1;return e.readEncapsulatedPixelData=function(n,r,i){if(t||(t=!0,console&&console.log&&console.log("WARNING: dicomParser.readEncapsulatedPixelData() has been deprecated")),void 0===n)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'dataSet'";if(void 0===r)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'element'";if(void 0===i)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'frame'";if("x7fe00010"!==r.tag)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to non pixel data tag (expected tag = x7fe00010'";if(!0!==r.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(!0!==r.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===r.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===r.fragments)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(i<0)throw"dicomParser.readEncapsulatedPixelData: parameter 'frame' must be >= 0";return 0!==r.basicOffsetTable.length?e.readEncapsulatedImageFrame(n,r,i):e.readEncapsulatedPixelDataFromFragments(n,r,0,r.fragments.length)},e}(t),t=function(e){"use strict";return void 0===e&&(e={}),e.alloc=function(e,t){if("undefined"!==typeof r&&e instanceof r)return r.alloc(t);if(e instanceof Uint8Array)return new Uint8Array(t);throw"dicomParser.alloc: unknown type for byteArray"},e}(t),t=function(e){"use strict";return void 0===e&&(e={}),e.bigEndianByteArrayParser={readUint16:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readUint16: position cannot be less than 0";if(t+2>e.length)throw"bigEndianByteArrayParser.readUint16: attempt to read past end of buffer";return(e[t]<<8)+e[t+1]},readInt16:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readInt16: position cannot be less than 0";if(t+2>e.length)throw"bigEndianByteArrayParser.readInt16: attempt to read past end of buffer";var n=(e[t]<<8)+e[t+1];return 32768&n&&(n=n-65535-1),n},readUint32:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readUint32: position cannot be less than 0";if(t+4>e.length)throw"bigEndianByteArrayParser.readUint32: attempt to read past end of buffer";return 256*(256*(256*e[t]+e[t+1])+e[t+2])+e[t+3]},readInt32:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readInt32: position cannot be less than 0";if(t+4>e.length)throw"bigEndianByteArrayParser.readInt32: attempt to read past end of buffer";return(e[t]<<24)+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3]},readFloat:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readFloat: position cannot be less than 0";if(t+4>e.length)throw"bigEndianByteArrayParser.readFloat: attempt to read past end of buffer";var n=new Uint8Array(4);return n[3]=e[t],n[2]=e[t+1],n[1]=e[t+2],n[0]=e[t+3],new Float32Array(n.buffer)[0]},readDouble:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readDouble: position cannot be less than 0";if(t+8>e.length)throw"bigEndianByteArrayParser.readDouble: attempt to read past end of buffer";var n=new Uint8Array(8);return n[7]=e[t],n[6]=e[t+1],n[5]=e[t+2],n[4]=e[t+3],n[3]=e[t+4],n[2]=e[t+5],n[1]=e[t+6],n[0]=e[t+7],new Float64Array(n.buffer)[0]}},e}(t),t=function(e){"use strict";return void 0===e&&(e={}),e.readFixedString=function(e,t,n){if(n<0)throw"dicomParser.readFixedString - length cannot be less than 0";if(t+n>e.length)throw"dicomParser.readFixedString: attempt to read past end of buffer";for(var r,i="",o=0;o<n;o++){if(0===(r=e[t+o]))return t+=n,i;i+=String.fromCharCode(r)}return i},e}(t),t=function(e){"use strict";return void 0===e&&(e={}),e.ByteStream=function(e,t,n){if(void 0===e)throw"dicomParser.ByteStream: missing required parameter 'byteArrayParser'";if(void 0===t)throw"dicomParser.ByteStream: missing required parameter 'byteArray'";if(t instanceof Uint8Array===!1&&t instanceof r===!1)throw"dicomParser.ByteStream: parameter byteArray is not of type Uint8Array or Buffer";if(n<0)throw"dicomParser.ByteStream: parameter 'position' cannot be less than 0";if(n>=t.length)throw"dicomParser.ByteStream: parameter 'position' cannot be greater than or equal to 'byteArray' length";this.byteArrayParser=e,this.byteArray=t,this.position=n||0,this.warnings=[]},e.ByteStream.prototype.seek=function(e){if(this.position+e<0)throw"dicomParser.ByteStream.prototype.seek: cannot seek to position < 0";this.position+=e},e.ByteStream.prototype.readByteStream=function(t){if(this.position+t>this.byteArray.length)throw"dicomParser.ByteStream.prototype.readByteStream: readByteStream - buffer overread";var n=e.sharedCopy(this.byteArray,this.position,t);return this.position+=t,new e.ByteStream(this.byteArrayParser,n)},e.ByteStream.prototype.readUint16=function(){var e=this.byteArrayParser.readUint16(this.byteArray,this.position);return this.position+=2,e},e.ByteStream.prototype.readUint32=function(){var e=this.byteArrayParser.readUint32(this.byteArray,this.position);return this.position+=4,e},e.ByteStream.prototype.readFixedString=function(t){var n=e.readFixedString(this.byteArray,this.position,t);return this.position+=t,n},e}(t),t=function(e){"use strict";function t(e,t){return void 0!==e.parser?e.parser:t}return void 0===e&&(e={}),e.DataSet=function(e,t,n){this.byteArrayParser=e,this.byteArray=t,this.elements=n},e.DataSet.prototype.uint16=function(e,n){var r=this.elements[e];if(n=void 0!==n?n:0,r&&0!==r.length)return t(r,this.byteArrayParser).readUint16(this.byteArray,r.dataOffset+2*n)},e.DataSet.prototype.int16=function(e,n){var r=this.elements[e];if(n=void 0!==n?n:0,r&&0!==r.length)return t(r,this.byteArrayParser).readInt16(this.byteArray,r.dataOffset+2*n)},e.DataSet.prototype.uint32=function(e,n){var r=this.elements[e];if(n=void 0!==n?n:0,r&&0!==r.length)return t(r,this.byteArrayParser).readUint32(this.byteArray,r.dataOffset+4*n)},e.DataSet.prototype.int32=function(e,n){var r=this.elements[e];if(n=void 0!==n?n:0,r&&0!==r.length)return t(r,this.byteArrayParser).readInt32(this.byteArray,r.dataOffset+4*n)},e.DataSet.prototype.float=function(e,n){var r=this.elements[e];if(n=void 0!==n?n:0,r&&0!==r.length)return t(r,this.byteArrayParser).readFloat(this.byteArray,r.dataOffset+4*n)},e.DataSet.prototype.double=function(e,n){var r=this.elements[e];if(n=void 0!==n?n:0,r&&0!==r.length)return t(r,this.byteArrayParser).readDouble(this.byteArray,r.dataOffset+8*n)},e.DataSet.prototype.numStringValues=function(t){var n=this.elements[t];if(n&&n.length>0){var r=e.readFixedString(this.byteArray,n.dataOffset,n.length),i=r.match(/\\/g);return null===i?1:i.length+1}},e.DataSet.prototype.string=function(t,n){var r=this.elements[t];if(r&&r.length>0){var i=e.readFixedString(this.byteArray,r.dataOffset,r.length);if(n>=0){return i.split("\\")[n].trim()}return i.trim()}},e.DataSet.prototype.text=function(t,n){var r=this.elements[t];if(r&&r.length>0){var i=e.readFixedString(this.byteArray,r.dataOffset,r.length);if(n>=0){return i.split("\\")[n].replace(/ +$/,"")}return i.replace(/ +$/,"")}},e.DataSet.prototype.floatString=function(e,t){var n=this.elements[e];if(n&&n.length>0){t=void 0!==t?t:0;var r=this.string(e,t);if(void 0!==r)return parseFloat(r)}},e.DataSet.prototype.intString=function(e,t){var n=this.elements[e];if(n&&n.length>0){t=void 0!==t?t:0;var r=this.string(e,t);if(void 0!==r)return parseInt(r)}},e}(t),t=function(e){"use strict";return void 0===e&&(e={}),e.findAndSetUNElementLength=function(e,t){if(void 0===e)throw"dicomParser.findAndSetUNElementLength: missing required parameter 'byteStream'";for(var n=e.byteArray.length-8;e.position<=n;){if(65534===e.readUint16()){if(57565===e.readUint16()){var r;return r=e.readUint32(),0!==r&&e.warnings("encountered non zero length following item delimiter at position"+e.position-4+" while reading element of undefined length with tag ' + element.tag"),void(t.length=e.position-t.dataOffset)}}}t.length=e.byteArray.length-t.dataOffset,e.seek(e.byteArray.length-e.position)},e}(t),t=function(e){"use strict";return void 0===e&&(e={}),e.findEndOfEncapsulatedElement=function(t,n,r){if(void 0===t)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'byteStream'";if(void 0===n)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'element'";if(n.encapsulatedPixelData=!0,n.basicOffsetTable=[],n.fragments=[],"xfffee000"!==e.readTag(t))throw"dicomParser.findEndOfEncapsulatedElement: basic offset table not found";for(var i=t.readUint32(),o=i/4,a=0;a<o;a++){var s=t.readUint32();n.basicOffsetTable.push(s)}for(var l=t.position;t.position<t.byteArray.length;){var u=e.readTag(t),c=t.readUint32();if("xfffee0dd"===u)return t.seek(c),void(n.length=t.position-n.dataOffset);if("xfffee000"!==u)return r&&r.push("unexpected tag "+u+" while searching for end of pixel data element with undefined length"),c>t.byteArray.length-t.position&&(c=t.byteArray.length-t.position),n.fragments.push({offset:t.position-l-8,position:t.position,length:c}),t.seek(c),void(n.length=t.position-n.dataOffset);n.fragments.push({offset:t.position-l-8,position:t.position,length:c}),t.seek(c)}r&&r.push("pixel data element "+n.tag+" missing sequence delimiter tag xfffee0dd")},e}(t),t=function(e){"use strict";return void 0===e&&(e={}),e.findItemDelimitationItemAndSetElementLength=function(e,t){if(void 0===e)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";for(var n=e.byteArray.length-8;e.position<=n;){if(65534===e.readUint16()){if(57357===e.readUint16()){return 0!==e.readUint32()&&e.warnings("encountered non zero length following item delimiter at position"+e.position-4+" while reading element of undefined length with tag ' + element.tag"),void(t.length=e.position-t.dataOffset)}}}t.length=e.byteArray.length-t.dataOffset,e.seek(e.byteArray.length-e.position)},e}(t),t=function(e){"use strict";return void 0===e&&(e={}),e.littleEndianByteArrayParser={readUint16:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readUint16: position cannot be less than 0";if(t+2>e.length)throw"littleEndianByteArrayParser.readUint16: attempt to read past end of buffer";return e[t]+256*e[t+1]},readInt16:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readInt16: position cannot be less than 0";if(t+2>e.length)throw"littleEndianByteArrayParser.readInt16: attempt to read past end of buffer";var n=e[t]+(e[t+1]<<8);return 32768&n&&(n=n-65535-1),n},readUint32:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readUint32: position cannot be less than 0";if(t+4>e.length)throw"littleEndianByteArrayParser.readUint32: attempt to read past end of buffer";return e[t]+256*e[t+1]+256*e[t+2]*256+256*e[t+3]*256*256},readInt32:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readInt32: position cannot be less than 0";if(t+4>e.length)throw"littleEndianByteArrayParser.readInt32: attempt to read past end of buffer";return e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24)},readFloat:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readFloat: position cannot be less than 0";if(t+4>e.length)throw"littleEndianByteArrayParser.readFloat: attempt to read past end of buffer";var n=new Uint8Array(4);return n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],new Float32Array(n.buffer)[0]},readDouble:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readDouble: position cannot be less than 0";if(t+8>e.length)throw"littleEndianByteArrayParser.readDouble: attempt to read past end of buffer";var n=new Uint8Array(8);return n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],n[4]=e[t+4],n[5]=e[t+5],n[6]=e[t+6],n[7]=e[t+7],new Float64Array(n.buffer)[0]}},e}(t),t=function(e){"use strict";return void 0===e&&(e={}),e.parseDicomDataSetExplicit=function(t,n,r,i){if(r=void 0===r?n.byteArray.length:r,i=i||{},void 0===n)throw"dicomParser.parseDicomDataSetExplicit: missing required parameter 'byteStream'";if(r<n.position||r>n.byteArray.length)throw"dicomParser.parseDicomDataSetExplicit: invalid value for parameter 'maxPosition'";for(var o=t.elements;n.position<r;){var a=e.readDicomElementExplicit(n,t.warnings,i.untilTag);if(o[a.tag]=a,a.tag===i.untilTag)return}if(n.position>r)throw"dicomParser:parseDicomDataSetExplicit: buffer overrun"},e.parseDicomDataSetImplicit=function(t,n,r,i){if(r=void 0===r?t.byteArray.length:r,i=i||{},void 0===n)throw"dicomParser.parseDicomDataSetImplicit: missing required parameter 'byteStream'";if(r<n.position||r>n.byteArray.length)throw"dicomParser.parseDicomDataSetImplicit: invalid value for parameter 'maxPosition'";for(var o=t.elements;n.position<r;){var a=e.readDicomElementImplicit(n,i.untilTag,i.vrCallback);if(o[a.tag]=a,a.tag===i.untilTag)return}},e}(t),t=function(e){"use strict";function t(e){return"OB"===e||"OW"===e||"SQ"===e||"OF"===e||"UT"===e||"UN"===e?4:2}return void 0===e&&(e={}),e.readDicomElementExplicit=function(n,r,i){if(void 0===n)throw"dicomParser.readDicomElementExplicit: missing required parameter 'byteStream'";var o={tag:e.readTag(n),vr:n.readFixedString(2)};return 2===t(o.vr)?(o.length=n.readUint16(),o.dataOffset=n.position):(n.seek(2),o.length=n.readUint32(),o.dataOffset=n.position),4294967295===o.length&&(o.hadUndefinedLength=!0),o.tag===i?o:"SQ"===o.vr?(e.readSequenceItemsExplicit(n,o,r),o):4294967295===o.length?"x7fe00010"===o.tag?(e.findEndOfEncapsulatedElement(n,o,r),o):"UN"===o.vr?(e.findAndSetUNElementLength(n,o),o):(e.readSequenceItemsImplicit(n,o),o):(n.seek(o.length),o)},e}(t),t=function(e){"use strict";function t(t,n,r){if("undefined"!==typeof r)return"SQ"===r(t.tag);if(n.position+4<=n.byteArray.length){var i=e.readTag(n);return n.seek(-4),"xfffee000"===i||"xfffee0dd"===i}return n.warnings.push("eof encountered before finding sequence item tag or sequence delimiter tag in peeking to determine VR"),!1}return void 0===e&&(e={}),e.readDicomElementImplicit=function(n,r,i){if(void 0===n)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";var o={tag:e.readTag(n),length:n.readUint32(),dataOffset:n.position};return 4294967295===o.length&&(o.hadUndefinedLength=!0),o.tag===r?o:t(o,n,i)?(e.readSequenceItemsImplicit(n,o),o):o.hadUndefinedLength?(e.findItemDelimitationItemAndSetElementLength(n,o),o):(n.seek(o.length),o)},e}(t),t=function(e){"use strict";function t(e,t){for(var n=0;n<e.length;n++)if(e[n].offset===t)return n}function n(e,t,n,r){if(e===t.length-1)return n.length-r;for(var i=t[e+1],o=r+1;o<n.length;o++)if(n[o].offset===i)return o-r;throw"dicomParser.calculateNumberOfFragmentsForFrame: could not find fragment with offset matching basic offset table"}return void 0===e&&(e={}),e.readEncapsulatedImageFrame=function(r,i,o,a,s){if(a=a||i.basicOffsetTable,s=s||i.fragments,void 0===r)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'dataSet'";if(void 0===i)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'pixelDataElement'";if(void 0===o)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'frameIndex'";if(void 0===a)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' does not have basicOffsetTable";if("x7fe00010"!==i.tag)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010'";if(!0!==i.encapsulatedPixelData)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==i.hadUndefinedLength)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have undefined length";if(void 0===i.fragments)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have fragments";if(0===a.length)throw"dicomParser.readEncapsulatedImageFrame: basicOffsetTable has zero entries";if(o<0)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be >= 0";if(o>=a.length)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be < basicOffsetTable.length";var l=a[o],u=t(s,l);if(void 0===u)throw"dicomParser.readEncapsulatedImageFrame: unable to find fragment that matches basic offset table entry";var c=n(o,a,s,u);return e.readEncapsulatedPixelDataFromFragments(r,i,u,c,s)},e}(t),t=function(e){"use strict";function t(e,t,n){for(var r=0,i=t;i<t+n;i++)r+=e[i].length;return r}return void 0===e&&(e={}),e.readEncapsulatedPixelDataFromFragments=function(n,r,i,o,a){if(o=o||1,a=a||r.fragments,void 0===n)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'dataSet'";if(void 0===r)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'pixelDataElement'";if(void 0===i)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'startFragmentIndex'";if(void 0===o)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'numFragments'";if("x7fe00010"!==r.tag)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010'";if(!0!==r.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==r.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===r.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===r.fragments)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(r.fragments.length<=0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(i<0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be >= 0";if(i>=r.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be < number of fragments";if(o<1)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'numFragments' must be > 0";if(i+o>r.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragment' + 'numFragments' < number of fragments";var s=new e.ByteStream(n.byteArrayParser,n.byteArray,r.dataOffset),l=e.readSequenceItem(s);if("xfffee000"!==l.tag)throw"dicomParser.readEncapsulatedPixelData: missing basic offset table xfffee000";s.seek(l.length);var u=s.position;if(1===o)return e.sharedCopy(s.byteArray,u+a[i].offset+8,a[i].length);for(var c=t(a,i,o),h=e.alloc(s.byteArray,c),d=0,f=i;f<i+o;f++)for(var p=u+a[f].offset+8,m=0;m<a[f].length;m++)h[d++]=s.byteArray[p++];return h},e}(t),t=function(e){return void 0===e&&(e={}),e.readPart10Header=function(t,n){function r(){if(i.seek(128),"DICM"!==i.readFixedString(4))throw"dicomParser.readPart10Header: DICM prefix not found at location 132 - this is not a valid DICOM P10 file."}if(void 0===t)throw"dicomParser.readPart10Header: missing required parameter 'byteArray'";var i=new e.ByteStream(e.littleEndianByteArrayParser,t);return function(){r();for(var t=[],n={};i.position<i.byteArray.length;){var o=i.position,a=e.readDicomElementExplicit(i,t);if(a.tag>"x0002ffff"){i.position=o;break}a.parser=e.littleEndianByteArrayParser,n[a.tag]=a}var s=new e.DataSet(i.byteArrayParser,i.byteArray,n);return s.warnings=i.warnings,s.position=i.position,s}()},e}(t),t=function(e){"use strict";function t(t,n){for(var r={};t.position<t.byteArray.length;){var i=e.readDicomElementExplicit(t,n);if(r[i.tag]=i,"xfffee00d"===i.tag)return new e.DataSet(t.byteArrayParser,t.byteArray,r)}return n.push("eof encountered before finding item delimiter tag while reading sequence item of undefined length"),new e.DataSet(t.byteArrayParser,t.byteArray,r)}function n(n,r){var i=e.readSequenceItem(n);return 4294967295===i.length?(i.hadUndefinedLength=!0,i.dataSet=t(n,r),i.length=n.position-i.dataOffset):(i.dataSet=new e.DataSet(n.byteArrayParser,n.byteArray,{}),e.parseDicomDataSetExplicit(i.dataSet,n,n.position+i.length)),i}function r(t,r,i){for(;t.position+4<=t.byteArray.length;){var o=e.readTag(t);if(t.seek(-4),"xfffee0dd"===o)return r.length=t.position-r.dataOffset,t.seek(8),r;var a=n(t,i);r.items.push(a)}i.push("eof encountered before finding sequence delimitation tag while reading sequence of undefined length"),r.length=t.position-r.dataOffset}function i(e,t,r){for(var i=t.dataOffset+t.length;e.position<i;){var o=n(e,r);t.items.push(o)}}return void 0===e&&(e={}),e.readSequenceItemsExplicit=function(e,t,n){if(void 0===e)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'element'";t.items=[],4294967295===t.length?r(e,t,n):i(e,t,n)},e}(t),t=function(e){"use strict";function t(t,n){for(var r={};t.position<t.byteArray.length;){var i=e.readDicomElementImplicit(t,void 0,n);if(r[i.tag]=i,"xfffee00d"===i.tag)return new e.DataSet(t.byteArrayParser,t.byteArray,r)}return t.warnings.push("eof encountered before finding sequence item delimiter in sequence item of undefined length"),new e.DataSet(t.byteArrayParser,t.byteArray,r)}function n(n,r){var i=e.readSequenceItem(n);return 4294967295===i.length?(i.hadUndefinedLength=!0,i.dataSet=t(n,r),i.length=n.position-i.dataOffset):(i.dataSet=new e.DataSet(n.byteArrayParser,n.byteArray,{}),e.parseDicomDataSetImplicit(i.dataSet,n,n.position+i.length,{vrCallback:r})),i}function r(t,r,i){for(;t.position+4<=t.byteArray.length;){var o=e.readTag(t);if(t.seek(-4),"xfffee0dd"===o)return r.length=t.position-r.dataOffset,t.seek(8),r;var a=n(t,i);r.items.push(a)}t.warnings.push("eof encountered before finding sequence delimiter in sequence of undefined length"),r.length=t.byteArray.length-r.dataOffset}function i(e,t,r){for(var i=t.dataOffset+t.length;e.position<i;){var o=n(e,r);t.items.push(o)}}return void 0===e&&(e={}),e.readSequenceItemsImplicit=function(e,t,n){if(void 0===e)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'element'";t.items=[],4294967295===t.length?r(e,t,n):i(e,t,n)},e}(t),t=function(e){"use strict";return void 0===e&&(e={}),e.readSequenceItem=function(t){if(void 0===t)throw"dicomParser.readSequenceItem: missing required parameter 'byteStream'";var n={tag:e.readTag(t),length:t.readUint32(),dataOffset:t.position};if("xfffee000"!==n.tag){throw"dicomParser.readSequenceItem: item tag (FFFE,E000) not found at offset "+t.position}return n},e}(t),t=function(e){"use strict";return void 0===e&&(e={}),e.readTag=function(e){if(void 0===e)throw"dicomParser.readTag: missing required parameter 'byteStream'";return"x"+("00000000"+(256*e.readUint16()*256+e.readUint16()).toString(16)).substr(-8)},e}(t),t=function(e){"use strict";return void 0===e&&(e={}),e.sharedCopy=function(e,t,n){if("undefined"!==typeof r&&e instanceof r)return e.slice(t,t+n);if(e instanceof Uint8Array)return new Uint8Array(e.buffer,e.byteOffset+t,n);throw"dicomParser.from: unknown type for byteArray"},e}(t),t=function(e){"use strict";return void 0===e&&(e={}),e.version="1.7.3",e}(t);return t})}).call(t,n(69)(e),n(43).Buffer)},function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function i(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i}function o(e,t,n){return 3*(t+n)/4-n}function a(e){for(var t,n=r(e),i=n[0],a=n[1],s=new d(o(e,i,a)),l=0,u=a>0?i-4:i,c=0;c<u;c+=4)t=h[e.charCodeAt(c)]<<18|h[e.charCodeAt(c+1)]<<12|h[e.charCodeAt(c+2)]<<6|h[e.charCodeAt(c+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;return 2===a&&(t=h[e.charCodeAt(c)]<<2|h[e.charCodeAt(c+1)]>>4,s[l++]=255&t),1===a&&(t=h[e.charCodeAt(c)]<<10|h[e.charCodeAt(c+1)]<<4|h[e.charCodeAt(c+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t),s}function s(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function l(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(s(r));return i.join("")}function u(e){for(var t,n=e.length,r=n%3,i=[],o=0,a=n-r;o<a;o+=16383)i.push(l(e,o,o+16383>a?a:o+16383));return 1===r?(t=e[n-1],i.push(c[t>>2]+c[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(c[t>>10]+c[t>>4&63]+c[t<<2&63]+"=")),i.join("")}t.byteLength=i,t.toByteArray=a,t.fromByteArray=u;for(var c=[],h=[],d="undefined"!==typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,m=f.length;p<m;++p)c[p]=f[p],h[f.charCodeAt(p)]=p;h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?i-1:0,d=n?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+e[t+h],h+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+h],h+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=u}return(f?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+h>=1?d/l:d*Math.pow(2,1-h),t*l>=2&&(a++,l/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(t*l-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+f]=255&a,f+=p,a/=256,u-=8);e[n+f-p]|=128*m}},function(e,t,n){"use strict";(function(e){function r(e,t,n){function r(){for(var t;null!==(t=e.read());)a.push(t),s+=t.length;e.once("readable",r)}function i(t){e.removeListener("end",o),e.removeListener("readable",r),n(t)}function o(){var t,r=null;s>=w?r=new RangeError(x):t=v.concat(a,s),a=[],e.close(),n(r,t)}var a=[],s=0;e.on("error",i),e.on("end",o),e.end(t),r()}function i(e,t){if("string"===typeof t&&(t=v.from(t)),!v.isBuffer(t))throw new TypeError("Not a string or buffer");var n=e._finishFlushFlag;return e._processChunk(t,n)}function o(e){if(!(this instanceof o))return new o(e);f.call(this,e,y.DEFLATE)}function a(e){if(!(this instanceof a))return new a(e);f.call(this,e,y.INFLATE)}function s(e){if(!(this instanceof s))return new s(e);f.call(this,e,y.GZIP)}function l(e){if(!(this instanceof l))return new l(e);f.call(this,e,y.GUNZIP)}function u(e){if(!(this instanceof u))return new u(e);f.call(this,e,y.DEFLATERAW)}function c(e){if(!(this instanceof c))return new c(e);f.call(this,e,y.INFLATERAW)}function h(e){if(!(this instanceof h))return new h(e);f.call(this,e,y.UNZIP)}function d(e){return e===y.Z_NO_FLUSH||e===y.Z_PARTIAL_FLUSH||e===y.Z_SYNC_FLUSH||e===y.Z_FULL_FLUSH||e===y.Z_FINISH||e===y.Z_BLOCK}function f(e,n){var r=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,g.call(this,e),e.flush&&!d(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!d(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||y.Z_NO_FLUSH,this._finishFlushFlag="undefined"!==typeof e.finishFlush?e.finishFlush:y.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!v.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new y.Zlib(n);var i=this;this._hadError=!1,this._handle.onerror=function(e,n){p(i),i._hadError=!0;var r=new Error(e);r.errno=n,r.code=t.codes[n],i.emit("error",r)};var o=t.Z_DEFAULT_COMPRESSION;"number"===typeof e.level&&(o=e.level);var a=t.Z_DEFAULT_STRATEGY;"number"===typeof e.strategy&&(a=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,o,e.memLevel||t.Z_DEFAULT_MEMLEVEL,a,e.dictionary),this._buffer=v.allocUnsafe(this._chunkSize),this._offset=0,this._level=o,this._strategy=a,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!r._handle},configurable:!0,enumerable:!0})}function p(t,n){n&&e.nextTick(n),t._handle&&(t._handle.close(),t._handle=null)}function m(e){e.emit("close")}var v=n(43).Buffer,g=n(506).Transform,y=n(518),_=n(181),b=n(180).ok,w=n(43).kMaxLength,x="Cannot create final Buffer. It would be larger than 0x"+w.toString(16)+" bytes";y.Z_MIN_WINDOWBITS=8,y.Z_MAX_WINDOWBITS=15,y.Z_DEFAULT_WINDOWBITS=15,y.Z_MIN_CHUNK=64,y.Z_MAX_CHUNK=1/0,y.Z_DEFAULT_CHUNK=16384,y.Z_MIN_MEMLEVEL=1,y.Z_MAX_MEMLEVEL=9,y.Z_DEFAULT_MEMLEVEL=8,y.Z_MIN_LEVEL=-1,y.Z_MAX_LEVEL=9,y.Z_DEFAULT_LEVEL=y.Z_DEFAULT_COMPRESSION;for(var E=Object.keys(y),S=0;S<E.length;S++){var T=E[S];T.match(/^Z/)&&Object.defineProperty(t,T,{enumerable:!0,value:y[T],writable:!1})}for(var M={Z_OK:y.Z_OK,Z_STREAM_END:y.Z_STREAM_END,Z_NEED_DICT:y.Z_NEED_DICT,Z_ERRNO:y.Z_ERRNO,Z_STREAM_ERROR:y.Z_STREAM_ERROR,Z_DATA_ERROR:y.Z_DATA_ERROR,Z_MEM_ERROR:y.Z_MEM_ERROR,Z_BUF_ERROR:y.Z_BUF_ERROR,Z_VERSION_ERROR:y.Z_VERSION_ERROR},k=Object.keys(M),P=0;P<k.length;P++){var C=k[P];M[M[C]]=C}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(M),writable:!1}),t.Deflate=o,t.Inflate=a,t.Gzip=s,t.Gunzip=l,t.DeflateRaw=u,t.InflateRaw=c,t.Unzip=h,t.createDeflate=function(e){return new o(e)},t.createInflate=function(e){return new a(e)},t.createDeflateRaw=function(e){return new u(e)},t.createInflateRaw=function(e){return new c(e)},t.createGzip=function(e){return new s(e)},t.createGunzip=function(e){return new l(e)},t.createUnzip=function(e){return new h(e)},t.deflate=function(e,t,n){return"function"===typeof t&&(n=t,t={}),r(new o(t),e,n)},t.deflateSync=function(e,t){return i(new o(t),e)},t.gzip=function(e,t,n){return"function"===typeof t&&(n=t,t={}),r(new s(t),e,n)},t.gzipSync=function(e,t){return i(new s(t),e)},t.deflateRaw=function(e,t,n){return"function"===typeof t&&(n=t,t={}),r(new u(t),e,n)},t.deflateRawSync=function(e,t){return i(new u(t),e)},t.unzip=function(e,t,n){return"function"===typeof t&&(n=t,t={}),r(new h(t),e,n)},t.unzipSync=function(e,t){return i(new h(t),e)},t.inflate=function(e,t,n){return"function"===typeof t&&(n=t,t={}),r(new a(t),e,n)},t.inflateSync=function(e,t){return i(new a(t),e)},t.gunzip=function(e,t,n){return"function"===typeof t&&(n=t,t={}),r(new l(t),e,n)},t.gunzipSync=function(e,t){return i(new l(t),e)},t.inflateRaw=function(e,t,n){return"function"===typeof t&&(n=t,t={}),r(new c(t),e,n)},t.inflateRawSync=function(e,t){return i(new c(t),e)},_.inherits(f,g),f.prototype.params=function(n,r,i){if(n<t.Z_MIN_LEVEL||n>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+n);if(r!=t.Z_FILTERED&&r!=t.Z_HUFFMAN_ONLY&&r!=t.Z_RLE&&r!=t.Z_FIXED&&r!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==n||this._strategy!==r){var o=this;this.flush(y.Z_SYNC_FLUSH,function(){b(o._handle,"zlib binding closed"),o._handle.params(n,r),o._hadError||(o._level=n,o._strategy=r,i&&i())})}else e.nextTick(i)},f.prototype.reset=function(){return b(this._handle,"zlib binding closed"),this._handle.reset()},f.prototype._flush=function(e){this._transform(v.alloc(0),"",e)},f.prototype.flush=function(t,n){var r=this,i=this._writableState;("function"===typeof t||void 0===t&&!n)&&(n=t,t=y.Z_FULL_FLUSH),i.ended?n&&e.nextTick(n):i.ending?n&&this.once("end",n):i.needDrain?n&&this.once("drain",function(){return r.flush(t,n)}):(this._flushFlag=t,this.write(v.alloc(0),"",n))},f.prototype.close=function(t){p(this,t),e.nextTick(m,this)},f.prototype._transform=function(e,t,n){var r,i=this._writableState,o=i.ending||i.ended,a=o&&(!e||i.length===e.length);return null===e||v.isBuffer(e)?this._handle?(a?r=this._finishFlushFlag:(r=this._flushFlag,e.length>=i.length&&(this._flushFlag=this._opts.flush||y.Z_NO_FLUSH)),void this._processChunk(e,r,n)):n(new Error("zlib binding closed")):n(new Error("invalid input"))},f.prototype._processChunk=function(e,t,n){function r(u,d){if(this&&(this.buffer=null,this.callback=null),!s._hadError){var f=o-d;if(b(f>=0,"have should not go down"),f>0){var p=s._buffer.slice(s._offset,s._offset+f);s._offset+=f,l?s.push(p):(c.push(p),h+=p.length)}if((0===d||s._offset>=s._chunkSize)&&(o=s._chunkSize,s._offset=0,s._buffer=v.allocUnsafe(s._chunkSize)),0===d){if(a+=i-u,i=u,!l)return!0;var m=s._handle.write(t,e,a,i,s._buffer,s._offset,s._chunkSize);return m.callback=r,void(m.buffer=e)}if(!l)return!1;n()}}var i=e&&e.length,o=this._chunkSize-this._offset,a=0,s=this,l="function"===typeof n;if(!l){var u,c=[],h=0;this.on("error",function(e){u=e}),b(this._handle,"zlib binding closed");do{var d=this._handle.writeSync(t,e,a,i,this._buffer,this._offset,o)}while(!this._hadError&&r(d[0],d[1]));if(this._hadError)throw u;if(h>=w)throw p(this),new RangeError(x);var f=v.concat(c,h);return p(this),f}b(this._handle,"zlib binding closed");var m=this._handle.write(t,e,a,i,this._buffer,this._offset,o);m.buffer=e,m.callback=r},_.inherits(o,f),_.inherits(a,f),_.inherits(s,f),_.inherits(l,f),_.inherits(u,f),_.inherits(c,f),_.inherits(h,f)}).call(t,n(23))},function(e,t,n){function r(){i.call(this)}e.exports=r;var i=n(71).EventEmitter;n(29)(r,i),r.Readable=n(113),r.Writable=n(514),r.Duplex=n(515),r.Transform=n(516),r.PassThrough=n(517),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&u.pause&&u.pause()}function r(){u.readable&&u.resume&&u.resume()}function o(){c||(c=!0,e.end())}function a(){c||(c=!0,"function"===typeof e.destroy&&e.destroy())}function s(e){if(l(),0===i.listenerCount(this,"error"))throw e}function l(){u.removeListener("data",n),e.removeListener("drain",r),u.removeListener("end",o),u.removeListener("close",a),u.removeListener("error",s),e.removeListener("error",s),u.removeListener("end",l),u.removeListener("close",l),e.removeListener("close",l)}var u=this;u.on("data",n),e.on("drain",r),e._isStdio||t&&!1===t.end||(u.on("end",o),u.on("close",a));var c=!1;return u.on("error",s),e.on("error",s),u.on("end",l),u.on("close",l),e.on("close",l),e.emit("pipe",u),e}},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){e.copy(t,n)}var o=n(74).Buffer,a=n(509);e.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t=o.allocUnsafe(e>>>0),n=this.head,r=0;n;)i(n.data,t,r),r+=n.data.length,n=n.next;return t},e}(),a&&a.inspect&&a.inspect.custom&&(e.exports.prototype[a.inspect.custom]=function(){var e=a.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var i="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(511),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(14))},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return u[l]=r,s(l),l++}function i(e){delete u[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function a(e){if(c)setTimeout(a,0,e);else{var t=u[e];if(t){c=!0;try{o(t)}finally{i(e),c=!1}}}}if(!e.setImmediate){var s,l=1,u={},c=!1,h=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),s=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},s=function(t){e.port2.postMessage(t)}}():h&&"onreadystatechange"in h.createElement("script")?function(){var e=h.documentElement;s=function(t){var n=h.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){s=function(e){setTimeout(a,0,e)}}(),d.setImmediate=r,d.clearImmediate=i}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(t,n(14),n(23))},function(e,t,n){(function(t){function n(e,t){function n(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var i=!1;return n}function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=n}).call(t,n(14))},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}e.exports=r;var i=n(179),o=n(51);o.inherits=n(29),o.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(114)},function(e,t,n){e.exports=n(30)},function(e,t,n){e.exports=n(113).Transform},function(e,t,n){e.exports=n(113).PassThrough},function(e,t,n){"use strict";(function(e,r){function i(e){if("number"!==typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}var o=n(180),a=n(520),s=n(521),l=n(524),u=n(527);for(var c in u)t[c]=u[c];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7;i.prototype.close=function(){if(this.write_in_progress)return void(this.pending_close=!0);this.pending_close=!1,o(this.init_done,"close before init"),o(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?s.deflateEnd(this.strm):this.mode!==t.INFLATE&&this.mode!==t.GUNZIP&&this.mode!==t.INFLATERAW&&this.mode!==t.UNZIP||l.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null},i.prototype.write=function(e,t,n,r,i,o,a){return this._write(!0,e,t,n,r,i,o,a)},i.prototype.writeSync=function(e,t,n,r,i,o,a){return this._write(!1,e,t,n,r,i,o,a)},i.prototype._write=function(n,i,a,s,l,u,c,h){if(o.equal(arguments.length,8),o(this.init_done,"write before init"),o(this.mode!==t.NONE,"already finalized"),o.equal(!1,this.write_in_progress,"write already in progress"),o.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,o.equal(!1,void 0===i,"must provide flush value"),this.write_in_progress=!0,i!==t.Z_NO_FLUSH&&i!==t.Z_PARTIAL_FLUSH&&i!==t.Z_SYNC_FLUSH&&i!==t.Z_FULL_FLUSH&&i!==t.Z_FINISH&&i!==t.Z_BLOCK)throw new Error("Invalid flush value");if(null==a&&(a=e.alloc(0),l=0,s=0),this.strm.avail_in=l,this.strm.input=a,this.strm.next_in=s,this.strm.avail_out=h,this.strm.output=u,this.strm.next_out=c,this.flush=i,n){var d=this;return r.nextTick(function(){d._process(),d._after()}),this}if(this._process(),this._checkError())return this._afterSync()},i.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},i.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=s.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=t.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=l.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=l.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=l.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=l.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},i.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},i.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},i.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},i.prototype.init=function(e,n,r,i,a){o(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),o(e>=8&&e<=15,"invalid windowBits"),o(n>=-1&&n<=9,"invalid compression level"),o(r>=1&&r<=9,"invalid memlevel"),o(i===t.Z_FILTERED||i===t.Z_HUFFMAN_ONLY||i===t.Z_RLE||i===t.Z_FIXED||i===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(n,e,r,i,a),this._setDictionary()},i.prototype.params=function(){throw new Error("deflateParams Not supported")},i.prototype.reset=function(){this._reset(),this._setDictionary()},i.prototype._init=function(e,n,r,i,o){switch(this.level=e,this.windowBits=n,this.memLevel=r,this.strategy=i,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new a,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=s.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=l.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=o,this.write_in_progress=!1,this.init_done=!0},i.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=s.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},i.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=s.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=l.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=i}).call(t,n(43).Buffer,n(23))},function(e,t){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},function(e,t,n){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=r},function(e,t,n){"use strict";function r(e,t){return e.msg=L[t],t}function i(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function a(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(A.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function s(e,t){O._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,a(e.strm)}function l(e,t){e.pending_buf[e.pending++]=t}function u(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function c(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,A.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=I(e.adler,t,i,n):2===e.state.wrap&&(e.adler=R(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function h(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-ue?e.strstart-(e.w_size-ue):0,u=e.window,c=e.w_mask,h=e.prev,d=e.strstart+le,f=u[o+a-1],p=u[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(n=t,u[n+a]===p&&u[n+a-1]===f&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<d);if(r=le-(d-o),o=d-le,r>a){if(e.match_start=t,a=r,r>=s)break;f=u[o+a-1],p=u[o+a]}}}while((t=h[t&c])>l&&0!==--i);return a<=e.lookahead?a:e.lookahead}function d(e){var t,n,r,i,o,a=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-ue)){A.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,n=e.hash_size,t=n;do{r=e.head[--t],e.head[t]=r>=a?r-a:0}while(--n);n=a,t=n;do{r=e.prev[--t],e.prev[t]=r>=a?r-a:0}while(--n);i+=a}if(0===e.strm.avail_in)break;if(n=c(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=se)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+se-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<se)););}while(e.lookahead<ue&&0!==e.strm.avail_in)}function f(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(d(e),0===e.lookahead&&t===D)return ye;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,s(e,!1),0===e.strm.avail_out))return ye;if(e.strstart-e.block_start>=e.w_size-ue&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===U?(s(e,!0),0===e.strm.avail_out?be:we):(e.strstart>e.block_start&&(s(e,!1),e.strm.avail_out),ye)}function p(e,t){for(var n,r;;){if(e.lookahead<ue){if(d(e),e.lookahead<ue&&t===D)return ye;if(0===e.lookahead)break}if(n=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ue&&(e.match_length=h(e,n)),e.match_length>=se)if(r=O._tr_tally(e,e.strstart-e.match_start,e.match_length-se),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=se){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=O._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=e.strstart<se-1?e.strstart:se-1,t===U?(s(e,!0),0===e.strm.avail_out?be:we):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:_e}function m(e,t){for(var n,r,i;;){if(e.lookahead<ue){if(d(e),e.lookahead<ue&&t===D)return ye;if(0===e.lookahead)break}if(n=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=se-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ue&&(e.match_length=h(e,n),e.match_length<=5&&(e.strategy===q||e.match_length===se&&e.strstart-e.match_start>4096)&&(e.match_length=se-1)),e.prev_length>=se&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-se,r=O._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-se),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=se-1,e.strstart++,r&&(s(e,!1),0===e.strm.avail_out))return ye}else if(e.match_available){if(r=O._tr_tally(e,0,e.window[e.strstart-1]),r&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return ye}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=O._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<se-1?e.strstart:se-1,t===U?(s(e,!0),0===e.strm.avail_out?be:we):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:_e}function v(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=le){if(d(e),e.lookahead<=le&&t===D)return ye;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=se&&e.strstart>0&&(i=e.strstart-1,(r=a[i])===a[++i]&&r===a[++i]&&r===a[++i])){o=e.strstart+le;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=le-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=se?(n=O._tr_tally(e,1,e.match_length-se),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=O._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===U?(s(e,!0),0===e.strm.avail_out?be:we):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:_e}function g(e,t){for(var n;;){if(0===e.lookahead&&(d(e),0===e.lookahead)){if(t===D)return ye;break}if(e.match_length=0,n=O._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===U?(s(e,!0),0===e.strm.avail_out?be:we):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:_e}function y(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function _(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=C[e.level].max_lazy,e.good_match=C[e.level].good_length,e.nice_match=C[e.level].nice_length,e.max_chain_length=C[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=se-1,e.match_available=0,e.ins_h=0}function b(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Q,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new A.Buf16(2*oe),this.dyn_dtree=new A.Buf16(2*(2*re+1)),this.bl_tree=new A.Buf16(2*(2*ie+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new A.Buf16(ae+1),this.heap=new A.Buf16(2*ne+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new A.Buf16(2*ne+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=K,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?he:ve,e.adler=2===t.wrap?0:1,t.last_flush=D,O._tr_init(t),B):r(e,H)}function x(e){var t=w(e);return t===B&&_(e.state),t}function E(e,t){return e&&e.state?2!==e.state.wrap?H:(e.state.gzhead=t,B):H}function S(e,t,n,i,o,a){if(!e)return H;var s=1;if(t===W&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),o<1||o>$||n!==Q||i<8||i>15||t<0||t>9||a<0||a>Z)return r(e,H);8===i&&(i=9);var l=new b;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+se-1)/se),l.window=new A.Buf8(2*l.w_size),l.head=new A.Buf16(l.hash_size),l.prev=new A.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new A.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=n,x(e)}function T(e,t){return S(e,t,Q,ee,te,J)}function M(e,t){var n,s,c,h;if(!e||!e.state||t>z||t<0)return e?r(e,H):H;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||s.status===ge&&t!==U)return r(e,0===e.avail_out?G:H);if(s.strm=e,n=s.last_flush,s.last_flush=t,s.status===he)if(2===s.wrap)e.adler=0,l(s,31),l(s,139),l(s,8),s.gzhead?(l(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),l(s,255&s.gzhead.time),l(s,s.gzhead.time>>8&255),l(s,s.gzhead.time>>16&255),l(s,s.gzhead.time>>24&255),l(s,9===s.level?2:s.strategy>=X||s.level<2?4:0),l(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(l(s,255&s.gzhead.extra.length),l(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=R(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=de):(l(s,0),l(s,0),l(s,0),l(s,0),l(s,0),l(s,9===s.level?2:s.strategy>=X||s.level<2?4:0),l(s,xe),s.status=ve);else{var d=Q+(s.w_bits-8<<4)<<8,f=-1;f=s.strategy>=X||s.level<2?0:s.level<6?1:6===s.level?2:3,d|=f<<6,0!==s.strstart&&(d|=ce),d+=31-d%31,s.status=ve,u(s,d),0!==s.strstart&&(u(s,e.adler>>>16),u(s,65535&e.adler)),e.adler=1}if(s.status===de)if(s.gzhead.extra){for(c=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>c&&(e.adler=R(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending!==s.pending_buf_size));)l(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>c&&(e.adler=R(e.adler,s.pending_buf,s.pending-c,c)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=fe)}else s.status=fe;if(s.status===fe)if(s.gzhead.name){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(e.adler=R(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending===s.pending_buf_size)){h=1;break}h=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,l(s,h)}while(0!==h);s.gzhead.hcrc&&s.pending>c&&(e.adler=R(e.adler,s.pending_buf,s.pending-c,c)),0===h&&(s.gzindex=0,s.status=pe)}else s.status=pe;if(s.status===pe)if(s.gzhead.comment){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(e.adler=R(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending===s.pending_buf_size)){h=1;break}h=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,l(s,h)}while(0!==h);s.gzhead.hcrc&&s.pending>c&&(e.adler=R(e.adler,s.pending_buf,s.pending-c,c)),0===h&&(s.status=me)}else s.status=me;if(s.status===me&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&a(e),s.pending+2<=s.pending_buf_size&&(l(s,255&e.adler),l(s,e.adler>>8&255),e.adler=0,s.status=ve)):s.status=ve),0!==s.pending){if(a(e),0===e.avail_out)return s.last_flush=-1,B}else if(0===e.avail_in&&i(t)<=i(n)&&t!==U)return r(e,G);if(s.status===ge&&0!==e.avail_in)return r(e,G);if(0!==e.avail_in||0!==s.lookahead||t!==D&&s.status!==ge){var p=s.strategy===X?g(s,t):s.strategy===Y?v(s,t):C[s.level].func(s,t);if(p!==be&&p!==we||(s.status=ge),p===ye||p===be)return 0===e.avail_out&&(s.last_flush=-1),B;if(p===_e&&(t===N?O._tr_align(s):t!==z&&(O._tr_stored_block(s,0,0,!1),t===F&&(o(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),a(e),0===e.avail_out))return s.last_flush=-1,B}return t!==U?B:s.wrap<=0?j:(2===s.wrap?(l(s,255&e.adler),l(s,e.adler>>8&255),l(s,e.adler>>16&255),l(s,e.adler>>24&255),l(s,255&e.total_in),l(s,e.total_in>>8&255),l(s,e.total_in>>16&255),l(s,e.total_in>>24&255)):(u(s,e.adler>>>16),u(s,65535&e.adler)),a(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?B:j)}function k(e){var t;return e&&e.state?(t=e.state.status)!==he&&t!==de&&t!==fe&&t!==pe&&t!==me&&t!==ve&&t!==ge?r(e,H):(e.state=null,t===ve?r(e,V):B):H}function P(e,t){var n,r,i,a,s,l,u,c,h=t.length;if(!e||!e.state)return H;if(n=e.state,2===(a=n.wrap)||1===a&&n.status!==he||n.lookahead)return H;for(1===a&&(e.adler=I(e.adler,t,h,0)),n.wrap=0,h>=n.w_size&&(0===a&&(o(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new A.Buf8(n.w_size),A.arraySet(c,t,h-n.w_size,n.w_size,0),t=c,h=n.w_size),s=e.avail_in,l=e.next_in,u=e.input,e.avail_in=h,e.next_in=0,e.input=t,d(n);n.lookahead>=se;){r=n.strstart,i=n.lookahead-(se-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+se-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=se-1,d(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=se-1,n.match_available=0,e.next_in=l,e.input=u,e.avail_in=s,n.wrap=a,B}var C,A=n(75),O=n(522),I=n(182),R=n(183),L=n(523),D=0,N=1,F=3,U=4,z=5,B=0,j=1,H=-2,V=-3,G=-5,W=-1,q=1,X=2,Y=3,Z=4,J=0,K=2,Q=8,$=9,ee=15,te=8,ne=286,re=30,ie=19,oe=2*ne+1,ae=15,se=3,le=258,ue=le+se+1,ce=32,he=42,de=69,fe=73,pe=91,me=103,ve=113,ge=666,ye=1,_e=2,be=3,we=4,xe=3;C=[new y(0,0,0,0,f),new y(4,4,8,4,p),new y(4,5,16,8,p),new y(4,6,32,32,p),new y(4,4,16,16,m),new y(8,16,32,32,m),new y(8,16,128,128,m),new y(8,32,128,256,m),new y(32,128,258,1024,m),new y(32,258,258,4096,m)],t.deflateInit=T,t.deflateInit2=S,t.deflateReset=x,t.deflateResetKeep=w,t.deflateSetHeader=E,t.deflate=M,t.deflateEnd=k,t.deflateSetDictionary=P,t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";function r(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function o(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function a(e){return e<256?oe[e]:oe[256+(e>>>7)]}function s(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function l(e,t,n){e.bi_valid>X-n?(e.bi_buf|=t<<e.bi_valid&65535,s(e,e.bi_buf),e.bi_buf=t>>X-e.bi_valid,e.bi_valid+=n-X):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function u(e,t,n){l(e,n[2*t],n[2*t+1])}function c(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function h(e){16===e.bi_valid?(s(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function d(e,t){var n,r,i,o,a,s,l=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,h=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(o=0;o<=q;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<W;n++)r=e.heap[n],o=l[2*l[2*r+1]+1]+1,o>p&&(o=p,m++),l[2*r+1]=o,r>u||(e.bl_count[o]++,a=0,r>=f&&(a=d[r-f]),s=l[2*r],e.opt_len+=s*(o+a),h&&(e.static_len+=s*(c[2*r+1]+a)));if(0!==m){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(r=e.bl_count[o];0!==r;)(i=e.heap[--n])>u||(l[2*i+1]!==o&&(e.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),r--)}}function f(e,t,n){var r,i,o=new Array(q+1),a=0;for(r=1;r<=q;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=c(o[s]++,s))}}function p(){var e,t,n,r,o,a=new Array(q+1);for(n=0,r=0;r<B-1;r++)for(se[r]=n,e=0;e<1<<$[r];e++)ae[n++]=r;for(ae[n-1]=r,o=0,r=0;r<16;r++)for(le[r]=o,e=0;e<1<<ee[r];e++)oe[o++]=r;for(o>>=7;r<V;r++)for(le[r]=o<<7,e=0;e<1<<ee[r]-7;e++)oe[256+o++]=r;for(t=0;t<=q;t++)a[t]=0;for(e=0;e<=143;)re[2*e+1]=8,e++,a[8]++;for(;e<=255;)re[2*e+1]=9,e++,a[9]++;for(;e<=279;)re[2*e+1]=7,e++,a[7]++;for(;e<=287;)re[2*e+1]=8,e++,a[8]++;for(f(re,H+1,a),e=0;e<V;e++)ie[2*e+1]=5,ie[2*e]=c(e,5);ue=new i(re,$,j+1,H,q),ce=new i(ie,ee,0,V,q),he=new i(new Array(0),te,0,G,Y)}function m(e){var t;for(t=0;t<H;t++)e.dyn_ltree[2*t]=0;for(t=0;t<V;t++)e.dyn_dtree[2*t]=0;for(t=0;t<G;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Z]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function v(e){e.bi_valid>8?s(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function g(e,t,n,r){v(e),r&&(s(e,n),s(e,~n)),I.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function y(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function _(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&y(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!y(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function b(e,t,n){var r,i,o,s,c=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],i=e.pending_buf[e.l_buf+c],c++,0===r?u(e,i,t):(o=ae[i],u(e,o+j+1,t),s=$[o],0!==s&&(i-=se[o],l(e,i,s)),r--,o=a(r),u(e,o,n),0!==(s=ee[o])&&(r-=le[o],l(e,r,s)))}while(c<e.last_lit);u(e,Z,t)}function w(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=W,n=0;n<l;n++)0!==o[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)i=e.heap[++e.heap_len]=u<2?++u:0,o[2*i]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)_(e,o,n);i=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],_(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,_(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],d(e,t),f(o,u,e.bl_count)}function x(e,t,n){var r,i,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<l&&i===a||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*J]++):s<=10?e.bl_tree[2*K]++:e.bl_tree[2*Q]++,s=0,o=i,0===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4))}function E(e,t,n){var r,i,o=-1,a=t[1],s=0,c=7,h=4;for(0===a&&(c=138,h=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<c&&i===a)){if(s<h)do{u(e,i,e.bl_tree)}while(0!==--s);else 0!==i?(i!==o&&(u(e,i,e.bl_tree),s--),u(e,J,e.bl_tree),l(e,s-3,2)):s<=10?(u(e,K,e.bl_tree),l(e,s-3,3)):(u(e,Q,e.bl_tree),l(e,s-11,7));s=0,o=i,0===a?(c=138,h=3):i===a?(c=6,h=3):(c=7,h=4)}}function S(e){var t;for(x(e,e.dyn_ltree,e.l_desc.max_code),x(e,e.dyn_dtree,e.d_desc.max_code),w(e,e.bl_desc),t=G-1;t>=3&&0===e.bl_tree[2*ne[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function T(e,t,n,r){var i;for(l(e,t-257,5),l(e,n-1,5),l(e,r-4,4),i=0;i<r;i++)l(e,e.bl_tree[2*ne[i]+1],3);E(e,e.dyn_ltree,t-1),E(e,e.dyn_dtree,n-1)}function M(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return L;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return D;for(t=32;t<j;t++)if(0!==e.dyn_ltree[2*t])return D;return L}function k(e){de||(p(),de=!0),e.l_desc=new o(e.dyn_ltree,ue),e.d_desc=new o(e.dyn_dtree,ce),e.bl_desc=new o(e.bl_tree,he),e.bi_buf=0,e.bi_valid=0,m(e)}function P(e,t,n,r){l(e,(F<<1)+(r?1:0),3),g(e,t,n,!0)}function C(e){l(e,U<<1,3),u(e,Z,re),h(e)}function A(e,t,n,r){var i,o,a=0;e.level>0?(e.strm.data_type===N&&(e.strm.data_type=M(e)),w(e,e.l_desc),w(e,e.d_desc),a=S(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?P(e,t,n,r):e.strategy===R||o===i?(l(e,(U<<1)+(r?1:0),3),b(e,re,ie)):(l(e,(z<<1)+(r?1:0),3),T(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),b(e,e.dyn_ltree,e.dyn_dtree)),m(e),r&&v(e)}function O(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(ae[n]+j+1)]++,e.dyn_dtree[2*a(t)]++),e.last_lit===e.lit_bufsize-1}var I=n(75),R=4,L=0,D=1,N=2,F=0,U=1,z=2,B=29,j=256,H=j+1+B,V=30,G=19,W=2*H+1,q=15,X=16,Y=7,Z=256,J=16,K=17,Q=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ee=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],re=new Array(2*(H+2));r(re);var ie=new Array(2*V);r(ie);var oe=new Array(512);r(oe);var ae=new Array(256);r(ae);var se=new Array(B);r(se);var le=new Array(V);r(le);var ue,ce,he,de=!1;t._tr_init=k,t._tr_stored_block=P,t._tr_flush_block=A,t._tr_tally=O,t._tr_align=C},function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new y.Buf16(320),this.work=new y.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=F,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new y.Buf32(me),t.distcode=t.distdyn=new y.Buf32(ve),t.sane=1,t.back=-1,C):I}function a(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,o(e)):I}function s(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?I:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,a(e))):I}function l(e,t){var n,r;return e?(r=new i,e.state=r,r.window=null,n=s(e,t),n!==C&&(e.state=null),n):I}function u(e){return l(e,ge)}function c(e){if(ye){var t;for(v=new y.Buf32(512),g=new y.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(x(S,e.lens,0,288,v,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;x(T,e.lens,0,32,g,0,e.work,{bits:5}),ye=!1}e.lencode=v,e.lenbits=9,e.distcode=g,e.distbits=5}function h(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new y.Buf8(o.wsize)),r>=o.wsize?(y.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),y.arraySet(o.window,t,n-r,i,o.wnext),r-=i,r?(y.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function d(e,t){var n,i,o,a,s,l,u,d,f,p,m,v,g,me,ve,ge,ye,_e,be,we,xe,Ee,Se,Te,Me=0,ke=new y.Buf8(4),Pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return I;n=e.state,n.mode===Y&&(n.mode=Z),s=e.next_out,o=e.output,u=e.avail_out,a=e.next_in,i=e.input,l=e.avail_in,d=n.hold,f=n.bits,p=l,m=u,Ee=C;e:for(;;)switch(n.mode){case F:if(0===n.wrap){n.mode=Z;break}for(;f<16;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(2&n.wrap&&35615===d){n.check=0,ke[0]=255&d,ke[1]=d>>>8&255,n.check=b(n.check,ke,2,0),d=0,f=0,n.mode=U;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=de;break}if((15&d)!==N){e.msg="unknown compression method",n.mode=de;break}if(d>>>=4,f-=4,xe=8+(15&d),0===n.wbits)n.wbits=xe;else if(xe>n.wbits){e.msg="invalid window size",n.mode=de;break}n.dmax=1<<xe,e.adler=n.check=1,n.mode=512&d?q:Y,d=0,f=0;break;case U:for(;f<16;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(n.flags=d,(255&n.flags)!==N){e.msg="unknown compression method",n.mode=de;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=de;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&(ke[0]=255&d,ke[1]=d>>>8&255,n.check=b(n.check,ke,2,0)),d=0,f=0,n.mode=z;case z:for(;f<32;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}n.head&&(n.head.time=d),512&n.flags&&(ke[0]=255&d,ke[1]=d>>>8&255,ke[2]=d>>>16&255,ke[3]=d>>>24&255,n.check=b(n.check,ke,4,0)),d=0,f=0,n.mode=B;case B:for(;f<16;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&(ke[0]=255&d,ke[1]=d>>>8&255,n.check=b(n.check,ke,2,0)),d=0,f=0,n.mode=j;case j:if(1024&n.flags){for(;f<16;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&(ke[0]=255&d,ke[1]=d>>>8&255,n.check=b(n.check,ke,2,0)),d=0,f=0}else n.head&&(n.head.extra=null);n.mode=H;case H:if(1024&n.flags&&(v=n.length,v>l&&(v=l),v&&(n.head&&(xe=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),y.arraySet(n.head.extra,i,a,v,xe)),512&n.flags&&(n.check=b(n.check,i,v,a)),l-=v,a+=v,n.length-=v),n.length))break e;n.length=0,n.mode=V;case V:if(2048&n.flags){if(0===l)break e;v=0;do{xe=i[a+v++],n.head&&xe&&n.length<65536&&(n.head.name+=String.fromCharCode(xe))}while(xe&&v<l);if(512&n.flags&&(n.check=b(n.check,i,v,a)),l-=v,a+=v,xe)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=G;case G:if(4096&n.flags){if(0===l)break e;v=0;do{xe=i[a+v++],n.head&&xe&&n.length<65536&&(n.head.comment+=String.fromCharCode(xe))}while(xe&&v<l);if(512&n.flags&&(n.check=b(n.check,i,v,a)),l-=v,a+=v,xe)break e}else n.head&&(n.head.comment=null);n.mode=W;case W:if(512&n.flags){for(;f<16;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(d!==(65535&n.check)){e.msg="header crc mismatch",n.mode=de;break}d=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Y;break;case q:for(;f<32;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}e.adler=n.check=r(d),d=0,f=0,n.mode=X;case X:if(0===n.havedict)return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=l,n.hold=d,n.bits=f,O;e.adler=n.check=1,n.mode=Y;case Y:if(t===k||t===P)break e;case Z:if(n.last){d>>>=7&f,f-=7&f,n.mode=ue;break}for(;f<3;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}switch(n.last=1&d,d>>>=1,f-=1,3&d){case 0:n.mode=J;break;case 1:if(c(n),n.mode=ne,t===P){d>>>=2,f-=2;break e}break;case 2:n.mode=$;break;case 3:e.msg="invalid block type",n.mode=de}d>>>=2,f-=2;break;case J:for(d>>>=7&f,f-=7&f;f<32;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if((65535&d)!==(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=de;break}if(n.length=65535&d,d=0,f=0,n.mode=K,t===P)break e;case K:n.mode=Q;case Q:if(v=n.length){if(v>l&&(v=l),v>u&&(v=u),0===v)break e;y.arraySet(o,i,a,v,s),l-=v,a+=v,u-=v,s+=v,n.length-=v;break}n.mode=Y;break;case $:for(;f<14;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(n.nlen=257+(31&d),d>>>=5,f-=5,n.ndist=1+(31&d),d>>>=5,f-=5,n.ncode=4+(15&d),d>>>=4,f-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=de;break}n.have=0,n.mode=ee;case ee:for(;n.have<n.ncode;){for(;f<3;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}n.lens[Pe[n.have++]]=7&d,d>>>=3,f-=3}for(;n.have<19;)n.lens[Pe[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Se={bits:n.lenbits},Ee=x(E,n.lens,0,19,n.lencode,0,n.work,Se),n.lenbits=Se.bits,Ee){e.msg="invalid code lengths set",n.mode=de;break}n.have=0,n.mode=te;case te:for(;n.have<n.nlen+n.ndist;){for(;Me=n.lencode[d&(1<<n.lenbits)-1],ve=Me>>>24,ge=Me>>>16&255,ye=65535&Me,!(ve<=f);){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(ye<16)d>>>=ve,f-=ve,n.lens[n.have++]=ye;else{if(16===ye){for(Te=ve+2;f<Te;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(d>>>=ve,f-=ve,0===n.have){e.msg="invalid bit length repeat",n.mode=de;break}xe=n.lens[n.have-1],v=3+(3&d),d>>>=2,f-=2}else if(17===ye){for(Te=ve+3;f<Te;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}d>>>=ve,f-=ve,xe=0,v=3+(7&d),d>>>=3,f-=3}else{for(Te=ve+7;f<Te;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}d>>>=ve,f-=ve,xe=0,v=11+(127&d),d>>>=7,f-=7}if(n.have+v>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=de;break}for(;v--;)n.lens[n.have++]=xe}}if(n.mode===de)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=de;break}if(n.lenbits=9,Se={bits:n.lenbits},Ee=x(S,n.lens,0,n.nlen,n.lencode,0,n.work,Se),n.lenbits=Se.bits,Ee){e.msg="invalid literal/lengths set",n.mode=de;break}if(n.distbits=6,n.distcode=n.distdyn,Se={bits:n.distbits},Ee=x(T,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Se),n.distbits=Se.bits,Ee){e.msg="invalid distances set",n.mode=de;break}if(n.mode=ne,t===P)break e;case ne:n.mode=re;case re:if(l>=6&&u>=258){e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=l,n.hold=d,n.bits=f,w(e,m),s=e.next_out,o=e.output,u=e.avail_out,a=e.next_in,i=e.input,l=e.avail_in,d=n.hold,f=n.bits,n.mode===Y&&(n.back=-1);break}for(n.back=0;Me=n.lencode[d&(1<<n.lenbits)-1],ve=Me>>>24,ge=Me>>>16&255,ye=65535&Me,!(ve<=f);){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(ge&&0===(240&ge)){for(_e=ve,be=ge,we=ye;Me=n.lencode[we+((d&(1<<_e+be)-1)>>_e)],ve=Me>>>24,ge=Me>>>16&255,ye=65535&Me,!(_e+ve<=f);){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}d>>>=_e,f-=_e,n.back+=_e}if(d>>>=ve,f-=ve,n.back+=ve,n.length=ye,0===ge){n.mode=le;break}if(32&ge){n.back=-1,n.mode=Y;break}if(64&ge){e.msg="invalid literal/length code",n.mode=de;break}n.extra=15&ge,n.mode=ie;case ie:if(n.extra){for(Te=n.extra;f<Te;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=oe;case oe:for(;Me=n.distcode[d&(1<<n.distbits)-1],ve=Me>>>24,ge=Me>>>16&255,ye=65535&Me,!(ve<=f);){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(0===(240&ge)){for(_e=ve,be=ge,we=ye;Me=n.distcode[we+((d&(1<<_e+be)-1)>>_e)],ve=Me>>>24,ge=Me>>>16&255,ye=65535&Me,!(_e+ve<=f);){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}d>>>=_e,f-=_e,n.back+=_e}if(d>>>=ve,f-=ve,n.back+=ve,64&ge){e.msg="invalid distance code",n.mode=de;break}n.offset=ye,n.extra=15&ge,n.mode=ae;case ae:if(n.extra){for(Te=n.extra;f<Te;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,f-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=de;break}n.mode=se;case se:if(0===u)break e;if(v=m-u,n.offset>v){if((v=n.offset-v)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=de;break}v>n.wnext?(v-=n.wnext,g=n.wsize-v):g=n.wnext-v,v>n.length&&(v=n.length),me=n.window}else me=o,g=s-n.offset,v=n.length;v>u&&(v=u),u-=v,n.length-=v;do{o[s++]=me[g++]}while(--v);0===n.length&&(n.mode=re);break;case le:if(0===u)break e;o[s++]=n.length,u--,n.mode=re;break;case ue:if(n.wrap){for(;f<32;){if(0===l)break e;l--,d|=i[a++]<<f,f+=8}if(m-=u,e.total_out+=m,n.total+=m,m&&(e.adler=n.check=n.flags?b(n.check,o,m,s-m):_(n.check,o,m,s-m)),m=u,(n.flags?d:r(d))!==n.check){e.msg="incorrect data check",n.mode=de;break}d=0,f=0}n.mode=ce;case ce:if(n.wrap&&n.flags){for(;f<32;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(d!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=de;break}d=0,f=0}n.mode=he;case he:Ee=A;break e;case de:Ee=R;break e;case fe:return L;case pe:default:return I}return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=l,n.hold=d,n.bits=f,(n.wsize||m!==e.avail_out&&n.mode<de&&(n.mode<ue||t!==M))&&h(e,e.output,e.next_out,m-e.avail_out)?(n.mode=fe,L):(p-=e.avail_in,m-=e.avail_out,e.total_in+=p,e.total_out+=m,n.total+=m,n.wrap&&m&&(e.adler=n.check=n.flags?b(n.check,o,m,e.next_out-m):_(n.check,o,m,e.next_out-m)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Y?128:0)+(n.mode===ne||n.mode===K?256:0),(0===p&&0===m||t===M)&&Ee===C&&(Ee=D),Ee)}function f(e){if(!e||!e.state)return I;var t=e.state;return t.window&&(t.window=null),e.state=null,C}function p(e,t){var n;return e&&e.state?(n=e.state,0===(2&n.wrap)?I:(n.head=t,t.done=!1,C)):I}function m(e,t){var n,r,i=t.length;return e&&e.state?(n=e.state,0!==n.wrap&&n.mode!==X?I:n.mode===X&&(r=1,(r=_(r,t,i,0))!==n.check)?R:h(e,t,i,i)?(n.mode=fe,L):(n.havedict=1,C)):I}var v,g,y=n(75),_=n(182),b=n(183),w=n(525),x=n(526),E=0,S=1,T=2,M=4,k=5,P=6,C=0,A=1,O=2,I=-2,R=-3,L=-4,D=-5,N=8,F=1,U=2,z=3,B=4,j=5,H=6,V=7,G=8,W=9,q=10,X=11,Y=12,Z=13,J=14,K=15,Q=16,$=17,ee=18,te=19,ne=20,re=21,ie=22,oe=23,ae=24,se=25,le=26,ue=27,ce=28,he=29,de=30,fe=31,pe=32,me=852,ve=592,ge=15,ye=!0;t.inflateReset=a,t.inflateReset2=s,t.inflateResetKeep=o,t.inflateInit=u,t.inflateInit2=l,t.inflate=d,t.inflateEnd=f,t.inflateGetHeader=p,t.inflateSetDictionary=m,t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,i,o,a,s,l,u,c,h,d,f,p,m,v,g,y,_,b,w,x,E,S,T,M;n=e.state,r=e.next_in,T=e.input,i=r+(e.avail_in-5),o=e.next_out,M=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=n.dmax,u=n.wsize,c=n.whave,h=n.wnext,d=n.window,f=n.hold,p=n.bits,m=n.lencode,v=n.distcode,g=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{p<15&&(f+=T[r++]<<p,p+=8,f+=T[r++]<<p,p+=8),_=m[f&g];t:for(;;){if(b=_>>>24,f>>>=b,p-=b,0===(b=_>>>16&255))M[o++]=65535&_;else{if(!(16&b)){if(0===(64&b)){_=m[(65535&_)+(f&(1<<b)-1)];continue t}if(32&b){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&_,b&=15,b&&(p<b&&(f+=T[r++]<<p,p+=8),w+=f&(1<<b)-1,f>>>=b,p-=b),p<15&&(f+=T[r++]<<p,p+=8,f+=T[r++]<<p,p+=8),_=v[f&y];n:for(;;){if(b=_>>>24,f>>>=b,p-=b,!(16&(b=_>>>16&255))){if(0===(64&b)){_=v[(65535&_)+(f&(1<<b)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(x=65535&_,b&=15,p<b&&(f+=T[r++]<<p,(p+=8)<b&&(f+=T[r++]<<p,p+=8)),(x+=f&(1<<b)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=b,p-=b,b=o-a,x>b){if((b=x-b)>c&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(E=0,S=d,0===h){if(E+=u-b,b<w){w-=b;do{M[o++]=d[E++]}while(--b);E=o-x,S=M}}else if(h<b){if(E+=u+h-b,(b-=h)<w){w-=b;do{M[o++]=d[E++]}while(--b);if(E=0,h<w){b=h,w-=b;do{M[o++]=d[E++]}while(--b);E=o-x,S=M}}}else if(E+=h-b,b<w){w-=b;do{M[o++]=d[E++]}while(--b);E=o-x,S=M}for(;w>2;)M[o++]=S[E++],M[o++]=S[E++],M[o++]=S[E++],w-=3;w&&(M[o++]=S[E++],w>1&&(M[o++]=S[E++]))}else{E=o-x;do{M[o++]=M[E++],M[o++]=M[E++],M[o++]=M[E++],w-=3}while(w>2);w&&(M[o++]=M[E++],w>1&&(M[o++]=M[E++]))}break}}break}}while(r<i&&o<s);w=p>>3,r-=w,p-=w<<3,f&=(1<<p)-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=f,n.bits=p}},function(e,t,n){"use strict";var r=n(75),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,l,u,c,h,d){var f,p,m,v,g,y,_,b,w,x=d.bits,E=0,S=0,T=0,M=0,k=0,P=0,C=0,A=0,O=0,I=0,R=null,L=0,D=new r.Buf16(16),N=new r.Buf16(16),F=null,U=0;for(E=0;E<=15;E++)D[E]=0;for(S=0;S<l;S++)D[t[n+S]]++;for(k=x,M=15;M>=1&&0===D[M];M--);if(k>M&&(k=M),0===M)return u[c++]=20971520,u[c++]=20971520,d.bits=1,0;for(T=1;T<M&&0===D[T];T++);for(k<T&&(k=T),A=1,E=1;E<=15;E++)if(A<<=1,(A-=D[E])<0)return-1;if(A>0&&(0===e||1!==M))return-1;for(N[1]=0,E=1;E<15;E++)N[E+1]=N[E]+D[E];for(S=0;S<l;S++)0!==t[n+S]&&(h[N[t[n+S]]++]=S);if(0===e?(R=F=h,y=19):1===e?(R=i,L-=257,F=o,U-=257,y=256):(R=a,F=s,y=-1),I=0,S=0,E=T,g=c,P=k,C=0,m=-1,O=1<<k,v=O-1,1===e&&O>852||2===e&&O>592)return 1;for(;;){_=E-C,h[S]<y?(b=0,w=h[S]):h[S]>y?(b=F[U+h[S]],w=R[L+h[S]]):(b=96,w=0),f=1<<E-C,p=1<<P,T=p;do{p-=f,u[g+(I>>C)+p]=_<<24|b<<16|w|0}while(0!==p);for(f=1<<E-1;I&f;)f>>=1;if(0!==f?(I&=f-1,I+=f):I=0,S++,0===--D[E]){if(E===M)break;E=t[n+h[S]]}if(E>k&&(I&v)!==m){for(0===C&&(C=k),g+=T,P=E-C,A=1<<P;P+C<M&&!((A-=D[P+C])<=0);)P++,A<<=1;if(O+=1<<P,1===e&&O>852||2===e&&O>592)return 1;m=I&v,u[m]=k<<24|P<<16|g-c|0}}return 0!==I&&(u[g+I]=E-C<<24|64<<16|0),d.bits=k,0}},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){"use strict";var r=r||{};r.lossless=r.lossless||{},r.lossless.ComponentSpec=r.lossless.ComponentSpec||n(184),r.lossless.DataStream=r.lossless.DataStream||n(44),r.lossless.Decoder=r.lossless.Decoder||n(529),r.lossless.FrameHeader=r.lossless.FrameHeader||n(189),r.lossless.HuffmanTable=r.lossless.HuffmanTable||n(185),r.lossless.QuantizationTable=r.lossless.QuantizationTable||n(186),r.lossless.ScanComponent=r.lossless.ScanComponent||n(188),r.lossless.ScanHeader=r.lossless.ScanHeader||n(187),r.lossless.Utils=r.lossless.Utils||n(76),"undefined"!==typeof e&&e.exports&&(e.exports=r)},function(e,t,n){"use strict";var r=r||{};r.lossless=r.lossless||{},r.lossless.DataStream=r.lossless.DataStream||n(44),r.lossless.HuffmanTable=r.lossless.HuffmanTable||n(185),r.lossless.QuantizationTable=r.lossless.QuantizationTable||n(186),r.lossless.ScanHeader=r.lossless.ScanHeader||n(187),r.lossless.FrameHeader=r.lossless.FrameHeader||n(189),r.lossless.Utils=r.lossless.Utils||n(76),r.lossless.Decoder=r.lossless.Decoder||function(e,t){this.buffer=e,this.frame=new r.lossless.FrameHeader,this.huffTable=new r.lossless.HuffmanTable,this.quantTable=new r.lossless.QuantizationTable,this.scan=new r.lossless.ScanHeader,this.DU=r.lossless.Utils.createArray(10,4,64),this.HuffTab=r.lossless.Utils.createArray(4,2,12800),this.IDCT_Source=[],this.nBlock=[],this.acTab=r.lossless.Utils.createArray(10,1),this.dcTab=r.lossless.Utils.createArray(10,1),this.qTab=r.lossless.Utils.createArray(10,1),this.marker=0,this.markerIndex=0,this.numComp=0,this.restartInterval=0,this.selection=0,this.xDim=0,this.yDim=0,this.xLoc=0,this.yLoc=0,this.numBytes=0,this.outputData=null,this.restarting=!1,this.mask=0,"undefined"!==typeof t&&(this.numBytes=t)},r.lossless.Decoder.IDCT_P=[0,5,40,16,45,2,7,42,21,56,8,61,18,47,1,4,41,23,58,13,32,24,37,10,63,17,44,3,6,43,20,57,15,34,29,48,53,26,39,9,60,19,46,22,59,12,33,31,50,55,25,36,11,62,14,35,28,49,52,27,38,30,51,54],r.lossless.Decoder.TABLE=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],r.lossless.Decoder.MAX_HUFFMAN_SUBTREE=50,r.lossless.Decoder.MSB=2147483648,r.lossless.Decoder.RESTART_MARKER_BEGIN=65488,r.lossless.Decoder.RESTART_MARKER_END=65495,r.lossless.Decoder.prototype.decompress=function(e,t,n){return this.decode(e,t,n).buffer},r.lossless.Decoder.prototype.decode=function(e,t,n,i){var o,a,s,l,u=0,c=[],h=[],d=[];if("undefined"!==typeof e&&(this.buffer=e),"undefined"!==typeof i&&(this.numBytes=i),this.stream=new r.lossless.DataStream(this.buffer,t,n),this.buffer=null,this.xLoc=0,this.yLoc=0,65496!==(o=this.stream.get16()))throw new Error("Not a JPEG file");for(o=this.stream.get16();o>>4!==4092||65476===o;){switch(o){case 65476:this.huffTable.read(this.stream,this.HuffTab);break;case 65484:throw new Error("Program doesn't support arithmetic coding. (format throw new IOException)");case 65499:this.quantTable.read(this.stream,r.lossless.Decoder.TABLE);break;case 65501:this.restartInterval=this.readNumber();break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:this.readApp();break;case 65534:this.readComment();break;default:if(o>>8!==255)throw new Error("ERROR: format throw new IOException! (decode)")}o=this.stream.get16()}if(o<65472||o>65479)throw new Error("ERROR: could not handle arithmetic code!");this.frame.read(this.stream),o=this.stream.get16();do{for(;65498!==o;){switch(o){case 65476:this.huffTable.read(this.stream,this.HuffTab);break;case 65484:throw new Error("Program doesn't support arithmetic coding. (format throw new IOException)");case 65499:this.quantTable.read(this.stream,r.lossless.Decoder.TABLE);break;case 65501:this.restartInterval=this.readNumber();break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:this.readApp();break;case 65534:this.readComment();break;default:if(o>>8!==255)throw new Error("ERROR: format throw new IOException! (Parser.decode)")}o=this.stream.get16()}switch(this.precision=this.frame.precision,this.components=this.frame.components,this.numBytes||(this.numBytes=parseInt(Math.ceil(this.precision/8))),1==this.numBytes?this.mask=255:this.mask=65535,this.scan.read(this.stream),this.numComp=this.scan.numComp,this.selection=this.scan.selection,1===this.numBytes?3===this.numComp?(this.getter=this.getValueRGB,this.setter=this.setValueRGB,this.output=this.outputRGB):(this.getter=this.getValue8,this.setter=this.setValue8,this.output=this.outputSingle):(this.getter=this.getValue16,this.setter=this.setValue16,this.output=this.outputSingle),this.selection){case 2:this.selector=this.select2;break;case 3:this.selector=this.select3;break;case 4:this.selector=this.select4;break;case 5:this.selector=this.select5;break;case 6:this.selector=this.select6;break;case 7:this.selector=this.select7;break;default:this.selector=this.select1}for(this.scanComps=this.scan.components,this.quantTables=this.quantTable.quantTables,a=0;a<this.numComp;a+=1)s=this.scanComps[a].scanCompSel,this.qTab[a]=this.quantTables[this.components[s].quantTableSel],this.nBlock[a]=this.components[s].vSamp*this.components[s].hSamp,this.dcTab[a]=this.HuffTab[this.scanComps[a].dcTabSel][0],this.acTab[a]=this.HuffTab[this.scanComps[a].acTabSel][1];for(this.xDim=this.frame.dimX,this.yDim=this.frame.dimY,this.outputData=new DataView(new ArrayBuffer(this.xDim*this.yDim*this.numBytes*this.numComp)),u+=1;;){for(h[0]=0,d[0]=0,a=0;a<10;a+=1)c[a]=1<<this.precision-1;if(0===this.restartInterval){for(o=this.decodeUnit(c,h,d);0===o&&this.xLoc<this.xDim&&this.yLoc<this.yDim;)this.output(c),o=this.decodeUnit(c,h,d);break}for(l=0;l<this.restartInterval&&(this.restarting=0==l,o=this.decodeUnit(c,h,d),this.output(c),0===o);l+=1);if(0===o&&(0!==this.markerIndex?(o=65280|this.marker,this.markerIndex=0):o=this.stream.get16()),!(o>=r.lossless.Decoder.RESTART_MARKER_BEGIN&&o<=r.lossless.Decoder.RESTART_MARKER_END))break}65500===o&&1===u&&(this.readNumber(),o=this.stream.get16())}while(65497!==o&&this.xLoc<this.xDim&&this.yLoc<this.yDim&&0===u);return this.outputData},r.lossless.Decoder.prototype.decodeUnit=function(e,t,n){return 1==this.numComp?this.decodeSingle(e,t,n):3==this.numComp?this.decodeRGB(e,t,n):-1},r.lossless.Decoder.prototype.select1=function(e){return this.getPreviousX(e)},r.lossless.Decoder.prototype.select2=function(e){return this.getPreviousY(e)},r.lossless.Decoder.prototype.select3=function(e){return this.getPreviousXY(e)},r.lossless.Decoder.prototype.select4=function(e){return this.getPreviousX(e)+this.getPreviousY(e)-this.getPreviousXY(e)},r.lossless.Decoder.prototype.select5=function(e){return this.getPreviousX(e)+(this.getPreviousY(e)-this.getPreviousXY(e)>>1)},r.lossless.Decoder.prototype.select6=function(e){return this.getPreviousY(e)+(this.getPreviousX(e)-this.getPreviousXY(e)>>1)},r.lossless.Decoder.prototype.select7=function(e){return(this.getPreviousX(e)+this.getPreviousY(e))/2},r.lossless.Decoder.prototype.decodeRGB=function(e,t,n){var i,o,a,s,l,u,c,h;for(e[0]=this.selector(0),e[1]=this.selector(1),e[2]=this.selector(2),l=0;l<this.numComp;l+=1)for(s=this.qTab[l],o=this.acTab[l],a=this.dcTab[l],u=0;u<this.nBlock[l];u+=1){for(c=0;c<this.IDCT_Source.length;c+=1)this.IDCT_Source[c]=0;if((i=this.getHuffmanValue(a,t,n))>=65280)return i;for(e[l]=this.IDCT_Source[0]=e[l]+this.getn(n,i,t,n),this.IDCT_Source[0]*=s[0],h=1;h<64;h+=1){if((i=this.getHuffmanValue(o,t,n))>=65280)return i;if(h+=i>>4,0===(15&i)){if(i>>4===0)break}else this.IDCT_Source[r.lossless.Decoder.IDCT_P[h]]=this.getn(n,15&i,t,n)*s[h]}}return 0},r.lossless.Decoder.prototype.decodeSingle=function(e,t,n){var i,o,a,s;for(this.restarting?(this.restarting=!1,e[0]=1<<this.frame.precision-1):e[0]=this.selector(),o=0;o<this.nBlock[0];o+=1){if((i=this.getHuffmanValue(this.dcTab[0],t,n))>=65280)return i;if(a=this.getn(e,i,t,n),(s=a>>8)>=r.lossless.Decoder.RESTART_MARKER_BEGIN&&s<=r.lossless.Decoder.RESTART_MARKER_END)return s;e[0]+=a}return 0},r.lossless.Decoder.prototype.getHuffmanValue=function(e,t,n){var i,o,a;if(a=65535,n[0]<8?(t[0]<<=8,o=this.stream.get8(),255===o&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),t[0]|=o):n[0]-=8,0!==((i=e[t[0]>>n[0]])&r.lossless.Decoder.MSB)){if(0!==this.markerIndex)return this.markerIndex=0,65280|this.marker;t[0]&=a>>16-n[0],t[0]<<=8,o=this.stream.get8(),255===o&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),t[0]|=o,i=e[256*(255&i)+(t[0]>>n[0])],n[0]+=8}if(n[0]+=8-(i>>8),n[0]<0)throw new Error("index="+n[0]+" temp="+t[0]+" code="+i+" in HuffmanValue()");return n[0]<this.markerIndex?(this.markerIndex=0,65280|this.marker):(t[0]&=a>>16-n[0],255&i)},r.lossless.Decoder.prototype.getn=function(e,t,n,r){var i,o,a,s,l;if(o=1,a=-1,s=65535,0===t)return 0;if(16===t)return e[0]>=0?-32768:32768;if(r[0]-=t,r[0]>=0){if(r[0]<this.markerIndex&&!this.isLastPixel())return this.markerIndex=0,(65280|this.marker)<<8;i=n[0]>>r[0],n[0]&=s>>16-r[0]}else{if(n[0]<<=8,l=this.stream.get8(),255===l&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),n[0]|=l,r[0]+=8,r[0]<0){if(0!==this.markerIndex)return this.markerIndex=0,(65280|this.marker)<<8;n[0]<<=8,l=this.stream.get8(),255===l&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),n[0]|=l,r[0]+=8}if(r[0]<0)throw new Error("index="+r[0]+" in getn()");if(r[0]<this.markerIndex)return this.markerIndex=0,(65280|this.marker)<<8;i=n[0]>>r[0],n[0]&=s>>16-r[0]}return i<o<<t-1&&(i+=1+(a<<t)),i},r.lossless.Decoder.prototype.getPreviousX=function(e){return this.xLoc>0?this.getter(this.yLoc*this.xDim+this.xLoc-1,e):this.yLoc>0?this.getPreviousY(e):1<<this.frame.precision-1},r.lossless.Decoder.prototype.getPreviousXY=function(e){return this.xLoc>0&&this.yLoc>0?this.getter((this.yLoc-1)*this.xDim+this.xLoc-1,e):this.getPreviousY(e)},r.lossless.Decoder.prototype.getPreviousY=function(e){return this.yLoc>0?this.getter((this.yLoc-1)*this.xDim+this.xLoc,e):this.getPreviousX(e)},r.lossless.Decoder.prototype.isLastPixel=function(){return this.xLoc===this.xDim-1&&this.yLoc===this.yDim-1},r.lossless.Decoder.prototype.outputSingle=function(e){this.xLoc<this.xDim&&this.yLoc<this.yDim&&(this.setter(this.yLoc*this.xDim+this.xLoc,this.mask&e[0]),this.xLoc+=1,this.xLoc>=this.xDim&&(this.yLoc+=1,this.xLoc=0))},r.lossless.Decoder.prototype.outputRGB=function(e){var t=this.yLoc*this.xDim+this.xLoc;this.xLoc<this.xDim&&this.yLoc<this.yDim&&(this.setter(t,e[0],0),this.setter(t,e[1],1),this.setter(t,e[2],2),this.xLoc+=1,this.xLoc>=this.xDim&&(this.yLoc+=1,this.xLoc=0))},r.lossless.Decoder.prototype.setValue16=function(e,t){this.outputData.setInt16(2*e,t,!0)},r.lossless.Decoder.prototype.getValue16=function(e){return this.outputData.getInt16(2*e,!0)},r.lossless.Decoder.prototype.setValue8=function(e,t){this.outputData.setInt8(e,t)},r.lossless.Decoder.prototype.getValue8=function(e){return this.outputData.getInt8(e)},r.lossless.Decoder.prototype.setValueRGB=function(e,t,n){this.outputData.setUint8(3*e+n,t)},r.lossless.Decoder.prototype.getValueRGB=function(e,t){return this.outputData.getUint8(3*e+t)},r.lossless.Decoder.prototype.readApp=function(){var e=0,t=this.stream.get16();for(e+=2;e<t;)this.stream.get8(),e+=1;return t},r.lossless.Decoder.prototype.readComment=function(){var e,t="",n=0;for(e=this.stream.get16(),n+=2;n<e;)t+=this.stream.get8(),n+=1;return t},r.lossless.Decoder.prototype.readNumber=function(){if(4!==this.stream.get16())throw new Error("ERROR: Define number format throw new IOException [Ld!=4]");return this.stream.get16()},"undefined"!==typeof e&&e.exports&&(e.exports=r.lossless.Decoder)},function(e,t,n){(function(e){var t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n={Unkown:0,Grayscale:1,AdobeRGB:2,RGB:3,CYMK:4},r=function(){"use strict";function e(){}function r(e,t){for(var n,r,i=0,o=[],a=16;a>0&&!e[a-1];)a--;o.push({children:[],index:0});var s,l=o[0];for(n=0;n<a;n++){for(r=0;r<e[n];r++){for(l=o.pop(),l.children[l.index]=t[i];l.index>0;)l=o.pop();for(l.index++,o.push(l);o.length<=n;)o.push(s={children:[],index:0}),l.children[l.index]=s.children,l=s;i++}n+1<a&&(o.push(s={children:[],index:0}),l.children[l.index]=s.children,l=s)}return o[0].children}function i(e,t,n){return 64*((e.blocksPerLine+1)*t+n)}function o(e,n,r,o,a,s,l,c,h){function d(){if(I>0)return I--,O>>I&1;if(255==(O=e[n++])){var t=e[n++];if(t)throw"unexpected marker: "+(O<<8|t).toString(16)}return I=7,O>>>7}function f(e){for(var n,r=e;null!==(n=d());){if("number"===typeof(r=r[n]))return r;if("object"!==("undefined"===typeof r?"undefined":t(r)))throw"invalid huffman sequence"}return null}function p(e){for(var t=0;e>0;){var n=d();if(null===n)return;t=t<<1|n,e--}return t}function m(e){var t=p(e);return t>=1<<e-1?t:t+(-1<<e)+1}function v(e,t){var n=f(e.huffmanTableDC),r=0===n?0:m(n);e.blockData[t]=e.pred+=r;for(var i=1;i<64;){var o=f(e.huffmanTableAC),a=15&o,s=o>>4;if(0!==a){i+=s;var l=u[i];e.blockData[t+l]=m(a),i++}else{if(s<15)break;i+=16}}}function g(e,t){var n=f(e.huffmanTableDC),r=0===n?0:m(n)<<h;e.blockData[t]=e.pred+=r}function y(e,t){e.blockData[t]|=d()<<h}function _(e,t){if(R>0)return void R--;for(var n=s,r=l;n<=r;){var i=f(e.huffmanTableAC),o=15&i,a=i>>4;if(0!==o){n+=a;var c=u[n];e.blockData[t+c]=m(o)*(1<<h),n++}else{if(a<15){R=p(a)+(1<<a)-1;break}n+=16}}}function b(e,t){for(var n=s,r=l,i=0;n<=r;){var o=u[n];switch(L){case 0:var a=f(e.huffmanTableAC),c=15&a;if(i=a>>4,0===c)i<15?(R=p(i)+(1<<i),L=4):(i=16,L=1);else{if(1!==c)throw"invalid ACn encoding";w=m(c),L=i?2:3}continue;case 1:case 2:e.blockData[t+o]?e.blockData[t+o]+=d()<<h:0===--i&&(L=2==L?3:0);break;case 3:e.blockData[t+o]?e.blockData[t+o]+=d()<<h:(e.blockData[t+o]=w<<h,L=0);break;case 4:e.blockData[t+o]&&(e.blockData[t+o]+=d()<<h)}n++}4===L&&0===--R&&(L=0)}var w,x,E,S,T,M,k,P=(r.precision,r.samplesPerLine,r.scanLines,r.mcusPerLine),C=r.progressive,A=(r.maxH,r.maxV,n),O=0,I=0,R=0,L=0,D=o.length;k=C?0===s?0===c?g:y:0===c?_:b:v;var N,F,U=0;F=1==D?o[0].blocksPerLine*o[0].blocksPerColumn:P*r.mcusPerColumn,a||(a=F);for(var z,B;U<F;){for(E=0;E<D;E++)o[E].pred=0;if(R=0,1==D)for(x=o[0],M=0;M<a;M++)!function(e,t,n){t(e,i(e,n/e.blocksPerLine|0,n%e.blocksPerLine))}(x,k,U),U++;else for(M=0;M<a;M++){for(E=0;E<D;E++)for(x=o[E],z=x.h,B=x.v,S=0;S<B;S++)for(T=0;T<z;T++)!function(e,t,n,r,o){var a=n/P|0,s=n%P;t(e,i(e,a*e.v+r,s*e.h+o))}(x,k,U,S,T);U++}if(I=0,(N=e[n]<<8|e[n+1])<=65280)throw"marker was not found";if(!(N>=65488&&N<=65495))break;n+=2}return n-A}function a(e,t,n){var r,i,o,a,s,l,u,y,_,b,w=e.quantizationTable;for(b=0;b<64;b++)n[b]=e.blockData[t+b]*w[b];for(b=0;b<8;++b){var x=8*b;0!==n[1+x]||0!==n[2+x]||0!==n[3+x]||0!==n[4+x]||0!==n[5+x]||0!==n[6+x]||0!==n[7+x]?(r=v*n[0+x]+128>>8,i=v*n[4+x]+128>>8,o=n[2+x],a=n[6+x],s=g*(n[1+x]-n[7+x])+128>>8,y=g*(n[1+x]+n[7+x])+128>>8,l=n[3+x]<<4,u=n[5+x]<<4,_=r-i+1>>1,r=r+i+1>>1,i=_,_=o*m+a*p+128>>8,o=o*p-a*m+128>>8,a=_,_=s-u+1>>1,s=s+u+1>>1,u=_,_=y+l+1>>1,l=y-l+1>>1,y=_,_=r-a+1>>1,r=r+a+1>>1,a=_,_=i-o+1>>1,i=i+o+1>>1,o=_,_=s*f+y*d+2048>>12,s=s*d-y*f+2048>>12,y=_,_=l*h+u*c+2048>>12,l=l*c-u*h+2048>>12,u=_,n[0+x]=r+y,n[7+x]=r-y,n[1+x]=i+u,n[6+x]=i-u,n[2+x]=o+l,n[5+x]=o-l,n[3+x]=a+s,n[4+x]=a-s):(_=v*n[0+x]+512>>10,n[0+x]=_,n[1+x]=_,n[2+x]=_,n[3+x]=_,n[4+x]=_,n[5+x]=_,n[6+x]=_,n[7+x]=_)}for(b=0;b<8;++b){var E=b;0!==n[8+E]||0!==n[16+E]||0!==n[24+E]||0!==n[32+E]||0!==n[40+E]||0!==n[48+E]||0!==n[56+E]?(r=v*n[0+E]+2048>>12,i=v*n[32+E]+2048>>12,o=n[16+E],a=n[48+E],s=g*(n[8+E]-n[56+E])+2048>>12,y=g*(n[8+E]+n[56+E])+2048>>12,l=n[24+E],u=n[40+E],_=r-i+1>>1,r=r+i+1>>1,i=_,_=o*m+a*p+2048>>12,o=o*p-a*m+2048>>12,a=_,_=s-u+1>>1,s=s+u+1>>1,u=_,_=y+l+1>>1,l=y-l+1>>1,y=_,_=r-a+1>>1,r=r+a+1>>1,a=_,_=i-o+1>>1,i=i+o+1>>1,o=_,_=s*f+y*d+2048>>12,s=s*d-y*f+2048>>12,y=_,_=l*h+u*c+2048>>12,l=l*c-u*h+2048>>12,u=_,n[0+E]=r+y,n[56+E]=r-y,n[8+E]=i+u,n[48+E]=i-u,n[16+E]=o+l,n[40+E]=o-l,n[24+E]=a+s,n[32+E]=a-s):(_=v*n[b+0]+8192>>14,n[0+E]=_,n[8+E]=_,n[16+E]=_,n[24+E]=_,n[32+E]=_,n[40+E]=_,n[48+E]=_,n[56+E]=_)}for(b=0;b<64;++b){var S=t+b,T=n[b];T=T<=-2056/e.bitConversion?0:T>=2024/e.bitConversion?255/e.bitConversion:T+2056/e.bitConversion>>4,e.blockData[S]=T}}function s(e,t){for(var n=t.blocksPerLine,r=t.blocksPerColumn,o=new Int32Array(64),s=0;s<r;s++)for(var l=0;l<n;l++){var u=i(t,s,l);a(t,u,o)}return t.blockData}function l(e){return e<=0?0:e>=255?255:0|e}var u=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),c=4017,h=799,d=3406,f=2276,p=1567,m=3784,v=5793,g=2896;return e.prototype={load:function(e){var t=function(e){this.parse(e),this.onload&&this.onload()}.bind(this);if(e.indexOf("data:")>-1){for(var n=e.indexOf("base64,")+7,r=atob(e.substring(n)),i=new Uint8Array(r.length),o=r.length-1;o>=0;o--)i[o]=r.charCodeAt(o);t(r)}else{var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(){var e=new Uint8Array(a.response);t(e)}.bind(this),a.send(null)}},parse:function(e){function t(){var t=e[l]<<8|e[l+1];return l+=2,t}var i,a,l=0,c=(e.length,null),h=null,d=[],f=[],p=[],m=t();if(65496!=m)throw"SOI not found";for(m=t();65497!=m;){var v,g,y;switch(m){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var _=function(){var n=t(),r=e.subarray(l,l+n-2);return l+=r.length,r}();65504===m&&74===_[0]&&70===_[1]&&73===_[2]&&70===_[3]&&0===_[4]&&(c={version:{major:_[5],minor:_[6]},densityUnits:_[7],xDensity:_[8]<<8|_[9],yDensity:_[10]<<8|_[11],thumbWidth:_[12],thumbHeight:_[13],thumbData:_.subarray(14,14+3*_[12]*_[13])}),65518===m&&65===_[0]&&100===_[1]&&111===_[2]&&98===_[3]&&101===_[4]&&0===_[5]&&(h={version:_[6],flags0:_[7]<<8|_[8],flags1:_[9]<<8|_[10],transformCode:_[11]});break;case 65499:for(var b=t(),w=b+l-2;l<w;){var x=e[l++],E=new Int32Array(64);if(x>>4===0)for(g=0;g<64;g++){var S=u[g];E[S]=e[l++]}else{if(x>>4!==1)throw"DQT: invalid table spec";for(g=0;g<64;g++){E[u[g]]=t()}}d[15&x]=E}break;case 65472:case 65473:case 65474:if(i)throw"Only single frame JPEGs supported";t(),i={},i.extended=65473===m,i.progressive=65474===m,i.precision=e[l++],i.scanLines=t(),i.samplesPerLine=t(),i.components=[],i.componentIds={};var T,M=e[l++],k=0,P=0;for(v=0;v<M;v++){T=e[l];var C=e[l+1]>>4,A=15&e[l+1];k<C&&(k=C),P<A&&(P=A);var O=e[l+2];y=i.components.push({h:C,v:A,quantizationTable:d[O],quantizationTableId:O,bitConversion:255/((1<<i.precision)-1)}),i.componentIds[T]=y-1,l+=3}i.maxH=k,i.maxV=P,function(e){for(var t=Math.ceil(e.samplesPerLine/8/e.maxH),n=Math.ceil(e.scanLines/8/e.maxV),r=0;r<e.components.length;r++){F=e.components[r];var i=Math.ceil(Math.ceil(e.samplesPerLine/8)*F.h/e.maxH),o=Math.ceil(Math.ceil(e.scanLines/8)*F.v/e.maxV),a=t*F.h,s=n*F.v,l=64*s*(a+1);F.blockData=new Int16Array(l),F.blocksPerLine=i,F.blocksPerColumn=o}e.mcusPerLine=t,e.mcusPerColumn=n}(i);break;case 65476:var I=t();for(v=2;v<I;){var R=e[l++],L=new Uint8Array(16),D=0;for(g=0;g<16;g++,l++)D+=L[g]=e[l];var N=new Uint8Array(D);for(g=0;g<D;g++,l++)N[g]=e[l];v+=17+D,(R>>4===0?p:f)[15&R]=r(L,N)}break;case 65501:t(),a=t();break;case 65498:var F,U=(t(),e[l++]),z=[];for(v=0;v<U;v++){var B=i.componentIds[e[l++]];F=i.components[B];var j=e[l++];F.huffmanTableDC=p[j>>4],F.huffmanTableAC=f[15&j],z.push(F)}var H=e[l++],V=e[l++],G=e[l++],W=o(e,l,i,z,a,H,V,G>>4,15&G);l+=W;break;default:if(255==e[l-3]&&e[l-2]>=192&&e[l-2]<=254){l-=3;break}throw"unknown JPEG marker "+m.toString(16)}m=t()}switch(this.width=i.samplesPerLine,this.height=i.scanLines,this.jfif=c,this.adobe=h,this.components=[],i.components.length){case 1:this.colorspace=n.Grayscale;break;case 3:this.adobe?this.colorspace=n.AdobeRGB:this.colorspace=n.RGB;break;case 4:this.colorspace=n.CYMK;break;default:this.colorspace=n.Unknown}for(var v=0;v<i.components.length;v++){var F=i.components[v];F.quantizationTable||null===F.quantizationTableId||(F.quantizationTable=d[F.quantizationTableId]),this.components.push({output:s(i,F),scaleX:F.h/i.maxH,scaleY:F.v/i.maxV,blocksPerLine:F.blocksPerLine,blocksPerColumn:F.blocksPerColumn,bitConversion:F.bitConversion})}},getData16:function(e,t){if(1!==this.components.length)throw"Unsupported color mode";var n,r,o,a,s,l,u=this.width/e,c=this.height/t,h=0,d=this.components.length,f=e*t*d,p=new Uint16Array(f),m=new Uint16Array((this.components[0].blocksPerLine<<3)*this.components[0].blocksPerColumn*8);for(l=0;l<d;l++){n=this.components[l];for(var v,g,y=n.blocksPerLine,_=n.blocksPerColumn,b=y<<3,w=0,x=0;x<_;x++)for(var E=x<<3,S=0;S<y;S++){var T=i(n,x,S),h=0,M=S<<3;for(v=0;v<8;v++){var w=(E+v)*b;for(g=0;g<8;g++)m[w+M+g]=n.output[T+h++]}}r=n.scaleX*u,o=n.scaleY*c,h=l;var k,P,C;for(s=0;s<t;s++)for(a=0;a<e;a++)P=0|s*o,k=0|a*r,C=P*b+k,p[h]=m[C],h+=d}return p},getData:function(e,t){var n,r,o,a,s,u,c,h,d,f,p,m,v,g,y,_=this.width/e,b=this.height/t,w=0,x=this.components.length,E=e*t*x,S=new Uint8Array(E),T=new Uint8Array((this.components[0].blocksPerLine<<3)*this.components[0].blocksPerColumn*8);for(u=0;u<x;u++){n=this.components[u];for(var M,k,P=n.blocksPerLine,C=n.blocksPerColumn,A=P<<3,O=0,I=0;I<C;I++)for(var R=I<<3,L=0;L<P;L++){var D=i(n,I,L),w=0,N=L<<3;for(M=0;M<8;M++){var O=(R+M)*A;for(k=0;k<8;k++)T[O+N+k]=n.output[D+w++]*n.bitConversion}}r=n.scaleX*_,o=n.scaleY*b,w=u;var F,U,z;for(s=0;s<t;s++)for(a=0;a<e;a++)U=0|s*o,F=0|a*r,z=U*A+F,S[w]=T[z],w+=x}switch(x){case 1:case 2:break;case 3:if(y=!0,this.adobe&&this.adobe.transformCode?y=!0:"undefined"!==typeof this.colorTransform&&(y=!!this.colorTransform),y)for(u=0;u<E;u+=x)c=S[u],h=S[u+1],d=S[u+2],m=l(c-179.456+1.402*d),v=l(c+135.459-.344*h-.714*d),g=l(c-226.816+1.772*h),S[u]=m,S[u+1]=v,S[u+2]=g;break;case 4:if(!this.adobe)throw"Unsupported color mode (4 components)";if(y=!1,this.adobe&&this.adobe.transformCode?y=!0:"undefined"!==typeof this.colorTransform&&(y=!!this.colorTransform),y)for(u=0;u<E;u+=x)c=S[u],h=S[u+1],d=S[u+2],f=l(434.456-c-1.402*d),p=l(119.541-c+.344*h+.714*d),c=l(481.816-c-1.772*h),S[u]=f,S[u+1]=p,S[u+2]=c;break;default:throw"Unsupported color mode"}return S}},e}();"undefined"!==t(e)&&e.exports&&(e.exports=r)}).call(t,n(69)(e))},function(e,t,n){"use strict";(function(e){function t(e){PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.infos&&console.log("Info: "+e)}function n(e){PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.warnings&&console.log("Warning: "+e)}function r(e){if(arguments.length>1){var t=["Error:"];t.push.apply(t,arguments),console.log.apply(console,t),e=[].join.call(arguments," ")}else console.log("Error: "+e);throw console.log(i()),_.notify(y.unknown),new Error(e)}function i(){try{throw new Error}catch(e){return e.stack?e.stack.split("\n").slice(2).join("\n"):""}}function o(e,t){if(!e)return!1;var n=/^[a-z][a-z0-9+\-.]*(?=:)/i.exec(e);if(!n)return t;switch(n=n[0].toLowerCase()){case"http":case"https":case"ftp":case"mailto":case"tel":return!0;default:return!1}}function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!1}),n}function s(e){for(var t=1,n=0;e>t;)t<<=1,n++;return n}function l(e,t){return e[t]<<8|e[t+1]}function u(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function c(){var e=new Uint8Array(2);return e[0]=1,1===new Uint16Array(e.buffer)[0]}function h(){var e=document.createElement("canvas");return e.width=e.height=1,"undefined"!==typeof e.getContext("2d").createImageData(1,1).data.buffer}function d(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e}function f(e,t){this.name=e,this.comObj=t,this.callbackIndex=1,this.postMessageTransfers=!0;var n=this.callbacksCapabilities={},i=this.actionHandler={};i.console_log=[function(e){console.log.apply(console,e)}],i.console_error=[function(e){console.error.apply(console,e)}],i._unsupported_feature=[function(e){_.notify(e)}],t.onmessage=function(e){var o=e.data;if(o.isReply){var a=o.callbackId;if(o.callbackId in n){var s=n[a];delete n[a],"error"in o?s.reject(o.error):s.resolve(o.data)}else r("Cannot resolve callback "+a)}else if(o.action in i){var l=i[o.action];o.callbackId?Promise.resolve().then(function(){return l[0].call(l[1],o.data)}).then(function(e){t.postMessage({isReply:!0,callbackId:o.callbackId,data:e})},function(e){t.postMessage({isReply:!0,callbackId:o.callbackId,error:e})}):l[0].call(l[1],o.data)}else r("Unknown action from worker: "+o.action)}}var p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=function(){function e(){this.failOnCorruptedImage=!1}function r(e,t){e.x0=Math.ceil(t.XOsiz/e.XRsiz),e.x1=Math.ceil(t.Xsiz/e.XRsiz),e.y0=Math.ceil(t.YOsiz/e.YRsiz),e.y1=Math.ceil(t.Ysiz/e.YRsiz),e.width=e.x1-e.x0,e.height=e.y1-e.y0}function i(e,t){for(var n,r=e.SIZ,i=[],o=Math.ceil((r.Xsiz-r.XTOsiz)/r.XTsiz),a=Math.ceil((r.Ysiz-r.YTOsiz)/r.YTsiz),s=0;s<a;s++)for(var l=0;l<o;l++)n={},n.tx0=Math.max(r.XTOsiz+l*r.XTsiz,r.XOsiz),n.ty0=Math.max(r.YTOsiz+s*r.YTsiz,r.YOsiz),n.tx1=Math.min(r.XTOsiz+(l+1)*r.XTsiz,r.Xsiz),n.ty1=Math.min(r.YTOsiz+(s+1)*r.YTsiz,r.Ysiz),n.width=n.tx1-n.tx0,n.height=n.ty1-n.ty0,n.components=[],i.push(n);e.tiles=i;for(var u=r.Csiz,c=0,h=u;c<h;c++)for(var d=t[c],f=0,p=i.length;f<p;f++){var m={};n=i[f],m.tcx0=Math.ceil(n.tx0/d.XRsiz),m.tcy0=Math.ceil(n.ty0/d.YRsiz),m.tcx1=Math.ceil(n.tx1/d.XRsiz),m.tcy1=Math.ceil(n.ty1/d.YRsiz),m.width=m.tcx1-m.tcx0,m.height=m.tcy1-m.tcy0,n.components[c]=m}}function o(e,t,n){var r=t.codingStyleParameters,i={};return r.entropyCoderWithCustomPrecincts?(i.PPx=r.precinctsSizes[n].PPx,i.PPy=r.precinctsSizes[n].PPy):(i.PPx=15,i.PPy=15),i.xcb_=n>0?Math.min(r.xcb,i.PPx-1):Math.min(r.xcb,i.PPx),i.ycb_=n>0?Math.min(r.ycb,i.PPy-1):Math.min(r.ycb,i.PPy),i}function a(e,t,n){var r=1<<n.PPx,i=1<<n.PPy,o=0===t.resLevel,a=1<<n.PPx+(o?0:-1),s=1<<n.PPy+(o?0:-1),l=t.trx1>t.trx0?Math.ceil(t.trx1/r)-Math.floor(t.trx0/r):0,u=t.try1>t.try0?Math.ceil(t.try1/i)-Math.floor(t.try0/i):0,c=l*u;t.precinctParameters={precinctWidth:r,precinctHeight:i,numprecinctswide:l,numprecinctshigh:u,numprecincts:c,precinctWidthInSubband:a,precinctHeightInSubband:s}}function c(e,t,n){var r,i,o,a,s=n.xcb_,l=n.ycb_,u=1<<s,c=1<<l,h=t.tbx0>>s,d=t.tby0>>l,f=t.tbx1+u-1>>s,p=t.tby1+c-1>>l,m=t.resolution.precinctParameters,v=[],g=[];for(i=d;i<p;i++)for(r=h;r<f;r++){o={cbx:r,cby:i,tbx0:u*r,tby0:c*i,tbx1:u*(r+1),tby1:c*(i+1)},o.tbx0_=Math.max(t.tbx0,o.tbx0),o.tby0_=Math.max(t.tby0,o.tby0),o.tbx1_=Math.min(t.tbx1,o.tbx1),o.tby1_=Math.min(t.tby1,o.tby1);var y=Math.floor((o.tbx0_-t.tbx0)/m.precinctWidthInSubband),_=Math.floor((o.tby0_-t.tby0)/m.precinctHeightInSubband);if(a=y+_*m.numprecinctswide,o.precinctNumber=a,o.subbandType=t.type,o.Lblock=3,!(o.tbx1_<=o.tbx0_||o.tby1_<=o.tby0_)){v.push(o);var b=g[a];void 0!==b?(r<b.cbxMin?b.cbxMin=r:r>b.cbxMax&&(b.cbxMax=r),i<b.cbyMin?b.cbxMin=i:i>b.cbyMax&&(b.cbyMax=i)):g[a]=b={cbxMin:r,cbyMin:i,cbxMax:r,cbyMax:i},o.precinct=b}}t.codeblockParameters={codeblockWidth:s,codeblockHeight:l,numcodeblockwide:f-h+1,numcodeblockhigh:p-d+1},t.codeblocks=v,t.precincts=g}function h(e,t,n){for(var r=[],i=e.subbands,o=0,a=i.length;o<a;o++)for(var s=i[o],l=s.codeblocks,u=0,c=l.length;u<c;u++){var h=l[u];h.precinctNumber===t&&r.push(h)}return{layerNumber:n,codeblocks:r}}function d(e){for(var t=e.SIZ,n=e.currentTile.index,r=e.tiles[n],i=r.codingStyleDefaultParameters.layersCount,o=t.Csiz,a=0,s=0;s<o;s++)a=Math.max(a,r.components[s].codingStyleParameters.decompositionLevelsCount);var l=0,u=0,c=0,d=0;this.nextPacket=function(){for(;l<i;l++){for(;u<=a;u++){for(;c<o;c++){var e=r.components[c];if(!(u>e.codingStyleParameters.decompositionLevelsCount)){for(var t=e.resolutions[u],n=t.precinctParameters.numprecincts;d<n;){var s=h(t,d,l);return d++,s}d=0}}c=0}u=0}}}function f(e){for(var t=e.SIZ,n=e.currentTile.index,r=e.tiles[n],i=r.codingStyleDefaultParameters.layersCount,o=t.Csiz,a=0,s=0;s<o;s++)a=Math.max(a,r.components[s].codingStyleParameters.decompositionLevelsCount);var l=0,u=0,c=0,d=0;this.nextPacket=function(){for(;l<=a;l++){for(;u<i;u++){for(;c<o;c++){var e=r.components[c];if(!(l>e.codingStyleParameters.decompositionLevelsCount)){for(var t=e.resolutions[l],n=t.precinctParameters.numprecincts;d<n;){var s=h(t,d,u);return d++,s}d=0}}c=0}u=0}}}function p(e){var t,n,r,i,o=e.SIZ,a=e.currentTile.index,s=e.tiles[a],l=s.codingStyleDefaultParameters.layersCount,u=o.Csiz,c=0;for(r=0;r<u;r++){var d=s.components[r];c=Math.max(c,d.codingStyleParameters.decompositionLevelsCount)}var f=new Int32Array(c+1);for(n=0;n<=c;++n){var p=0;for(r=0;r<u;++r){var m=s.components[r].resolutions;n<m.length&&(p=Math.max(p,m[n].precinctParameters.numprecincts))}f[n]=p}t=0,n=0,r=0,i=0,this.nextPacket=function(){for(;n<=c;n++){for(;i<f[n];i++){for(;r<u;r++){var e=s.components[r];if(!(n>e.codingStyleParameters.decompositionLevelsCount)){var o=e.resolutions[n],a=o.precinctParameters.numprecincts;if(!(i>=a)){for(;t<l;){var d=h(o,i,t);return t++,d}t=0}}}r=0}i=0}}}function m(e){var t=e.SIZ,n=e.currentTile.index,r=e.tiles[n],i=r.codingStyleDefaultParameters.layersCount,o=t.Csiz,a=_(r),s=a,l=0,u=0,c=0,d=0,f=0;this.nextPacket=function(){for(;f<s.maxNumHigh;f++){for(;d<s.maxNumWide;d++){for(;c<o;c++){for(var e=r.components[c],t=e.codingStyleParameters.decompositionLevelsCount;u<=t;u++){var n=e.resolutions[u],p=a.components[c].resolutions[u],m=y(d,f,p,s,n);if(null!==m){for(;l<i;){var v=h(n,m,l);return l++,v}l=0}}u=0}c=0}d=0}}}function g(e){var t=e.SIZ,n=e.currentTile.index,r=e.tiles[n],i=r.codingStyleDefaultParameters.layersCount,o=t.Csiz,a=_(r),s=0,l=0,u=0,c=0,d=0;this.nextPacket=function(){for(;u<o;++u){for(var e=r.components[u],t=a.components[u],n=e.codingStyleParameters.decompositionLevelsCount;d<t.maxNumHigh;d++){for(;c<t.maxNumWide;c++){for(;l<=n;l++){var f=e.resolutions[l],p=t.resolutions[l],m=y(c,d,p,t,f);if(null!==m){for(;s<i;){var v=h(f,m,s);return s++,v}s=0}}l=0}c=0}d=0}}}function y(e,t,n,r,i){var o=e*r.minWidth,a=t*r.minHeight;if(o%n.width!==0||a%n.height!==0)return null;var s=a/n.width*i.precinctParameters.numprecinctswide;return o/n.height+s}function _(e){for(var t=e.components.length,n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=0,o=0,a=new Array(t),s=0;s<t;s++){for(var l=e.components[s],u=l.codingStyleParameters.decompositionLevelsCount,c=new Array(u+1),h=Number.MAX_VALUE,d=Number.MAX_VALUE,f=0,p=0,m=1,v=u;v>=0;--v){var g=l.resolutions[v],y=m*g.precinctParameters.precinctWidth,_=m*g.precinctParameters.precinctHeight;h=Math.min(h,y),d=Math.min(d,_),f=Math.max(f,g.precinctParameters.numprecinctswide),p=Math.max(p,g.precinctParameters.numprecinctshigh),c[v]={width:y,height:_},m<<=1}n=Math.min(n,h),r=Math.min(r,d),i=Math.max(i,f),o=Math.max(o,p),a[s]={resolutions:c,minWidth:h,minHeight:d,maxNumWide:f,maxNumHigh:p}}return{components:a,minWidth:n,minHeight:r,maxNumWide:i,maxNumHigh:o}}function b(e){for(var t=e.SIZ,n=e.currentTile.index,r=e.tiles[n],i=t.Csiz,s=0;s<i;s++){for(var l=r.components[s],u=l.codingStyleParameters.decompositionLevelsCount,h=[],v=[],y=0;y<=u;y++){var _=o(e,l,y),b={},w=1<<u-y;b.trx0=Math.ceil(l.tcx0/w),b.try0=Math.ceil(l.tcy0/w),b.trx1=Math.ceil(l.tcx1/w),b.try1=Math.ceil(l.tcy1/w),b.resLevel=y,a(e,b,_),h.push(b);var x;if(0===y)x={},x.type="LL",x.tbx0=Math.ceil(l.tcx0/w),x.tby0=Math.ceil(l.tcy0/w),x.tbx1=Math.ceil(l.tcx1/w),x.tby1=Math.ceil(l.tcy1/w),x.resolution=b,c(e,x,_),v.push(x),b.subbands=[x];else{var E=1<<u-y+1,S=[];x={},x.type="HL",x.tbx0=Math.ceil(l.tcx0/E-.5),x.tby0=Math.ceil(l.tcy0/E),x.tbx1=Math.ceil(l.tcx1/E-.5),x.tby1=Math.ceil(l.tcy1/E),x.resolution=b,c(e,x,_),v.push(x),S.push(x),x={},x.type="LH",x.tbx0=Math.ceil(l.tcx0/E),x.tby0=Math.ceil(l.tcy0/E-.5),x.tbx1=Math.ceil(l.tcx1/E),x.tby1=Math.ceil(l.tcy1/E-.5),x.resolution=b,c(e,x,_),v.push(x),S.push(x),x={},x.type="HH",x.tbx0=Math.ceil(l.tcx0/E-.5),x.tby0=Math.ceil(l.tcy0/E-.5),x.tbx1=Math.ceil(l.tcx1/E-.5),x.tby1=Math.ceil(l.tcy1/E-.5),x.resolution=b,c(e,x,_),v.push(x),S.push(x),b.subbands=S}}l.resolutions=h,l.subbands=v}var T=r.codingStyleDefaultParameters.progressionOrder;switch(T){case 0:r.packetsIterator=new d(e);break;case 1:r.packetsIterator=new f(e);break;case 2:r.packetsIterator=new p(e);break;case 3:r.packetsIterator=new m(e);break;case 4:r.packetsIterator=new g(e);break;default:throw new Error("JPX Error: Unsupported progression order "+T)}}function w(e,t,n,r){function i(e){for(;h<e;){if(n+c>=t.length)throw new Error("Unexpected EOF");var r=t[n+c];c++,d?(u=u<<7|r,h+=7,d=!1):(u=u<<8|r,h+=8),255===r&&(d=!0)}return h-=e,u>>>h&(1<<e)-1}function o(e){return 255===t[n+c-1]&&t[n+c]===e?(a(1),!0):255===t[n+c]&&t[n+c+1]===e&&(a(2),!0)}function a(e){c+=e}function l(){h=0,d&&(c++,d=!1)}for(var u,c=0,h=0,d=!1,f=e.currentTile.index,p=e.tiles[f],m=e.COD.sopMarkerUsed,v=e.COD.ephMarkerUsed,g=p.packetsIterator;c<r;)try{l(),m&&o(145)&&a(4);var y=g.nextPacket();if(void 0===y)return;if(!i(1))continue;for(var _,b=y.layerNumber,w=[],x=0,E=y.codeblocks.length;x<E;x++){_=y.codeblocks[x];var S=_.precinct,T=_.cbx-S.cbxMin,M=_.cby-S.cbyMin,C=!1,A=!1;if(void 0!==_.included)C=!!i(1);else{S=_.precinct;var O,I;if(void 0!==S.inclusionTree)O=S.inclusionTree;else{var R=S.cbxMax-S.cbxMin+1,L=S.cbyMax-S.cbyMin+1;O=new P(R,L),I=new k(R,L),S.inclusionTree=O,S.zeroBitPlanesTree=I}for(O.reset(T,M,b);;){if(c>=t.length)return;if(O.isAboveThreshold())break;if(O.isKnown())O.nextLevel();else if(i(1)){if(O.setKnown(),O.isLeaf()){_.included=!0,C=A=!0;break}O.nextLevel()}else O.incrementValue()}}if(C){if(A){for(I=S.zeroBitPlanesTree,I.reset(T,M);;){if(c>=t.length)return;if(i(1)){if(!I.nextLevel())break}else I.incrementValue()}_.zeroBitPlanes=I.value}for(var D=function(){if(0===i(1))return 1;if(0===i(1))return 2;var e=i(2);return e<3?e+3:(e=i(5))<31?e+6:(e=i(7))+37}();i(1);)_.Lblock++;var N=s(D),F=(D<1<<N?N-1:N)+_.Lblock,U=i(F);w.push({codeblock:_,codingpasses:D,dataLength:U})}}for(l(),v&&o(146);w.length>0;){var z=w.shift();_=z.codeblock,void 0===_.data&&(_.data=[]),_.data.push({data:t,start:n+c,end:n+c+z.dataLength,codingpasses:z.codingpasses}),c+=z.dataLength}}catch(e){return}return c}function x(e,t,n,r,i,o,a,s){for(var l=r.tbx0,u=r.tby0,c=r.tbx1-r.tbx0,h=r.codeblocks,d="H"===r.type.charAt(0)?1:0,f="H"===r.type.charAt(1)?t:0,p=0,m=h.length;p<m;++p){var g=h[p],y=g.tbx1_-g.tbx0_,_=g.tby1_-g.tby0_;if(0!==y&&0!==_&&void 0!==g.data){var b,w;b=new C(y,_,g.subbandType,g.zeroBitPlanes,o),w=2;var x,E,S,T=g.data,M=0,k=0;for(x=0,E=T.length;x<E;x++)S=T[x],M+=S.end-S.start,k+=S.codingpasses;var P=new Int16Array(M),A=0;for(x=0,E=T.length;x<E;x++){S=T[x];var O=S.data.subarray(S.start,S.end);P.set(O,A),A+=O.length}var I=new v(P,0,M);for(b.setDecoder(I),x=0;x<k;x++){switch(w){case 0:b.runSignificancePropogationPass();break;case 1:b.runMagnitudeRefinementPass();break;case 2:b.runCleanupPass(),s&&b.checkSegmentationSymbol()}w=(w+1)%3}var R,L,D,N=g.tbx0_-l+(g.tby0_-u)*c,F=b.coefficentsSign,U=b.coefficentsMagnitude,z=b.bitsDecoded,B=a?0:.5;A=0;var j="LL"!==r.type;for(x=0;x<_;x++){var H=N/c|0,V=2*H*(t-c)+d+f;for(R=0;R<y;R++){if(0!==(L=U[A])){L=(L+B)*i,0!==F[A]&&(L=-L),D=z[A];var G=j?V+(N<<1):N;e[G]=a&&D>=o?L:L*(1<<o-D)}N++,A++}N+=c-y}}}}function E(e,t,n){for(var r=t.components[n],i=r.codingStyleParameters,o=r.quantizationParameters,a=i.decompositionLevelsCount,s=o.SPqcds,l=o.scalarExpounded,u=o.guardBits,c=i.segmentationSymbolUsed,h=e.components[n].precision,d=i.reversibleTransformation,f=d?new I:new O,p=[],m=0,v=0;v<=a;v++){for(var g=r.resolutions[v],y=g.trx1-g.trx0,_=g.try1-g.try0,b=new Float32Array(y*_),w=0,E=g.subbands.length;w<E;w++){var S,T;l?(S=s[m].mu,T=s[m].epsilon,m++):(S=s[0].mu,T=s[0].epsilon+(v>0?1-v:0));var k=g.subbands[w],P=M[k.type];x(b,y,_,k,d?1:Math.pow(2,h+P-T)*(1+S/2048),u+T-1,d,c)}p.push({width:y,height:_,items:b})}var C=f.calculate(p,r.tcx0,r.tcy0);return{left:r.tcx0,top:r.tcy0,width:C.width,height:C.height,items:C.items}}function S(e){for(var t=e.SIZ,n=e.components,r=t.Csiz,i=[],o=0,a=e.tiles.length;o<a;o++){var s,l=e.tiles[o],u=[];for(s=0;s<r;s++)u[s]=E(e,l,s);var c=u[0],h=n[0].isSigned;if(h)var d=new Int16Array(c.items.length*r);else var d=new Uint16Array(c.items.length*r);var f,p,m,v,g,y,_,b,w,x,S,T,M,k,P,C={left:c.left,top:c.top,width:c.width,height:c.height,items:d},A=0;if(l.codingStyleDefaultParameters.multipleComponentTransform){var O=4===r,I=u[0].items,R=u[1].items,L=u[2].items,D=O?u[3].items:null;f=n[0].precision-8,p=.5+(128<<f),m=255*(1<<f),g=.5*m,v=-g;var N=l.components[0],F=r-3;if(_=I.length,N.codingStyleParameters.reversibleTransformation)for(y=0;y<_;y++,A+=F)b=I[y]+p,w=R[y],x=L[y],T=b-(x+w>>2),S=T+x,M=T+w,d[A++]=S<=0?0:S>=m?255:S>>f,d[A++]=T<=0?0:T>=m?255:T>>f,d[A++]=M<=0?0:M>=m?255:M>>f;else for(y=0;y<_;y++,A+=F)b=I[y]+p,w=R[y],x=L[y],S=b+1.402*x,T=b-.34413*w-.71414*x,M=b+1.772*w,d[A++]=S<=0?0:S>=m?255:S>>f,d[A++]=T<=0?0:T>=m?255:T>>f,d[A++]=M<=0?0:M>=m?255:M>>f;if(O)for(y=0,A=3;y<_;y++,A+=4)k=D[y],d[A]=k<=v?0:k>=g?255:k+p>>f}else for(s=0;s<r;s++)if(8===n[s].precision){var U=u[s].items;for(f=n[s].precision-8,p=.5+(128<<f),m=127.5*(1<<f),v=-m,A=s,y=0,_=U.length;y<_;y++)P=U[y],d[A]=P<=v?0:P>=m?255:P+p>>f,A+=r}else{var h=n[s].isSigned,U=u[s].items;if(h)for(A=s,y=0,_=U.length;y<_;y++)d[A]=U[y],A+=r;else{f=n[s].precision-8,p=.5+(128<<f);var z=Math.pow(2,n[s].precision)-1;for(A=s,y=0,_=U.length;y<_;y++)P=U[y],d[A]=Math.max(Math.min(P+p,z),0),A+=r}}i.push(C)}return i}function T(e,t){for(var n=e.SIZ,r=n.Csiz,i=e.tiles[t],o=0;o<r;o++){var a=i.components[o],s=void 0!==e.currentTile.QCC[o]?e.currentTile.QCC[o]:e.currentTile.QCD;a.quantizationParameters=s;var l=void 0!==e.currentTile.COC[o]?e.currentTile.COC[o]:e.currentTile.COD;a.codingStyleParameters=l}i.codingStyleDefaultParameters=e.currentTile.COD}var M={LL:0,LH:1,HL:1,HH:2};e.prototype={parse:function(e){if(65359===l(e,0))return void this.parseCodestream(e,0,e.length);for(var r=0,i=e.length;r<i;){var o=8,a=u(e,r),s=u(e,r+4);if(r+=o,1===a&&(a=4294967296*u(e,r)+u(e,r+4),r+=8,o+=8),0===a&&(a=i-r+o),a<o)throw new Error("JPX Error: Invalid box field size");var c=a-o,h=!0;switch(s){case 1785737832:h=!1;break;case 1668246642:var d=e[r];e[r+1],e[r+2];if(1===d){var f=u(e,r+3);switch(f){case 16:case 17:case 18:break;default:n("Unknown colorspace "+f)}}else 2===d&&t("ICC profile not supported");break;case 1785737827:this.parseCodestream(e,r,r+c);break;case 1783636e3:218793738!==u(e,r)&&n("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:n("Unsupported header type "+s+" ("+String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,255&s)+")")}h&&(r+=c)}},parseImageProperties:function(e){for(var t=e.getByte();t>=0;){var n=t;t=e.getByte();if(65361===(n<<8|t)){e.skip(4);var r=e.getInt32()>>>0,i=e.getInt32()>>>0,o=e.getInt32()>>>0,a=e.getInt32()>>>0;e.skip(16);var s=e.getUint16();return this.width=r-o,this.height=i-a,this.componentsCount=s,void(this.bitsPerComponent=8)}}throw new Error("JPX Error: No size marker found in JPX stream")},parseCodestream:function(e,t,o){var a={};try{for(var s=!1,c=t;c+1<o;){var h=l(e,c);c+=2;var d,f,p,m,v,g,y=0;switch(h){case 65359:a.mainHeader=!0;break;case 65497:break;case 65361:y=l(e,c);var _={};_.Xsiz=u(e,c+4),_.Ysiz=u(e,c+8),_.XOsiz=u(e,c+12),_.YOsiz=u(e,c+16),_.XTsiz=u(e,c+20),_.YTsiz=u(e,c+24),_.XTOsiz=u(e,c+28),_.YTOsiz=u(e,c+32);var x=l(e,c+36);_.Csiz=x;var E=[];d=c+38;for(var M=0;M<x;M++){var k={precision:1+(127&e[d]),isSigned:!!(128&e[d]),XRsiz:e[d+1],YRsiz:e[d+1]};r(k,_),E.push(k)}a.SIZ=_,a.components=E,i(a,E),a.QCC=[],a.COC=[];break;case 65372:y=l(e,c);var P={};switch(d=c+2,31&(f=e[d++])){case 0:m=8,v=!0;break;case 1:m=16,v=!1;break;case 2:m=16,v=!0;break;default:throw new Error("JPX Error: Invalid SQcd value "+f)}for(P.noQuantization=8===m,P.scalarExpounded=v,P.guardBits=f>>5,p=[];d<y+c;){var C={};8===m?(C.epsilon=e[d++]>>3,C.mu=0):(C.epsilon=e[d]>>3,C.mu=(7&e[d])<<8|e[d+1],d+=2),p.push(C)}P.SPqcds=p,a.mainHeader?a.QCD=P:(a.currentTile.QCD=P,a.currentTile.QCC=[]);break;case 65373:y=l(e,c);var A={};d=c+2;var O;switch(a.SIZ.Csiz<257?O=e[d++]:(O=l(e,d),d+=2),31&(f=e[d++])){case 0:m=8,v=!0;break;case 1:m=16,v=!1;break;case 2:m=16,v=!0;break;default:throw new Error("JPX Error: Invalid SQcd value "+f)}for(A.noQuantization=8===m,A.scalarExpounded=v,A.guardBits=f>>5,p=[];d<y+c;)C={},8===m?(C.epsilon=e[d++]>>3,C.mu=0):(C.epsilon=e[d]>>3,C.mu=(7&e[d])<<8|e[d+1],d+=2),p.push(C);A.SPqcds=p,a.mainHeader?a.QCC[O]=A:a.currentTile.QCC[O]=A;break;case 65362:y=l(e,c);var I={};d=c+2;var R=e[d++];I.entropyCoderWithCustomPrecincts=!!(1&R),I.sopMarkerUsed=!!(2&R),I.ephMarkerUsed=!!(4&R),I.progressionOrder=e[d++],I.layersCount=l(e,d),d+=2,I.multipleComponentTransform=e[d++],I.decompositionLevelsCount=e[d++],I.xcb=2+(15&e[d++]),I.ycb=2+(15&e[d++]);var L=e[d++];if(I.selectiveArithmeticCodingBypass=!!(1&L),I.resetContextProbabilities=!!(2&L),I.terminationOnEachCodingPass=!!(4&L),I.verticalyStripe=!!(8&L),I.predictableTermination=!!(16&L),I.segmentationSymbolUsed=!!(32&L),I.reversibleTransformation=e[d++],I.entropyCoderWithCustomPrecincts){for(var D=[];d<y+c;){var N=e[d++];D.push({PPx:15&N,PPy:N>>4})}I.precinctsSizes=D}var F=[];if(I.selectiveArithmeticCodingBypass&&F.push("selectiveArithmeticCodingBypass"),I.resetContextProbabilities&&F.push("resetContextProbabilities"),I.terminationOnEachCodingPass&&F.push("terminationOnEachCodingPass"),I.verticalyStripe&&F.push("verticalyStripe"),I.predictableTermination&&F.push("predictableTermination"),F.length>0)throw s=!0,new Error("JPX Error: Unsupported COD options ("+F.join(", ")+")");a.mainHeader?a.COD=I:(a.currentTile.COD=I,a.currentTile.COC=[]);break;case 65424:y=l(e,c),g={},g.index=l(e,c+2),g.length=u(e,c+4),g.dataEnd=g.length+c-2,g.partIndex=e[c+8],g.partsCount=e[c+9],a.mainHeader=!1,0===g.partIndex&&(g.COD=a.COD,g.COC=a.COC.slice(0),g.QCD=a.QCD,g.QCC=a.QCC.slice(0)),a.currentTile=g;break;case 65427:g=a.currentTile,0===g.partIndex&&(T(a,g.index),b(a)),y=g.dataEnd-c,w(a,e,c,y);break;case 65365:case 65367:case 65368:case 65380:y=l(e,c);break;case 65363:throw new Error("JPX Error: Codestream code 0xFF53 (COC) is not implemented");default:throw new Error("JPX Error: Unknown codestream code: "+h.toString(16))}c+=y}}catch(e){if(s||this.failOnCorruptedImage)throw e;n("Trying to recover from "+e.message)}this.tiles=S(a),this.width=a.SIZ.Xsiz-a.SIZ.XOsiz,this.height=a.SIZ.Ysiz-a.SIZ.YOsiz,this.componentsCount=a.SIZ.Csiz}};var k=function(){function e(e,t){var n=s(Math.max(e,t))+1;this.levels=[];for(var r=0;r<n;r++){var i={width:e,height:t,items:[]};this.levels.push(i),e=Math.ceil(e/2),t=Math.ceil(t/2)}}return e.prototype={reset:function(e,t){for(var n,r=0,i=0;r<this.levels.length;){n=this.levels[r];var o=e+t*n.width;if(void 0!==n.items[o]){i=n.items[o];break}n.index=o,e>>=1,t>>=1,r++}r--,n=this.levels[r],n.items[n.index]=i,this.currentLevel=r,delete this.value},incrementValue:function(){var e=this.levels[this.currentLevel];e.items[e.index]++},nextLevel:function(){var e=this.currentLevel,t=this.levels[e],n=t.items[t.index];return--e<0?(this.value=n,!1):(this.currentLevel=e,t=this.levels[e],t.items[t.index]=n,!0)}},e}(),P=function(){function e(e,t){var n=s(Math.max(e,t))+1;this.levels=[];for(var r=0;r<n;r++){for(var i=new Uint8Array(e*t),o=new Uint8Array(e*t),a=0,l=i.length;a<l;a++)i[a]=0,o[a]=0;var u={width:e,height:t,items:i,status:o};this.levels.push(u),e=Math.ceil(e/2),t=Math.ceil(t/2)}}return e.prototype={reset:function(e,t,n){this.currentStopValue=n;for(var r=0;r<this.levels.length;){var i=this.levels[r],o=e+t*i.width;i.index=o,e>>=1,t>>=1,r++}this.currentLevel=this.levels.length-1,this.minValue=this.levels[this.currentLevel].items[0]},incrementValue:function(){var e=this.levels[this.currentLevel];e.items[e.index]=e.items[e.index]+1,e.items[e.index]>this.minValue&&(this.minValue=e.items[e.index])},nextLevel:function(){var e=this.currentLevel;if(--e<0)return!1;this.currentLevel=e;var t=this.levels[e];return t.items[t.index]<this.minValue?t.items[t.index]=this.minValue:t.items[t.index]>this.minValue&&(this.minValue=t.items[t.index]),!0},isLeaf:function(){return 0===this.currentLevel},isAboveThreshold:function(){var e=this.currentLevel,t=this.levels[e];return t.items[t.index]>this.currentStopValue},isKnown:function(){var e=this.currentLevel,t=this.levels[e];return t.status[t.index]>0},setKnown:function(){var e=this.currentLevel,t=this.levels[e];t.status[t.index]=1}},e}(),C=function(){function e(e,i,o,a,s){this.width=e,this.height=i,this.contextLabelTable="HH"===o?r:"HL"===o?n:t;var l=e*i;this.neighborsSignificance=new Uint8Array(l),this.coefficentsSign=new Uint8Array(l),this.coefficentsMagnitude=s>14?new Uint32Array(l):s>6?new Uint16Array(l):new Uint8Array(l),this.processingFlags=new Uint8Array(l);var u=new Uint8Array(l);if(0!==a)for(var c=0;c<l;c++)u[c]=a;this.bitsDecoded=u,this.reset()}var t=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),n=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),r=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);return e.prototype={setDecoder:function(e){this.decoder=e},reset:function(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[17]=92,this.contexts[18]=6},setNeighborsSignificance:function(e,t,n){var r,i=this.neighborsSignificance,o=this.width,a=this.height,s=t>0,l=t+1<o;e>0&&(r=n-o,s&&(i[r-1]+=16),l&&(i[r+1]+=16),i[r]+=4),e+1<a&&(r=n+o,s&&(i[r-1]+=16),l&&(i[r+1]+=16),i[r]+=4),s&&(i[n-1]+=1),l&&(i[n+1]+=1),i[n]|=128},runSignificancePropogationPass:function(){for(var e=this.decoder,t=this.width,n=this.height,r=this.coefficentsMagnitude,i=this.coefficentsSign,o=this.neighborsSignificance,a=this.processingFlags,s=this.contexts,l=this.contextLabelTable,u=this.bitsDecoded,c=0;c<n;c+=4)for(var h=0;h<t;h++)for(var d=c*t+h,f=0;f<4;f++,d+=t){var p=c+f;if(p>=n)break;if(a[d]&=-2,!r[d]&&o[d]){var m=l[o[d]],v=e.readBit(s,m);if(v){var g=this.decodeSignBit(p,h,d);i[d]=g,r[d]=1,this.setNeighborsSignificance(p,h,d),a[d]|=2}u[d]++,a[d]|=1}}},decodeSignBit:function(e,t,n){var r,i,o,a,s,l,u=this.width,c=this.height,h=this.coefficentsMagnitude,d=this.coefficentsSign;a=t>0&&0!==h[n-1],t+1<u&&0!==h[n+1]?(o=d[n+1],a?(i=d[n-1],r=1-o-i):r=1-o-o):a?(i=d[n-1],r=1-i-i):r=0;var f=3*r;return a=e>0&&0!==h[n-u],e+1<c&&0!==h[n+u]?(o=d[n+u],a?(i=d[n-u],r=1-o-i+f):r=1-o-o+f):a?(i=d[n-u],r=1-i-i+f):r=f,r>=0?(s=9+r,l=this.decoder.readBit(this.contexts,s)):(s=9-r,l=1^this.decoder.readBit(this.contexts,s)),l},runMagnitudeRefinementPass:function(){for(var e,t=this.decoder,n=this.width,r=this.height,i=this.coefficentsMagnitude,o=this.neighborsSignificance,a=this.contexts,s=this.bitsDecoded,l=this.processingFlags,u=n*r,c=4*n,h=0;h<u;h=e){e=Math.min(u,h+c);for(var d=0;d<n;d++)for(var f=h+d;f<e;f+=n)if(i[f]&&0===(1&l[f])){var p=16;if(0!==(2&l[f])){l[f]^=2;var m=127&o[f];p=0===m?15:14}var v=t.readBit(a,p);i[f]=i[f]<<1|v,s[f]++,l[f]|=1}}},runCleanupPass:function(){for(var e,t=this.decoder,n=this.width,r=this.height,i=this.neighborsSignificance,o=this.coefficentsMagnitude,a=this.coefficentsSign,s=this.contexts,l=this.contextLabelTable,u=this.bitsDecoded,c=this.processingFlags,h=n,d=2*n,f=3*n,p=0;p<r;p=e){e=Math.min(p+4,r);for(var m=p*n,v=p+3<r,g=0;g<n;g++){var y,_=m+g,b=v&&0===c[_]&&0===c[_+h]&&0===c[_+d]&&0===c[_+f]&&0===i[_]&&0===i[_+h]&&0===i[_+d]&&0===i[_+f],w=0,x=_,E=p;if(b){if(!t.readBit(s,18)){u[_]++,u[_+h]++,u[_+d]++,u[_+f]++;continue}w=t.readBit(s,17)<<1|t.readBit(s,17),0!==w&&(E=p+w,x+=w*n),y=this.decodeSignBit(E,g,x),a[x]=y,o[x]=1,this.setNeighborsSignificance(E,g,x),c[x]|=2,x=_;for(var S=p;S<=E;S++,x+=n)u[x]++;w++}for(E=p+w;E<e;E++,x+=n)if(!o[x]&&0===(1&c[x])){var T=l[i[x]],M=t.readBit(s,T);1===M&&(y=this.decodeSignBit(E,g,x),a[x]=y,o[x]=1,this.setNeighborsSignificance(E,g,x),c[x]|=2),u[x]++}}}},checkSegmentationSymbol:function(){var e=this.decoder,t=this.contexts;if(10!==(e.readBit(t,17)<<3|e.readBit(t,17)<<2|e.readBit(t,17)<<1|e.readBit(t,17)))throw new Error("JPX Error: Invalid segmentation symbol")}},e}(),A=function(){function e(){}return e.prototype.calculate=function(e,t,n){for(var r=e[0],i=1,o=e.length;i<o;i++)r=this.iterate(r,e[i],t,n);return r},e.prototype.extend=function(e,t,n){var r=t-1,i=t+1,o=t+n-2,a=t+n;e[r--]=e[i++],e[a++]=e[o--],e[r--]=e[i++],e[a++]=e[o--],e[r--]=e[i++],e[a++]=e[o--],e[r]=e[i],e[a]=e[o]},e.prototype.iterate=function(e,t,n,r){var i,o,a,s,l,u,c=e.width,h=e.height,d=e.items,f=t.width,p=t.height,m=t.items;for(a=0,i=0;i<h;i++)for(s=2*i*f,o=0;o<c;o++,a++,s+=2)m[s]=d[a];d=e.items=null;var v=new Float32Array(f+8);if(1===f){if(0!==(1&n))for(u=0,a=0;u<p;u++,a+=f)m[a]*=.5}else for(u=0,a=0;u<p;u++,a+=f)v.set(m.subarray(a,a+f),4),this.extend(v,4,f),this.filter(v,4,f),m.set(v.subarray(4,4+f),a);var g=16,y=[];for(i=0;i<g;i++)y.push(new Float32Array(p+8));var _,b=0;if(e=4+p,1===p){if(0!==(1&r))for(l=0;l<f;l++)m[l]*=.5}else for(l=0;l<f;l++){if(0===b){for(g=Math.min(f-l,g),a=l,s=4;s<e;a+=f,s++)for(_=0;_<g;_++)y[_][s]=m[a+_];b=g}b--;var w=y[b];if(this.extend(w,4,p),this.filter(w,4,p),0===b)for(a=l-g+1,s=4;s<e;a+=f,s++)for(_=0;_<g;_++)m[a+_]=y[_][s]}return{width:f,height:p,items:m}},e}(),O=function(){function e(){A.call(this)}return e.prototype=Object.create(A.prototype),e.prototype.filter=function(e,t,n){var r=n>>1;t|=0;var i,o,a,s,l=-1.586134342059924,u=-.052980118572961,c=.882911075530934,h=.443506852043971,d=1.230174104914001;for(i=t-3,o=r+4;o--;i+=2)e[i]*=.8128930661159609;for(i=t-2,a=h*e[i-1],o=r+3;o--&&(s=h*e[i+1],e[i]=d*e[i]-a-s,o--);i+=2)i+=2,a=h*e[i+1],e[i]=d*e[i]-a-s;for(i=t-1,a=c*e[i-1],o=r+2;o--&&(s=c*e[i+1],e[i]-=a+s,o--);i+=2)i+=2,a=c*e[i+1],e[i]-=a+s;for(i=t,a=u*e[i-1],o=r+1;o--&&(s=u*e[i+1],e[i]-=a+s,o--);i+=2)i+=2,a=u*e[i+1],e[i]-=a+s;if(0!==r)for(i=t+1,a=l*e[i-1],o=r;o--&&(s=l*e[i+1],e[i]-=a+s,o--);i+=2)i+=2,a=l*e[i+1],e[i]-=a+s},e}(),I=function(){function e(){A.call(this)}return e.prototype=Object.create(A.prototype),e.prototype.filter=function(e,t,n){var r=n>>1;t|=0;var i,o;for(i=t,o=r+1;o--;i+=2)e[i]-=e[i-1]+e[i+1]+2>>2;for(i=t+1,o=r;o--;i+=2)e[i]+=e[i-1]+e[i+1]>>1},e}();return e}(),v=function(){function e(e,t,n){this.data=e,this.bp=t,this.dataEnd=n,this.chigh=e[t],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}var t=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];return e.prototype={byteIn:function(){var e=this.data,t=this.bp;if(255===e[t]){e[t+1]>143?(this.clow+=65280,this.ct=8):(t++,this.clow+=e[t]<<9,this.ct=7,this.bp=t)}else t++,this.clow+=t<this.dataEnd?e[t]<<8:65280,this.ct=8,this.bp=t;this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)},readBit:function(e,n){var r,i=e[n]>>1,o=1&e[n],a=t[i],s=a.qe,l=this.a-s;if(this.chigh<s)l<s?(l=s,r=o,i=a.nmps):(l=s,r=1^o,1===a.switchFlag&&(o=r),i=a.nlps);else{if(this.chigh-=s,0!==(32768&l))return this.a=l,o;l<s?(r=1^o,1===a.switchFlag&&(o=r),i=a.nlps):(r=o,i=a.nmps)}do{0===this.ct&&this.byteIn(),l<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--}while(0===(32768&l));return this.a=l,e[n]=i<<1|o,r}},e}(),g="undefined"===typeof window?this:window;g.PDFJS||(g.PDFJS={}),g.PDFJS.pdfBug=!1,PDFJS.VERBOSITY_LEVELS={errors:0,warnings:1,infos:5};var y=(PDFJS.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},PDFJS.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"}),_=PDFJS.UnsupportedManager=function(){var e=[];return{listen:function(t){e.push(t)},notify:function(t){n('Unsupported feature "'+t+'"');for(var r=0,i=e.length;r<i;r++)e[r](t)}}}();PDFJS.isValidUrl=o,PDFJS.shadow=a;var b=(PDFJS.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},function(){function e(e,t){this.name="PasswordException",this.message=e,this.code=t}return e.prototype=new Error,e.constructor=e,e}());PDFJS.PasswordException=b;var w=function(){function e(e,t){this.name="UnknownErrorException",this.message=e,this.details=t}return e.prototype=new Error,e.constructor=e,e}();PDFJS.UnknownErrorException=w;var x=function(){function e(e){this.name="InvalidPDFException",this.message=e}return e.prototype=new Error,e.constructor=e,e}();PDFJS.InvalidPDFException=x;var E=function(){function e(e){this.name="MissingPDFException",this.message=e}return e.prototype=new Error,e.constructor=e,e}();PDFJS.MissingPDFException=E;var S=function(){function e(e,t){this.name="UnexpectedResponseException",this.message=e,this.status=t}return e.prototype=new Error,e.constructor=e,e}();PDFJS.UnexpectedResponseException=S;(function(){function e(e){this.message=e}e.prototype=new Error,e.prototype.name="NotImplementedException",e.constructor=e})(),function(){function e(e,t){this.begin=e,this.end=t,this.message="Missing data ["+e+", "+t+")"}e.prototype=new Error,e.prototype.name="MissingDataException",e.constructor=e}(),function(){function e(e){this.message=e}e.prototype=new Error,e.prototype.name="XRefParseException",e.constructor=e}();Object.defineProperty(PDFJS,"isLittleEndian",{configurable:!0,get:function(){return a(PDFJS,"isLittleEndian",c())}}),Object.defineProperty(PDFJS,"hasCanvasTypedArrays",{configurable:!0,get:function(){return a(PDFJS,"hasCanvasTypedArrays",h())}});var T=(function(){function e(e,t){this.buffer=e,this.byteLength=e.length,this.length=void 0===t?this.byteLength>>2:t,n(this.length)}function t(e){return{get:function(){var t=this.buffer,n=e<<2;return(t[n]|t[n+1]<<8|t[n+2]<<16|t[n+3]<<24)>>>0},set:function(t){var n=this.buffer,r=e<<2;n[r]=255&t,n[r+1]=t>>8&255,n[r+2]=t>>16&255,n[r+3]=t>>>24&255}}}function n(n){for(;r<n;)Object.defineProperty(e.prototype,r,t(r)),r++}e.prototype=Object.create(null);var r=0}(),PDFJS.Util=function(){function e(){}var t=["rgb(",0,",",0,",",0,")"];return e.makeCssRgb=function(e,n,r){return t[1]=e,t[3]=n,t[5]=r,t.join("")},e.transform=function(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]},e.applyTransform=function(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]},e.applyInverseTransform=function(e,t){var n=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n]},e.getAxialAlignedBoundingBox=function(t,n){var r=e.applyTransform(t,n),i=e.applyTransform(t.slice(2,4),n),o=e.applyTransform([t[0],t[3]],n),a=e.applyTransform([t[2],t[1]],n);return[Math.min(r[0],i[0],o[0],a[0]),Math.min(r[1],i[1],o[1],a[1]),Math.max(r[0],i[0],o[0],a[0]),Math.max(r[1],i[1],o[1],a[1])]},e.inverseTransform=function(e){var t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]},e.apply3dTransform=function(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[3]*t[0]+e[4]*t[1]+e[5]*t[2],e[6]*t[0]+e[7]*t[1]+e[8]*t[2]]},e.singularValueDecompose2dScale=function(e){var t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(n+o)/2,s=Math.sqrt((n+o)*(n+o)-4*(n*o-i*r))/2,l=a+s||1,u=a-s||1;return[Math.sqrt(l),Math.sqrt(u)]},e.normalizeRect=function(e){var t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t},e.intersect=function(t,n){function r(e,t){return e-t}var i=[t[0],t[2],n[0],n[2]].sort(r),o=[t[1],t[3],n[1],n[3]].sort(r),a=[];return t=e.normalizeRect(t),n=e.normalizeRect(n),(i[0]===t[0]&&i[1]===n[0]||i[0]===n[0]&&i[1]===t[0])&&(a[0]=i[1],a[2]=i[2],(o[0]===t[1]&&o[1]===n[1]||o[0]===n[1]&&o[1]===t[1])&&(a[1]=o[1],a[3]=o[2],a))},e.sign=function(e){return e<0?-1:1},e.appendToArray=function(e,t){Array.prototype.push.apply(e,t)},e.prependToArray=function(e,t){Array.prototype.unshift.apply(e,t)},e.extendObj=function(e,t){for(var n in t)e[n]=t[n]},e.getInheritableProperty=function(e,t){for(;e&&!e.has(t);)e=e.get("Parent");return e?e.get(t):null},e.inherit=function(e,t,n){e.prototype=Object.create(t.prototype),e.prototype.constructor=e;for(var r in n)e.prototype[r]=n[r]},e.loadScript=function(e,t){var n=document.createElement("script"),r=!1;n.setAttribute("src",e),t&&(n.onload=function(){r||t(),r=!0}),document.getElementsByTagName("head")[0].appendChild(n)},e}());PDFJS.PageViewport=function(){function e(e,t,n,r,i,o){this.viewBox=e,this.scale=t,this.rotation=n,this.offsetX=r,this.offsetY=i;var a,s,l,u,c=(e[2]+e[0])/2,h=(e[3]+e[1])/2;switch(n%=360,n=n<0?n+360:n){case 180:a=-1,s=0,l=0,u=1;break;case 90:a=0,s=1,l=1,u=0;break;case 270:a=0,s=-1,l=-1,u=0;break;default:a=1,s=0,l=0,u=-1}o&&(l=-l,u=-u);var d,f,p,m;0===a?(d=Math.abs(h-e[1])*t+r,f=Math.abs(c-e[0])*t+i,p=Math.abs(e[3]-e[1])*t,m=Math.abs(e[2]-e[0])*t):(d=Math.abs(c-e[0])*t+r,f=Math.abs(h-e[1])*t+i,p=Math.abs(e[2]-e[0])*t,m=Math.abs(e[3]-e[1])*t),this.transform=[a*t,s*t,l*t,u*t,d-a*t*c-l*t*h,f-s*t*c-u*t*h],this.width=p,this.height=m,this.fontScale=t}return e.prototype={clone:function(t){t=t||{};var n="scale"in t?t.scale:this.scale,r="rotation"in t?t.rotation:this.rotation;return new e(this.viewBox.slice(),n,r,this.offsetX,this.offsetY,t.dontFlip)},convertToViewportPoint:function(e,t){return T.applyTransform([e,t],this.transform)},convertToViewportRectangle:function(e){var t=T.applyTransform([e[0],e[1]],this.transform),n=T.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]},convertToPdfPoint:function(e,t){return T.applyInverseTransform([e,t],this.transform)}},e}();PDFJS.createPromiseCapability=d,function(){function e(e){this._status=t,this._handlers=[];try{e.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(e){this._reject(e)}}if(g.Promise)return"function"!==typeof g.Promise.all&&(g.Promise.all=function(e){var t,n,r=0,i=[],o=new g.Promise(function(e,r){t=e,n=r});return e.forEach(function(e,o){r++,e.then(function(e){i[o]=e,0===--r&&t(i)},n)}),0===r&&t(i),o}),"function"!==typeof g.Promise.resolve&&(g.Promise.resolve=function(e){return new g.Promise(function(t){t(e)})}),"function"!==typeof g.Promise.reject&&(g.Promise.reject=function(e){return new g.Promise(function(t,n){n(e)})}),void("function"!==typeof g.Promise.prototype.catch&&(g.Promise.prototype.catch=function(e){return g.Promise.prototype.then(void 0,e)}));var t=0,r=2,i={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function(e){e._status!==t&&(this.handlers=this.handlers.concat(e._handlers),e._handlers=[],this.running||(this.running=!0,setTimeout(this.runHandlers.bind(this),0)))},runHandlers:function(){for(var e=Date.now()+1;this.handlers.length>0;){var t=this.handlers.shift(),n=t.thisPromise._status,i=t.thisPromise._value;try{1===n?"function"===typeof t.onResolve&&(i=t.onResolve(i)):"function"===typeof t.onReject&&(i=t.onReject(i),n=1,t.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(t.thisPromise))}catch(e){n=r,i=e}if(t.nextPromise._updateStatus(n,i),Date.now()>=e)break}if(this.handlers.length>0)return void setTimeout(this.runHandlers.bind(this),0);this.running=!1},addUnhandledRejection:function(e){this.unhandledRejections.push({promise:e,time:Date.now()}),this.scheduleRejectionCheck()},removeUnhandeledRejection:function(e){e._unhandledRejection=!1;for(var t=0;t<this.unhandledRejections.length;t++)this.unhandledRejections[t].promise===e&&(this.unhandledRejections.splice(t),t--)},scheduleRejectionCheck:function(){this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){this.pendingRejectionCheck=!1;for(var e=Date.now(),t=0;t<this.unhandledRejections.length;t++)if(e-this.unhandledRejections[t].time>500){var r=this.unhandledRejections[t].promise._value,i="Unhandled rejection: "+r;r.stack&&(i+="\n"+r.stack),n(i),this.unhandledRejections.splice(t),t--}this.unhandledRejections.length&&this.scheduleRejectionCheck()}.bind(this),500))}};e.all=function(t){function n(e){a._status!==r&&(l=[],o(e))}var i,o,a=new e(function(e,t){i=e,o=t}),s=t.length,l=[];if(0===s)return i(l),a;for(var u=0,c=t.length;u<c;++u){var h=t[u],d=function(e){return function(t){a._status!==r&&(l[e]=t,0===--s&&i(l))}}(u);e.isPromise(h)?h.then(d,n):d(h)}return a},e.isPromise=function(e){return e&&"function"===typeof e.then},e.resolve=function(t){return new e(function(e){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function(t,n){if(1!==this._status&&this._status!==r){if(1===t&&e.isPromise(n))return void n.then(this._updateStatus.bind(this,1),this._updateStatus.bind(this,r));this._status=t,this._value=n,t===r&&0===this._handlers.length&&(this._unhandledRejection=!0,i.addUnhandledRejection(this)),i.scheduleHandlers(this)}},_resolve:function(e){this._updateStatus(1,e)},_reject:function(e){this._updateStatus(r,e)},then:function(t,n){var r=new e(function(e,t){this.resolve=e,this.reject=t});return this._handlers.push({thisPromise:this,onResolve:t,onReject:n,nextPromise:r}),i.scheduleHandlers(this),r},catch:function(e){return this.then(void 0,e)}},g.Promise=e}();!function(){function e(e,t,n){for(;e.length<n;)e+=t;return e}function t(){this.started={},this.times=[],this.enabled=!0}t.prototype={time:function(e){this.enabled&&(e in this.started&&n("Timer is already running for "+e),this.started[e]=Date.now())},timeEnd:function(e){this.enabled&&(e in this.started||n("Timer has not been started for "+e),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e])},toString:function(){var t,n,r=this.times,i="",o=0;for(t=0,n=r.length;t<n;++t){var a=r[t].name;a.length>o&&(o=a.length)}for(t=0,n=r.length;t<n;++t){var s=r[t],l=s.end-s.start;i+=e(s.name," ",o)+" "+l+"ms\n"}return i}}}();PDFJS.createBlob=function(e,t){if("undefined"!==typeof Blob)return new Blob([e],{type:t});var n=new MozBlobBuilder;return n.append(e),n.getBlob(t)},PDFJS.createObjectURL=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(t,n){if(!PDFJS.disableCreateObjectURL&&"undefined"!==typeof URL&&URL.createObjectURL){var r=PDFJS.createBlob(t,n);return URL.createObjectURL(r)}for(var i="data:"+n+";base64,",o=0,a=t.length;o<a;o+=3){var s=255&t[o],l=255&t[o+1],u=255&t[o+2];i+=e[s>>2]+e[(3&s)<<4|l>>4]+e[o+1<a?(15&l)<<2|u>>6:64]+e[o+2<a?63&u:64]}return i}}(),f.prototype={on:function(e,t,n){var i=this.actionHandler;i[e]&&r('There is already an actionName called "'+e+'"'),i[e]=[t,n]},send:function(e,t,n){var r={action:e,data:t};this.postMessage(r,n)},sendWithPromise:function(e,t,n){var r=this.callbackIndex++,i={action:e,data:t,callbackId:r},o=d();this.callbacksCapabilities[r]=o;try{this.postMessage(i,n)}catch(e){o.reject(e)}return o.promise},postMessage:function(e,t){t&&this.postMessageTransfers?this.comObj.postMessage(e,t):this.comObj.postMessage(e)}},"undefined"!==p(e)&&e.exports&&(e.exports=m)}).call(t,n(69)(e))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(72),s=n(19),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));o._id=n,o._url=e.url,o._header={},o._buffer=null;try{(new TextDecoder).decode(e.mhdBuffer).split("\n").forEach(function(e){var t=e.split("=");2===t.length&&(o._header[t[0].trim()]=t[1].trim())}),o._header.DimSize=o._header.DimSize.split(" "),o._header.ElementSpacing=o._header.ElementSpacing.split(" "),o._header.TransformMatrix=o._header.TransformMatrix.split(" "),o._header.Offset=o._header.Offset.split(" "),o._buffer=e.rawBuffer}catch(e){window.console.log("ooops... :(")}return o}return o(t,e),l(t,[{key:"rightHanded",value:function(){var e=this._header.AnatomicalOrientation;return this._rightHanded="RAS"===e||"RPI"===e||"LPS"===e||"LAI"===e,this._rightHanded}},{key:"seriesInstanceUID",value:function(){return this._url}},{key:"numberOfFrames",value:function(){return parseInt(this._header.DimSize[2],10)}},{key:"sopInstanceUID",value:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0}},{key:"rows",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return parseInt(this._header.DimSize[1],10)}},{key:"columns",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return parseInt(this._header.DimSize[0],10)}},{key:"pixelType",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],0);return"MET_UFLOAT"!==this._header.ElementType&&"MET_FLOAT"!==this._header.ElementType||(e=1),e}},{key:"bitsAllocated",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],1);return"MET_UCHAR"===this._header.ElementType||"MET_CHAR"===this._header.ElementType?e=8:"MET_USHORT"===this._header.ElementType||"MET_SHORT"===this._header.ElementType?e=16:"MET_UINT"!==this._header.ElementType&&"MET_INT"!==this._header.ElementType&&"MET_UFLOAT"!==this._header.ElementType&&"MET_FLOAT"!==this._header.ElementType||(e=32),e}},{key:"pixelSpacing",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[parseFloat(this._header.ElementSpacing[1],10),parseFloat(this._header.ElementSpacing[0],10),parseFloat(this._header.ElementSpacing[2],10)]}},{key:"imageOrientation",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],this._header.AnatomicalOrientation.match(/L/)?-1:1),t=this._header.AnatomicalOrientation.match(/P/)?-1:1,n=new s.q(parseFloat(this._header.TransformMatrix[0])*e,parseFloat(this._header.TransformMatrix[1])*t,parseFloat(this._header.TransformMatrix[2]));n.normalize();var r=new s.q(parseFloat(this._header.TransformMatrix[3])*e,parseFloat(this._header.TransformMatrix[4])*t,parseFloat(this._header.TransformMatrix[5]));return r.normalize(),[n.x,n.y,n.z,r.x,r.y,r.z]}},{key:"imagePosition",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[parseFloat(this._header.Offset[0]),parseFloat(this._header.Offset[1]),parseFloat(this._header.Offset[2])]}},{key:"extractPixelData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._decompressUncompressed(e)}},{key:"_decompressUncompressed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._buffer,n=this.numberOfChannels(),r=this.rows(e)*this.columns(e)*n;this.rightHanded()||(e=this.numberOfFrames()-1-e);var i=e*r;return"MET_CHAR"===this._header.ElementType?new Int8Array(t,i,r):"MET_UCHAR"===this._header.ElementType?new Uint8Array(t,i,r):"MET_SHORT"===this._header.ElementType?(i*=2,new Int16Array(t,i,r)):"MET_USHORT"===this._header.ElementType?(i*=2,new Uint16Array(t,i,r)):"MET_INT"===this._header.ElementType?(i*=4,new Int32Array(t,i,r)):"MET_UINT"===this._header.ElementType?(i*=4,new Uint32Array(t,i,r)):"MET_FLOAT"===this._header.ElementType?(i*=4,new Float32Array(t,i,r)):void 0}}]),t}(a.a);t.a=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(72),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(534),u=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(o._id=n,o._arrayBuffer=e.buffer,o._url=e.url,o._dataSet=null,o._niftiHeader=null,o._niftiImage=null,o._ordered=!0,o._orderedData=null,o._qfac=1,!l.isNIFTI(o._arrayBuffer)){throw new Error("parsers.nifti could not parse the file")}return o._dataSet=l.readHeader(o._arrayBuffer),o._niftiImage=l.readImage(o._dataSet,o._arrayBuffer),o}return o(t,e),s(t,[{key:"seriesInstanceUID",value:function(){return this._url}},{key:"numberOfFrames",value:function(){return this._dataSet.dims[3]}},{key:"numberOfChannels",value:function(){var e=1;return this._dataSet.dims[0]>=5?(e=this._dataSet.dims[5],this._ordered=!1):128===this._dataSet.datatypeCode?e=3:2304===this._dataSet.datatypeCode&&(e=4),e}},{key:"sopInstanceUID",value:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0}},{key:"rows",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._dataSet.dims[2]}},{key:"columns",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._dataSet.dims[1]}},{key:"pixelType",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],0);return 16!==this._dataSet.datatypeCode&&64!==this._dataSet.datatypeCode&&1536!==this._dataSet.datatypeCode||(e=1),e}},{key:"bitsAllocated",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._dataSet.numBitsPerVoxel}},{key:"pixelSpacing",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[this._dataSet.pixDims[1],this._dataSet.pixDims[2],this._dataSet.pixDims[3]]}},{key:"sliceThickness",value:function(){return null}},{key:"imageOrientation",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._dataSet.qform_code>0){var e=0,t=this._dataSet.quatern_b,n=this._dataSet.quatern_c,r=this._dataSet.quatern_d;return e=1-(t*t+n*n+r*r),e<1e-7?(e=1/Math.sqrt(t*t+n*n+r*r),t*=e,n*=e,r*=e,e=0):e=Math.sqrt(e),this._dataSet.pixDims[0]<0&&(this._rightHanded=!1),[-(e*e+t*t-n*n-r*r),-2*(t*n+e*r),2*(t*r-e*n),-2*(t*n-e*r),-(e*e+n*n-t*t-r*r),2*(n*r+e*t)]}if(this._dataSet.sform_code>0){return[].concat([-this._dataSet.affine[0][0],-this._dataSet.affine[0][1],this._dataSet.affine[0][2]],[-this._dataSet.affine[1][0],-this._dataSet.affine[1][1],this._dataSet.affine[0][2]])}return this._dataSet.qform_code,[1,0,0,0,1,0]}},{key:"imagePosition",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[-this._dataSet.qoffset_x,-this._dataSet.qoffset_y,this._dataSet.qoffset_z]}},{key:"dimensionIndexValues",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null}},{key:"instanceNumber",value:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0}},{key:"windowCenter",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null}},{key:"windowWidth",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null}},{key:"rescaleSlope",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._dataSet.scl_slope}},{key:"rescaleIntercept",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._dataSet.scl_inter}},{key:"extractPixelData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._decompressUncompressed(e)}},{key:"_decompressUncompressed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.numberOfChannels(),n=this.rows(e)*this.columns(e)*t,r=e*n,i=this._niftiImage;if(this._ordered||null!==this._orderedData||this._reorderData(),null!==this._orderedData)return this._orderedData.slice(r,r+n);if(2===this._dataSet.datatypeCode)return new Uint8Array(i,r,n);if(256===this._dataSet.datatypeCode)return new Int8Array(i,r,n);if(512===this._dataSet.datatypeCode)return r*=2,new Uint16Array(i,r,n);if(4===this._dataSet.datatypeCode)return r*=2,new Int16Array(i,r,n);if(8===this._dataSet.datatypeCode)return r*=4,new Int32Array(i,r,n);if(16===this._dataSet.datatypeCode){r*=4;for(var o=new Float32Array(i,r,n),a=0;a<o.length;a++)o[a]!==1/0&&o[a]!==-1/0||(o[a]=0);return o}window.console.warn("Unknown data type: datatypeCode : "+this._dataSet.datatypeCode)}},{key:"_reorderData",value:function(){var e=this.numberOfChannels(),t=this.rows()*this.columns()*e,n=this._niftiImage,r=t*this.numberOfFrames(),i=null;this._orderedData=null,2===this._dataSet.datatypeCode?(i=new Uint8Array(n,0,r),this._orderedData=new Uint8Array(i.length)):256===this._dataSet.datatypeCode?(i=new Int8Array(n,0,r),this._orderedData=new Int8Array(i.length)):512===this._dataSet.datatypeCode?(i=new Uint16Array(n,0,r),this._orderedData=new Uint16Array(i.length)):4===this._dataSet.datatypeCode?(i=new Int16Array(n,0,r),this._orderedData=new Int16Array(i.length)):16===this._dataSet.datatypeCode&&(i=new Float32Array(n,0,r),this._orderedData=new Float32Array(i.length));for(var o=i.length/3,a=0,s=0,l=o,u=2*o,c=0;c<o;c++)this._orderedData[a++]=i[s++],this._orderedData[a++]=i[l++],this._orderedData[a++]=i[u++];this._ordered=!0}}]),t}(a.a);t.a=u},function(e,t,n){"use strict";var r=r||{};r.NIFTI1=r.NIFTI1||n(190),r.NIFTI2=r.NIFTI2||n(535),r.Utils=r.Utils||n(115);var i=i||n(536);r.isNIFTI1=function(e){var t,n,i,o;return t=new DataView(e),n=t.getUint8(r.NIFTI1.MAGIC_NUMBER_LOCATION),i=t.getUint8(r.NIFTI1.MAGIC_NUMBER_LOCATION+1),o=t.getUint8(r.NIFTI1.MAGIC_NUMBER_LOCATION+2),!(n!==r.NIFTI1.MAGIC_NUMBER[0]||i!==r.NIFTI1.MAGIC_NUMBER[1]||o!==r.NIFTI1.MAGIC_NUMBER[2])},r.isNIFTI2=function(e){var t,n,i,o;return t=new DataView(e),n=t.getUint8(r.NIFTI2.MAGIC_NUMBER_LOCATION),i=t.getUint8(r.NIFTI2.MAGIC_NUMBER_LOCATION+1),o=t.getUint8(r.NIFTI2.MAGIC_NUMBER_LOCATION+2),!(n!==r.NIFTI2.MAGIC_NUMBER[0]||i!==r.NIFTI2.MAGIC_NUMBER[1]||o!==r.NIFTI2.MAGIC_NUMBER[2])},r.isNIFTI=function(e){return r.isNIFTI1(e)||r.isNIFTI2(e)},r.isCompressed=function(e){var t,n,i;if(e){if(t=new DataView(e),n=t.getUint8(0),i=t.getUint8(1),n===r.Utils.GUNZIP_MAGIC_COOKIE1)return!0;if(i===r.Utils.GUNZIP_MAGIC_COOKIE2)return!0}return!1},r.decompress=function(e){return i.inflate(e).buffer},r.readHeader=function(e){var t=null;return r.isCompressed(e)&&(e=r.decompress(e)),r.isNIFTI1(e)?t=new r.NIFTI1:r.isNIFTI2(e)&&(t=new r.NIFTI2),t?t.readHeader(e):console.error("That file does not appear to be NIFTI!"),t},r.hasExtension=function(e){return 0!=e.extensionFlag[0]},r.readImage=function(e,t){var n=e.vox_offset,r=1,i=1;e.dims[4]&&(r=e.dims[4]),e.dims[5]&&(i=e.dims[5]);var o=e.dims[1]*e.dims[2]*e.dims[3]*r*i*(e.numBitsPerVoxel/8);return t.slice(n,n+o)},r.readExtension=function(e,t){var n=e.getExtensionLocation(),r=e.extensionSize;return t.slice(n,n+r)},r.readExtensionData=function(e,t){var n=e.getExtensionLocation(),r=e.extensionSize;return t.slice(n+8,n+r-8)},"undefined"!==typeof e&&e.exports&&(e.exports=r)},function(e,t,n){"use strict";var r=r||{};r.Utils=r.Utils||n(115),r.NIFTI1=r.NIFTI1||n(190),r.NIFTI2=r.NIFTI2||function(){this.littleEndian=!1,this.dim_info=0,this.dims=[],this.intent_p1=0,this.intent_p2=0,this.intent_p3=0,this.intent_code=0,this.datatypeCode=0,this.numBitsPerVoxel=0,this.slice_start=0,this.slice_end=0,this.slice_code=0,this.pixDims=[],this.vox_offset=0,this.scl_slope=1,this.scl_inter=0,this.xyzt_units=0,this.cal_max=0,this.cal_min=0,this.slice_duration=0,this.toffset=0,this.description="",this.aux_file="",this.intent_name="",this.qform_code=0,this.sform_code=0,this.quatern_b=0,this.quatern_c=0,this.quatern_d=0,this.qoffset_x=0,this.qoffset_y=0,this.qoffset_z=0,this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],this.magic=0,this.extensionFlag=[0,0,0,0]},r.NIFTI2.MAGIC_COOKIE=540,r.NIFTI2.MAGIC_NUMBER_LOCATION=4,r.NIFTI2.MAGIC_NUMBER=[110,43,50,0,13,10,26,10],r.NIFTI2.prototype.readHeader=function(e){var t,n,i,o,a=new DataView(e),s=r.Utils.getIntAt(a,0,this.littleEndian);if(s!==r.NIFTI2.MAGIC_COOKIE&&(this.littleEndian=!0,s=r.Utils.getIntAt(a,0,this.littleEndian)),s!==r.NIFTI2.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.datatypeCode=r.Utils.getShortAt(a,12,this.littleEndian),this.numBitsPerVoxel=r.Utils.getShortAt(a,14,this.littleEndian),t=0;t<8;t+=1)o=16+8*t,this.dims[t]=r.Utils.getLongAt(a,o,this.littleEndian);for(this.intent_p1=r.Utils.getDoubleAt(a,80,this.littleEndian),this.intent_p2=r.Utils.getDoubleAt(a,88,this.littleEndian),this.intent_p3=r.Utils.getDoubleAt(a,96,this.littleEndian),t=0;t<8;t+=1)o=104+8*t,this.pixDims[t]=r.Utils.getDoubleAt(a,o,this.littleEndian);for(this.vox_offset=r.Utils.getLongAt(a,168,this.littleEndian),this.scl_slope=r.Utils.getDoubleAt(a,176,this.littleEndian),this.scl_inter=r.Utils.getDoubleAt(a,184,this.littleEndian),this.cal_max=r.Utils.getDoubleAt(a,192,this.littleEndian),this.cal_min=r.Utils.getDoubleAt(a,200,this.littleEndian),this.slice_duration=r.Utils.getDoubleAt(a,208,this.littleEndian),this.toffset=r.Utils.getDoubleAt(a,216,this.littleEndian),this.slice_start=r.Utils.getLongAt(a,224,this.littleEndian),this.slice_end=r.Utils.getLongAt(a,232,this.littleEndian),this.description=r.Utils.getStringAt(a,240,320),this.aux_file=r.Utils.getStringAt(a,320,344),this.qform_code=r.Utils.getIntAt(a,344,this.littleEndian),this.sform_code=r.Utils.getIntAt(a,348,this.littleEndian),this.quatern_b=r.Utils.getDoubleAt(a,352,this.littleEndian),this.quatern_c=r.Utils.getDoubleAt(a,360,this.littleEndian),this.quatern_d=r.Utils.getDoubleAt(a,368,this.littleEndian),this.qoffset_x=r.Utils.getDoubleAt(a,376,this.littleEndian),this.qoffset_y=r.Utils.getDoubleAt(a,384,this.littleEndian),this.qoffset_z=r.Utils.getDoubleAt(a,392,this.littleEndian),n=0;n<3;n+=1)for(i=0;i<4;i+=1)o=400+8*(4*n+i),this.affine[n][i]=r.Utils.getDoubleAt(a,o,this.littleEndian);this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.slice_code=r.Utils.getIntAt(a,496,this.littleEndian),this.xyzt_units=r.Utils.getIntAt(a,500,this.littleEndian),this.intent_code=r.Utils.getIntAt(a,504,this.littleEndian),this.intent_name=r.Utils.getStringAt(a,508,524),this.dim_info=r.Utils.getByteAt(a,524),a.byteLength>r.NIFTI2.MAGIC_COOKIE&&(this.extensionFlag[0]=r.Utils.getByteAt(a,540),this.extensionFlag[1]=r.Utils.getByteAt(a,541),this.extensionFlag[2]=r.Utils.getByteAt(a,542),this.extensionFlag[3]=r.Utils.getByteAt(a,543),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(a),this.extensionCode=this.getExtensionCode(a)))},r.NIFTI2.prototype.toFormattedString=function(){var e=r.Utils.formatNumber,t="";return t+="Datatype = "+ +this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n",t+="Bits Per Voxel =  = "+this.numBitsPerVoxel+"\n",t+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n",t+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n",t+="Voxel Dimensions (1-8): "+e(this.pixDims[0])+", "+e(this.pixDims[1])+", "+e(this.pixDims[2])+", "+e(this.pixDims[3])+", "+e(this.pixDims[4])+", "+e(this.pixDims[5])+", "+e(this.pixDims[6])+", "+e(this.pixDims[7])+"\n",t+="Image Offset = "+this.vox_offset+"\n",t+="Data Scale:  Slope = "+e(this.scl_slope)+"  Intercept = "+e(this.scl_inter)+"\n",t+="Display Range:  Max = "+e(this.cal_max)+"  Min = "+e(this.cal_min)+"\n",t+="Slice Duration = "+this.slice_duration+"\n",t+="Time Axis Shift = "+this.toffset+"\n",t+="Slice Start = "+this.slice_start+"\n",t+="Slice End = "+this.slice_end+"\n",t+='Description: "'+this.description+'"\n',t+='Auxiliary File: "'+this.aux_file+'"\n',t+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n",t+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n",t+="Quaternion Parameters:  b = "+e(this.quatern_b)+"  c = "+e(this.quatern_c)+"  d = "+e(this.quatern_d)+"\n",t+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n",t+="S-Form Parameters X: "+e(this.affine[0][0])+", "+e(this.affine[0][1])+", "+e(this.affine[0][2])+", "+e(this.affine[0][3])+"\n",t+="S-Form Parameters Y: "+e(this.affine[1][0])+", "+e(this.affine[1][1])+", "+e(this.affine[1][2])+", "+e(this.affine[1][3])+"\n",t+="S-Form Parameters Z: "+e(this.affine[2][0])+", "+e(this.affine[2][1])+", "+e(this.affine[2][2])+", "+e(this.affine[2][3])+"\n",t+="Slice Code = "+this.slice_code+"\n",t+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(r.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(r.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n",t+="Intent Code = "+this.intent_code+"\n",t+='Intent Name: "'+this.intent_name+'"\n',t+="Dim Info = "+this.dim_info+"\n"},r.NIFTI2.prototype.getExtensionLocation=function(){return r.NIFTI2.MAGIC_COOKIE+4},r.NIFTI2.prototype.getExtensionSize=r.NIFTI1.prototype.getExtensionSize,r.NIFTI2.prototype.getExtensionCode=r.NIFTI1.prototype.getExtensionCode,r.NIFTI2.prototype.getDatatypeCodeString=r.NIFTI1.prototype.getDatatypeCodeString,r.NIFTI2.prototype.getTransformCodeString=r.NIFTI1.prototype.getTransformCodeString,r.NIFTI2.prototype.getUnitsCodeString=r.NIFTI1.prototype.getUnitsCodeString,r.NIFTI2.prototype.getQformMat=r.NIFTI1.prototype.getQformMat,r.NIFTI2.prototype.convertNiftiQFormToNiftiSForm=r.NIFTI1.prototype.convertNiftiQFormToNiftiSForm,r.NIFTI2.prototype.convertNiftiSFormToNEMA=r.NIFTI1.prototype.convertNiftiSFormToNEMA,r.NIFTI2.prototype.nifti_mat33_mul=r.NIFTI1.prototype.nifti_mat33_mul,r.NIFTI2.prototype.nifti_mat33_determ=r.NIFTI1.prototype.nifti_mat33_determ,"undefined"!==typeof e&&e.exports&&(e.exports=r.NIFTI2)},function(e,t,n){"use strict";var r=n(24).assign,i=n(537),o=n(540),a=n(195),s={};r(s,i,o,a),e.exports=s},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=l.assign({level:p,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var n=s.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==f)throw new Error(c[n]);if(t.header&&s.deflateSetHeader(this.strm,t.header),t.dictionary){var i;if(i="string"===typeof t.dictionary?u.string2buf(t.dictionary):"[object ArrayBuffer]"===d.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=s.deflateSetDictionary(this.strm,i))!==f)throw new Error(c[n]);this._dict_set=!0}}function i(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg||c[n.err];return n.result}function o(e,t){return t=t||{},t.raw=!0,i(e,t)}function a(e,t){return t=t||{},t.gzip=!0,i(e,t)}var s=n(538),l=n(24),u=n(193),c=n(116),h=n(194),d=Object.prototype.toString,f=0,p=-1,m=0,v=8;r.prototype.push=function(e,t){var n,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"===typeof e?i.input=u.string2buf(e):"[object ArrayBuffer]"===d.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new l.Buf8(o),i.next_out=0,i.avail_out=o),1!==(n=s.deflate(i,r))&&n!==f)return this.onEnd(n),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(u.buf2binstring(l.shrinkBuf(i.output,i.next_out))):this.onData(l.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==n);return 4===r?(n=s.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===f):2!==r||(this.onEnd(f),i.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===f&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=r,t.deflate=i,t.deflateRaw=o,t.gzip=a},function(e,t,n){"use strict";function r(e,t){return e.msg=L[t],t}function i(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function a(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(A.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function s(e,t){O._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,a(e.strm)}function l(e,t){e.pending_buf[e.pending++]=t}function u(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function c(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,A.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=I(e.adler,t,i,n):2===e.state.wrap&&(e.adler=R(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function h(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-ue?e.strstart-(e.w_size-ue):0,u=e.window,c=e.w_mask,h=e.prev,d=e.strstart+le,f=u[o+a-1],p=u[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(n=t,u[n+a]===p&&u[n+a-1]===f&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<d);if(r=le-(d-o),o=d-le,r>a){if(e.match_start=t,a=r,r>=s)break;f=u[o+a-1],p=u[o+a]}}}while((t=h[t&c])>l&&0!==--i);return a<=e.lookahead?a:e.lookahead}function d(e){var t,n,r,i,o,a=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-ue)){A.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,n=e.hash_size,t=n;do{r=e.head[--t],e.head[t]=r>=a?r-a:0}while(--n);n=a,t=n;do{r=e.prev[--t],e.prev[t]=r>=a?r-a:0}while(--n);i+=a}if(0===e.strm.avail_in)break;if(n=c(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=se)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+se-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<se)););}while(e.lookahead<ue&&0!==e.strm.avail_in)}function f(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(d(e),0===e.lookahead&&t===D)return ye;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,s(e,!1),0===e.strm.avail_out))return ye;if(e.strstart-e.block_start>=e.w_size-ue&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===U?(s(e,!0),0===e.strm.avail_out?be:we):(e.strstart>e.block_start&&(s(e,!1),e.strm.avail_out),ye)}function p(e,t){for(var n,r;;){if(e.lookahead<ue){if(d(e),e.lookahead<ue&&t===D)return ye;if(0===e.lookahead)break}if(n=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ue&&(e.match_length=h(e,n)),e.match_length>=se)if(r=O._tr_tally(e,e.strstart-e.match_start,e.match_length-se),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=se){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=O._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=e.strstart<se-1?e.strstart:se-1,t===U?(s(e,!0),0===e.strm.avail_out?be:we):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:_e}function m(e,t){for(var n,r,i;;){if(e.lookahead<ue){if(d(e),e.lookahead<ue&&t===D)return ye;if(0===e.lookahead)break}if(n=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=se-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ue&&(e.match_length=h(e,n),e.match_length<=5&&(e.strategy===q||e.match_length===se&&e.strstart-e.match_start>4096)&&(e.match_length=se-1)),e.prev_length>=se&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-se,r=O._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-se),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=se-1,e.strstart++,r&&(s(e,!1),0===e.strm.avail_out))return ye}else if(e.match_available){if(r=O._tr_tally(e,0,e.window[e.strstart-1]),r&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return ye}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=O._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<se-1?e.strstart:se-1,t===U?(s(e,!0),0===e.strm.avail_out?be:we):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:_e}function v(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=le){if(d(e),e.lookahead<=le&&t===D)return ye;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=se&&e.strstart>0&&(i=e.strstart-1,(r=a[i])===a[++i]&&r===a[++i]&&r===a[++i])){o=e.strstart+le;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=le-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=se?(n=O._tr_tally(e,1,e.match_length-se),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=O._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===U?(s(e,!0),0===e.strm.avail_out?be:we):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:_e}function g(e,t){for(var n;;){if(0===e.lookahead&&(d(e),0===e.lookahead)){if(t===D)return ye;break}if(e.match_length=0,n=O._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===U?(s(e,!0),0===e.strm.avail_out?be:we):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:_e}function y(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function _(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=C[e.level].max_lazy,e.good_match=C[e.level].good_length,e.nice_match=C[e.level].nice_length,e.max_chain_length=C[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=se-1,e.match_available=0,e.ins_h=0}function b(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Q,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new A.Buf16(2*oe),this.dyn_dtree=new A.Buf16(2*(2*re+1)),this.bl_tree=new A.Buf16(2*(2*ie+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new A.Buf16(ae+1),this.heap=new A.Buf16(2*ne+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new A.Buf16(2*ne+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=K,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?he:ve,e.adler=2===t.wrap?0:1,t.last_flush=D,O._tr_init(t),B):r(e,H)}function x(e){var t=w(e);return t===B&&_(e.state),t}function E(e,t){return e&&e.state?2!==e.state.wrap?H:(e.state.gzhead=t,B):H}function S(e,t,n,i,o,a){if(!e)return H;var s=1;if(t===W&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),o<1||o>$||n!==Q||i<8||i>15||t<0||t>9||a<0||a>Z)return r(e,H);8===i&&(i=9);var l=new b;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+se-1)/se),l.window=new A.Buf8(2*l.w_size),l.head=new A.Buf16(l.hash_size),l.prev=new A.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new A.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=n,x(e)}function T(e,t){return S(e,t,Q,ee,te,J)}function M(e,t){var n,s,c,h;if(!e||!e.state||t>z||t<0)return e?r(e,H):H;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||s.status===ge&&t!==U)return r(e,0===e.avail_out?G:H);if(s.strm=e,n=s.last_flush,s.last_flush=t,s.status===he)if(2===s.wrap)e.adler=0,l(s,31),l(s,139),l(s,8),s.gzhead?(l(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),l(s,255&s.gzhead.time),l(s,s.gzhead.time>>8&255),l(s,s.gzhead.time>>16&255),l(s,s.gzhead.time>>24&255),l(s,9===s.level?2:s.strategy>=X||s.level<2?4:0),l(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(l(s,255&s.gzhead.extra.length),l(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=R(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=de):(l(s,0),l(s,0),l(s,0),l(s,0),l(s,0),l(s,9===s.level?2:s.strategy>=X||s.level<2?4:0),l(s,xe),s.status=ve);else{var d=Q+(s.w_bits-8<<4)<<8,f=-1;f=s.strategy>=X||s.level<2?0:s.level<6?1:6===s.level?2:3,d|=f<<6,0!==s.strstart&&(d|=ce),d+=31-d%31,s.status=ve,u(s,d),0!==s.strstart&&(u(s,e.adler>>>16),u(s,65535&e.adler)),e.adler=1}if(s.status===de)if(s.gzhead.extra){for(c=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>c&&(e.adler=R(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending!==s.pending_buf_size));)l(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>c&&(e.adler=R(e.adler,s.pending_buf,s.pending-c,c)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=fe)}else s.status=fe;if(s.status===fe)if(s.gzhead.name){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(e.adler=R(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending===s.pending_buf_size)){h=1;break}h=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,l(s,h)}while(0!==h);s.gzhead.hcrc&&s.pending>c&&(e.adler=R(e.adler,s.pending_buf,s.pending-c,c)),0===h&&(s.gzindex=0,s.status=pe)}else s.status=pe;if(s.status===pe)if(s.gzhead.comment){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(e.adler=R(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending===s.pending_buf_size)){h=1;break}h=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,l(s,h)}while(0!==h);s.gzhead.hcrc&&s.pending>c&&(e.adler=R(e.adler,s.pending_buf,s.pending-c,c)),0===h&&(s.status=me)}else s.status=me;if(s.status===me&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&a(e),s.pending+2<=s.pending_buf_size&&(l(s,255&e.adler),l(s,e.adler>>8&255),e.adler=0,s.status=ve)):s.status=ve),0!==s.pending){if(a(e),0===e.avail_out)return s.last_flush=-1,B}else if(0===e.avail_in&&i(t)<=i(n)&&t!==U)return r(e,G);if(s.status===ge&&0!==e.avail_in)return r(e,G);if(0!==e.avail_in||0!==s.lookahead||t!==D&&s.status!==ge){var p=s.strategy===X?g(s,t):s.strategy===Y?v(s,t):C[s.level].func(s,t);if(p!==be&&p!==we||(s.status=ge),p===ye||p===be)return 0===e.avail_out&&(s.last_flush=-1),B;if(p===_e&&(t===N?O._tr_align(s):t!==z&&(O._tr_stored_block(s,0,0,!1),t===F&&(o(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),a(e),0===e.avail_out))return s.last_flush=-1,B}return t!==U?B:s.wrap<=0?j:(2===s.wrap?(l(s,255&e.adler),l(s,e.adler>>8&255),l(s,e.adler>>16&255),l(s,e.adler>>24&255),l(s,255&e.total_in),l(s,e.total_in>>8&255),l(s,e.total_in>>16&255),l(s,e.total_in>>24&255)):(u(s,e.adler>>>16),u(s,65535&e.adler)),a(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?B:j)}function k(e){var t;return e&&e.state?(t=e.state.status)!==he&&t!==de&&t!==fe&&t!==pe&&t!==me&&t!==ve&&t!==ge?r(e,H):(e.state=null,t===ve?r(e,V):B):H}function P(e,t){var n,r,i,a,s,l,u,c,h=t.length;if(!e||!e.state)return H;if(n=e.state,2===(a=n.wrap)||1===a&&n.status!==he||n.lookahead)return H;for(1===a&&(e.adler=I(e.adler,t,h,0)),n.wrap=0,h>=n.w_size&&(0===a&&(o(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new A.Buf8(n.w_size),A.arraySet(c,t,h-n.w_size,n.w_size,0),t=c,h=n.w_size),s=e.avail_in,l=e.next_in,u=e.input,e.avail_in=h,e.next_in=0,e.input=t,d(n);n.lookahead>=se;){r=n.strstart,i=n.lookahead-(se-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+se-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=se-1,d(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=se-1,n.match_available=0,e.next_in=l,e.input=u,e.avail_in=s,n.wrap=a,B}var C,A=n(24),O=n(539),I=n(191),R=n(192),L=n(116),D=0,N=1,F=3,U=4,z=5,B=0,j=1,H=-2,V=-3,G=-5,W=-1,q=1,X=2,Y=3,Z=4,J=0,K=2,Q=8,$=9,ee=15,te=8,ne=286,re=30,ie=19,oe=2*ne+1,ae=15,se=3,le=258,ue=le+se+1,ce=32,he=42,de=69,fe=73,pe=91,me=103,ve=113,ge=666,ye=1,_e=2,be=3,we=4,xe=3;C=[new y(0,0,0,0,f),new y(4,4,8,4,p),new y(4,5,16,8,p),new y(4,6,32,32,p),new y(4,4,16,16,m),new y(8,16,32,32,m),new y(8,16,128,128,m),new y(8,32,128,256,m),new y(32,128,258,1024,m),new y(32,258,258,4096,m)],t.deflateInit=T,t.deflateInit2=S,t.deflateReset=x,t.deflateResetKeep=w,t.deflateSetHeader=E,t.deflate=M,t.deflateEnd=k,t.deflateSetDictionary=P,t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";function r(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function o(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function a(e){return e<256?oe[e]:oe[256+(e>>>7)]}function s(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function l(e,t,n){e.bi_valid>X-n?(e.bi_buf|=t<<e.bi_valid&65535,s(e,e.bi_buf),e.bi_buf=t>>X-e.bi_valid,e.bi_valid+=n-X):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function u(e,t,n){l(e,n[2*t],n[2*t+1])}function c(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function h(e){16===e.bi_valid?(s(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function d(e,t){var n,r,i,o,a,s,l=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,h=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(o=0;o<=q;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<W;n++)r=e.heap[n],o=l[2*l[2*r+1]+1]+1,o>p&&(o=p,m++),l[2*r+1]=o,r>u||(e.bl_count[o]++,a=0,r>=f&&(a=d[r-f]),s=l[2*r],e.opt_len+=s*(o+a),h&&(e.static_len+=s*(c[2*r+1]+a)));if(0!==m){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(r=e.bl_count[o];0!==r;)(i=e.heap[--n])>u||(l[2*i+1]!==o&&(e.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),r--)}}function f(e,t,n){var r,i,o=new Array(q+1),a=0;for(r=1;r<=q;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=c(o[s]++,s))}}function p(){var e,t,n,r,o,a=new Array(q+1);for(n=0,r=0;r<B-1;r++)for(se[r]=n,e=0;e<1<<$[r];e++)ae[n++]=r;for(ae[n-1]=r,o=0,r=0;r<16;r++)for(le[r]=o,e=0;e<1<<ee[r];e++)oe[o++]=r;for(o>>=7;r<V;r++)for(le[r]=o<<7,e=0;e<1<<ee[r]-7;e++)oe[256+o++]=r;for(t=0;t<=q;t++)a[t]=0;for(e=0;e<=143;)re[2*e+1]=8,e++,a[8]++;for(;e<=255;)re[2*e+1]=9,e++,a[9]++;for(;e<=279;)re[2*e+1]=7,e++,a[7]++;for(;e<=287;)re[2*e+1]=8,e++,a[8]++;for(f(re,H+1,a),e=0;e<V;e++)ie[2*e+1]=5,ie[2*e]=c(e,5);ue=new i(re,$,j+1,H,q),ce=new i(ie,ee,0,V,q),he=new i(new Array(0),te,0,G,Y)}function m(e){var t;for(t=0;t<H;t++)e.dyn_ltree[2*t]=0;for(t=0;t<V;t++)e.dyn_dtree[2*t]=0;for(t=0;t<G;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Z]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function v(e){e.bi_valid>8?s(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function g(e,t,n,r){v(e),r&&(s(e,n),s(e,~n)),I.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function y(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function _(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&y(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!y(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function b(e,t,n){var r,i,o,s,c=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],i=e.pending_buf[e.l_buf+c],c++,0===r?u(e,i,t):(o=ae[i],u(e,o+j+1,t),s=$[o],0!==s&&(i-=se[o],l(e,i,s)),r--,o=a(r),u(e,o,n),0!==(s=ee[o])&&(r-=le[o],l(e,r,s)))}while(c<e.last_lit);u(e,Z,t)}function w(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=W,n=0;n<l;n++)0!==o[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)i=e.heap[++e.heap_len]=u<2?++u:0,o[2*i]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)_(e,o,n);i=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],_(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,_(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],d(e,t),f(o,u,e.bl_count)}function x(e,t,n){var r,i,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<l&&i===a||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*J]++):s<=10?e.bl_tree[2*K]++:e.bl_tree[2*Q]++,s=0,o=i,0===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4))}function E(e,t,n){var r,i,o=-1,a=t[1],s=0,c=7,h=4;for(0===a&&(c=138,h=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<c&&i===a)){if(s<h)do{u(e,i,e.bl_tree)}while(0!==--s);else 0!==i?(i!==o&&(u(e,i,e.bl_tree),s--),u(e,J,e.bl_tree),l(e,s-3,2)):s<=10?(u(e,K,e.bl_tree),l(e,s-3,3)):(u(e,Q,e.bl_tree),l(e,s-11,7));s=0,o=i,0===a?(c=138,h=3):i===a?(c=6,h=3):(c=7,h=4)}}function S(e){var t;for(x(e,e.dyn_ltree,e.l_desc.max_code),x(e,e.dyn_dtree,e.d_desc.max_code),w(e,e.bl_desc),t=G-1;t>=3&&0===e.bl_tree[2*ne[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function T(e,t,n,r){var i;for(l(e,t-257,5),l(e,n-1,5),l(e,r-4,4),i=0;i<r;i++)l(e,e.bl_tree[2*ne[i]+1],3);E(e,e.dyn_ltree,t-1),E(e,e.dyn_dtree,n-1)}function M(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return L;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return D;for(t=32;t<j;t++)if(0!==e.dyn_ltree[2*t])return D;return L}function k(e){de||(p(),de=!0),e.l_desc=new o(e.dyn_ltree,ue),e.d_desc=new o(e.dyn_dtree,ce),e.bl_desc=new o(e.bl_tree,he),e.bi_buf=0,e.bi_valid=0,m(e)}function P(e,t,n,r){l(e,(F<<1)+(r?1:0),3),g(e,t,n,!0)}function C(e){l(e,U<<1,3),u(e,Z,re),h(e)}function A(e,t,n,r){var i,o,a=0;e.level>0?(e.strm.data_type===N&&(e.strm.data_type=M(e)),w(e,e.l_desc),w(e,e.d_desc),a=S(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?P(e,t,n,r):e.strategy===R||o===i?(l(e,(U<<1)+(r?1:0),3),b(e,re,ie)):(l(e,(z<<1)+(r?1:0),3),T(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),b(e,e.dyn_ltree,e.dyn_dtree)),m(e),r&&v(e)}function O(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(ae[n]+j+1)]++,e.dyn_dtree[2*a(t)]++),e.last_lit===e.lit_bufsize-1}var I=n(24),R=4,L=0,D=1,N=2,F=0,U=1,z=2,B=29,j=256,H=j+1+B,V=30,G=19,W=2*H+1,q=15,X=16,Y=7,Z=256,J=16,K=17,Q=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ee=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],re=new Array(2*(H+2));r(re);var ie=new Array(2*V);r(ie);var oe=new Array(512);r(oe);var ae=new Array(256);r(ae);var se=new Array(B);r(se);var le=new Array(V);r(le);var ue,ce,he,de=!1;t._tr_init=k,t._tr_stored_block=P,t._tr_flush_block=A,t._tr_tally=O,t._tr_align=C},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var n=a.inflateInit2(this.strm,t.windowBits);if(n!==u.Z_OK)throw new Error(c[n]);this.header=new d,a.inflateGetHeader(this.strm,this.header)}function i(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg||c[n.err];return n.result}function o(e,t){return t=t||{},t.raw=!0,i(e,t)}var a=n(541),s=n(24),l=n(193),u=n(195),c=n(116),h=n(194),d=n(544),f=Object.prototype.toString;r.prototype.push=function(e,t){var n,r,i,o,c,h,d=this.strm,p=this.options.chunkSize,m=this.options.dictionary,v=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?u.Z_FINISH:u.Z_NO_FLUSH,"string"===typeof e?d.input=l.binstring2buf(e):"[object ArrayBuffer]"===f.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new s.Buf8(p),d.next_out=0,d.avail_out=p),n=a.inflate(d,u.Z_NO_FLUSH),n===u.Z_NEED_DICT&&m&&(h="string"===typeof m?l.string2buf(m):"[object ArrayBuffer]"===f.call(m)?new Uint8Array(m):m,n=a.inflateSetDictionary(this.strm,h)),n===u.Z_BUF_ERROR&&!0===v&&(n=u.Z_OK,v=!1),n!==u.Z_STREAM_END&&n!==u.Z_OK)return this.onEnd(n),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&n!==u.Z_STREAM_END&&(0!==d.avail_in||r!==u.Z_FINISH&&r!==u.Z_SYNC_FLUSH)||("string"===this.options.to?(i=l.utf8border(d.output,d.next_out),o=d.next_out-i,c=l.buf2string(d.output,i),d.next_out=o,d.avail_out=p-o,o&&s.arraySet(d.output,d.output,i,o,0),this.onData(c)):this.onData(s.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(v=!0)}while((d.avail_in>0||0===d.avail_out)&&n!==u.Z_STREAM_END);return n===u.Z_STREAM_END&&(r=u.Z_FINISH),r===u.Z_FINISH?(n=a.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u.Z_OK):r!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),d.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===u.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=r,t.inflate=i,t.inflateRaw=o,t.ungzip=i},function(e,t,n){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new y.Buf16(320),this.work=new y.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=F,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new y.Buf32(me),t.distcode=t.distdyn=new y.Buf32(ve),t.sane=1,t.back=-1,C):I}function a(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,o(e)):I}function s(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?I:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,a(e))):I}function l(e,t){var n,r;return e?(r=new i,e.state=r,r.window=null,n=s(e,t),n!==C&&(e.state=null),n):I}function u(e){return l(e,ge)}function c(e){if(ye){var t;for(v=new y.Buf32(512),g=new y.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(x(S,e.lens,0,288,v,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;x(T,e.lens,0,32,g,0,e.work,{bits:5}),ye=!1}e.lencode=v,e.lenbits=9,e.distcode=g,e.distbits=5}function h(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new y.Buf8(o.wsize)),r>=o.wsize?(y.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),y.arraySet(o.window,t,n-r,i,o.wnext),r-=i,r?(y.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function d(e,t){var n,i,o,a,s,l,u,d,f,p,m,v,g,me,ve,ge,ye,_e,be,we,xe,Ee,Se,Te,Me=0,ke=new y.Buf8(4),Pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return I;n=e.state,n.mode===Y&&(n.mode=Z),s=e.next_out,o=e.output,u=e.avail_out,a=e.next_in,i=e.input,l=e.avail_in,d=n.hold,f=n.bits,p=l,m=u,Ee=C;e:for(;;)switch(n.mode){case F:if(0===n.wrap){n.mode=Z;break}for(;f<16;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(2&n.wrap&&35615===d){n.check=0,ke[0]=255&d,ke[1]=d>>>8&255,n.check=b(n.check,ke,2,0),d=0,f=0,n.mode=U;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=de;break}if((15&d)!==N){e.msg="unknown compression method",n.mode=de;break}if(d>>>=4,f-=4,xe=8+(15&d),0===n.wbits)n.wbits=xe;else if(xe>n.wbits){e.msg="invalid window size",n.mode=de;break}n.dmax=1<<xe,e.adler=n.check=1,n.mode=512&d?q:Y,d=0,f=0;break;case U:for(;f<16;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(n.flags=d,(255&n.flags)!==N){e.msg="unknown compression method",n.mode=de;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=de;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&(ke[0]=255&d,ke[1]=d>>>8&255,n.check=b(n.check,ke,2,0)),d=0,f=0,n.mode=z;case z:for(;f<32;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}n.head&&(n.head.time=d),512&n.flags&&(ke[0]=255&d,ke[1]=d>>>8&255,ke[2]=d>>>16&255,ke[3]=d>>>24&255,n.check=b(n.check,ke,4,0)),d=0,f=0,n.mode=B;case B:for(;f<16;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&(ke[0]=255&d,ke[1]=d>>>8&255,n.check=b(n.check,ke,2,0)),d=0,f=0,n.mode=j;case j:if(1024&n.flags){for(;f<16;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&(ke[0]=255&d,ke[1]=d>>>8&255,n.check=b(n.check,ke,2,0)),d=0,f=0}else n.head&&(n.head.extra=null);n.mode=H;case H:if(1024&n.flags&&(v=n.length,v>l&&(v=l),v&&(n.head&&(xe=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),y.arraySet(n.head.extra,i,a,v,xe)),512&n.flags&&(n.check=b(n.check,i,v,a)),l-=v,a+=v,n.length-=v),n.length))break e;n.length=0,n.mode=V;case V:if(2048&n.flags){if(0===l)break e;v=0;do{xe=i[a+v++],n.head&&xe&&n.length<65536&&(n.head.name+=String.fromCharCode(xe))}while(xe&&v<l);if(512&n.flags&&(n.check=b(n.check,i,v,a)),l-=v,a+=v,xe)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=G;case G:if(4096&n.flags){if(0===l)break e;v=0;do{xe=i[a+v++],n.head&&xe&&n.length<65536&&(n.head.comment+=String.fromCharCode(xe))}while(xe&&v<l);if(512&n.flags&&(n.check=b(n.check,i,v,a)),l-=v,a+=v,xe)break e}else n.head&&(n.head.comment=null);n.mode=W;case W:if(512&n.flags){for(;f<16;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(d!==(65535&n.check)){e.msg="header crc mismatch",n.mode=de;break}d=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Y;break;case q:for(;f<32;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}e.adler=n.check=r(d),d=0,f=0,n.mode=X;case X:if(0===n.havedict)return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=l,n.hold=d,n.bits=f,O;e.adler=n.check=1,n.mode=Y;case Y:if(t===k||t===P)break e;case Z:if(n.last){d>>>=7&f,f-=7&f,n.mode=ue;break}for(;f<3;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}switch(n.last=1&d,d>>>=1,f-=1,3&d){case 0:n.mode=J;break;case 1:if(c(n),n.mode=ne,t===P){d>>>=2,f-=2;break e}break;case 2:n.mode=$;break;case 3:e.msg="invalid block type",n.mode=de}d>>>=2,f-=2;break;case J:for(d>>>=7&f,f-=7&f;f<32;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if((65535&d)!==(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=de;break}if(n.length=65535&d,d=0,f=0,n.mode=K,t===P)break e;case K:n.mode=Q;case Q:if(v=n.length){if(v>l&&(v=l),v>u&&(v=u),0===v)break e;y.arraySet(o,i,a,v,s),l-=v,a+=v,u-=v,s+=v,n.length-=v;break}n.mode=Y;break;case $:for(;f<14;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(n.nlen=257+(31&d),d>>>=5,f-=5,n.ndist=1+(31&d),d>>>=5,f-=5,n.ncode=4+(15&d),d>>>=4,f-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=de;break}n.have=0,n.mode=ee;case ee:for(;n.have<n.ncode;){for(;f<3;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}n.lens[Pe[n.have++]]=7&d,d>>>=3,f-=3}for(;n.have<19;)n.lens[Pe[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Se={bits:n.lenbits},Ee=x(E,n.lens,0,19,n.lencode,0,n.work,Se),n.lenbits=Se.bits,Ee){e.msg="invalid code lengths set",n.mode=de;break}n.have=0,n.mode=te;case te:for(;n.have<n.nlen+n.ndist;){for(;Me=n.lencode[d&(1<<n.lenbits)-1],ve=Me>>>24,ge=Me>>>16&255,ye=65535&Me,!(ve<=f);){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(ye<16)d>>>=ve,f-=ve,n.lens[n.have++]=ye;else{if(16===ye){for(Te=ve+2;f<Te;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(d>>>=ve,f-=ve,0===n.have){e.msg="invalid bit length repeat",n.mode=de;break}xe=n.lens[n.have-1],v=3+(3&d),d>>>=2,f-=2}else if(17===ye){for(Te=ve+3;f<Te;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}d>>>=ve,f-=ve,xe=0,v=3+(7&d),d>>>=3,f-=3}else{for(Te=ve+7;f<Te;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}d>>>=ve,f-=ve,xe=0,v=11+(127&d),d>>>=7,f-=7}if(n.have+v>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=de;break}for(;v--;)n.lens[n.have++]=xe}}if(n.mode===de)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=de;break}if(n.lenbits=9,Se={bits:n.lenbits},Ee=x(S,n.lens,0,n.nlen,n.lencode,0,n.work,Se),n.lenbits=Se.bits,Ee){e.msg="invalid literal/lengths set",n.mode=de;break}if(n.distbits=6,n.distcode=n.distdyn,Se={bits:n.distbits},Ee=x(T,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Se),n.distbits=Se.bits,Ee){e.msg="invalid distances set",n.mode=de;break}if(n.mode=ne,t===P)break e;case ne:n.mode=re;case re:if(l>=6&&u>=258){e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=l,n.hold=d,n.bits=f,w(e,m),s=e.next_out,o=e.output,u=e.avail_out,a=e.next_in,i=e.input,l=e.avail_in,d=n.hold,f=n.bits,n.mode===Y&&(n.back=-1);break}for(n.back=0;Me=n.lencode[d&(1<<n.lenbits)-1],ve=Me>>>24,ge=Me>>>16&255,ye=65535&Me,!(ve<=f);){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(ge&&0===(240&ge)){for(_e=ve,be=ge,we=ye;Me=n.lencode[we+((d&(1<<_e+be)-1)>>_e)],ve=Me>>>24,ge=Me>>>16&255,ye=65535&Me,!(_e+ve<=f);){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}d>>>=_e,f-=_e,n.back+=_e}if(d>>>=ve,f-=ve,n.back+=ve,n.length=ye,0===ge){n.mode=le;break}if(32&ge){n.back=-1,n.mode=Y;break}if(64&ge){e.msg="invalid literal/length code",n.mode=de;break}n.extra=15&ge,n.mode=ie;case ie:if(n.extra){for(Te=n.extra;f<Te;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=oe;case oe:for(;Me=n.distcode[d&(1<<n.distbits)-1],ve=Me>>>24,ge=Me>>>16&255,ye=65535&Me,!(ve<=f);){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(0===(240&ge)){for(_e=ve,be=ge,we=ye;Me=n.distcode[we+((d&(1<<_e+be)-1)>>_e)],ve=Me>>>24,ge=Me>>>16&255,ye=65535&Me,!(_e+ve<=f);){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}d>>>=_e,f-=_e,n.back+=_e}if(d>>>=ve,f-=ve,n.back+=ve,64&ge){e.msg="invalid distance code",n.mode=de;break}n.offset=ye,n.extra=15&ge,n.mode=ae;case ae:if(n.extra){for(Te=n.extra;f<Te;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,f-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=de;break}n.mode=se;case se:if(0===u)break e;if(v=m-u,n.offset>v){if((v=n.offset-v)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=de;break}v>n.wnext?(v-=n.wnext,g=n.wsize-v):g=n.wnext-v,v>n.length&&(v=n.length),me=n.window}else me=o,g=s-n.offset,v=n.length;v>u&&(v=u),u-=v,n.length-=v;do{o[s++]=me[g++]}while(--v);0===n.length&&(n.mode=re);break;case le:if(0===u)break e;o[s++]=n.length,u--,n.mode=re;break;case ue:if(n.wrap){for(;f<32;){if(0===l)break e;l--,d|=i[a++]<<f,f+=8}if(m-=u,e.total_out+=m,n.total+=m,m&&(e.adler=n.check=n.flags?b(n.check,o,m,s-m):_(n.check,o,m,s-m)),m=u,(n.flags?d:r(d))!==n.check){e.msg="incorrect data check",n.mode=de;break}d=0,f=0}n.mode=ce;case ce:if(n.wrap&&n.flags){for(;f<32;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(d!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=de;break}d=0,f=0}n.mode=he;case he:Ee=A;break e;case de:Ee=R;break e;case fe:return L;case pe:default:return I}return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=l,n.hold=d,n.bits=f,(n.wsize||m!==e.avail_out&&n.mode<de&&(n.mode<ue||t!==M))&&h(e,e.output,e.next_out,m-e.avail_out)?(n.mode=fe,L):(p-=e.avail_in,m-=e.avail_out,e.total_in+=p,e.total_out+=m,n.total+=m,n.wrap&&m&&(e.adler=n.check=n.flags?b(n.check,o,m,e.next_out-m):_(n.check,o,m,e.next_out-m)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Y?128:0)+(n.mode===ne||n.mode===K?256:0),(0===p&&0===m||t===M)&&Ee===C&&(Ee=D),Ee)}function f(e){if(!e||!e.state)return I;var t=e.state;return t.window&&(t.window=null),e.state=null,C}function p(e,t){var n;return e&&e.state?(n=e.state,0===(2&n.wrap)?I:(n.head=t,t.done=!1,C)):I}function m(e,t){var n,r,i=t.length;return e&&e.state?(n=e.state,0!==n.wrap&&n.mode!==X?I:n.mode===X&&(r=1,(r=_(r,t,i,0))!==n.check)?R:h(e,t,i,i)?(n.mode=fe,L):(n.havedict=1,C)):I}var v,g,y=n(24),_=n(191),b=n(192),w=n(542),x=n(543),E=0,S=1,T=2,M=4,k=5,P=6,C=0,A=1,O=2,I=-2,R=-3,L=-4,D=-5,N=8,F=1,U=2,z=3,B=4,j=5,H=6,V=7,G=8,W=9,q=10,X=11,Y=12,Z=13,J=14,K=15,Q=16,$=17,ee=18,te=19,ne=20,re=21,ie=22,oe=23,ae=24,se=25,le=26,ue=27,ce=28,he=29,de=30,fe=31,pe=32,me=852,ve=592,ge=15,ye=!0;t.inflateReset=a,t.inflateReset2=s,t.inflateResetKeep=o,t.inflateInit=u,t.inflateInit2=l,t.inflate=d,t.inflateEnd=f,t.inflateGetHeader=p,t.inflateSetDictionary=m,t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,i,o,a,s,l,u,c,h,d,f,p,m,v,g,y,_,b,w,x,E,S,T,M;n=e.state,r=e.next_in,T=e.input,i=r+(e.avail_in-5),o=e.next_out,M=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=n.dmax,u=n.wsize,c=n.whave,h=n.wnext,d=n.window,f=n.hold,p=n.bits,m=n.lencode,v=n.distcode,g=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{p<15&&(f+=T[r++]<<p,p+=8,f+=T[r++]<<p,p+=8),_=m[f&g];t:for(;;){if(b=_>>>24,f>>>=b,p-=b,0===(b=_>>>16&255))M[o++]=65535&_;else{if(!(16&b)){if(0===(64&b)){_=m[(65535&_)+(f&(1<<b)-1)];continue t}if(32&b){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&_,b&=15,b&&(p<b&&(f+=T[r++]<<p,p+=8),w+=f&(1<<b)-1,f>>>=b,p-=b),p<15&&(f+=T[r++]<<p,p+=8,f+=T[r++]<<p,p+=8),_=v[f&y];n:for(;;){if(b=_>>>24,f>>>=b,p-=b,!(16&(b=_>>>16&255))){if(0===(64&b)){_=v[(65535&_)+(f&(1<<b)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(x=65535&_,b&=15,p<b&&(f+=T[r++]<<p,(p+=8)<b&&(f+=T[r++]<<p,p+=8)),(x+=f&(1<<b)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=b,p-=b,b=o-a,x>b){if((b=x-b)>c&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(E=0,S=d,0===h){if(E+=u-b,b<w){w-=b;do{M[o++]=d[E++]}while(--b);E=o-x,S=M}}else if(h<b){if(E+=u+h-b,(b-=h)<w){w-=b;do{M[o++]=d[E++]}while(--b);if(E=0,h<w){b=h,w-=b;do{M[o++]=d[E++]}while(--b);E=o-x,S=M}}}else if(E+=h-b,b<w){w-=b;do{M[o++]=d[E++]}while(--b);E=o-x,S=M}for(;w>2;)M[o++]=S[E++],M[o++]=S[E++],M[o++]=S[E++],w-=3;w&&(M[o++]=S[E++],w>1&&(M[o++]=S[E++]))}else{E=o-x;do{M[o++]=M[E++],M[o++]=M[E++],M[o++]=M[E++],w-=3}while(w>2);w&&(M[o++]=M[E++],w>1&&(M[o++]=M[E++]))}break}}break}}while(r<i&&o<s);w=p>>3,r-=w,p-=w<<3,f&=(1<<p)-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=f,n.bits=p}},function(e,t,n){"use strict";var r=n(24),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,l,u,c,h,d){var f,p,m,v,g,y,_,b,w,x=d.bits,E=0,S=0,T=0,M=0,k=0,P=0,C=0,A=0,O=0,I=0,R=null,L=0,D=new r.Buf16(16),N=new r.Buf16(16),F=null,U=0;for(E=0;E<=15;E++)D[E]=0;for(S=0;S<l;S++)D[t[n+S]]++;for(k=x,M=15;M>=1&&0===D[M];M--);if(k>M&&(k=M),0===M)return u[c++]=20971520,u[c++]=20971520,d.bits=1,0;for(T=1;T<M&&0===D[T];T++);for(k<T&&(k=T),A=1,E=1;E<=15;E++)if(A<<=1,(A-=D[E])<0)return-1;if(A>0&&(0===e||1!==M))return-1;for(N[1]=0,E=1;E<15;E++)N[E+1]=N[E]+D[E];for(S=0;S<l;S++)0!==t[n+S]&&(h[N[t[n+S]]++]=S);if(0===e?(R=F=h,y=19):1===e?(R=i,L-=257,F=o,U-=257,y=256):(R=a,F=s,y=-1),I=0,S=0,E=T,g=c,P=k,C=0,m=-1,O=1<<k,v=O-1,1===e&&O>852||2===e&&O>592)return 1;for(;;){_=E-C,h[S]<y?(b=0,w=h[S]):h[S]>y?(b=F[U+h[S]],w=R[L+h[S]]):(b=96,w=0),f=1<<E-C,p=1<<P,T=p;do{p-=f,u[g+(I>>C)+p]=_<<24|b<<16|w|0}while(0!==p);for(f=1<<E-1;I&f;)f>>=1;if(0!==f?(I&=f-1,I+=f):I=0,S++,0===--D[E]){if(E===M)break;E=t[n+h[S]]}if(E>k&&(I&v)!==m){for(0===C&&(C=k),g+=T,P=E-C,A=1<<P;P+C<M&&!((A-=D[P+C])<=0);)P++,A<<=1;if(O+=1<<P,1===e&&O>852||2===e&&O>592)return 1;m=I&v,u[m]=k<<24|P<<16|g-c|0}}return 0!==I&&(u[g+I]=E-C<<24|64<<16|0),d.bits=k,0}},function(e,t,n){"use strict";function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(72),s=n(19),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(o._id=n,o._url=e.url,o._buffer=null,o._bufferPos=0,o._dataPos=0,o._pixelData=null,o._version=1,o._width=0,o._height=0,o._depth=0,o._nframes=0,o._type=t.MRI_UCHAR,o._dof=0,o._goodRASFlag=0,o._spacingXYZ=[1,1,1],o._Xras=[-1,0,0],o._Yras=[0,0,-1],o._Zras=[0,1,0],o._Cras=[0,0,0],o._tr=0,o._flipAngle=0,o._te=0,o._ti=0,o._fov=0,o._tags=[],o._origin=[0,0,0],o._imageOrient=[0,0,0,0,0,0],o._buffer=e.buffer,o._version=o._readInt(),o._swapEndian=!1,1==o._version);else{if(16777216!=o._version){throw new Error("MGH/MGZ parser: Unknown Endian.  Version reports: "+o._version)}o._swapEndian=!0,o._version=o._swap32(o._version)}o._width=o._readInt(),o._height=o._readInt(),o._depth=o._readInt(),o._nframes=o._readInt(),o._type=o._readInt(),o._dof=o._readInt(),o._goodRASFlag=o._readShort(),o._spacingXYZ=o._readFloat(3),o._Xras=o._readFloat(3),o._Yras=o._readFloat(3),o._Zras=o._readFloat(3),o._Cras=o._readFloat(3),o._bufferPos=284;var a=o._width*o._height*o._depth*o._nframes;o._width,o._height,o._depth;switch(o._type){case t.MRI_UCHAR:o._pixelData=o._readUChar(a);break;case t.MRI_INT:o._pixelData=o._readInt(a);break;case t.MRI_FLOAT:o._pixelData=o._readFloat(a);break;case t.MRI_SHORT:o._pixelData=o._readShort(a);break;default:throw Error("MGH/MGZ parser: Unknown _type.  _type reports: "+o._type)}o._tr=o._readFloat(1),o._flipAngle=o._readFloat(1),o._te=o._readFloat(1),o._ti=o._readFloat(1),o._fov=o._readFloat(1);for(var l=new TextDecoder,u=o._tagReadStart();void 0!=u[0];){var c=u[0],h=u[1],d=void 0;switch(c){case t.TAG_OLD_MGH_XFORM:case t.TAG_MGH_XFORM:d=o._readChar(h);break;default:d=o._readChar(h)}d=l.decode(d),o._tags.push({tagType:c,tagValue:d}),u=o._tagReadStart()}var f=(new s.q).fromArray(o._Xras),p=(new s.q).fromArray(o._Yras),m=(new s.q).crossVectors(f,p),v=(new s.q).fromArray(o._Zras);m.angleTo(v)>Math.PI/2&&(o._rightHanded=!1),o._imageOrient=[-o._Xras[0],-o._Xras[1],o._Xras[2],-o._Yras[0],-o._Yras[1],o._Yras[2]];for(var g=o._width/2,y=o._height/2,_=o._depth/2,b=0;b<3;++b)o._origin[b]=o._Cras[b]-(o._Xras[b]*o._spacingXYZ[0]*g+o._Yras[b]*o._spacingXYZ[1]*y+o._Zras[b]*o._spacingXYZ[2]*_);return o._origin=[-o._origin[0],-o._origin[1],o._origin[2]],o}return o(t,e),l(t,[{key:"seriesInstanceUID",value:function(){return this._url}},{key:"numberOfFrames",value:function(){return this._depth}},{key:"sopInstanceUID",value:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0}},{key:"rows",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._width}},{key:"columns",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._height}},{key:"pixelType",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(this._type){case t.MRI_UCHAR:case t.MRI_INT:case t.MRI_SHORT:return 0;case t.MRI_FLOAT:return 1;default:throw Error("MGH/MGZ parser: Unknown _type.  _type reports: "+this._type)}}},{key:"bitsAllocated",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(this._type){case t.MRI_UCHAR:return 8;case t.MRI_SHORT:return 16;case t.MRI_INT:case t.MRI_FLOAT:return 32;default:throw Error("MGH/MGZ parser: Unknown _type.  _type reports: "+this._type)}}},{key:"pixelSpacing",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._spacingXYZ}},{key:"imageOrientation",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._imageOrient}},{key:"imagePosition",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._origin}},{key:"extractPixelData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._width*this._height;return this._pixelData.slice(e*t,(e+1)*t)}},{key:"_readInt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+4*e));this._bufferPos+=4*e;var n=void 0;if(1==e)n=t.getInt32(0,this._swapEndian);else{n=new Int32Array(e);for(var r=0;r<e;r++)n[r]=t.getInt32(4*r,this._swapEndian)}return n}},{key:"_readShort",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+2*e));this._bufferPos+=2*e;var n=void 0;if(1==e)n=t.getInt16(0,this._swapEndian);else{n=new Int16Array(e);for(var r=0;r<e;r++)n[r]=t.getInt16(2*r,this._swapEndian)}return n}},{key:"_readLong",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+8*e));this._bufferPos+=8*e;for(var n=new Uint16Array(e),r=0;r<e;r++){var i=0,o=0;this._swapendian?i=4:o=4;var a=t.getInt32(8*r+i,this._swapEndian),s=t.getInt32(8*r+o,this._swapEndian);0!=a&&(console.log("Unable to read Int64 with high word: "+a+"low word: "+s),s=void 0),n[r]=s}return 0==e?void 0:1==e?n[0]:n}},{key:"_readChar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+e));this._bufferPos+=e;var n=void 0;if(1==e)n=t.getInt8(0,this._swapEndian);else{n=new Int8Array(e);for(var r=0;r<e;r++)n[r]=t.getInt8(r,this._swapEndian)}return n}},{key:"_readUChar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+e));this._bufferPos+=e;var n=void 0;if(1==e)n=t.getUint8(0,this._swapEndian);else{n=new Uint8Array(e);for(var r=0;r<e;r++)n[r]=t.getUint8(r,this._swapEndian)}return n}},{key:"_readFloat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+4*e));this._bufferPos+=4*e;var n=void 0;if(1==e)n=t.getFloat32(0,this._swapEndian);else{n=new Float32Array(e);for(var r=0;r<e;r++)n[r]=t.getFloat32(4*r,this._swapEndian)}return n}},{key:"_tagReadStart",value:function(){if(this._bufferPos>=this._buffer.byteLength)return[void 0,void 0];var e=this._readInt(),n=void 0;switch(e){case t.TAG_OLD_MGH_XFORM:n=this._readInt(),n-=1;break;case t.TAG_OLD_SURF_GEOM:case t.TAG_OLD_USEREALRAS:case t.TAG_OLD_COLORTABLE:n=0;break;default:n=this._readLong()}return void 0==n&&(e=void 0),[e,n]}}]),t}(a.a);t.a=u,u.MRI_UCHAR=0,u.MRI_INT=1,u.MRI_LONG=2,u.MRI_FLOAT=3,u.MRI_SHORT=4,u.MRI_BITMAP=5,u.MRI_TENSOR=6,u.MRI_FLOAT_COMPLEX=7,u.MRI_DOUBLE_COMPLEX=8,u.MRI_RGB=9,u.TAG_OLD_COLORTABLE=1,u.TAG_OLD_USEREALRAS=2,u.TAG_CMDLINE=3,u.TAG_USEREALRAS=4,u.TAG_COLORTABLE=5,u.TAG_GCAMORPH_GEOM=10,u.TAG_GCAMORPH_TYPE=11,u.TAG_GCAMORPH_LABELS=12,u.TAG_OLD_SURF_GEOM=20,u.TAG_SURF_GEOM=21,u.TAG_OLD_MGH_XFORM=30,u.TAG_MGH_XFORM=31,u.TAG_GROUP_AVG_SURFACE_AREA=32,u.TAG_AUTO_ALIGN=33,u.TAG_SCALAR_DOUBLE=40,u.TAG_PEDIR=41,u.TAG_MRI_FRAME=42,u.TAG_FIELDSTRENGTH=43},function(e,t,n){"use strict";var r=n(25).assign,i=n(547),o=n(550),a=n(200),s={};r(s,i,o,a),e.exports=s},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=l.assign({level:p,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var n=s.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==f)throw new Error(c[n]);if(t.header&&s.deflateSetHeader(this.strm,t.header),t.dictionary){var i;if(i="string"===typeof t.dictionary?u.string2buf(t.dictionary):"[object ArrayBuffer]"===d.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=s.deflateSetDictionary(this.strm,i))!==f)throw new Error(c[n]);this._dict_set=!0}}function i(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg;return n.result}function o(e,t){return t=t||{},t.raw=!0,i(e,t)}function a(e,t){return t=t||{},t.gzip=!0,i(e,t)}var s=n(548),l=n(25),u=n(198),c=n(117),h=n(199),d=Object.prototype.toString,f=0,p=-1,m=0,v=8;r.prototype.push=function(e,t){var n,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"===typeof e?i.input=u.string2buf(e):"[object ArrayBuffer]"===d.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new l.Buf8(o),i.next_out=0,i.avail_out=o),1!==(n=s.deflate(i,r))&&n!==f)return this.onEnd(n),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(u.buf2binstring(l.shrinkBuf(i.output,i.next_out))):this.onData(l.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==n);return 4===r?(n=s.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===f):2!==r||(this.onEnd(f),i.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===f&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=r,t.deflate=i,t.deflateRaw=o,t.gzip=a},function(e,t,n){"use strict";function r(e,t){return e.msg=L[t],t}function i(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function a(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(A.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function s(e,t){O._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,a(e.strm)}function l(e,t){e.pending_buf[e.pending++]=t}function u(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function c(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,A.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=I(e.adler,t,i,n):2===e.state.wrap&&(e.adler=R(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function h(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-ue?e.strstart-(e.w_size-ue):0,u=e.window,c=e.w_mask,h=e.prev,d=e.strstart+le,f=u[o+a-1],p=u[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(n=t,u[n+a]===p&&u[n+a-1]===f&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<d);if(r=le-(d-o),o=d-le,r>a){if(e.match_start=t,a=r,r>=s)break;f=u[o+a-1],p=u[o+a]}}}while((t=h[t&c])>l&&0!==--i);return a<=e.lookahead?a:e.lookahead}function d(e){var t,n,r,i,o,a=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-ue)){A.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,n=e.hash_size,t=n;do{r=e.head[--t],e.head[t]=r>=a?r-a:0}while(--n);n=a,t=n;do{r=e.prev[--t],e.prev[t]=r>=a?r-a:0}while(--n);i+=a}if(0===e.strm.avail_in)break;if(n=c(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=se)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+se-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<se)););}while(e.lookahead<ue&&0!==e.strm.avail_in)}function f(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(d(e),0===e.lookahead&&t===D)return ye;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,s(e,!1),0===e.strm.avail_out))return ye;if(e.strstart-e.block_start>=e.w_size-ue&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===U?(s(e,!0),0===e.strm.avail_out?be:we):(e.strstart>e.block_start&&(s(e,!1),e.strm.avail_out),ye)}function p(e,t){for(var n,r;;){if(e.lookahead<ue){if(d(e),e.lookahead<ue&&t===D)return ye;if(0===e.lookahead)break}if(n=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ue&&(e.match_length=h(e,n)),e.match_length>=se)if(r=O._tr_tally(e,e.strstart-e.match_start,e.match_length-se),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=se){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=O._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=e.strstart<se-1?e.strstart:se-1,t===U?(s(e,!0),0===e.strm.avail_out?be:we):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:_e}function m(e,t){for(var n,r,i;;){if(e.lookahead<ue){if(d(e),e.lookahead<ue&&t===D)return ye;if(0===e.lookahead)break}if(n=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=se-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ue&&(e.match_length=h(e,n),e.match_length<=5&&(e.strategy===q||e.match_length===se&&e.strstart-e.match_start>4096)&&(e.match_length=se-1)),e.prev_length>=se&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-se,r=O._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-se),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=se-1,e.strstart++,r&&(s(e,!1),0===e.strm.avail_out))return ye}else if(e.match_available){if(r=O._tr_tally(e,0,e.window[e.strstart-1]),r&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return ye}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=O._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<se-1?e.strstart:se-1,t===U?(s(e,!0),0===e.strm.avail_out?be:we):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:_e}function v(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=le){if(d(e),e.lookahead<=le&&t===D)return ye;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=se&&e.strstart>0&&(i=e.strstart-1,(r=a[i])===a[++i]&&r===a[++i]&&r===a[++i])){o=e.strstart+le;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=le-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=se?(n=O._tr_tally(e,1,e.match_length-se),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=O._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===U?(s(e,!0),0===e.strm.avail_out?be:we):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:_e}function g(e,t){for(var n;;){if(0===e.lookahead&&(d(e),0===e.lookahead)){if(t===D)return ye;break}if(e.match_length=0,n=O._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===U?(s(e,!0),0===e.strm.avail_out?be:we):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:_e}function y(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function _(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=C[e.level].max_lazy,e.good_match=C[e.level].good_length,e.nice_match=C[e.level].nice_length,e.max_chain_length=C[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=se-1,e.match_available=0,e.ins_h=0}function b(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Q,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new A.Buf16(2*oe),this.dyn_dtree=new A.Buf16(2*(2*re+1)),this.bl_tree=new A.Buf16(2*(2*ie+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new A.Buf16(ae+1),this.heap=new A.Buf16(2*ne+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new A.Buf16(2*ne+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=K,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?he:ve,e.adler=2===t.wrap?0:1,t.last_flush=D,O._tr_init(t),B):r(e,H)}function x(e){var t=w(e);return t===B&&_(e.state),t}function E(e,t){return e&&e.state?2!==e.state.wrap?H:(e.state.gzhead=t,B):H}function S(e,t,n,i,o,a){if(!e)return H;var s=1;if(t===W&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),o<1||o>$||n!==Q||i<8||i>15||t<0||t>9||a<0||a>Z)return r(e,H);8===i&&(i=9);var l=new b;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+se-1)/se),l.window=new A.Buf8(2*l.w_size),l.head=new A.Buf16(l.hash_size),l.prev=new A.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new A.Buf8(l.pending_buf_size),l.d_buf=l.lit_bufsize>>1,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=n,x(e)}function T(e,t){return S(e,t,Q,ee,te,J)}function M(e,t){var n,s,c,h;if(!e||!e.state||t>z||t<0)return e?r(e,H):H;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||s.status===ge&&t!==U)return r(e,0===e.avail_out?G:H);if(s.strm=e,n=s.last_flush,s.last_flush=t,s.status===he)if(2===s.wrap)e.adler=0,l(s,31),l(s,139),l(s,8),s.gzhead?(l(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),l(s,255&s.gzhead.time),l(s,s.gzhead.time>>8&255),l(s,s.gzhead.time>>16&255),l(s,s.gzhead.time>>24&255),l(s,9===s.level?2:s.strategy>=X||s.level<2?4:0),l(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(l(s,255&s.gzhead.extra.length),l(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=R(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=de):(l(s,0),l(s,0),l(s,0),l(s,0),l(s,0),l(s,9===s.level?2:s.strategy>=X||s.level<2?4:0),l(s,xe),s.status=ve);else{var d=Q+(s.w_bits-8<<4)<<8,f=-1;f=s.strategy>=X||s.level<2?0:s.level<6?1:6===s.level?2:3,d|=f<<6,0!==s.strstart&&(d|=ce),d+=31-d%31,s.status=ve,u(s,d),0!==s.strstart&&(u(s,e.adler>>>16),u(s,65535&e.adler)),e.adler=1}if(s.status===de)if(s.gzhead.extra){for(c=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>c&&(e.adler=R(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending!==s.pending_buf_size));)l(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>c&&(e.adler=R(e.adler,s.pending_buf,s.pending-c,c)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=fe)}else s.status=fe;if(s.status===fe)if(s.gzhead.name){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(e.adler=R(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending===s.pending_buf_size)){h=1;break}h=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,l(s,h)}while(0!==h);s.gzhead.hcrc&&s.pending>c&&(e.adler=R(e.adler,s.pending_buf,s.pending-c,c)),0===h&&(s.gzindex=0,s.status=pe)}else s.status=pe;if(s.status===pe)if(s.gzhead.comment){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(e.adler=R(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending===s.pending_buf_size)){h=1;break}h=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,l(s,h)}while(0!==h);s.gzhead.hcrc&&s.pending>c&&(e.adler=R(e.adler,s.pending_buf,s.pending-c,c)),0===h&&(s.status=me)}else s.status=me;if(s.status===me&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&a(e),s.pending+2<=s.pending_buf_size&&(l(s,255&e.adler),l(s,e.adler>>8&255),e.adler=0,s.status=ve)):s.status=ve),0!==s.pending){if(a(e),0===e.avail_out)return s.last_flush=-1,B}else if(0===e.avail_in&&i(t)<=i(n)&&t!==U)return r(e,G);if(s.status===ge&&0!==e.avail_in)return r(e,G);if(0!==e.avail_in||0!==s.lookahead||t!==D&&s.status!==ge){var p=s.strategy===X?g(s,t):s.strategy===Y?v(s,t):C[s.level].func(s,t);if(p!==be&&p!==we||(s.status=ge),p===ye||p===be)return 0===e.avail_out&&(s.last_flush=-1),B;if(p===_e&&(t===N?O._tr_align(s):t!==z&&(O._tr_stored_block(s,0,0,!1),t===F&&(o(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),a(e),0===e.avail_out))return s.last_flush=-1,B}return t!==U?B:s.wrap<=0?j:(2===s.wrap?(l(s,255&e.adler),l(s,e.adler>>8&255),l(s,e.adler>>16&255),l(s,e.adler>>24&255),l(s,255&e.total_in),l(s,e.total_in>>8&255),l(s,e.total_in>>16&255),l(s,e.total_in>>24&255)):(u(s,e.adler>>>16),u(s,65535&e.adler)),a(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?B:j)}function k(e){var t;return e&&e.state?(t=e.state.status)!==he&&t!==de&&t!==fe&&t!==pe&&t!==me&&t!==ve&&t!==ge?r(e,H):(e.state=null,t===ve?r(e,V):B):H}function P(e,t){var n,r,i,a,s,l,u,c,h=t.length;if(!e||!e.state)return H;if(n=e.state,2===(a=n.wrap)||1===a&&n.status!==he||n.lookahead)return H;for(1===a&&(e.adler=I(e.adler,t,h,0)),n.wrap=0,h>=n.w_size&&(0===a&&(o(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new A.Buf8(n.w_size),A.arraySet(c,t,h-n.w_size,n.w_size,0),t=c,h=n.w_size),s=e.avail_in,l=e.next_in,u=e.input,e.avail_in=h,e.next_in=0,e.input=t,d(n);n.lookahead>=se;){r=n.strstart,i=n.lookahead-(se-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+se-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=se-1,d(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=se-1,n.match_available=0,e.next_in=l,e.input=u,e.avail_in=s,n.wrap=a,B}var C,A=n(25),O=n(549),I=n(196),R=n(197),L=n(117),D=0,N=1,F=3,U=4,z=5,B=0,j=1,H=-2,V=-3,G=-5,W=-1,q=1,X=2,Y=3,Z=4,J=0,K=2,Q=8,$=9,ee=15,te=8,ne=286,re=30,ie=19,oe=2*ne+1,ae=15,se=3,le=258,ue=le+se+1,ce=32,he=42,de=69,fe=73,pe=91,me=103,ve=113,ge=666,ye=1,_e=2,be=3,we=4,xe=3;C=[new y(0,0,0,0,f),new y(4,4,8,4,p),new y(4,5,16,8,p),new y(4,6,32,32,p),new y(4,4,16,16,m),new y(8,16,32,32,m),new y(8,16,128,128,m),new y(8,32,128,256,m),new y(32,128,258,1024,m),new y(32,258,258,4096,m)],t.deflateInit=T,t.deflateInit2=S,t.deflateReset=x,t.deflateResetKeep=w,t.deflateSetHeader=E,t.deflate=M,t.deflateEnd=k,t.deflateSetDictionary=P,t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";function r(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function o(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function a(e){return e<256?oe[e]:oe[256+(e>>>7)]}function s(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function l(e,t,n){e.bi_valid>X-n?(e.bi_buf|=t<<e.bi_valid&65535,s(e,e.bi_buf),e.bi_buf=t>>X-e.bi_valid,e.bi_valid+=n-X):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function u(e,t,n){l(e,n[2*t],n[2*t+1])}function c(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function h(e){16===e.bi_valid?(s(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function d(e,t){var n,r,i,o,a,s,l=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,h=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(o=0;o<=q;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<W;n++)r=e.heap[n],o=l[2*l[2*r+1]+1]+1,o>p&&(o=p,m++),l[2*r+1]=o,r>u||(e.bl_count[o]++,a=0,r>=f&&(a=d[r-f]),s=l[2*r],e.opt_len+=s*(o+a),h&&(e.static_len+=s*(c[2*r+1]+a)));if(0!==m){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(r=e.bl_count[o];0!==r;)(i=e.heap[--n])>u||(l[2*i+1]!==o&&(e.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),r--)}}function f(e,t,n){var r,i,o=new Array(q+1),a=0;for(r=1;r<=q;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=c(o[s]++,s))}}function p(){var e,t,n,r,o,a=new Array(q+1);for(n=0,r=0;r<B-1;r++)for(se[r]=n,e=0;e<1<<$[r];e++)ae[n++]=r;for(ae[n-1]=r,o=0,r=0;r<16;r++)for(le[r]=o,e=0;e<1<<ee[r];e++)oe[o++]=r;for(o>>=7;r<V;r++)for(le[r]=o<<7,e=0;e<1<<ee[r]-7;e++)oe[256+o++]=r;for(t=0;t<=q;t++)a[t]=0;for(e=0;e<=143;)re[2*e+1]=8,e++,a[8]++;for(;e<=255;)re[2*e+1]=9,e++,a[9]++;for(;e<=279;)re[2*e+1]=7,e++,a[7]++;for(;e<=287;)re[2*e+1]=8,e++,a[8]++;for(f(re,H+1,a),e=0;e<V;e++)ie[2*e+1]=5,ie[2*e]=c(e,5);ue=new i(re,$,j+1,H,q),ce=new i(ie,ee,0,V,q),he=new i(new Array(0),te,0,G,Y)}function m(e){var t;for(t=0;t<H;t++)e.dyn_ltree[2*t]=0;for(t=0;t<V;t++)e.dyn_dtree[2*t]=0;for(t=0;t<G;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Z]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function v(e){e.bi_valid>8?s(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function g(e,t,n,r){v(e),r&&(s(e,n),s(e,~n)),I.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function y(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function _(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&y(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!y(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function b(e,t,n){var r,i,o,s,c=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],i=e.pending_buf[e.l_buf+c],c++,0===r?u(e,i,t):(o=ae[i],u(e,o+j+1,t),s=$[o],0!==s&&(i-=se[o],l(e,i,s)),r--,o=a(r),u(e,o,n),0!==(s=ee[o])&&(r-=le[o],l(e,r,s)))}while(c<e.last_lit);u(e,Z,t)}function w(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=W,n=0;n<l;n++)0!==o[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)i=e.heap[++e.heap_len]=u<2?++u:0,o[2*i]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)_(e,o,n);i=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],_(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,_(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],d(e,t),f(o,u,e.bl_count)}function x(e,t,n){var r,i,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<l&&i===a||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*J]++):s<=10?e.bl_tree[2*K]++:e.bl_tree[2*Q]++,s=0,o=i,0===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4))}function E(e,t,n){var r,i,o=-1,a=t[1],s=0,c=7,h=4;for(0===a&&(c=138,h=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<c&&i===a)){if(s<h)do{u(e,i,e.bl_tree)}while(0!==--s);else 0!==i?(i!==o&&(u(e,i,e.bl_tree),s--),u(e,J,e.bl_tree),l(e,s-3,2)):s<=10?(u(e,K,e.bl_tree),l(e,s-3,3)):(u(e,Q,e.bl_tree),l(e,s-11,7));s=0,o=i,0===a?(c=138,h=3):i===a?(c=6,h=3):(c=7,h=4)}}function S(e){var t;for(x(e,e.dyn_ltree,e.l_desc.max_code),x(e,e.dyn_dtree,e.d_desc.max_code),w(e,e.bl_desc),t=G-1;t>=3&&0===e.bl_tree[2*ne[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function T(e,t,n,r){var i;for(l(e,t-257,5),l(e,n-1,5),l(e,r-4,4),i=0;i<r;i++)l(e,e.bl_tree[2*ne[i]+1],3);E(e,e.dyn_ltree,t-1),E(e,e.dyn_dtree,n-1)}function M(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return L;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return D;for(t=32;t<j;t++)if(0!==e.dyn_ltree[2*t])return D;return L}function k(e){de||(p(),de=!0),e.l_desc=new o(e.dyn_ltree,ue),e.d_desc=new o(e.dyn_dtree,ce),e.bl_desc=new o(e.bl_tree,he),e.bi_buf=0,e.bi_valid=0,m(e)}function P(e,t,n,r){l(e,(F<<1)+(r?1:0),3),g(e,t,n,!0)}function C(e){l(e,U<<1,3),u(e,Z,re),h(e)}function A(e,t,n,r){var i,o,a=0;e.level>0?(e.strm.data_type===N&&(e.strm.data_type=M(e)),w(e,e.l_desc),w(e,e.d_desc),a=S(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?P(e,t,n,r):e.strategy===R||o===i?(l(e,(U<<1)+(r?1:0),3),b(e,re,ie)):(l(e,(z<<1)+(r?1:0),3),T(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),b(e,e.dyn_ltree,e.dyn_dtree)),m(e),r&&v(e)}function O(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(ae[n]+j+1)]++,e.dyn_dtree[2*a(t)]++),e.last_lit===e.lit_bufsize-1}var I=n(25),R=4,L=0,D=1,N=2,F=0,U=1,z=2,B=29,j=256,H=j+1+B,V=30,G=19,W=2*H+1,q=15,X=16,Y=7,Z=256,J=16,K=17,Q=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ee=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],re=new Array(2*(H+2));r(re);var ie=new Array(2*V);r(ie);var oe=new Array(512);r(oe);var ae=new Array(256);r(ae);var se=new Array(B);r(se);var le=new Array(V);r(le);var ue,ce,he,de=!1;t._tr_init=k,t._tr_stored_block=P,t._tr_flush_block=A,t._tr_tally=O,t._tr_align=C},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var n=a.inflateInit2(this.strm,t.windowBits);if(n!==u.Z_OK)throw new Error(c[n]);this.header=new d,a.inflateGetHeader(this.strm,this.header)}function i(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg;return n.result}function o(e,t){return t=t||{},t.raw=!0,i(e,t)}var a=n(551),s=n(25),l=n(198),u=n(200),c=n(117),h=n(199),d=n(554),f=Object.prototype.toString;r.prototype.push=function(e,t){var n,r,i,o,c,h,d=this.strm,p=this.options.chunkSize,m=this.options.dictionary,v=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?u.Z_FINISH:u.Z_NO_FLUSH,"string"===typeof e?d.input=l.binstring2buf(e):"[object ArrayBuffer]"===f.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new s.Buf8(p),d.next_out=0,d.avail_out=p),n=a.inflate(d,u.Z_NO_FLUSH),n===u.Z_NEED_DICT&&m&&(h="string"===typeof m?l.string2buf(m):"[object ArrayBuffer]"===f.call(m)?new Uint8Array(m):m,n=a.inflateSetDictionary(this.strm,h)),n===u.Z_BUF_ERROR&&!0===v&&(n=u.Z_OK,v=!1),n!==u.Z_STREAM_END&&n!==u.Z_OK)return this.onEnd(n),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&n!==u.Z_STREAM_END&&(0!==d.avail_in||r!==u.Z_FINISH&&r!==u.Z_SYNC_FLUSH)||("string"===this.options.to?(i=l.utf8border(d.output,d.next_out),o=d.next_out-i,c=l.buf2string(d.output,i),d.next_out=o,d.avail_out=p-o,o&&s.arraySet(d.output,d.output,i,o,0),this.onData(c)):this.onData(s.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(v=!0)}while((d.avail_in>0||0===d.avail_out)&&n!==u.Z_STREAM_END);return n===u.Z_STREAM_END&&(r=u.Z_FINISH),r===u.Z_FINISH?(n=a.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u.Z_OK):r!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),d.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===u.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=r,t.inflate=i,t.inflateRaw=o,t.ungzip=i},function(e,t,n){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new y.Buf16(320),this.work=new y.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=F,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new y.Buf32(me),t.distcode=t.distdyn=new y.Buf32(ve),t.sane=1,t.back=-1,C):I}function a(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,o(e)):I}function s(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?I:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,a(e))):I}function l(e,t){var n,r;return e?(r=new i,e.state=r,r.window=null,n=s(e,t),n!==C&&(e.state=null),n):I}function u(e){return l(e,ge)}function c(e){if(ye){var t;for(v=new y.Buf32(512),g=new y.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(x(S,e.lens,0,288,v,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;x(T,e.lens,0,32,g,0,e.work,{bits:5}),ye=!1}e.lencode=v,e.lenbits=9,e.distcode=g,e.distbits=5}function h(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new y.Buf8(o.wsize)),r>=o.wsize?(y.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),y.arraySet(o.window,t,n-r,i,o.wnext),r-=i,r?(y.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function d(e,t){var n,i,o,a,s,l,u,d,f,p,m,v,g,me,ve,ge,ye,_e,be,we,xe,Ee,Se,Te,Me=0,ke=new y.Buf8(4),Pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return I;n=e.state,n.mode===Y&&(n.mode=Z),s=e.next_out,o=e.output,u=e.avail_out,a=e.next_in,i=e.input,l=e.avail_in,d=n.hold,f=n.bits,p=l,m=u,Ee=C;e:for(;;)switch(n.mode){case F:if(0===n.wrap){n.mode=Z;break}for(;f<16;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(2&n.wrap&&35615===d){n.check=0,ke[0]=255&d,ke[1]=d>>>8&255,n.check=b(n.check,ke,2,0),d=0,f=0,n.mode=U;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=de;break}if((15&d)!==N){e.msg="unknown compression method",n.mode=de;break}if(d>>>=4,f-=4,xe=8+(15&d),0===n.wbits)n.wbits=xe;else if(xe>n.wbits){e.msg="invalid window size",n.mode=de;break}n.dmax=1<<xe,e.adler=n.check=1,n.mode=512&d?q:Y,d=0,f=0;break;case U:for(;f<16;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(n.flags=d,(255&n.flags)!==N){e.msg="unknown compression method",n.mode=de;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=de;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&(ke[0]=255&d,ke[1]=d>>>8&255,n.check=b(n.check,ke,2,0)),d=0,f=0,n.mode=z;case z:for(;f<32;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}n.head&&(n.head.time=d),512&n.flags&&(ke[0]=255&d,ke[1]=d>>>8&255,ke[2]=d>>>16&255,ke[3]=d>>>24&255,n.check=b(n.check,ke,4,0)),d=0,f=0,n.mode=B;case B:for(;f<16;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&(ke[0]=255&d,ke[1]=d>>>8&255,n.check=b(n.check,ke,2,0)),d=0,f=0,n.mode=j;case j:if(1024&n.flags){for(;f<16;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&(ke[0]=255&d,ke[1]=d>>>8&255,n.check=b(n.check,ke,2,0)),d=0,f=0}else n.head&&(n.head.extra=null);n.mode=H;case H:if(1024&n.flags&&(v=n.length,v>l&&(v=l),v&&(n.head&&(xe=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),y.arraySet(n.head.extra,i,a,v,xe)),512&n.flags&&(n.check=b(n.check,i,v,a)),l-=v,a+=v,n.length-=v),n.length))break e;n.length=0,n.mode=V;case V:if(2048&n.flags){if(0===l)break e;v=0;do{xe=i[a+v++],n.head&&xe&&n.length<65536&&(n.head.name+=String.fromCharCode(xe))}while(xe&&v<l);if(512&n.flags&&(n.check=b(n.check,i,v,a)),l-=v,a+=v,xe)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=G;case G:if(4096&n.flags){if(0===l)break e;v=0;do{xe=i[a+v++],n.head&&xe&&n.length<65536&&(n.head.comment+=String.fromCharCode(xe))}while(xe&&v<l);if(512&n.flags&&(n.check=b(n.check,i,v,a)),l-=v,a+=v,xe)break e}else n.head&&(n.head.comment=null);n.mode=W;case W:if(512&n.flags){for(;f<16;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(d!==(65535&n.check)){e.msg="header crc mismatch",n.mode=de;break}d=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Y;break;case q:for(;f<32;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}e.adler=n.check=r(d),d=0,f=0,n.mode=X;case X:if(0===n.havedict)return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=l,n.hold=d,n.bits=f,O;e.adler=n.check=1,n.mode=Y;case Y:if(t===k||t===P)break e;case Z:if(n.last){d>>>=7&f,f-=7&f,n.mode=ue;break}for(;f<3;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}switch(n.last=1&d,d>>>=1,f-=1,3&d){case 0:n.mode=J;break;case 1:if(c(n),n.mode=ne,t===P){d>>>=2,f-=2;break e}break;case 2:n.mode=$;break;case 3:e.msg="invalid block type",n.mode=de}d>>>=2,f-=2;break;case J:for(d>>>=7&f,f-=7&f;f<32;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if((65535&d)!==(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=de;break}if(n.length=65535&d,d=0,f=0,n.mode=K,t===P)break e;case K:n.mode=Q;case Q:if(v=n.length){if(v>l&&(v=l),v>u&&(v=u),0===v)break e;y.arraySet(o,i,a,v,s),l-=v,a+=v,u-=v,s+=v,n.length-=v;break}n.mode=Y;break;case $:for(;f<14;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(n.nlen=257+(31&d),d>>>=5,f-=5,n.ndist=1+(31&d),d>>>=5,f-=5,n.ncode=4+(15&d),d>>>=4,f-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=de;break}n.have=0,n.mode=ee;case ee:for(;n.have<n.ncode;){for(;f<3;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}n.lens[Pe[n.have++]]=7&d,d>>>=3,f-=3}for(;n.have<19;)n.lens[Pe[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Se={bits:n.lenbits},Ee=x(E,n.lens,0,19,n.lencode,0,n.work,Se),n.lenbits=Se.bits,Ee){e.msg="invalid code lengths set",n.mode=de;break}n.have=0,n.mode=te;case te:for(;n.have<n.nlen+n.ndist;){for(;Me=n.lencode[d&(1<<n.lenbits)-1],ve=Me>>>24,ge=Me>>>16&255,ye=65535&Me,!(ve<=f);){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(ye<16)d>>>=ve,f-=ve,n.lens[n.have++]=ye;else{if(16===ye){for(Te=ve+2;f<Te;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(d>>>=ve,f-=ve,0===n.have){e.msg="invalid bit length repeat",n.mode=de;break}xe=n.lens[n.have-1],v=3+(3&d),d>>>=2,f-=2}else if(17===ye){for(Te=ve+3;f<Te;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}d>>>=ve,f-=ve,xe=0,v=3+(7&d),d>>>=3,f-=3}else{for(Te=ve+7;f<Te;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}d>>>=ve,f-=ve,xe=0,v=11+(127&d),d>>>=7,f-=7}if(n.have+v>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=de;break}for(;v--;)n.lens[n.have++]=xe}}if(n.mode===de)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=de;break}if(n.lenbits=9,Se={bits:n.lenbits},Ee=x(S,n.lens,0,n.nlen,n.lencode,0,n.work,Se),n.lenbits=Se.bits,Ee){e.msg="invalid literal/lengths set",n.mode=de;break}if(n.distbits=6,n.distcode=n.distdyn,Se={bits:n.distbits},Ee=x(T,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Se),n.distbits=Se.bits,Ee){e.msg="invalid distances set",n.mode=de;break}if(n.mode=ne,t===P)break e;case ne:n.mode=re;case re:if(l>=6&&u>=258){e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=l,n.hold=d,n.bits=f,w(e,m),s=e.next_out,o=e.output,u=e.avail_out,a=e.next_in,i=e.input,l=e.avail_in,d=n.hold,f=n.bits,n.mode===Y&&(n.back=-1);break}for(n.back=0;Me=n.lencode[d&(1<<n.lenbits)-1],ve=Me>>>24,ge=Me>>>16&255,ye=65535&Me,!(ve<=f);){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(ge&&0===(240&ge)){for(_e=ve,be=ge,we=ye;Me=n.lencode[we+((d&(1<<_e+be)-1)>>_e)],ve=Me>>>24,ge=Me>>>16&255,ye=65535&Me,!(_e+ve<=f);){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}d>>>=_e,f-=_e,n.back+=_e}if(d>>>=ve,f-=ve,n.back+=ve,n.length=ye,0===ge){n.mode=le;break}if(32&ge){n.back=-1,n.mode=Y;break}if(64&ge){e.msg="invalid literal/length code",n.mode=de;break}n.extra=15&ge,n.mode=ie;case ie:if(n.extra){for(Te=n.extra;f<Te;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=oe;case oe:for(;Me=n.distcode[d&(1<<n.distbits)-1],ve=Me>>>24,ge=Me>>>16&255,ye=65535&Me,!(ve<=f);){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(0===(240&ge)){for(_e=ve,be=ge,we=ye;Me=n.distcode[we+((d&(1<<_e+be)-1)>>_e)],ve=Me>>>24,ge=Me>>>16&255,ye=65535&Me,!(_e+ve<=f);){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}d>>>=_e,f-=_e,n.back+=_e}if(d>>>=ve,f-=ve,n.back+=ve,64&ge){e.msg="invalid distance code",n.mode=de;break}n.offset=ye,n.extra=15&ge,n.mode=ae;case ae:if(n.extra){for(Te=n.extra;f<Te;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,f-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=de;break}n.mode=se;case se:if(0===u)break e;if(v=m-u,n.offset>v){if((v=n.offset-v)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=de;break}v>n.wnext?(v-=n.wnext,g=n.wsize-v):g=n.wnext-v,v>n.length&&(v=n.length),me=n.window}else me=o,g=s-n.offset,v=n.length;v>u&&(v=u),u-=v,n.length-=v;do{o[s++]=me[g++]}while(--v);0===n.length&&(n.mode=re);break;case le:if(0===u)break e;o[s++]=n.length,u--,n.mode=re;break;case ue:if(n.wrap){for(;f<32;){if(0===l)break e;l--,d|=i[a++]<<f,f+=8}if(m-=u,e.total_out+=m,n.total+=m,m&&(e.adler=n.check=n.flags?b(n.check,o,m,s-m):_(n.check,o,m,s-m)),m=u,(n.flags?d:r(d))!==n.check){e.msg="incorrect data check",n.mode=de;break}d=0,f=0}n.mode=ce;case ce:if(n.wrap&&n.flags){for(;f<32;){if(0===l)break e;l--,d+=i[a++]<<f,f+=8}if(d!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=de;break}d=0,f=0}n.mode=he;case he:Ee=A;break e;case de:Ee=R;break e;case fe:return L;case pe:default:return I}return e.next_out=s,e.avail_out=u,e.next_in=a,e.avail_in=l,n.hold=d,n.bits=f,(n.wsize||m!==e.avail_out&&n.mode<de&&(n.mode<ue||t!==M))&&h(e,e.output,e.next_out,m-e.avail_out)?(n.mode=fe,L):(p-=e.avail_in,m-=e.avail_out,e.total_in+=p,e.total_out+=m,n.total+=m,n.wrap&&m&&(e.adler=n.check=n.flags?b(n.check,o,m,e.next_out-m):_(n.check,o,m,e.next_out-m)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Y?128:0)+(n.mode===ne||n.mode===K?256:0),(0===p&&0===m||t===M)&&Ee===C&&(Ee=D),Ee)}function f(e){if(!e||!e.state)return I;var t=e.state;return t.window&&(t.window=null),e.state=null,C}function p(e,t){var n;return e&&e.state?(n=e.state,0===(2&n.wrap)?I:(n.head=t,t.done=!1,C)):I}function m(e,t){var n,r,i=t.length;return e&&e.state?(n=e.state,0!==n.wrap&&n.mode!==X?I:n.mode===X&&(r=1,(r=_(r,t,i,0))!==n.check)?R:h(e,t,i,i)?(n.mode=fe,L):(n.havedict=1,C)):I}var v,g,y=n(25),_=n(196),b=n(197),w=n(552),x=n(553),E=0,S=1,T=2,M=4,k=5,P=6,C=0,A=1,O=2,I=-2,R=-3,L=-4,D=-5,N=8,F=1,U=2,z=3,B=4,j=5,H=6,V=7,G=8,W=9,q=10,X=11,Y=12,Z=13,J=14,K=15,Q=16,$=17,ee=18,te=19,ne=20,re=21,ie=22,oe=23,ae=24,se=25,le=26,ue=27,ce=28,he=29,de=30,fe=31,pe=32,me=852,ve=592,ge=15,ye=!0;t.inflateReset=a,t.inflateReset2=s,t.inflateResetKeep=o,t.inflateInit=u,t.inflateInit2=l,t.inflate=d,t.inflateEnd=f,t.inflateGetHeader=p,t.inflateSetDictionary=m,t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,i,o,a,s,l,u,c,h,d,f,p,m,v,g,y,_,b,w,x,E,S,T,M;n=e.state,r=e.next_in,T=e.input,i=r+(e.avail_in-5),o=e.next_out,M=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=n.dmax,u=n.wsize,c=n.whave,h=n.wnext,d=n.window,f=n.hold,p=n.bits,m=n.lencode,v=n.distcode,g=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{p<15&&(f+=T[r++]<<p,p+=8,f+=T[r++]<<p,p+=8),_=m[f&g];t:for(;;){if(b=_>>>24,f>>>=b,p-=b,0===(b=_>>>16&255))M[o++]=65535&_;else{if(!(16&b)){if(0===(64&b)){_=m[(65535&_)+(f&(1<<b)-1)];continue t}if(32&b){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&_,b&=15,b&&(p<b&&(f+=T[r++]<<p,p+=8),w+=f&(1<<b)-1,f>>>=b,p-=b),p<15&&(f+=T[r++]<<p,p+=8,f+=T[r++]<<p,p+=8),_=v[f&y];n:for(;;){if(b=_>>>24,f>>>=b,p-=b,!(16&(b=_>>>16&255))){if(0===(64&b)){_=v[(65535&_)+(f&(1<<b)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(x=65535&_,b&=15,p<b&&(f+=T[r++]<<p,(p+=8)<b&&(f+=T[r++]<<p,p+=8)),(x+=f&(1<<b)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=b,p-=b,b=o-a,x>b){if((b=x-b)>c&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(E=0,S=d,0===h){if(E+=u-b,b<w){w-=b;do{M[o++]=d[E++]}while(--b);E=o-x,S=M}}else if(h<b){if(E+=u+h-b,(b-=h)<w){w-=b;do{M[o++]=d[E++]}while(--b);if(E=0,h<w){b=h,w-=b;do{M[o++]=d[E++]}while(--b);E=o-x,S=M}}}else if(E+=h-b,b<w){w-=b;do{M[o++]=d[E++]}while(--b);E=o-x,S=M}for(;w>2;)M[o++]=S[E++],M[o++]=S[E++],M[o++]=S[E++],w-=3;w&&(M[o++]=S[E++],w>1&&(M[o++]=S[E++]))}else{E=o-x;do{M[o++]=M[E++],M[o++]=M[E++],M[o++]=M[E++],w-=3}while(w>2);w&&(M[o++]=M[E++],w>1&&(M[o++]=M[E++]))}break}}break}}while(r<i&&o<s);w=p>>3,r-=w,p-=w<<3,f&=(1<<p)-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=f,n.bits=p}},function(e,t,n){"use strict";var r=n(25),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,l,u,c,h,d){var f,p,m,v,g,y,_,b,w,x=d.bits,E=0,S=0,T=0,M=0,k=0,P=0,C=0,A=0,O=0,I=0,R=null,L=0,D=new r.Buf16(16),N=new r.Buf16(16),F=null,U=0;for(E=0;E<=15;E++)D[E]=0;for(S=0;S<l;S++)D[t[n+S]]++;for(k=x,M=15;M>=1&&0===D[M];M--);if(k>M&&(k=M),0===M)return u[c++]=20971520,u[c++]=20971520,d.bits=1,0;for(T=1;T<M&&0===D[T];T++);for(k<T&&(k=T),A=1,E=1;E<=15;E++)if(A<<=1,(A-=D[E])<0)return-1;if(A>0&&(0===e||1!==M))return-1;for(N[1]=0,E=1;E<15;E++)N[E+1]=N[E]+D[E];for(S=0;S<l;S++)0!==t[n+S]&&(h[N[t[n+S]]++]=S);if(0===e?(R=F=h,y=19):1===e?(R=i,L-=257,F=o,U-=257,y=256):(R=a,F=s,y=-1),I=0,S=0,E=T,g=c,P=k,C=0,m=-1,O=1<<k,v=O-1,1===e&&O>852||2===e&&O>592)return 1;for(var z=0;;){z++,_=E-C,h[S]<y?(b=0,w=h[S]):h[S]>y?(b=F[U+h[S]],w=R[L+h[S]]):(b=96,w=0),f=1<<E-C,p=1<<P,T=p;do{p-=f,u[g+(I>>C)+p]=_<<24|b<<16|w|0}while(0!==p);for(f=1<<E-1;I&f;)f>>=1;if(0!==f?(I&=f-1,I+=f):I=0,S++,0===--D[E]){if(E===M)break;E=t[n+h[S]]}if(E>k&&(I&v)!==m){for(0===C&&(C=k),g+=T,P=E-C,A=1<<P;P+C<M&&!((A-=D[P+C])<=0);)P++,A<<=1;if(O+=1<<P,1===e&&O>852||2===e&&O>592)return 1;m=I&v,u[m]=k<<24|P<<16|g-c|0}}return 0!==I&&(u[g+I]=E-C<<24|64<<16|0),d.bits=k,0}},function(e,t,n){"use strict";function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(118),s=n(201),l=n(557),u=n(28),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)};!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.THREE;if(void 0===e||void 0===e.Object3D)return null;var t=Object(a.a)(e);(function(t){function n(t,o,a){r(this,n);var l=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,o));l._stack=a,l._widgetType="VoxelProbe",l._controls.enabled=!1,l._initialized=!1,l._moving=!1,l._label=null,l._domDisplayed=!0,l._domHovered=!1;var u=Object(s.a)(e);return l._handle=new u(t,o),l._handle.worldPosition.copy(l._worldPosition),l.add(l._handle),l._moveHandle=new u(t,o),l._moveHandle.worldPosition.copy(l._worldPosition),l.add(l._moveHandle),l._moveHandle.hide(),l.create(),l.onMove=l.onMove.bind(l),l.onHover=l.onHover.bind(l),l.addEventListeners(),l}o(n,t),c(n,[{key:"addEventListeners",value:function(){this._label.addEventListener("mouseenter",this.onHover),this._label.addEventListener("mouseleave",this.onHover),this._container.addEventListener("wheel",this.onMove)}},{key:"removeEventListeners",value:function(){this._label.removeEventListener("mouseenter",this.onHover),this._label.removeEventListener("mouseleave",this.onHover),this._container.removeEventListener("wheel",this.onMove)}},{key:"onStart",value:function(e){this._moveHandle.onMove(e,!0),this._handle.onStart(e),this._active=this._handle.active||this._domHovered,this._domHovered&&(this._moving=!0,this._controls.enabled=!1),this.update()}},{key:"onMove",value:function(e){if(this._active){var t=this._moveHandle.worldPosition.clone();this._dragged=!0,this._moveHandle.onMove(e,!0),this._moving&&this._handle.worldPosition.add(this._moveHandle.worldPosition.clone().sub(t))}else this.onHover(null);this._handle.onMove(e),this.update()}},{key:"onEnd",value:function(){this._handle.onEnd(),!this._dragged&&this._active&&this._initialized&&(this._selected=!this._selected,this._handle.selected=this._selected),this._initialized=!0,this._active=this._handle.active,this._dragged=!1,this._moving=!1,this.update()}},{key:"onHover",value:function(e){e&&this.hoverDom(e),this._hovered=this._handle.hovered||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default"}},{key:"hoverDom",value:function(e){this._domHovered="mouseenter"===e.type}},{key:"create",value:function(){this.createVoxel(),this.createDOM()}},{key:"createVoxel",value:function(){this._voxel=new l.a,this._voxel.id=this.id}},{key:"createDOM",value:function(){this._label=document.createElement("div"),this._label.setAttribute("class","widgets-label");var e=document.createElement("div"),t=document.createElement("div");t.setAttribute("id","lpsPosition"),e.appendChild(t);var n=document.createElement("div");n.setAttribute("id","ijkPosition"),e.appendChild(n);var r=document.createElement("div");r.setAttribute("id","value"),e.appendChild(r),this._label.appendChild(e),this._container.appendChild(this._label),this.updateDOMColor()}},{key:"update",value:function(){this.updateColor(),this._handle.update(),this._worldPosition.copy(this._handle.worldPosition),this.updateVoxel(),this.updateDOMContent(),this.updateDOMColor(),this.updateDOMPosition()}},{key:"updateVoxel",value:function(){this._voxel.worldCoordinates=this._worldPosition,this._voxel.dataCoordinates=u.a.worldToData(this._stack.lps2IJK,this._worldPosition);var e=u.a.getPixelData(this._stack,this._voxel.dataCoordinates);this._voxel.value=null===e||this._stack.numberOfChannels>1?"NA":u.a.rescaleSlopeIntercept(e,this._stack.rescaleSlope,this._stack.rescaleIntercept).toFixed()}},{key:"updateDOMContent",value:function(){var e=this._label.querySelector("#lpsPosition"),t=this._label.querySelector("#ijkPosition"),n=this._label.querySelector("#value");e.innerHTML="LPS: \n      "+this._voxel.worldCoordinates.x.toFixed(2)+" :\n      "+this._voxel.worldCoordinates.y.toFixed(2)+" :\n      "+this._voxel.worldCoordinates.z.toFixed(2),t.innerHTML="IJK: \n      "+this._voxel.dataCoordinates.x+" :\n      "+this._voxel.dataCoordinates.y+" :\n      "+this._voxel.dataCoordinates.z,n.innerHTML="Value: "+this._voxel.value}},{key:"updateDOMPosition",value:function(){var e=this.adjustLabelTransform(this._label,this._handle.screenPosition,!0);this._label.style.transform="translate3D("+e.x+"px, "+e.y+"px, 0)"}},{key:"updateDOMColor",value:function(){this._label.style.borderColor=this._color}},{key:"free",value:function(){this.removeEventListeners(),this.remove(this._handle),this._handle.free(),this._handle=null,this.remove(this._moveHandle),this._moveHandle.free(),this._moveHandle=null,this._container.removeChild(this._label),this._voxel=null,h(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"free",this).call(this)}},{key:"hideDOM",value:function(){this._label.style.display="none",this._handle.hideDOM()}},{key:"showDOM",value:function(){this._label.style.display="",this._handle.showDOM()}},{key:"targetMesh",get:function(){return this._targetMesh},set:function(e){this._targetMesh=e,this._handle.targetMesh=e,this._moveHandle.targetMesh=e,this.update()}},{key:"worldPosition",get:function(){return this._worldPosition},set:function(e){this._handle.worldPosition.copy(e),this._worldPosition.copy(e),this.update()}},{key:"active",get:function(){return this._active},set:function(e){this._active=e,this._controls.enabled=!this._active,this.update()}},{key:"showVoxel",set:function(e){this._showVoxel=e,this.update()},get:function(){return this._showVoxel}},{key:"showDomSVG",set:function(e){this._showDomSVG=e,this.update()},get:function(){return this._showDomSVG}},{key:"showDomMeasurements",set:function(e){this._showDomMeasurements=e,this.update()},get:function(){return this._showDomMeasurements}}])})(t)}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"code",get:function(){return'\n        .widgets-handle {\n            position: absolute;\n            border: 1px solid;\n            border-radius: 50%;\n            width: 10px;\n            height: 10px;\n            margin: -5.5px; /* border + width / 2 */\n            z-index: 3;\n        }\n        .widgets-line {\n            position: absolute;\n            width: 1px;\n            height: 1px;\n            margin-top: -0.5px; /* height / 2 */\n        }\n        .widgets-line:before { /* for dragging */\n            content: " ";\n            position: absolute;\n            height: 11.5px;\n            left: 0;\n            right: 0;\n            margin-top: -5px;\n        }\n        .widgets-dashline {\n            position: absolute;\n            border-top: 1px dashed;\n            margin-top: -1px; /* border */\n        }\n        .widgets-rectangle {\n            position: absolute;\n            border: 1px solid;\n            margin: -1px; /* border */\n        }\n        .widgets-rectangle-helper {\n            position: absolute;\n            border: 1px dashed;\n            margin: -1px; /* border */\n        }\n        .widgets-ellipse {\n            position: absolute;\n            border: 1px solid;\n            border-radius: 50%;\n            margin: -1px; /* border */\n            z-index: 2;\n        }\n        .widgets-label {\n            position: absolute;\n            border: 1px solid;\n            background-color: rgba(0, 0, 0, 0.7);\n            color: rgb(255, 255, 255);\n            padding: 4px;\n            z-index: 3;\n        }\n        '}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this._id=-1,this._worldCoordinates=null,this._dataCoordinates=null,this._screenCoordinates=null,this._value=null}return i(e,[{key:"worldCoordinates",set:function(e){this._worldCoordinates=e},get:function(){return this._worldCoordinates}},{key:"dataCoordinates",set:function(e){this._dataCoordinates=e},get:function(){return this._dataCoordinates}},{key:"screenCoordinates",set:function(e){this._screenCoordinates=e},get:function(){return this._screenCoordinates}},{key:"value",set:function(e){this._value=e},get:function(){return this._value}},{key:"id",set:function(e){this._id=e},get:function(){return this._id}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(118),s=n(201),l=n(28),u=n(106),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.THREE;if(void 0===e||void 0===e.Object3D)return null;var t=Object(a.a)(e);return function(t){function n(t,o,a){r(this,n);var l=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,o));l._stack=a,l._widgetType="Freehand",l._initialized=!1,l._moving=!1,l._domHovered=!1,l._material=null,l._geometry=null,l._mesh=null,l._lines=[],l._label=null,l._handles=[];var u=Object(s.a)(e),c=new u(t,o);return c.worldPosition.copy(l._worldPosition),l.add(c),l._handles.push(c),l._moveHandle=new u(t,o),l._moveHandle.worldPosition.copy(l._worldPosition),l.add(l._moveHandle),l._moveHandle.hide(),l.onMove=l.onMove.bind(l),l.onHover=l.onHover.bind(l),l.create(),l.addEventListeners(),l}return o(n,t),c(n,[{key:"addEventListeners",value:function(){this._container.addEventListener("wheel",this.onMove),this._label.addEventListener("mouseenter",this.onHover),this._label.addEventListener("mouseleave",this.onHover)}},{key:"removeEventListeners",value:function(){this._container.removeEventListener("wheel",this.onMove),this._label.removeEventListener("mouseenter",this.onHover),this._label.removeEventListener("mouseleave",this.onHover)}},{key:"onHover",value:function(e){e&&this.hoverDom(e),this.hoverMesh();var t=!1;this._handles.forEach(function(e){t=t||e.hovered}),this._hovered=t||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default"}},{key:"hoverMesh",value:function(){}},{key:"hoverDom",value:function(e){this._domHovered="mouseenter"===e.type}},{key:"onStart",value:function(e){var t=!1;this._moveHandle.onMove(e,!0),this._handles.forEach(function(n){n.onStart(e),t=t||n.active}),this._active=t||this._domHovered,this._domHovered&&this._initialized&&(this._moving=!0,this._controls.enabled=!1),this.update()}},{key:"onMove",value:function(t){var n=this._handles.length,r=!1;if(this.active)if(this._dragged=!0,this._initialized){var i=this._moveHandle.worldPosition.clone();this._mesh&&this.remove(this._mesh),this.updateDOMContent(!0),this._moveHandle.onMove(t,!0),this._moving&&this._handles.forEach(function(e,t){this._handles[t].worldPosition.add(this._moveHandle.worldPosition.clone().sub(i))},this)}else{this._handles[n-1].hovered=!1,this._handles[n-1].active=!1,this._handles[n-1].tracking=!1;var o=Object(s.a)(e),a=new o(this._targetMesh,this._controls);a.worldPosition.copy(this._worldPosition),a.hovered=!0,a.active=!0,a.tracking=!0,this.add(a),this._handles.push(a),this.createLine()}this._handles.forEach(function(e){e.onMove(t),r=r||e.hovered}),this._hovered=r||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default",this.active&&this._handles.length>2&&this.pushPopHandle(),this.update()}},{key:"onEnd",value:function(){var e=this._handles.length;if(!(e<3)){var t=!1;this._handles.slice(0,e-1).forEach(function(e){e.onEnd(),t=t||e.active}),this._dragged||!this._handles[e-1].tracking?(this._handles[e-1].tracking=!1,this._handles[e-1].onEnd()):this._handles[e-1].tracking=!1,this._lines.length<e&&this.createLine(),!this._dragged&&this._active&&(this._selected=!this._selected,this._handles.forEach(function(e){e.selected=this._selected},this)),this._active=t||this._handles[e-1].active,this._dragged=!1,this._moving=!1,this._initialized=!0,this.updateMesh(),this.updateDOMContent(),this.update()}}},{key:"create",value:function(){this.createMaterial(),this.createDOM()}},{key:"createMaterial",value:function(){this._material=new e.MeshBasicMaterial({side:e.DoubleSide}),this._material.transparent=!0,this._material.opacity=.2}},{key:"createDOM",value:function(){this._label=document.createElement("div"),this._label.setAttribute("class","widgets-label");var e=document.createElement("div"),t=document.createElement("div");t.setAttribute("class","mean-sd"),e.appendChild(t);var n=document.createElement("div");n.setAttribute("class","max-min"),e.appendChild(n);var r=document.createElement("div");r.setAttribute("class","area"),e.appendChild(r),this._label.appendChild(e),this._container.appendChild(this._label),this.updateDOMColor()}},{key:"createLine",value:function(){var e=document.createElement("div");e.setAttribute("class","widgets-line"),e.addEventListener("mouseenter",this.onHover),e.addEventListener("mouseleave",this.onHover),this._lines.push(e),this._container.appendChild(e)}},{key:"hideDOM",value:function(){this._handles.forEach(function(e){e.hideDOM()}),this._lines.forEach(function(e){e.style.display="none"}),this._label.style.display="none"}},{key:"showDOM",value:function(){this._handles.forEach(function(e){e.showDOM()}),this._lines.forEach(function(e){e.style.display=""}),this._label.style.display=""}},{key:"update",value:function(){this.updateColor(),this._handles.forEach(function(e){e.update()}),this.updateMeshColor(),this.updateMeshPosition(),this.updateDOMColor(),this.updateDOMPosition()}},{key:"updateMesh",value:function(){this._mesh&&this.remove(this._mesh);var t=[];this._handles.forEach(function(e){t.push(e.worldPosition)});for(var n=l.a.centerOfMass(t),r=(new e.Vector3).crossVectors((new e.Vector3).subVectors(t[0],n),(new e.Vector3).subVectors(t[1],n)),i=(new e.Vector3).subVectors(t[0],n).normalize(),o=(new e.Vector3).crossVectors(i,r).normalize(),a=[],s=0;s<t.length;s++){var u=new e.Vector3(t[s].x,t[s].y,t[s].z);u.direction=(new e.Vector3).subVectors(t[s],n).normalize();var c=i.dot(u.direction),h=o.dot(u.direction);u.xy={x:c,y:h},u.angle=Math.atan2(h,c)*(180/Math.PI),a.push(u)}this._shapeWarn=!1;var d=console.warn;console.warn=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return"three.ShapeUtils: Unable to triangulate polygon! in triangulate()"===t[0]&&(this._shapeWarn=!0),d.apply(console,t)}.bind(this);var f=new e.Shape;f.moveTo(a[0].xy.x,a[0].xy.y);for(var p=1;p<a.length;p++)f.lineTo(a[p].xy.x,a[p].xy.y);f.lineTo(a[0].xy.x,a[0].xy.y),this._geometry=new e.ShapeGeometry(f),console.warn=d,this._geometry.vertices=a,this._geometry.verticesNeedUpdate=!0,this._geometry.elementsNeedUpdate=!0,this.updateMeshColor(),this._mesh=new e.Mesh(this._geometry,this._material),this._mesh.visible=!0,this.add(this._mesh)}},{key:"updateMeshColor",value:function(){this._material&&this._material.color.set(this._color)}},{key:"updateMeshPosition",value:function(){this._geometry&&(this._geometry.verticesNeedUpdate=!0)}},{key:"isPointOnLine",value:function(t,n,r){var i=new e.Vector3;return i.crossVectors(t.clone().sub(r),n.clone().sub(r)),!i.length()}},{key:"pushPopHandle",value:function(){var e=this._handles[this._handles.length-3],t=this._handles[this._handles.length-2],n=this._handles[this._handles.length-1],r=this.isPointOnLine(e.worldPosition,t.worldPosition,n.worldPosition);if(r||e.screenPosition.distanceTo(n.screenPosition)<25){this.remove(t),t.free(),this._handles[this._handles.length-2]=n,this._handles.pop();var i=this._lines.pop();i.style.display="none",this._container.removeChild(i)}return r}},{key:"updateDOMColor",value:function(){this._handles.length>=2&&this._lines.forEach(function(e){e.style.backgroundColor=this._color},this),this._label.style.borderColor=this._color}},{key:"updateDOMContent",value:function(e){var t=this._label.querySelector(".mean-sd"),n=this._label.querySelector(".max-min"),r=this._label.querySelector(".area");if(e)return t.innerHTML="",n.innerHTML="",void(r.innerHTML="");var i=null===this._stack.frame[0].pixelSpacing?"units":"cm\xb2",o="units"===i?"Calibration is required to display the area in cm\xb2. ":"";this._shapeWarn&&(o+="Values may be incorrect due to triangulation error."),""!==o?(this._label.setAttribute("title",o),this._label.style.color=this._colors.error):(this._label.removeAttribute("title"),this._label.style.color=this._colors.text);var a=l.a.getRoI(this._mesh,this._camera,this._stack);null!==a?(t.innerHTML="Mean: "+a.mean.toFixed(1)+" / SD: "+a.sd.toFixed(1),n.innerHTML="Max: "+a.max.toFixed()+" / Min: "+a.min.toFixed()):(t.innerHTML="",n.innerHTML=""),r.innerHTML="Area: "+(u.a.getGeometryArea(this._geometry)/100).toFixed(2)+" "+i}},{key:"updateDOMPosition",value:function(){if(!(this._handles.length<2)){var e=null;this._lines.forEach(function(t,n){var r=this.getLineData(this._handles[n].screenPosition,this._handles[n+1===this._handles.length?0:n+1].screenPosition);t.style.transform="translate3D("+r.transformX+"px, "+r.transformY+"px, 0)\n                rotate("+r.transformAngle+"rad)",t.style.width=r.length+"px",(null===e||e.y<this._handles[n].screenPosition.y)&&(e=this._handles[n].screenPosition.clone())},this),this._initialized&&(e.y+=15+this._label.offsetHeight/2,e=this.adjustLabelTransform(this._label,e),this._label.style.transform="translate3D("+e.x+"px, "+e.y+"px, 0)")}}},{key:"free",value:function(){var e=this;this.removeEventListeners(),this._handles.forEach(function(t){e.remove(t),t.free()}),this._handles=[],this.remove(this._moveHandle),this._moveHandle.free(),this._moveHandle=null,this._lines.forEach(function(e){e.removeEventListener("mouseenter",this.onHover),e.removeEventListener("mouseleave",this.onHover),this._container.removeChild(e)},this),this._lines=[],this._container.removeChild(this._label),this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null),this._geometry&&(this._geometry.dispose(),this._geometry=null),this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,h(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"free",this).call(this)}},{key:"targetMesh",get:function(){return this._targetMesh},set:function(e){this._targetMesh=e,this._handles.forEach(function(t){t.targetMesh=e}),this._moveHandle.targetMesh=e,this.update()}},{key:"worldPosition",get:function(){return this._worldPosition},set:function(e){this._handles.forEach(function(t){t._worldPosition.copy(e)},this),this._worldPosition.copy(e),this.update()}}]),n}(t)}()},function(e,t,n){"use strict";function r(e,t){var n=e.__state.conversionName.toString(),r=Math.round(e.r),i=Math.round(e.g),o=Math.round(e.b),a=e.a,s=Math.round(e.h),l=e.s.toFixed(1),u=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var c=e.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+r+","+i+","+o+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+o+","+a+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+o+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+o+","+a+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+l+",v:"+u+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+l+",v:"+u+",a:"+a+"}":"unknown format"}function i(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(V.recalculateRGB(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(V.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function o(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(V.recalculateHSV(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(V.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}function a(e){if("0"===e||A.isUndefined(e))return 0;var t=e.match(X);return A.isNull(t)?0:parseFloat(t[1])}function s(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}function l(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}function u(e,t,n,r,i){return r+(e-t)/(n-t)*(i-r)}function c(e,t,n,r){e.style.background="",A.each(re,function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+r+" 100%); "})}function h(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}function d(e){setTimeout(e,1e3/60)}function f(e,t,n){var r=document.createElement("li");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,n):e.__ul.appendChild(r),e.onResize(),r}function p(e){Y.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&Y.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function m(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function v(e,t,n){if(n.__li=t,n.__gui=e,A.extend(n,{options:function(t){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),y(e,n.object,n.property,{before:r,factoryArgs:[A.toArray(arguments)]})}if(A.isArray(t)||A.isObject(t)){var i=n.__li.nextElementSibling;return n.remove(),y(e,n.object,n.property,{before:i,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof ee){var r=new $(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});A.each(["updateDisplay","onChange","onFinishChange","step"],function(e){var t=n[e],i=r[e];n[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return i.apply(r,e),t.apply(n,e)}}),Y.addClass(t,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof $){var i=function(t){if(A.isNumber(n.__min)&&A.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=y(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(r),i&&o.listen(),o}return t};n.min=A.compose(i,n.min),n.max=A.compose(i,n.max)}else n instanceof Z?(Y.bind(t,"click",function(){Y.fakeEvent(n.__checkbox,"click")}),Y.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof te?(Y.bind(t,"click",function(){Y.fakeEvent(n.__button,"click")}),Y.bind(t,"mouseover",function(){Y.addClass(n.__button,"hover")}),Y.bind(t,"mouseout",function(){Y.removeClass(n.__button,"hover")})):n instanceof ne&&(Y.addClass(t,"color"),n.updateDisplay=A.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=A.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&m(e.getRoot(),!0),t},n.setValue)}function g(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[t.property]=t,n.load&&n.load.remembered){var o=n.load.remembered,a=void 0;if(o[e.preset])a=o[e.preset];else{if(!o[ue])return;a=o[ue]}if(a[r]&&void 0!==a[r][t.property]){var s=a[r][t.property];t.initialValue=s,t.setValue(s)}}}}function y(e,t,n,r){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new ne(t,n);else{var o=[t,n].concat(r.factoryArgs);i=oe.apply(e,o)}r.before instanceof G&&(r.before=r.before.__li),g(e,i),Y.addClass(i.domElement,"c");var a=document.createElement("span");Y.addClass(a,"property-name"),a.innerHTML=i.property;var s=document.createElement("div");s.appendChild(a),s.appendChild(i.domElement);var l=f(e,s,r.before);return Y.addClass(l,ve.CLASS_CONTROLLER_ROW),i instanceof ne?Y.addClass(l,"color"):Y.addClass(l,F(i.getValue())),v(e,l,i),e.__controllers.push(i),i}function _(e,t){return document.location.href+"."+t}function b(e,t,n){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function w(e,t){t.style.display=e.useLocalStorage?"block":"none"}function x(e){var t=e.__save_row=document.createElement("li");Y.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),Y.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",Y.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",Y.addClass(r,"button"),Y.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",Y.addClass(i,"button"),Y.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",Y.addClass(o,"button"),Y.addClass(o,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?A.each(e.load.remembered,function(t,n){b(e,n,n===e.preset)}):b(e,ue,!1),Y.bind(a,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(a),t.appendChild(n),t.appendChild(r),t.appendChild(i),t.appendChild(o),ce){var s=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(_(e,"isLocal"))&&l.setAttribute("checked","checked"),w(e,s),Y.bind(l,"change",function(){e.useLocalStorage=!e.useLocalStorage,w(e,s)})}var u=document.getElementById("dg-new-constructor");Y.bind(u,"keydown",function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||he.hide()}),Y.bind(n,"click",function(){u.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),he.show(),u.focus(),u.select()}),Y.bind(r,"click",function(){e.save()}),Y.bind(i,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),Y.bind(o,"click",function(){e.revert()})}function E(e){function t(t){return t.preventDefault(),e.width+=i-t.clientX,e.onResize(),i=t.clientX,!1}function n(){Y.removeClass(e.__closeButton,ve.CLASS_DRAG),Y.unbind(window,"mousemove",t),Y.unbind(window,"mouseup",n)}function r(r){return r.preventDefault(),i=r.clientX,Y.addClass(e.__closeButton,ve.CLASS_DRAG),Y.bind(window,"mousemove",t),Y.bind(window,"mouseup",n),!1}var i=void 0;e.__resize_handle=document.createElement("div"),A.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),Y.bind(e.__resize_handle,"mousedown",r),Y.bind(e.__closeButton,"mousedown",r),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function S(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function T(e,t){var n={};return A.each(e.__rememberedObjects,function(r,i){var o={},a=e.__rememberedObjectIndecesToControllers[i];A.each(a,function(e,n){o[n]=t?e.initialValue:e.getValue()}),n[i]=o}),n}function M(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}function k(e){0!==e.length&&ae.call(window,function(){k(e)}),A.each(e,function(e){e.updateDisplay()})}var P=Array.prototype.forEach,C=Array.prototype.slice,A={BREAK:{},extend:function(e){return this.each(C.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))},this),e},defaults:function(e){return this.each(C.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))},this),e},compose:function(){var e=C.call(arguments);return function(){for(var t=C.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(P&&e.forEach&&e.forEach===P)e.forEach(t,n);else if(e.length===e.length+0){var r=void 0,i=void 0;for(r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r)===this.BREAK)return}else for(var o in e)if(t.call(n,e[o],o)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r=void 0;return function(){function i(){r=null,n||e.apply(o,a)}var o=this,a=arguments,s=n||!r;clearTimeout(r),r=setTimeout(i,t),s&&e.apply(o,a)}},toArray:function(e){return e.toArray?e.toArray():C.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}},O=[{litmus:A.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:r},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:r},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:r},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:r}}},{litmus:A.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:A.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:A.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(A.isNumber(e.r)&&A.isNumber(e.g)&&A.isNumber(e.b)&&A.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(A.isNumber(e.r)&&A.isNumber(e.g)&&A.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(A.isNumber(e.h)&&A.isNumber(e.s)&&A.isNumber(e.v)&&A.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(A.isNumber(e.h)&&A.isNumber(e.s)&&A.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],I=void 0,R=void 0,L=function(){R=!1;var e=arguments.length>1?A.toArray(arguments):arguments[0];return A.each(O,function(t){if(t.litmus(e))return A.each(t.conversions,function(t,n){if(I=t.read(e),!1===R&&!1!==I)return R=I,I.conversionName=n,I.conversion=t,A.BREAK}),A.BREAK}),R},D=void 0,N={hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),l=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][r];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var r=Math.min(e,t,n),i=Math.max(e,t,n),o=i-r,a=void 0,s=void 0;return 0===i?{h:NaN,s:0,v:0}:(s=o/i,a=e===i?(t-n)/o:t===i?2+(n-e)/o:4+(e-t)/o,a/=6,a<0&&(a+=1),{h:360*a,s:s,v:i/255})},rgb_to_hex:function(e,t,n){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(D=8*t)|e&~(255<<D)}},F="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},z=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),B=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},j=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},H=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},V=function(){function e(){if(U(this,e),this.__state=L.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return z(e,[{key:"toString",value:function(){return r(this)}},{key:"toHexString",value:function(){return r(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();V.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=N.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");A.extend(e.__state,N.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},V.recalculateHSV=function(e){var t=N.rgb_to_hsv(e.r,e.g,e.b);A.extend(e.__state,{s:t.s,v:t.v}),A.isNaN(t.h)?A.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},V.COMPONENTS=["r","g","b","h","s","v","hex","a"],i(V.prototype,"r",2),i(V.prototype,"g",1),i(V.prototype,"b",0),o(V.prototype,"h"),o(V.prototype,"s"),o(V.prototype,"v"),Object.defineProperty(V.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(V.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=N.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var G=function(){function e(t,n){U(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return z(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),W={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},q={};A.each(W,function(e,t){A.each(e,function(e){q[e]=t})});var X=/(\d+(\.\d+)?)px/,Y={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var r=n,i=t;A.isUndefined(i)&&(i=!0),A.isUndefined(r)&&(r=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,r){var i=n||{},o=q[t];if(!o)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(o);switch(o){case"MouseEvents":var s=i.x||i.clientX||0,l=i.y||i.clientY||0;a.initMouseEvent(t,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,s,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var u=a.initKeyboardEvent||a.initKeyEvent;A.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),u(t,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(t,i.bubbles||!1,i.cancelable||!0)}A.defaults(a,r),e.dispatchEvent(a)},bind:function(e,t,n,r){var i=r||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n),Y},unbind:function(e,t,n,r){var i=r||!1;return e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n),Y},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return Y},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),r=n.indexOf(t);-1!==r&&(n.splice(r,1),e.className=n.join(" "))}else e.className=void 0;return Y},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return a(t["border-left-width"])+a(t["border-right-width"])+a(t["padding-left"])+a(t["padding-right"])+a(t.width)},getHeight:function(e){var t=getComputedStyle(e);return a(t["border-top-width"])+a(t["border-bottom-width"])+a(t["padding-top"])+a(t["padding-bottom"])+a(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},Z=function(e){function t(e,n){function r(){o.setValue(!o.__prev)}U(this,t);var i=H(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=i;return i.__prev=i.getValue(),i.__checkbox=document.createElement("input"),i.__checkbox.setAttribute("type","checkbox"),Y.bind(i.__checkbox,"change",r,!1),i.domElement.appendChild(i.__checkbox),i.updateDisplay(),i}return j(t,e),z(t,[{key:"setValue",value:function(e){var n=B(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),B(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(G),J=function(e){function t(e,n,r){U(this,t);var i=H(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r,a=i;if(i.__select=document.createElement("select"),A.isArray(o)){var s={};A.each(o,function(e){s[e]=e}),o=s}return A.each(o,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)}),i.updateDisplay(),Y.bind(i.__select,"change",function(){var e=this.options[this.selectedIndex].value;a.setValue(e)}),i.domElement.appendChild(i.__select),i}return j(t,e),z(t,[{key:"setValue",value:function(e){var n=B(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return Y.isActive(this.__select)?this:(this.__select.value=this.getValue(),B(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(G),K=function(e){function t(e,n){function r(){a.setValue(a.__input.value)}function i(){a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}U(this,t);var o=H(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=o;return o.__input=document.createElement("input"),o.__input.setAttribute("type","text"),Y.bind(o.__input,"keyup",r),Y.bind(o.__input,"change",r),Y.bind(o.__input,"blur",i),Y.bind(o.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),o.updateDisplay(),o.domElement.appendChild(o.__input),o}return j(t,e),z(t,[{key:"updateDisplay",value:function(){return Y.isActive(this.__input)||(this.__input.value=this.getValue()),B(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(G),Q=function(e){function t(e,n,r){U(this,t);var i=H(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r||{};return i.__min=o.min,i.__max=o.max,i.__step=o.step,A.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=s(i.__impliedStep),i}return j(t,e),z(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!==0&&(n=Math.round(n/this.__step)*this.__step),B(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=s(e),this}}]),t}(G),$=function(e){function t(e,n,r){function i(){var e=parseFloat(h.__input.value);A.isNaN(e)||h.setValue(e)}function o(){h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}function a(){o()}function s(e){var t=d-e.clientY;h.setValue(h.getValue()+t*h.__impliedStep),d=e.clientY}function l(){Y.unbind(window,"mousemove",s),Y.unbind(window,"mouseup",l),o()}function u(e){Y.bind(window,"mousemove",s),Y.bind(window,"mouseup",l),d=e.clientY}U(this,t);var c=H(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));c.__truncationSuspended=!1;var h=c,d=void 0;return c.__input=document.createElement("input"),c.__input.setAttribute("type","text"),Y.bind(c.__input,"change",i),Y.bind(c.__input,"blur",a),Y.bind(c.__input,"mousedown",u),Y.bind(c.__input,"keydown",function(e){13===e.keyCode&&(h.__truncationSuspended=!0,this.blur(),h.__truncationSuspended=!1,o())}),c.updateDisplay(),c.domElement.appendChild(c.__input),c}return j(t,e),z(t,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():l(this.getValue(),this.__precision),B(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Q),ee=function(e){function t(e,n,r,i,o){function a(e){document.activeElement.blur(),Y.bind(window,"mousemove",s),Y.bind(window,"mouseup",l),s(e)}function s(e){e.preventDefault();var t=p.__background.getBoundingClientRect();return p.setValue(u(e.clientX,t.left,t.right,p.__min,p.__max)),!1}function l(){Y.unbind(window,"mousemove",s),Y.unbind(window,"mouseup",l),p.__onFinishChange&&p.__onFinishChange.call(p,p.getValue())}function c(e){1===e.touches.length&&(Y.bind(window,"touchmove",h),Y.bind(window,"touchend",d),h(e))}function h(e){var t=e.touches[0].clientX,n=p.__background.getBoundingClientRect();p.setValue(u(t,n.left,n.right,p.__min,p.__max))}function d(){Y.unbind(window,"touchmove",h),Y.unbind(window,"touchend",d),p.__onFinishChange&&p.__onFinishChange.call(p,p.getValue())}U(this,t);var f=H(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:r,max:i,step:o})),p=f;return f.__background=document.createElement("div"),f.__foreground=document.createElement("div"),Y.bind(f.__background,"mousedown",a),Y.bind(f.__background,"touchstart",c),Y.addClass(f.__background,"slider"),Y.addClass(f.__foreground,"slider-fg"),f.updateDisplay(),f.__background.appendChild(f.__foreground),f.domElement.appendChild(f.__background),f}return j(t,e),z(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",B(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(Q),te=function(e){function t(e,n,r){U(this,t);var i=H(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===r?"Fire":r,Y.bind(i.__button,"click",function(e){return e.preventDefault(),o.fire(),!1}),Y.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return j(t,e),z(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(G),ne=function(e){function t(e,n){function r(e){u(e),Y.bind(window,"mousemove",u),Y.bind(window,"touchmove",u),Y.bind(window,"mouseup",o),Y.bind(window,"touchend",o)}function i(e){d(e),Y.bind(window,"mousemove",d),Y.bind(window,"touchmove",d),Y.bind(window,"mouseup",a),Y.bind(window,"touchend",a)}function o(){Y.unbind(window,"mousemove",u),Y.unbind(window,"touchmove",u),Y.unbind(window,"mouseup",o),Y.unbind(window,"touchend",o),l()}function a(){Y.unbind(window,"mousemove",d),Y.unbind(window,"touchmove",d),Y.unbind(window,"mouseup",a),Y.unbind(window,"touchend",a),l()}function s(){var e=L(this.value);!1!==e?(p.__color.__state=e,p.setValue(p.__color.toOriginal())):this.value=p.__color.toString()}function l(){p.__onFinishChange&&p.__onFinishChange.call(p,p.__color.toOriginal())}function u(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=p.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,r=n.clientX,i=n.clientY,o=(r-t.left)/(t.right-t.left),a=1-(i-t.top)/(t.bottom-t.top);return a>1?a=1:a<0&&(a=0),o>1?o=1:o<0&&(o=0),p.__color.v=a,p.__color.s=o,p.setValue(p.__color.toOriginal()),!1}function d(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=p.__hue_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,r=n.clientY,i=1-(r-t.top)/(t.bottom-t.top);return i>1?i=1:i<0&&(i=0),p.__color.h=360*i,p.setValue(p.__color.toOriginal()),!1}U(this,t);var f=H(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));f.__color=new V(f.getValue()),f.__temp=new V(0);var p=f;f.domElement=document.createElement("div"),Y.makeSelectable(f.domElement,!1),f.__selector=document.createElement("div"),f.__selector.className="selector",f.__saturation_field=document.createElement("div"),f.__saturation_field.className="saturation-field",f.__field_knob=document.createElement("div"),f.__field_knob.className="field-knob",f.__field_knob_border="2px solid ",f.__hue_knob=document.createElement("div"),f.__hue_knob.className="hue-knob",f.__hue_field=document.createElement("div"),f.__hue_field.className="hue-field",f.__input=document.createElement("input"),f.__input.type="text",f.__input_textShadow="0 1px 1px ",Y.bind(f.__input,"keydown",function(e){13===e.keyCode&&s.call(this)}),Y.bind(f.__input,"blur",s),Y.bind(f.__selector,"mousedown",function(){Y.addClass(this,"drag").bind(window,"mouseup",function(){Y.removeClass(p.__selector,"drag")})}),Y.bind(f.__selector,"touchstart",function(){Y.addClass(this,"drag").bind(window,"touchend",function(){Y.removeClass(p.__selector,"drag")})});var m=document.createElement("div");return A.extend(f.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),A.extend(f.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:f.__field_knob_border+(f.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),A.extend(f.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),A.extend(f.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),A.extend(m.style,{width:"100%",height:"100%",background:"none"}),c(m,"top","rgba(0,0,0,0)","#000"),A.extend(f.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),h(f.__hue_field),A.extend(f.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:f.__input_textShadow+"rgba(0,0,0,0.7)"}),Y.bind(f.__saturation_field,"mousedown",r),Y.bind(f.__saturation_field,"touchstart",r),Y.bind(f.__field_knob,"mousedown",r),Y.bind(f.__field_knob,"touchstart",r),Y.bind(f.__hue_field,"mousedown",i),Y.bind(f.__hue_field,"touchstart",i),f.__saturation_field.appendChild(m),f.__selector.appendChild(f.__field_knob),f.__selector.appendChild(f.__saturation_field),f.__selector.appendChild(f.__hue_field),f.__hue_field.appendChild(f.__hue_knob),f.domElement.appendChild(f.__input),f.domElement.appendChild(f.__selector),f.updateDisplay(),f}return j(t,e),z(t,[{key:"updateDisplay",value:function(){var e=L(this.getValue());if(!1!==e){var t=!1;A.each(V.COMPONENTS,function(n){if(!A.isUndefined(e[n])&&!A.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&A.extend(this.__color.__state,e)}A.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;A.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,c(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),A.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),t}(G),re=["-moz-","-o-","-webkit-","-ms-",""],ie={load:function(e,t){var n=t||document,r=n.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e,n.getElementsByTagName("head")[0].appendChild(r)},inject:function(e,t){var n=t||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(e){}}},oe=function(e,t){var n=e[t];return A.isArray(arguments[2])||A.isObject(arguments[2])?new J(e,t,arguments[2]):A.isNumber(n)?A.isNumber(arguments[2])&&A.isNumber(arguments[3])?A.isNumber(arguments[4])?new ee(e,t,arguments[2],arguments[3],arguments[4]):new ee(e,t,arguments[2],arguments[3]):A.isNumber(arguments[4])?new $(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new $(e,t,{min:arguments[2],max:arguments[3]}):A.isString(n)?new K(e,t):A.isFunction(n)?new te(e,t,""):A.isBoolean(n)?new Z(e,t):null},ae=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||d,se=function(){function e(){U(this,e),this.backgroundElement=document.createElement("div"),A.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),Y.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),A.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;Y.bind(this.backgroundElement,"click",function(){t.hide()})}return z(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),A.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",Y.unbind(e.domElement,"webkitTransitionEnd",t),Y.unbind(e.domElement,"transitionend",t),Y.unbind(e.domElement,"oTransitionEnd",t)};Y.bind(this.domElement,"webkitTransitionEnd",t),Y.bind(this.domElement,"transitionend",t),Y.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-Y.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-Y.getHeight(this.domElement)/2+"px"}}]),e}(),le=function(e){if(e&&"undefined"!==typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");ie.inject(le);var ue="Default",ce=function(){try{return!!window.localStorage}catch(e){return!1}}(),he=void 0,de=!0,fe=void 0,pe=!1,me=[],ve=function e(t){var n=this,r=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),Y.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=A.defaults(r,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),r=A.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),A.isUndefined(r.load)?r.load={preset:ue}:r.preset&&(r.load.preset=r.preset),A.isUndefined(r.parent)&&r.hideable&&me.push(this),r.resizable=A.isUndefined(r.parent)&&r.resizable,r.autoPlace&&A.isUndefined(r.scrollable)&&(r.scrollable=!0);var i=ce&&"true"===localStorage.getItem(_(this,"isLocal")),o=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(e){n.parent?n.getRoot().preset=e:r.load.preset=e,M(this),n.revert()}},width:{get:function(){return r.width},set:function(e){r.width=e,S(n,e)}},name:{get:function(){return r.name},set:function(e){r.name=e,titleRowName&&(titleRowName.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(t){r.closed=t,r.closed?Y.addClass(n.__ul,e.CLASS_CLOSED):Y.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return i},set:function(e){ce&&(i=e,e?Y.bind(window,"unload",o):Y.unbind(window,"unload",o),localStorage.setItem(_(n,"isLocal"),e))}}}),A.isUndefined(r.parent)){if(r.closed=!1,Y.addClass(this.domElement,e.CLASS_MAIN),Y.makeSelectable(this.domElement,!1),ce&&i){n.useLocalStorage=!0;var a=localStorage.getItem(_(this,"gui"));a&&(r.load=JSON.parse(a))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,Y.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),r.closeOnTop?(Y.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(Y.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),Y.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===r.closed&&(r.closed=!0);var s=document.createTextNode(r.name);Y.addClass(s,"controller-name");var l=f(n,s),u=function(e){return e.preventDefault(),n.closed=!n.closed,!1};Y.addClass(this.__ul,e.CLASS_CLOSED),Y.addClass(l,"title"),Y.bind(l,"click",u),r.closed||(this.closed=!1)}r.autoPlace&&(A.isUndefined(r.parent)&&(de&&(fe=document.createElement("div"),Y.addClass(fe,"dg"),Y.addClass(fe,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(fe),de=!1),fe.appendChild(this.domElement),Y.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||S(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},Y.bind(window,"resize",this.__resizeHandler),Y.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),Y.bind(this.__ul,"transitionend",this.__resizeHandler),Y.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&E(this),o=function(){ce&&"true"===localStorage.getItem(_(n,"isLocal"))&&localStorage.setItem(_(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=o,r.parent||function(){var e=n.getRoot();e.width+=1,A.defer(function(){e.width-=1})}()};ve.toggleHide=function(){pe=!pe,A.each(me,function(e){e.domElement.style.display=pe?"none":""})},ve.CLASS_AUTO_PLACE="a",ve.CLASS_AUTO_PLACE_CONTAINER="ac",ve.CLASS_MAIN="main",ve.CLASS_CONTROLLER_ROW="cr",ve.CLASS_TOO_TALL="taller-than-window",ve.CLASS_CLOSED="closed",ve.CLASS_CLOSE_BUTTON="close-button",ve.CLASS_CLOSE_TOP="close-top",ve.CLASS_CLOSE_BOTTOM="close-bottom",ve.CLASS_DRAG="drag",ve.DEFAULT_WIDTH=245,ve.TEXT_CLOSED="Close Controls",ve.TEXT_OPEN="Open Controls",ve._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||ve.toggleHide()},Y.bind(window,"keydown",ve._keydownHandler,!1),A.extend(ve.prototype,{add:function(e,t){return y(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return y(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;A.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&fe.removeChild(this.domElement);var e=this;A.each(this.__folders,function(t){e.removeFolder(t)}),Y.unbind(window,"keydown",ve._keydownHandler,!1),p(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new ve(t);this.__folders[e]=n;var r=f(this,n.domElement);return Y.addClass(r,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],p(e);var t=this;A.each(e.__folders,function(t){e.removeFolder(t)}),A.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=Y.getOffset(e.__ul).top,n=0;A.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=Y.getHeight(t))}),window.innerHeight-t-20<n?(Y.addClass(e.domElement,ve.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(Y.removeClass(e.domElement,ve.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&A.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:A.debounce(function(){this.onResize()},50),remember:function(){if(A.isUndefined(he)&&(he=new se,he.domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;A.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&x(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&S(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=T(this)),e.folders={},A.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=T(this),m(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[ue]=T(this,!0)),this.load.remembered[e]=T(this),this.preset=e,b(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){A.each(this.__controllers,function(t){this.getRoot().load.remembered?g(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),A.each(this.__folders,function(e){e.revert(e)}),e||m(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&k(this.__listening)},updateDisplay:function(){A.each(this.__controllers,function(e){e.updateDisplay()}),A.each(this.__folders,function(e){e.updateDisplay()})}});var ge={Color:V,math:N,interpret:L},ye={Controller:G,BooleanController:Z,OptionController:J,StringController:K,NumberController:Q,NumberControllerBox:$,NumberControllerSlider:ee,FunctionController:te,ColorController:ne},_e={dom:Y},be={GUI:ve},we=ve,xe={color:ge,controllers:ye,dom:_e,gui:be,GUI:we};t.a=xe},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){return["Split Volumes","SVR Reconstruction","Brain Extraction",""]}function s(e){switch(e){case 0:return"For each ad campaign that you create, you can control how much\n              you're willing to spend on clicks and conversions, which networks\n              and geographical locations you want your ads to show on, and more.";case 1:return"An ad group contains one or more ads which target a shared set of keywords.";case 2:return"Try out different ad text to see what brings in the most customers,\n              and learn how to enhance your ads using features like ad extensions.\n              If you run into any problems with your ads, find out how to tell if\n              they're running and how to resolve approval issues.";default:return"Unknown step"}}var l=n(1),u=n.n(l),c=n(2),h=n.n(c),d=n(45),f=(n.n(d),n(561)),p=n.n(f),m=n(565),v=n.n(m),g=n(567),y=n.n(g),_=n(573),b=n.n(_),w=n(103),x=n.n(w),E=n(20),S=n.n(E),T=n(48),M=n.n(T),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),P=function(e){return{root:{width:"90%"},button:{marginTop:e.spacing.unit,marginRight:e.spacing.unit},actionsContainer:{marginBottom:2*e.spacing.unit},resetContainer:{padding:3*e.spacing.unit}}},C=function(e){function t(){var e,n,o,a;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=o=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),o.state={activeStep:0},o.handleNext=function(){o.setState(function(e){return{activeStep:e.activeStep+1}})},o.handleBack=function(){o.setState(function(e){return{activeStep:e.activeStep-1}})},o.handleReset=function(){o.setState({activeStep:0})},a=n,i(o,a)}return o(t,e),k(t,[{key:"render",value:function(){var e=this,t=this.props.classes,n=a(),r=this.state.activeStep;return u.a.createElement("div",{className:t.root},u.a.createElement(p.a,{activeStep:r,orientation:"vertical"},n.map(function(i,o){return u.a.createElement(v.a,{key:i},u.a.createElement(y.a,null,i),u.a.createElement(b.a,null,u.a.createElement(M.a,null,s(o)),u.a.createElement("div",{className:t.actionsContainer},u.a.createElement("div",null,u.a.createElement(x.a,{disabled:0===r,onClick:e.handleBack,className:t.button},"Back"),u.a.createElement(x.a,{variant:"contained",color:"primary",onClick:e.handleNext,className:t.button},r===n.length-1?"Finish":"Next")))))})),r===n.length&&u.a.createElement(S.a,{square:!0,elevation:0,className:t.resetContainer},u.a.createElement(M.a,null,'All steps completed - you"re finished'),u.a.createElement(x.a,{onClick:this.handleReset,className:t.button},"Reset")))}}]),t}(u.a.Component);C.propTypes={classes:h.a.object},t.a=Object(d.withStyles)(P)(C)},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(562))},function(e,t,n){"use strict";function r(e){var t=e.activeStep,n=e.alternativeLabel,r=e.children,i=e.classes,h=e.className,f=e.connector,p=e.nonLinear,m=e.orientation,v=(0,l.default)(e,["activeStep","alternativeLabel","children","classes","className","connector","nonLinear","orientation"]),g=(0,c.default)(i.root,i[m],(0,s.default)({},i.alternativeLabel,n),h),y=u.default.isValidElement(f)?u.default.cloneElement(f,{orientation:m}):null,_=u.default.Children.toArray(r),b=_.map(function(e,r){var i={index:r,orientation:m,active:!1,completed:!1,disabled:!1,last:r+1===_.length,alternativeLabel:n,connector:f};return t===r?i.active=!0:!p&&t>r?i.completed=!0:!p&&t<r&&(i.disabled=!0),[!n&&y&&r>0&&u.default.cloneElement(y,{key:r}),u.default.cloneElement(e,(0,a.default)({},i,e.props))]});return u.default.createElement(d.default,(0,o.default)({square:!0,elevation:0,className:g},v),b)}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(8)),s=i(n(7)),l=i(n(3)),u=i(n(1)),c=(i(n(2)),i(n(6))),h=i(n(5)),d=i(n(20)),f=i(n(563)),p={root:{display:"flex",padding:24},horizontal:{flexDirection:"row",alignItems:"center"},vertical:{flexDirection:"column"},alternativeLabel:{alignItems:"flex-start"}};t.styles=p,r.propTypes={},r.defaultProps={activeStep:0,alternativeLabel:!1,connector:u.default.createElement(f.default,null),nonLinear:!1,orientation:"horizontal"},r.muiName="Stepper";var m=(0,h.default)(p,{name:"MuiStepper"})(r);t.default=m},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(564))},function(e,t,n){"use strict";function r(e){var t,n=e.alternativeLabel,r=e.className,i=e.classes,c=e.orientation,h=(0,s.default)(e,["alternativeLabel","className","classes","orientation"]),d=(0,u.default)(i.root,i[c],(0,a.default)({},i.alternativeLabel,n),r),f=(0,u.default)(i.line,(t={},(0,a.default)(t,i.lineHorizontal,"horizontal"===c),(0,a.default)(t,i.lineVertical,"vertical"===c),t));return l.default.createElement("div",(0,o.default)({className:d},h),l.default.createElement("span",{className:f}))}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(7)),s=i(n(3)),l=i(n(1)),u=(i(n(2)),i(n(6))),c=i(n(5)),h=function(e){return{root:{flex:"1 1 auto"},horizontal:{},vertical:{marginLeft:12,padding:"0 0 8px"},alternativeLabel:{position:"absolute",top:12,left:"calc(50% + 20px)",right:"calc(-50% + 20px)"},line:{display:"block",borderColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},lineHorizontal:{borderTopStyle:"solid",borderTopWidth:1},lineVertical:{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24}}};t.styles=h,r.propTypes={},r.defaultProps={alternativeLabel:!1,orientation:"horizontal"};var d=(0,c.default)(h,{name:"MuiStepConnector"})(r);t.default=d},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(566))},function(e,t,n){"use strict";function r(e){var t=e.active,n=e.alternativeLabel,r=e.children,i=e.classes,h=e.className,d=e.completed,f=e.connector,p=e.disabled,m=e.index,v=e.last,g=e.orientation,y=(0,l.default)(e,["active","alternativeLabel","children","classes","className","completed","connector","disabled","index","last","orientation"]),_=(0,c.default)(i.root,i[g],(0,s.default)({},i.alternativeLabel,n),h);return u.default.createElement("div",(0,o.default)({className:_},y),u.default.Children.map(r,function(e){return u.default.isValidElement(e)?u.default.cloneElement(e,(0,a.default)({active:t,alternativeLabel:n,completed:d,disabled:p,icon:m+1,last:v,orientation:g},e.props)):null}),f&&n&&!v&&u.default.cloneElement(f,{orientation:g,alternativeLabel:n}))}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(8)),s=i(n(7)),l=i(n(3)),u=i(n(1)),c=(i(n(2)),i(n(6))),h=(i(n(13)),i(n(5))),d={root:{},horizontal:{paddingLeft:8,paddingRight:8,"&:first-child":{paddingLeft:0},"&:last-child":{paddingRight:0}},vertical:{},alternativeLabel:{flex:1,position:"relative"}};t.styles=d,r.propTypes={},r.defaultProps={active:!1,completed:!1,disabled:!1};var f=(0,h.default)(d,{name:"MuiStep"})(r);t.default=f},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(568))},function(e,t,n){"use strict";function r(e){var t,n,r=e.active,i=e.alternativeLabel,c=e.children,f=e.classes,p=e.className,m=e.completed,v=e.disabled,g=e.error,y=e.icon,_=(e.last,e.optional),b=e.orientation,w=e.StepIconProps,x=(0,s.default)(e,["active","alternativeLabel","children","classes","className","completed","disabled","error","icon","last","optional","orientation","StepIconProps"]);return l.default.createElement("span",(0,o.default)({className:(0,u.default)(f.root,f[b],(t={},(0,a.default)(t,f.disabled,v),(0,a.default)(t,f.alternativeLabel,i),(0,a.default)(t,f.error,g),t),p)},x),y&&l.default.createElement("span",{className:(0,u.default)(f.iconContainer,(0,a.default)({},f.alternativeLabel,i))},l.default.createElement(d.default,(0,o.default)({completed:m,active:r,error:g,icon:y},w))),l.default.createElement("span",{className:f.labelContainer},l.default.createElement(h.default,{variant:"body1",component:"span",className:(0,u.default)(f.label,(n={},(0,a.default)(n,f.alternativeLabel,i),(0,a.default)(n,f.completed,m),(0,a.default)(n,f.active,r),(0,a.default)(n,f.error,g),n))},c),_))}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(7)),s=i(n(3)),l=i(n(1)),u=(i(n(2)),i(n(6))),c=i(n(5)),h=i(n(48)),d=i(n(569)),f=function(e){return{root:{display:"flex",alignItems:"center","&$alternativeLabel":{flexDirection:"column"},"&$disabled":{cursor:"default"}},horizontal:{},vertical:{},label:{color:e.palette.text.secondary,"&$active":{color:e.palette.text.primary,fontWeight:500},"&$completed":{color:e.palette.text.primary,fontWeight:500},"&$alternativeLabel":{textAlign:"center",marginTop:16},"&$error":{color:e.palette.error.main}},active:{},completed:{},error:{},disabled:{},iconContainer:{paddingRight:8,"&$alternativeLabel":{paddingRight:0}},alternativeLabel:{},labelContainer:{width:"100%"}}};t.styles=f,r.propTypes={},r.defaultProps={active:!1,alternativeLabel:!1,completed:!1,disabled:!1,error:!1,last:!1,orientation:"horizontal"},r.muiName="StepLabel";var p=(0,c.default)(f,{name:"MuiStepLabel"})(r);t.default=p},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(570))},function(e,t,n){"use strict";function r(e){var t=e.completed,n=e.icon,r=e.active,i=e.error,c=e.classes;return"number"===typeof n||"string"===typeof n?i?a.default.createElement(u.default,{className:(0,s.default)(c.root,c.error)}):t?a.default.createElement(l.default,{className:(0,s.default)(c.root,c.completed)}):a.default.createElement(h.default,{className:(0,s.default)(c.root,(0,o.default)({},c.active,r))},f,a.default.createElement("text",{className:c.text,x:"12",y:"16",textAnchor:"middle"},n)):n}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(7)),a=i(n(1)),s=(i(n(2)),i(n(6))),l=i(n(571)),u=i(n(572)),c=i(n(5)),h=i(n(42)),d=function(e){return{root:{display:"block",color:e.palette.text.disabled,"&$active":{color:e.palette.primary.main},"&$completed":{color:e.palette.primary.main},"&$error":{color:e.palette.error.main}},text:{fill:e.palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily},active:{},completed:{},error:{}}};t.styles=d;var f=a.default.createElement("circle",{cx:"12",cy:"12",r:"12"});r.propTypes={},r.defaultProps={active:!1,completed:!1,error:!1};var p=(0,c.default)(d,{name:"MuiStepIcon"})(r);t.default=p},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(49)),a=r(n(42)),s=i.default.createElement("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),l=function(e){return i.default.createElement(a.default,e,s)};l=(0,o.default)(l),l.muiName="SvgIcon";var u=l;t.default=u},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=r(n(49)),a=r(n(42)),s=i.default.createElement("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),l=function(e){return i.default.createElement(a.default,e,s)};l=(0,o.default)(l),l.muiName="SvgIcon";var u=l;t.default=u},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=r(n(574))},function(e,t,n){"use strict";function r(e){var t=e.active,n=(e.alternativeLabel,e.children),r=e.classes,i=e.className,c=(e.completed,e.last),h=(e.optional,e.orientation,e.TransitionComponent),d=e.transitionDuration,f=e.TransitionProps,p=(0,s.default)(e,["active","alternativeLabel","children","classes","className","completed","last","optional","orientation","TransitionComponent","transitionDuration","TransitionProps"]),m=d;return"auto"!==d||h.muiSupportAuto||(m=void 0),l.default.createElement("div",(0,o.default)({className:(0,u.default)(r.root,(0,a.default)({},r.last,c),i)},p),l.default.createElement(h,(0,o.default)({in:t,className:r.transition,timeout:m,unmountOnExit:!0},f),n))}var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var o=i(n(4)),a=i(n(7)),s=i(n(3)),l=i(n(1)),u=(i(n(2)),i(n(13)),i(n(6))),c=i(n(101)),h=i(n(5)),d=function(e){return{root:{marginTop:8,marginLeft:12,paddingLeft:20,paddingRight:8,borderLeft:"1px solid ".concat("light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600])},last:{borderLeft:"none"},transition:{}}};t.styles=d,r.propTypes={},r.defaultProps={TransitionComponent:c.default,transitionDuration:"auto"};var f=(0,h.default)(d,{name:"MuiStepContent"})(r);t.default=f}]);
//# sourceMappingURL=main.16bc5987.js.map